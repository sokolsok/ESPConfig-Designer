const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./esp32-BPYaDt9v.js","./rom-Caghk6Eh.js","./esp32c2-CPrCFu7Z.js","./esp32c3-I3vXmsVg.js","./esp32c6-C93uIFil.js","./esp32c61-ktIkGZDk.js","./esp32c5-DNmA6eRA.js","./esp32h2-Cf8JbGZQ.js","./esp32s3-mu2zzjDN.js","./esp32s2-3nCAg6Ct.js","./esp8266-8VKmCx7J.js","./esp32p4-D9aWWE_i.js"])))=>i.map(i=>d[i]);
(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $d(e){const n=Object.create(null);for(const t of e.split(","))n[t]=1;return t=>t in n}const Jt={},fr=[],ti=()=>{},Wh=()=>!1,uc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Id=e=>e.startsWith("onUpdate:"),Wn=Object.assign,Td=(e,n)=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)},Ry=Object.prototype.hasOwnProperty,Kt=(e,n)=>Ry.call(e,n),St=Array.isArray,pr=e=>Ua(e)==="[object Map]",dc=e=>Ua(e)==="[object Set]",Rf=e=>Ua(e)==="[object Date]",Tt=e=>typeof e=="function",yn=e=>typeof e=="string",ri=e=>typeof e=="symbol",Qt=e=>e!==null&&typeof e=="object",Yh=e=>(Qt(e)||Tt(e))&&Tt(e.then)&&Tt(e.catch),Kh=Object.prototype.toString,Ua=e=>Kh.call(e),Fy=e=>Ua(e).slice(8,-1),qh=e=>Ua(e)==="[object Object]",Rd=e=>yn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ua=$d(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fc=e=>{const n=Object.create(null);return t=>n[t]||(n[t]=e(t))},Oy=/-\w/g,Do=fc(e=>e.replace(Oy,n=>n.slice(1).toUpperCase())),Ly=/\B([A-Z])/g,ls=fc(e=>e.replace(Ly,"-$1").toLowerCase()),pc=fc(e=>e.charAt(0).toUpperCase()+e.slice(1)),uu=fc(e=>e?`on${pc(e)}`:""),ts=(e,n)=>!Object.is(e,n),Nl=(e,...n)=>{for(let t=0;t<e.length;t++)e[t](...n)},Zh=(e,n,t,o=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:o,value:t})},hc=e=>{const n=parseFloat(e);return isNaN(n)?e:n};let Ff;const gc=()=>Ff||(Ff=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function rn(e){if(St(e)){const n={};for(let t=0;t<e.length;t++){const o=e[t],i=yn(o)?Py(o):rn(o);if(i)for(const s in i)n[s]=i[s]}return n}else if(yn(e)||Qt(e))return e}const My=/;(?![^(]*\))/g,Ny=/:([^]+)/,Dy=/\/\*[^]*?\*\//g;function Py(e){const n={};return e.replace(Dy,"").split(My).forEach(t=>{if(t){const o=t.split(Ny);o.length>1&&(n[o[0].trim()]=o[1].trim())}}),n}function pt(e){let n="";if(yn(e))n=e;else if(St(e))for(let t=0;t<e.length;t++){const o=pt(e[t]);o&&(n+=o+" ")}else if(Qt(e))for(const t in e)e[t]&&(n+=t+" ");return n.trim()}const jy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",By=$d(jy);function Xh(e){return!!e||e===""}function Uy(e,n){if(e.length!==n.length)return!1;let t=!0;for(let o=0;t&&o<e.length;o++)t=vc(e[o],n[o]);return t}function vc(e,n){if(e===n)return!0;let t=Rf(e),o=Rf(n);if(t||o)return t&&o?e.getTime()===n.getTime():!1;if(t=ri(e),o=ri(n),t||o)return e===n;if(t=St(e),o=St(n),t||o)return t&&o?Uy(e,n):!1;if(t=Qt(e),o=Qt(n),t||o){if(!t||!o)return!1;const i=Object.keys(e).length,s=Object.keys(n).length;if(i!==s)return!1;for(const r in e){const a=e.hasOwnProperty(r),d=n.hasOwnProperty(r);if(a&&!d||!a&&d||!vc(e[r],n[r]))return!1}}return String(e)===String(n)}function zy(e,n){return e.findIndex(t=>vc(t,n))}const Jh=e=>!!(e&&e.__v_isRef===!0),ge=e=>yn(e)?e:e==null?"":St(e)||Qt(e)&&(e.toString===Kh||!Tt(e.toString))?Jh(e)?ge(e.value):JSON.stringify(e,Qh,2):String(e),Qh=(e,n)=>Jh(n)?Qh(e,n.value):pr(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((t,[o,i],s)=>(t[du(o,s)+" =>"]=i,t),{})}:dc(n)?{[`Set(${n.size})`]:[...n.values()].map(t=>du(t))}:ri(n)?du(n):Qt(n)&&!St(n)&&!qh(n)?String(n):n,du=(e,n="")=>{var t;return ri(e)?`Symbol(${(t=e.description)!=null?t:n})`:e};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fo;class Vy{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fo,!n&&fo&&(this.index=(fo.scopes||(fo.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].pause();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].resume();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].resume()}}run(n){if(this._active){const t=fo;try{return fo=this,n()}finally{fo=t}}}on(){++this._on===1&&(this.prevScope=fo,fo=this)}off(){this._on>0&&--this._on===0&&(fo=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let t,o;for(t=0,o=this.effects.length;t<o;t++)this.effects[t].stop();for(this.effects.length=0,t=0,o=this.cleanups.length;t<o;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Hy(){return fo}let nn;const fu=new WeakSet;class eg{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fo&&fo.active&&fo.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,fu.has(this)&&(fu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ng(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Of(this),og(this);const n=nn,t=Go;nn=this,Go=!0;try{return this.fn()}finally{ig(this),nn=n,Go=t,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Ld(n);this.deps=this.depsTail=void 0,Of(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?fu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ju(this)&&this.run()}get dirty(){return Ju(this)}}let tg=0,da,fa;function ng(e,n=!1){if(e.flags|=8,n){e.next=fa,fa=e;return}e.next=da,da=e}function Fd(){tg++}function Od(){if(--tg>0)return;if(fa){let n=fa;for(fa=void 0;n;){const t=n.next;n.next=void 0,n.flags&=-9,n=t}}let e;for(;da;){let n=da;for(da=void 0;n;){const t=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(o){e||(e=o)}n=t}}if(e)throw e}function og(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function ig(e){let n,t=e.depsTail,o=t;for(;o;){const i=o.prevDep;o.version===-1?(o===t&&(t=i),Ld(o),Gy(o)):n=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=i}e.deps=n,e.depsTail=t}function Ju(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(sg(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function sg(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Sa)||(e.globalVersion=Sa,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ju(e))))return;e.flags|=2;const n=e.dep,t=nn,o=Go;nn=e,Go=!0;try{og(e);const i=e.fn(e._value);(n.version===0||ts(i,e._value))&&(e.flags|=128,e._value=i,n.version++)}catch(i){throw n.version++,i}finally{nn=t,Go=o,ig(e),e.flags&=-3}}function Ld(e,n=!1){const{dep:t,prevSub:o,nextSub:i}=e;if(o&&(o.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=o,e.nextSub=void 0),t.subs===e&&(t.subs=o,!o&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)Ld(s,!0)}!n&&!--t.sc&&t.map&&t.map.delete(t.key)}function Gy(e){const{prevDep:n,nextDep:t}=e;n&&(n.nextDep=t,e.prevDep=void 0),t&&(t.prevDep=n,e.nextDep=void 0)}let Go=!0;const rg=[];function Ii(){rg.push(Go),Go=!1}function Ti(){const e=rg.pop();Go=e===void 0?!0:e}function Of(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const t=nn;nn=void 0;try{n()}finally{nn=t}}}let Sa=0;class Wy{constructor(n,t){this.sub=n,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Md{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!nn||!Go||nn===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==nn)t=this.activeLink=new Wy(nn,this),nn.deps?(t.prevDep=nn.depsTail,nn.depsTail.nextDep=t,nn.depsTail=t):nn.deps=nn.depsTail=t,ag(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const o=t.nextDep;o.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=o),t.prevDep=nn.depsTail,t.nextDep=void 0,nn.depsTail.nextDep=t,nn.depsTail=t,nn.deps===t&&(nn.deps=o)}return t}trigger(n){this.version++,Sa++,this.notify(n)}notify(n){Fd();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Od()}}}function ag(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let o=n.deps;o;o=o.nextDep)ag(o)}const t=e.dep.subs;t!==e&&(e.prevSub=t,t&&(t.nextSub=e)),e.dep.subs=e}}const Qu=new WeakMap,Rs=Symbol(""),ed=Symbol(""),xa=Symbol("");function Un(e,n,t){if(Go&&nn){let o=Qu.get(e);o||Qu.set(e,o=new Map);let i=o.get(t);i||(o.set(t,i=new Md),i.map=o,i.key=t),i.track()}}function Ci(e,n,t,o,i,s){const r=Qu.get(e);if(!r){Sa++;return}const a=d=>{d&&d.trigger()};if(Fd(),n==="clear")r.forEach(a);else{const d=St(e),l=d&&Rd(t);if(d&&t==="length"){const f=Number(o);r.forEach((g,m)=>{(m==="length"||m===xa||!ri(m)&&m>=f)&&a(g)})}else switch((t!==void 0||r.has(void 0))&&a(r.get(t)),l&&a(r.get(xa)),n){case"add":d?l&&a(r.get("length")):(a(r.get(Rs)),pr(e)&&a(r.get(ed)));break;case"delete":d||(a(r.get(Rs)),pr(e)&&a(r.get(ed)));break;case"set":pr(e)&&a(r.get(Rs));break}}Od()}function Js(e){const n=Yt(e);return n===e?n:(Un(n,"iterate",xa),Mo(e)?n:n.map(Wo))}function mc(e){return Un(e=Yt(e),"iterate",xa),e}function Yi(e,n){return Ri(e)?Fs(e)?wr(Wo(n)):wr(n):Wo(n)}const Yy={__proto__:null,[Symbol.iterator](){return pu(this,Symbol.iterator,e=>Yi(this,e))},concat(...e){return Js(this).concat(...e.map(n=>St(n)?Js(n):n))},entries(){return pu(this,"entries",e=>(e[1]=Yi(this,e[1]),e))},every(e,n){return _i(this,"every",e,n,void 0,arguments)},filter(e,n){return _i(this,"filter",e,n,t=>t.map(o=>Yi(this,o)),arguments)},find(e,n){return _i(this,"find",e,n,t=>Yi(this,t),arguments)},findIndex(e,n){return _i(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return _i(this,"findLast",e,n,t=>Yi(this,t),arguments)},findLastIndex(e,n){return _i(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return _i(this,"forEach",e,n,void 0,arguments)},includes(...e){return hu(this,"includes",e)},indexOf(...e){return hu(this,"indexOf",e)},join(e){return Js(this).join(e)},lastIndexOf(...e){return hu(this,"lastIndexOf",e)},map(e,n){return _i(this,"map",e,n,void 0,arguments)},pop(){return oa(this,"pop")},push(...e){return oa(this,"push",e)},reduce(e,...n){return Lf(this,"reduce",e,n)},reduceRight(e,...n){return Lf(this,"reduceRight",e,n)},shift(){return oa(this,"shift")},some(e,n){return _i(this,"some",e,n,void 0,arguments)},splice(...e){return oa(this,"splice",e)},toReversed(){return Js(this).toReversed()},toSorted(e){return Js(this).toSorted(e)},toSpliced(...e){return Js(this).toSpliced(...e)},unshift(...e){return oa(this,"unshift",e)},values(){return pu(this,"values",e=>Yi(this,e))}};function pu(e,n,t){const o=mc(e),i=o[n]();return o!==e&&!Mo(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=t(s.value)),s}),i}const Ky=Array.prototype;function _i(e,n,t,o,i,s){const r=mc(e),a=r!==e&&!Mo(e),d=r[n];if(d!==Ky[n]){const g=d.apply(e,s);return a?Wo(g):g}let l=t;r!==e&&(a?l=function(g,m){return t.call(this,Yi(e,g),m,e)}:t.length>2&&(l=function(g,m){return t.call(this,g,m,e)}));const f=d.call(r,l,o);return a&&i?i(f):f}function Lf(e,n,t,o){const i=mc(e);let s=t;return i!==e&&(Mo(e)?t.length>3&&(s=function(r,a,d){return t.call(this,r,a,d,e)}):s=function(r,a,d){return t.call(this,r,Yi(e,a),d,e)}),i[n](s,...o)}function hu(e,n,t){const o=Yt(e);Un(o,"iterate",xa);const i=o[n](...t);return(i===-1||i===!1)&&Pd(t[0])?(t[0]=Yt(t[0]),o[n](...t)):i}function oa(e,n,t=[]){Ii(),Fd();const o=Yt(e)[n].apply(e,t);return Od(),Ti(),o}const qy=$d("__proto__,__v_isRef,__isVue"),lg=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ri));function Zy(e){ri(e)||(e=String(e));const n=Yt(this);return Un(n,"has",e),n.hasOwnProperty(e)}class cg{constructor(n=!1,t=!1){this._isReadonly=n,this._isShallow=t}get(n,t,o){if(t==="__v_skip")return n.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return o===(i?s?rb:pg:s?fg:dg).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(o)?n:void 0;const r=St(n);if(!i){let d;if(r&&(d=Yy[t]))return d;if(t==="hasOwnProperty")return Zy}const a=Reflect.get(n,t,Hn(n)?n:o);if((ri(t)?lg.has(t):qy(t))||(i||Un(n,"get",t),s))return a;if(Hn(a)){const d=r&&Rd(t)?a:a.value;return i&&Qt(d)?nd(d):d}return Qt(a)?i?nd(a):yc(a):a}}class ug extends cg{constructor(n=!1){super(!1,n)}set(n,t,o,i){let s=n[t];const r=St(n)&&Rd(t);if(!this._isShallow){const l=Ri(s);if(!Mo(o)&&!Ri(o)&&(s=Yt(s),o=Yt(o)),!r&&Hn(s)&&!Hn(o))return l||(s.value=o),!0}const a=r?Number(t)<n.length:Kt(n,t),d=Reflect.set(n,t,o,Hn(n)?n:i);return n===Yt(i)&&(a?ts(o,s)&&Ci(n,"set",t,o):Ci(n,"add",t,o)),d}deleteProperty(n,t){const o=Kt(n,t);n[t];const i=Reflect.deleteProperty(n,t);return i&&o&&Ci(n,"delete",t,void 0),i}has(n,t){const o=Reflect.has(n,t);return(!ri(t)||!lg.has(t))&&Un(n,"has",t),o}ownKeys(n){return Un(n,"iterate",St(n)?"length":Rs),Reflect.ownKeys(n)}}class Xy extends cg{constructor(n=!1){super(!0,n)}set(n,t){return!0}deleteProperty(n,t){return!0}}const Jy=new ug,Qy=new Xy,eb=new ug(!0);const td=e=>e,wl=e=>Reflect.getPrototypeOf(e);function tb(e,n,t){return function(...o){const i=this.__v_raw,s=Yt(i),r=pr(s),a=e==="entries"||e===Symbol.iterator&&r,d=e==="keys"&&r,l=i[e](...o),f=t?td:n?wr:Wo;return!n&&Un(s,"iterate",d?ed:Rs),{next(){const{value:g,done:m}=l.next();return m?{value:g,done:m}:{value:a?[f(g[0]),f(g[1])]:f(g),done:m}},[Symbol.iterator](){return this}}}}function El(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function nb(e,n){const t={get(i){const s=this.__v_raw,r=Yt(s),a=Yt(i);e||(ts(i,a)&&Un(r,"get",i),Un(r,"get",a));const{has:d}=wl(r),l=n?td:e?wr:Wo;if(d.call(r,i))return l(s.get(i));if(d.call(r,a))return l(s.get(a));s!==r&&s.get(i)},get size(){const i=this.__v_raw;return!e&&Un(Yt(i),"iterate",Rs),i.size},has(i){const s=this.__v_raw,r=Yt(s),a=Yt(i);return e||(ts(i,a)&&Un(r,"has",i),Un(r,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const r=this,a=r.__v_raw,d=Yt(a),l=n?td:e?wr:Wo;return!e&&Un(d,"iterate",Rs),a.forEach((f,g)=>i.call(s,l(f),l(g),r))}};return Wn(t,e?{add:El("add"),set:El("set"),delete:El("delete"),clear:El("clear")}:{add(i){!n&&!Mo(i)&&!Ri(i)&&(i=Yt(i));const s=Yt(this);return wl(s).has.call(s,i)||(s.add(i),Ci(s,"add",i,i)),this},set(i,s){!n&&!Mo(s)&&!Ri(s)&&(s=Yt(s));const r=Yt(this),{has:a,get:d}=wl(r);let l=a.call(r,i);l||(i=Yt(i),l=a.call(r,i));const f=d.call(r,i);return r.set(i,s),l?ts(s,f)&&Ci(r,"set",i,s):Ci(r,"add",i,s),this},delete(i){const s=Yt(this),{has:r,get:a}=wl(s);let d=r.call(s,i);d||(i=Yt(i),d=r.call(s,i)),a&&a.call(s,i);const l=s.delete(i);return d&&Ci(s,"delete",i,void 0),l},clear(){const i=Yt(this),s=i.size!==0,r=i.clear();return s&&Ci(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=tb(i,e,n)}),t}function Nd(e,n){const t=nb(e,n);return(o,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?o:Reflect.get(Kt(t,i)&&i in o?t:o,i,s)}const ob={get:Nd(!1,!1)},ib={get:Nd(!1,!0)},sb={get:Nd(!0,!1)};const dg=new WeakMap,fg=new WeakMap,pg=new WeakMap,rb=new WeakMap;function ab(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lb(e){return e.__v_skip||!Object.isExtensible(e)?0:ab(Fy(e))}function yc(e){return Ri(e)?e:Dd(e,!1,Jy,ob,dg)}function hg(e){return Dd(e,!1,eb,ib,fg)}function nd(e){return Dd(e,!0,Qy,sb,pg)}function Dd(e,n,t,o,i){if(!Qt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const s=lb(e);if(s===0)return e;const r=i.get(e);if(r)return r;const a=new Proxy(e,s===2?o:t);return i.set(e,a),a}function Fs(e){return Ri(e)?Fs(e.__v_raw):!!(e&&e.__v_isReactive)}function Ri(e){return!!(e&&e.__v_isReadonly)}function Mo(e){return!!(e&&e.__v_isShallow)}function Pd(e){return e?!!e.__v_raw:!1}function Yt(e){const n=e&&e.__v_raw;return n?Yt(n):e}function cb(e){return!Kt(e,"__v_skip")&&Object.isExtensible(e)&&Zh(e,"__v_skip",!0),e}const Wo=e=>Qt(e)?yc(e):e,wr=e=>Qt(e)?nd(e):e;function Hn(e){return e?e.__v_isRef===!0:!1}function K(e){return gg(e,!1)}function ub(e){return gg(e,!0)}function gg(e,n){return Hn(e)?e:new db(e,n)}class db{constructor(n,t){this.dep=new Md,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?n:Yt(n),this._value=t?n:Wo(n),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(n){const t=this._rawValue,o=this.__v_isShallow||Mo(n)||Ri(n);n=o?n:Yt(n),ts(n,t)&&(this._rawValue=n,this._value=o?n:Wo(n),this.dep.trigger())}}function Ft(e){return Hn(e)?e.value:e}const fb={get:(e,n,t)=>n==="__v_raw"?e:Ft(Reflect.get(e,n,t)),set:(e,n,t,o)=>{const i=e[n];return Hn(i)&&!Hn(t)?(i.value=t,!0):Reflect.set(e,n,t,o)}};function vg(e){return Fs(e)?e:new Proxy(e,fb)}class pb{constructor(n,t,o){this.fn=n,this.setter=t,this._value=void 0,this.dep=new Md(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Sa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&nn!==this)return ng(this,!0),!0}get value(){const n=this.dep.track();return sg(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function hb(e,n,t=!1){let o,i;return Tt(e)?o=e:(o=e.get,i=e.set),new pb(o,i,t)}const Sl={},Vl=new WeakMap;let ks;function gb(e,n=!1,t=ks){if(t){let o=Vl.get(t);o||Vl.set(t,o=[]),o.push(e)}}function vb(e,n,t=Jt){const{immediate:o,deep:i,once:s,scheduler:r,augmentJob:a,call:d}=t,l=M=>i?M:Mo(M)||i===!1||i===0?Ai(M,1):Ai(M);let f,g,m,v,T=!1,P=!1;if(Hn(e)?(g=()=>e.value,T=Mo(e)):Fs(e)?(g=()=>l(e),T=!0):St(e)?(P=!0,T=e.some(M=>Fs(M)||Mo(M)),g=()=>e.map(M=>{if(Hn(M))return M.value;if(Fs(M))return l(M);if(Tt(M))return d?d(M,2):M()})):Tt(e)?n?g=d?()=>d(e,2):e:g=()=>{if(m){Ii();try{m()}finally{Ti()}}const M=ks;ks=f;try{return d?d(e,3,[v]):e(v)}finally{ks=M}}:g=ti,n&&i){const M=g,ee=i===!0?1/0:i;g=()=>Ai(M(),ee)}const w=Hy(),C=()=>{f.stop(),w&&w.active&&Td(w.effects,f)};if(s&&n){const M=n;n=(...ee)=>{M(...ee),C()}}let $=P?new Array(e.length).fill(Sl):Sl;const H=M=>{if(!(!(f.flags&1)||!f.dirty&&!M))if(n){const ee=f.run();if(i||T||(P?ee.some((oe,Z)=>ts(oe,$[Z])):ts(ee,$))){m&&m();const oe=ks;ks=f;try{const Z=[ee,$===Sl?void 0:P&&$[0]===Sl?[]:$,v];$=ee,d?d(n,3,Z):n(...Z)}finally{ks=oe}}}else f.run()};return a&&a(H),f=new eg(g),f.scheduler=r?()=>r(H,!1):H,v=M=>gb(M,!1,f),m=f.onStop=()=>{const M=Vl.get(f);if(M){if(d)d(M,4);else for(const ee of M)ee();Vl.delete(f)}},n?o?H(!0):$=f.run():r?r(H.bind(null,!0),!0):f.run(),C.pause=f.pause.bind(f),C.resume=f.resume.bind(f),C.stop=C,C}function Ai(e,n=1/0,t){if(n<=0||!Qt(e)||e.__v_skip||(t=t||new Map,(t.get(e)||0)>=n))return e;if(t.set(e,n),n--,Hn(e))Ai(e.value,n,t);else if(St(e))for(let o=0;o<e.length;o++)Ai(e[o],n,t);else if(dc(e)||pr(e))e.forEach(o=>{Ai(o,n,t)});else if(qh(e)){for(const o in e)Ai(e[o],n,t);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Ai(e[o],n,t)}return e}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function za(e,n,t,o){try{return o?e(...o):e()}catch(i){bc(i,n,t)}}function ai(e,n,t,o){if(Tt(e)){const i=za(e,n,t,o);return i&&Yh(i)&&i.catch(s=>{bc(s,n,t)}),i}if(St(e)){const i=[];for(let s=0;s<e.length;s++)i.push(ai(e[s],n,t,o));return i}}function bc(e,n,t,o=!0){const i=n?n.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:r}=n&&n.appContext.config||Jt;if(n){let a=n.parent;const d=n.proxy,l=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const f=a.ec;if(f){for(let g=0;g<f.length;g++)if(f[g](e,d,l)===!1)return}a=a.parent}if(s){Ii(),za(s,null,10,[e,d,l]),Ti();return}}mb(e,t,i,o,r)}function mb(e,n,t,o=!0,i=!1){if(i)throw e;console.error(e)}const no=[];let Jo=-1;const hr=[];let Ki=null,sr=0;const mg=Promise.resolve();let Hl=null;function Ao(e){const n=Hl||mg;return e?n.then(this?e.bind(this):e):n}function yb(e){let n=Jo+1,t=no.length;for(;n<t;){const o=n+t>>>1,i=no[o],s=ka(i);s<e||s===e&&i.flags&2?n=o+1:t=o}return n}function jd(e){if(!(e.flags&1)){const n=ka(e),t=no[no.length-1];!t||!(e.flags&2)&&n>=ka(t)?no.push(e):no.splice(yb(n),0,e),e.flags|=1,yg()}}function yg(){Hl||(Hl=mg.then(_g))}function bb(e){St(e)?hr.push(...e):Ki&&e.id===-1?Ki.splice(sr+1,0,e):e.flags&1||(hr.push(e),e.flags|=1),yg()}function Mf(e,n,t=Jo+1){for(;t<no.length;t++){const o=no[t];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;no.splice(t,1),t--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function bg(e){if(hr.length){const n=[...new Set(hr)].sort((t,o)=>ka(t)-ka(o));if(hr.length=0,Ki){Ki.push(...n);return}for(Ki=n,sr=0;sr<Ki.length;sr++){const t=Ki[sr];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ki=null,sr=0}}const ka=e=>e.id==null?e.flags&2?-1:1/0:e.id;function _g(e){try{for(Jo=0;Jo<no.length;Jo++){const n=no[Jo];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),za(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Jo<no.length;Jo++){const n=no[Jo];n&&(n.flags&=-2)}Jo=-1,no.length=0,bg(),Hl=null,(no.length||hr.length)&&_g()}}let xo=null,wg=null;function Gl(e){const n=xo;return xo=e,wg=e&&e.type.__scopeId||null,n}function _b(e,n=xo,t){if(!n||e._n)return e;const o=(...i)=>{o._d&&Kl(-1);const s=Gl(n);let r;try{r=e(...i)}finally{Gl(s),o._d&&Kl(1)}return r};return o._n=!0,o._c=!0,o._d=!0,o}function Fn(e,n){if(xo===null)return e;const t=Sc(xo),o=e.dirs||(e.dirs=[]);for(let i=0;i<n.length;i++){let[s,r,a,d=Jt]=n[i];s&&(Tt(s)&&(s={mounted:s,updated:s}),s.deep&&Ai(r),o.push({dir:s,instance:t,value:r,oldValue:void 0,arg:a,modifiers:d}))}return e}function Ss(e,n,t,o){const i=e.dirs,s=n&&n.dirs;for(let r=0;r<i.length;r++){const a=i[r];s&&(a.oldValue=s[r].value);let d=a.dir[o];d&&(Ii(),ai(d,t,8,[e.el,a,e,n]),Ti())}}function pa(e,n){if(Vn){let t=Vn.provides;const o=Vn.parent&&Vn.parent.provides;o===t&&(t=Vn.provides=Object.create(o)),t[e]=n}}function No(e,n,t=!1){const o=_0();if(o||gr){let i=gr?gr._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return t&&Tt(n)?n.call(o&&o.proxy):n}}const wb=Symbol.for("v-scx"),Eb=()=>No(wb);function nt(e,n,t){return Eg(e,n,t)}function Eg(e,n,t=Jt){const{immediate:o,deep:i,flush:s,once:r}=t,a=Wn({},t),d=n&&o||!n&&s!=="post";let l;if($a){if(s==="sync"){const v=Eb();l=v.__watcherHandles||(v.__watcherHandles=[])}else if(!d){const v=()=>{};return v.stop=ti,v.resume=ti,v.pause=ti,v}}const f=Vn;a.call=(v,T,P)=>ai(v,f,T,P);let g=!1;s==="post"?a.scheduler=v=>{Qn(v,f&&f.suspense)}:s!=="sync"&&(g=!0,a.scheduler=(v,T)=>{T?v():jd(v)}),a.augmentJob=v=>{n&&(v.flags|=4),g&&(v.flags|=2,f&&(v.id=f.uid,v.i=f))};const m=vb(e,n,a);return $a&&(l?l.push(m):d&&m()),m}function Sb(e,n,t){const o=this.proxy,i=yn(e)?e.includes(".")?Sg(o,e):()=>o[e]:e.bind(o,o);let s;Tt(n)?s=n:(s=n.handler,t=n);const r=Va(this),a=Eg(i,s.bind(o),t);return r(),a}function Sg(e,n){const t=n.split(".");return()=>{let o=e;for(let i=0;i<t.length&&o;i++)o=o[t[i]];return o}}const xg=Symbol("_vte"),xb=e=>e.__isTeleport,ha=e=>e&&(e.disabled||e.disabled===""),Nf=e=>e&&(e.defer||e.defer===""),Df=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Pf=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,od=(e,n)=>{const t=e&&e.to;return yn(t)?n?n(t):null:t},kg={name:"Teleport",__isTeleport:!0,process(e,n,t,o,i,s,r,a,d,l){const{mc:f,pc:g,pbc:m,o:{insert:v,querySelector:T,createText:P,createComment:w}}=l,C=ha(n.props);let{shapeFlag:$,children:H,dynamicChildren:M}=n;if(e==null){const ee=n.el=P(""),oe=n.anchor=P("");v(ee,t,o),v(oe,t,o);const Z=(Ce,Fe)=>{$&16&&f(H,Ce,Fe,i,s,r,a,d)},ye=()=>{const Ce=n.target=od(n.props,T),Fe=Cg(Ce,n,P,v);Ce&&(r!=="svg"&&Df(Ce)?r="svg":r!=="mathml"&&Pf(Ce)&&(r="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(Ce),C||(Z(Ce,Fe),Dl(n,!1)))};C&&(Z(t,oe),Dl(n,!0)),Nf(n.props)?(n.el.__isMounted=!1,Qn(()=>{ye(),delete n.el.__isMounted},s)):ye()}else{if(Nf(n.props)&&e.el.__isMounted===!1){Qn(()=>{kg.process(e,n,t,o,i,s,r,a,d,l)},s);return}n.el=e.el,n.targetStart=e.targetStart;const ee=n.anchor=e.anchor,oe=n.target=e.target,Z=n.targetAnchor=e.targetAnchor,ye=ha(e.props),Ce=ye?t:oe,Fe=ye?ee:Z;if(r==="svg"||Df(oe)?r="svg":(r==="mathml"||Pf(oe))&&(r="mathml"),M?(m(e.dynamicChildren,M,Ce,i,s,r,a),Vd(e,n,!0)):d||g(e,n,Ce,Fe,i,s,r,a,!1),C)ye?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):xl(n,t,ee,l,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const Le=n.target=od(n.props,T);Le&&xl(n,Le,null,l,0)}else ye&&xl(n,oe,Z,l,1);Dl(n,C)}},remove(e,n,t,{um:o,o:{remove:i}},s){const{shapeFlag:r,children:a,anchor:d,targetStart:l,targetAnchor:f,target:g,props:m}=e;if(g&&(i(l),i(f)),s&&i(d),r&16){const v=s||!ha(m);for(let T=0;T<a.length;T++){const P=a[T];o(P,n,t,v,!!P.dynamicChildren)}}},move:xl,hydrate:kb};function xl(e,n,t,{o:{insert:o},m:i},s=2){s===0&&o(e.targetAnchor,n,t);const{el:r,anchor:a,shapeFlag:d,children:l,props:f}=e,g=s===2;if(g&&o(r,n,t),(!g||ha(f))&&d&16)for(let m=0;m<l.length;m++)i(l[m],n,t,2);g&&o(a,n,t)}function kb(e,n,t,o,i,s,{o:{nextSibling:r,parentNode:a,querySelector:d,insert:l,createText:f}},g){function m(P,w,C,$){w.anchor=g(r(P),w,a(P),t,o,i,s),w.targetStart=C,w.targetAnchor=$}const v=n.target=od(n.props,d),T=ha(n.props);if(v){const P=v._lpa||v.firstChild;if(n.shapeFlag&16)if(T)m(e,n,P,P&&r(P));else{n.anchor=r(e);let w=P;for(;w;){if(w&&w.nodeType===8){if(w.data==="teleport start anchor")n.targetStart=w;else if(w.data==="teleport anchor"){n.targetAnchor=w,v._lpa=n.targetAnchor&&r(n.targetAnchor);break}}w=r(w)}n.targetAnchor||Cg(v,n,f,l),g(P&&r(P),n,v,t,o,i,s)}Dl(n,T)}else T&&n.shapeFlag&16&&m(e,n,e,r(e));return n.anchor&&r(n.anchor)}const Cb=kg;function Dl(e,n){const t=e.ctx;if(t&&t.ut){let o,i;for(n?(o=e.el,i=e.anchor):(o=e.targetStart,i=e.targetAnchor);o&&o!==i;)o.nodeType===1&&o.setAttribute("data-v-owner",t.uid),o=o.nextSibling;t.ut()}}function Cg(e,n,t,o){const i=n.targetStart=t(""),s=n.targetAnchor=t("");return i[xg]=s,e&&(o(i,e),o(s,e)),s}const Ab=Symbol("_leaveCb");function Bd(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Bd(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function Ag(e,n){return Tt(e)?Wn({name:e.name},n,{setup:e}):e}function $g(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Wl=new WeakMap;function ga(e,n,t,o,i=!1){if(St(e)){e.forEach((T,P)=>ga(T,n&&(St(n)?n[P]:n),t,o,i));return}if(va(o)&&!i){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&ga(e,n,t,o.component.subTree);return}const s=o.shapeFlag&4?Sc(o.component):o.el,r=i?null:s,{i:a,r:d}=e,l=n&&n.r,f=a.refs===Jt?a.refs={}:a.refs,g=a.setupState,m=Yt(g),v=g===Jt?Wh:T=>Kt(m,T);if(l!=null&&l!==d){if(jf(n),yn(l))f[l]=null,v(l)&&(g[l]=null);else if(Hn(l)){l.value=null;const T=n;T.k&&(f[T.k]=null)}}if(Tt(d))za(d,a,12,[r,f]);else{const T=yn(d),P=Hn(d);if(T||P){const w=()=>{if(e.f){const C=T?v(d)?g[d]:f[d]:d.value;if(i)St(C)&&Td(C,s);else if(St(C))C.includes(s)||C.push(s);else if(T)f[d]=[s],v(d)&&(g[d]=f[d]);else{const $=[s];d.value=$,e.k&&(f[e.k]=$)}}else T?(f[d]=r,v(d)&&(g[d]=r)):P&&(d.value=r,e.k&&(f[e.k]=r))};if(r){const C=()=>{w(),Wl.delete(e)};C.id=-1,Wl.set(e,C),Qn(C,t)}else jf(e),w()}}}function jf(e){const n=Wl.get(e);n&&(n.flags|=8,Wl.delete(e))}gc().requestIdleCallback;gc().cancelIdleCallback;const va=e=>!!e.type.__asyncLoader,Ig=e=>e.type.__isKeepAlive;function $b(e,n){Tg(e,"a",n)}function Ib(e,n){Tg(e,"da",n)}function Tg(e,n,t=Vn){const o=e.__wdc||(e.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(_c(n,o,t),t){let i=t.parent;for(;i&&i.parent;)Ig(i.parent.vnode)&&Tb(o,n,t,i),i=i.parent}}function Tb(e,n,t,o){const i=_c(n,e,o,!0);Fg(()=>{Td(o[n],i)},t)}function _c(e,n,t=Vn,o=!1){if(t){const i=t[e]||(t[e]=[]),s=n.__weh||(n.__weh=(...r)=>{Ii();const a=Va(t),d=ai(n,t,e,r);return a(),Ti(),d});return o?i.unshift(s):i.push(s),s}}const Fi=e=>(n,t=Vn)=>{(!$a||e==="sp")&&_c(e,(...o)=>n(...o),t)},Rb=Fi("bm"),li=Fi("m"),Rg=Fi("bu"),Fb=Fi("u"),go=Fi("bum"),Fg=Fi("um"),Ob=Fi("sp"),Lb=Fi("rtg"),Mb=Fi("rtc");function Nb(e,n=Vn){_c("ec",e,n)}const Db="components";function Pb(e,n){return Bb(Db,e,!0,n)||e}const jb=Symbol.for("v-ndc");function Bb(e,n,t=!0,o=!1){const i=xo||Vn;if(i){const s=i.type;{const a=k0(s,!1);if(a&&(a===n||a===Do(n)||a===pc(Do(n))))return s}const r=Bf(i[e]||s[e],n)||Bf(i.appContext[e],n);return!r&&o?s:r}}function Bf(e,n){return e&&(e[n]||e[Do(n)]||e[pc(Do(n))])}function Je(e,n,t,o){let i;const s=t,r=St(e);if(r||yn(e)){const a=r&&Fs(e);let d=!1,l=!1;a&&(d=!Mo(e),l=Ri(e),e=mc(e)),i=new Array(e.length);for(let f=0,g=e.length;f<g;f++)i[f]=n(d?l?wr(Wo(e[f])):Wo(e[f]):e[f],f,void 0,s)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=n(a+1,a,void 0,s)}else if(Qt(e))if(e[Symbol.iterator])i=Array.from(e,(a,d)=>n(a,d,void 0,s));else{const a=Object.keys(e);i=new Array(a.length);for(let d=0,l=a.length;d<l;d++){const f=a[d];i[d]=n(e[f],f,d,s)}}else i=[];return i}const id=e=>e?Xg(e)?Sc(e):id(e.parent):null,ma=Wn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>id(e.parent),$root:e=>id(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Lg(e),$forceUpdate:e=>e.f||(e.f=()=>{jd(e.update)}),$nextTick:e=>e.n||(e.n=Ao.bind(e.proxy)),$watch:e=>Sb.bind(e)}),gu=(e,n)=>e!==Jt&&!e.__isScriptSetup&&Kt(e,n),Ub={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:t,setupState:o,data:i,props:s,accessCache:r,type:a,appContext:d}=e;if(n[0]!=="$"){const m=r[n];if(m!==void 0)switch(m){case 1:return o[n];case 2:return i[n];case 4:return t[n];case 3:return s[n]}else{if(gu(o,n))return r[n]=1,o[n];if(i!==Jt&&Kt(i,n))return r[n]=2,i[n];if(Kt(s,n))return r[n]=3,s[n];if(t!==Jt&&Kt(t,n))return r[n]=4,t[n];sd&&(r[n]=0)}}const l=ma[n];let f,g;if(l)return n==="$attrs"&&Un(e.attrs,"get",""),l(e);if((f=a.__cssModules)&&(f=f[n]))return f;if(t!==Jt&&Kt(t,n))return r[n]=4,t[n];if(g=d.config.globalProperties,Kt(g,n))return g[n]},set({_:e},n,t){const{data:o,setupState:i,ctx:s}=e;return gu(i,n)?(i[n]=t,!0):o!==Jt&&Kt(o,n)?(o[n]=t,!0):Kt(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(s[n]=t,!0)},has({_:{data:e,setupState:n,accessCache:t,ctx:o,appContext:i,props:s,type:r}},a){let d;return!!(t[a]||e!==Jt&&a[0]!=="$"&&Kt(e,a)||gu(n,a)||Kt(s,a)||Kt(o,a)||Kt(ma,a)||Kt(i.config.globalProperties,a)||(d=r.__cssModules)&&d[a])},defineProperty(e,n,t){return t.get!=null?e._.accessCache[n]=0:Kt(t,"value")&&this.set(e,n,t.value,null),Reflect.defineProperty(e,n,t)}};function Uf(e){return St(e)?e.reduce((n,t)=>(n[t]=null,n),{}):e}let sd=!0;function zb(e){const n=Lg(e),t=e.proxy,o=e.ctx;sd=!1,n.beforeCreate&&zf(n.beforeCreate,e,"bc");const{data:i,computed:s,methods:r,watch:a,provide:d,inject:l,created:f,beforeMount:g,mounted:m,beforeUpdate:v,updated:T,activated:P,deactivated:w,beforeDestroy:C,beforeUnmount:$,destroyed:H,unmounted:M,render:ee,renderTracked:oe,renderTriggered:Z,errorCaptured:ye,serverPrefetch:Ce,expose:Fe,inheritAttrs:Le,components:We,directives:ht,filters:De}=n;if(l&&Vb(l,o,null),r)for(const we in r){const Oe=r[we];Tt(Oe)&&(o[we]=Oe.bind(t))}if(i){const we=i.call(t,t);Qt(we)&&(e.data=yc(we))}if(sd=!0,s)for(const we in s){const Oe=s[we],Qe=Tt(Oe)?Oe.bind(t,t):Tt(Oe.get)?Oe.get.bind(t,t):ti,Ke=!Tt(Oe)&&Tt(Oe.set)?Oe.set.bind(t):ti,st=A({get:Qe,set:Ke});Object.defineProperty(o,we,{enumerable:!0,configurable:!0,get:()=>st.value,set:vt=>st.value=vt})}if(a)for(const we in a)Og(a[we],o,t,we);if(d){const we=Tt(d)?d.call(t):d;Reflect.ownKeys(we).forEach(Oe=>{pa(Oe,we[Oe])})}f&&zf(f,e,"c");function Q(we,Oe){St(Oe)?Oe.forEach(Qe=>we(Qe.bind(t))):Oe&&we(Oe.bind(t))}if(Q(Rb,g),Q(li,m),Q(Rg,v),Q(Fb,T),Q($b,P),Q(Ib,w),Q(Nb,ye),Q(Mb,oe),Q(Lb,Z),Q(go,$),Q(Fg,M),Q(Ob,Ce),St(Fe))if(Fe.length){const we=e.exposed||(e.exposed={});Fe.forEach(Oe=>{Object.defineProperty(we,Oe,{get:()=>t[Oe],set:Qe=>t[Oe]=Qe,enumerable:!0})})}else e.exposed||(e.exposed={});ee&&e.render===ti&&(e.render=ee),Le!=null&&(e.inheritAttrs=Le),We&&(e.components=We),ht&&(e.directives=ht),Ce&&$g(e)}function Vb(e,n,t=ti){St(e)&&(e=rd(e));for(const o in e){const i=e[o];let s;Qt(i)?"default"in i?s=No(i.from||o,i.default,!0):s=No(i.from||o):s=No(i),Hn(s)?Object.defineProperty(n,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:r=>s.value=r}):n[o]=s}}function zf(e,n,t){ai(St(e)?e.map(o=>o.bind(n.proxy)):e.bind(n.proxy),n,t)}function Og(e,n,t,o){let i=o.includes(".")?Sg(t,o):()=>t[o];if(yn(e)){const s=n[e];Tt(s)&&nt(i,s)}else if(Tt(e))nt(i,e.bind(t));else if(Qt(e))if(St(e))e.forEach(s=>Og(s,n,t,o));else{const s=Tt(e.handler)?e.handler.bind(t):n[e.handler];Tt(s)&&nt(i,s,e)}}function Lg(e){const n=e.type,{mixins:t,extends:o}=n,{mixins:i,optionsCache:s,config:{optionMergeStrategies:r}}=e.appContext,a=s.get(n);let d;return a?d=a:!i.length&&!t&&!o?d=n:(d={},i.length&&i.forEach(l=>Yl(d,l,r,!0)),Yl(d,n,r)),Qt(n)&&s.set(n,d),d}function Yl(e,n,t,o=!1){const{mixins:i,extends:s}=n;s&&Yl(e,s,t,!0),i&&i.forEach(r=>Yl(e,r,t,!0));for(const r in n)if(!(o&&r==="expose")){const a=Hb[r]||t&&t[r];e[r]=a?a(e[r],n[r]):n[r]}return e}const Hb={data:Vf,props:Hf,emits:Hf,methods:aa,computed:aa,beforeCreate:Jn,created:Jn,beforeMount:Jn,mounted:Jn,beforeUpdate:Jn,updated:Jn,beforeDestroy:Jn,beforeUnmount:Jn,destroyed:Jn,unmounted:Jn,activated:Jn,deactivated:Jn,errorCaptured:Jn,serverPrefetch:Jn,components:aa,directives:aa,watch:Wb,provide:Vf,inject:Gb};function Vf(e,n){return n?e?function(){return Wn(Tt(e)?e.call(this,this):e,Tt(n)?n.call(this,this):n)}:n:e}function Gb(e,n){return aa(rd(e),rd(n))}function rd(e){if(St(e)){const n={};for(let t=0;t<e.length;t++)n[e[t]]=e[t];return n}return e}function Jn(e,n){return e?[...new Set([].concat(e,n))]:n}function aa(e,n){return e?Wn(Object.create(null),e,n):n}function Hf(e,n){return e?St(e)&&St(n)?[...new Set([...e,...n])]:Wn(Object.create(null),Uf(e),Uf(n??{})):n}function Wb(e,n){if(!e)return n;if(!n)return e;const t=Wn(Object.create(null),e);for(const o in n)t[o]=Jn(e[o],n[o]);return t}function Mg(){return{app:null,config:{isNativeTag:Wh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Yb=0;function Kb(e,n){return function(o,i=null){Tt(o)||(o=Wn({},o)),i!=null&&!Qt(i)&&(i=null);const s=Mg(),r=new WeakSet,a=[];let d=!1;const l=s.app={_uid:Yb++,_component:o,_props:i,_container:null,_context:s,_instance:null,version:A0,get config(){return s.config},set config(f){},use(f,...g){return r.has(f)||(f&&Tt(f.install)?(r.add(f),f.install(l,...g)):Tt(f)&&(r.add(f),f(l,...g))),l},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),l},component(f,g){return g?(s.components[f]=g,l):s.components[f]},directive(f,g){return g?(s.directives[f]=g,l):s.directives[f]},mount(f,g,m){if(!d){const v=l._ceVNode||_t(o,i);return v.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),e(v,f,m),d=!0,l._container=f,f.__vue_app__=l,Sc(v.component)}},onUnmount(f){a.push(f)},unmount(){d&&(ai(a,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(f,g){return s.provides[f]=g,l},runWithContext(f){const g=gr;gr=l;try{return f()}finally{gr=g}}};return l}}let gr=null;const qb=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${Do(n)}Modifiers`]||e[`${ls(n)}Modifiers`];function Zb(e,n,...t){if(e.isUnmounted)return;const o=e.vnode.props||Jt;let i=t;const s=n.startsWith("update:"),r=s&&qb(o,n.slice(7));r&&(r.trim&&(i=t.map(f=>yn(f)?f.trim():f)),r.number&&(i=t.map(hc)));let a,d=o[a=uu(n)]||o[a=uu(Do(n))];!d&&s&&(d=o[a=uu(ls(n))]),d&&ai(d,e,6,i);const l=o[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ai(l,e,6,i)}}const Xb=new WeakMap;function Ng(e,n,t=!1){const o=t?Xb:n.emitsCache,i=o.get(e);if(i!==void 0)return i;const s=e.emits;let r={},a=!1;if(!Tt(e)){const d=l=>{const f=Ng(l,n,!0);f&&(a=!0,Wn(r,f))};!t&&n.mixins.length&&n.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!s&&!a?(Qt(e)&&o.set(e,null),null):(St(s)?s.forEach(d=>r[d]=null):Wn(r,s),Qt(e)&&o.set(e,r),r)}function wc(e,n){return!e||!uc(n)?!1:(n=n.slice(2).replace(/Once$/,""),Kt(e,n[0].toLowerCase()+n.slice(1))||Kt(e,ls(n))||Kt(e,n))}function Gf(e){const{type:n,vnode:t,proxy:o,withProxy:i,propsOptions:[s],slots:r,attrs:a,emit:d,render:l,renderCache:f,props:g,data:m,setupState:v,ctx:T,inheritAttrs:P}=e,w=Gl(e);let C,$;try{if(t.shapeFlag&4){const M=i||o,ee=M;C=Qo(l.call(ee,M,f,g,v,m,T)),$=a}else{const M=n;C=Qo(M.length>1?M(g,{attrs:a,slots:r,emit:d}):M(g,null)),$=n.props?a:Jb(a)}}catch(M){ya.length=0,bc(M,e,1),C=_t(rs)}let H=C;if($&&P!==!1){const M=Object.keys($),{shapeFlag:ee}=H;M.length&&ee&7&&(s&&M.some(Id)&&($=Qb($,s)),H=Er(H,$,!1,!0))}return t.dirs&&(H=Er(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(t.dirs):t.dirs),t.transition&&Bd(H,t.transition),C=H,Gl(w),C}const Jb=e=>{let n;for(const t in e)(t==="class"||t==="style"||uc(t))&&((n||(n={}))[t]=e[t]);return n},Qb=(e,n)=>{const t={};for(const o in e)(!Id(o)||!(o.slice(9)in n))&&(t[o]=e[o]);return t};function e0(e,n,t){const{props:o,children:i,component:s}=e,{props:r,children:a,patchFlag:d}=n,l=s.emitsOptions;if(n.dirs||n.transition)return!0;if(t&&d>=0){if(d&1024)return!0;if(d&16)return o?Wf(o,r,l):!!r;if(d&8){const f=n.dynamicProps;for(let g=0;g<f.length;g++){const m=f[g];if(r[m]!==o[m]&&!wc(l,m))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:o===r?!1:o?r?Wf(o,r,l):!0:!!r;return!1}function Wf(e,n,t){const o=Object.keys(n);if(o.length!==Object.keys(e).length)return!0;for(let i=0;i<o.length;i++){const s=o[i];if(n[s]!==e[s]&&!wc(t,s))return!0}return!1}function t0({vnode:e,parent:n},t){for(;n;){const o=n.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=n.vnode).el=t,n=n.parent;else break}}const Dg={},Pg=()=>Object.create(Dg),jg=e=>Object.getPrototypeOf(e)===Dg;function n0(e,n,t,o=!1){const i={},s=Pg();e.propsDefaults=Object.create(null),Bg(e,n,i,s);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);t?e.props=o?i:hg(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function o0(e,n,t,o){const{props:i,attrs:s,vnode:{patchFlag:r}}=e,a=Yt(i),[d]=e.propsOptions;let l=!1;if((o||r>0)&&!(r&16)){if(r&8){const f=e.vnode.dynamicProps;for(let g=0;g<f.length;g++){let m=f[g];if(wc(e.emitsOptions,m))continue;const v=n[m];if(d)if(Kt(s,m))v!==s[m]&&(s[m]=v,l=!0);else{const T=Do(m);i[T]=ad(d,a,T,v,e,!1)}else v!==s[m]&&(s[m]=v,l=!0)}}}else{Bg(e,n,i,s)&&(l=!0);let f;for(const g in a)(!n||!Kt(n,g)&&((f=ls(g))===g||!Kt(n,f)))&&(d?t&&(t[g]!==void 0||t[f]!==void 0)&&(i[g]=ad(d,a,g,void 0,e,!0)):delete i[g]);if(s!==a)for(const g in s)(!n||!Kt(n,g))&&(delete s[g],l=!0)}l&&Ci(e.attrs,"set","")}function Bg(e,n,t,o){const[i,s]=e.propsOptions;let r=!1,a;if(n)for(let d in n){if(ua(d))continue;const l=n[d];let f;i&&Kt(i,f=Do(d))?!s||!s.includes(f)?t[f]=l:(a||(a={}))[f]=l:wc(e.emitsOptions,d)||(!(d in o)||l!==o[d])&&(o[d]=l,r=!0)}if(s){const d=Yt(t),l=a||Jt;for(let f=0;f<s.length;f++){const g=s[f];t[g]=ad(i,d,g,l[g],e,!Kt(l,g))}}return r}function ad(e,n,t,o,i,s){const r=e[t];if(r!=null){const a=Kt(r,"default");if(a&&o===void 0){const d=r.default;if(r.type!==Function&&!r.skipFactory&&Tt(d)){const{propsDefaults:l}=i;if(t in l)o=l[t];else{const f=Va(i);o=l[t]=d.call(null,n),f()}}else o=d;i.ce&&i.ce._setProp(t,o)}r[0]&&(s&&!a?o=!1:r[1]&&(o===""||o===ls(t))&&(o=!0))}return o}const i0=new WeakMap;function Ug(e,n,t=!1){const o=t?i0:n.propsCache,i=o.get(e);if(i)return i;const s=e.props,r={},a=[];let d=!1;if(!Tt(e)){const f=g=>{d=!0;const[m,v]=Ug(g,n,!0);Wn(r,m),v&&a.push(...v)};!t&&n.mixins.length&&n.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!s&&!d)return Qt(e)&&o.set(e,fr),fr;if(St(s))for(let f=0;f<s.length;f++){const g=Do(s[f]);Yf(g)&&(r[g]=Jt)}else if(s)for(const f in s){const g=Do(f);if(Yf(g)){const m=s[f],v=r[g]=St(m)||Tt(m)?{type:m}:Wn({},m),T=v.type;let P=!1,w=!0;if(St(T))for(let C=0;C<T.length;++C){const $=T[C],H=Tt($)&&$.name;if(H==="Boolean"){P=!0;break}else H==="String"&&(w=!1)}else P=Tt(T)&&T.name==="Boolean";v[0]=P,v[1]=w,(P||Kt(v,"default"))&&a.push(g)}}const l=[r,a];return Qt(e)&&o.set(e,l),l}function Yf(e){return e[0]!=="$"&&!ua(e)}const Ud=e=>e==="_"||e==="_ctx"||e==="$stable",zd=e=>St(e)?e.map(Qo):[Qo(e)],s0=(e,n,t)=>{if(n._n)return n;const o=_b((...i)=>zd(n(...i)),t);return o._c=!1,o},zg=(e,n,t)=>{const o=e._ctx;for(const i in e){if(Ud(i))continue;const s=e[i];if(Tt(s))n[i]=s0(i,s,o);else if(s!=null){const r=zd(s);n[i]=()=>r}}},Vg=(e,n)=>{const t=zd(n);e.slots.default=()=>t},Hg=(e,n,t)=>{for(const o in n)(t||!Ud(o))&&(e[o]=n[o])},r0=(e,n,t)=>{const o=e.slots=Pg();if(e.vnode.shapeFlag&32){const i=n._;i?(Hg(o,n,t),t&&Zh(o,"_",i,!0)):zg(n,o)}else n&&Vg(e,n)},a0=(e,n,t)=>{const{vnode:o,slots:i}=e;let s=!0,r=Jt;if(o.shapeFlag&32){const a=n._;a?t&&a===1?s=!1:Hg(i,n,t):(s=!n.$stable,zg(n,i)),r=n}else n&&(Vg(e,n),r={default:1});if(s)for(const a in i)!Ud(a)&&r[a]==null&&delete i[a]},Qn=f0;function l0(e){return c0(e)}function c0(e,n){const t=gc();t.__VUE__=!0;const{insert:o,remove:i,patchProp:s,createElement:r,createText:a,createComment:d,setText:l,setElementText:f,parentNode:g,nextSibling:m,setScopeId:v=ti,insertStaticContent:T}=e,P=(O,j,W,ae=null,he=null,fe=null,pe=void 0,Ae=null,re=!!j.dynamicChildren)=>{if(O===j)return;O&&!ia(O,j)&&(ae=de(O),vt(O,he,fe,!0),O=null),j.patchFlag===-2&&(re=!1,j.dynamicChildren=null);const{type:se,ref:He,shapeFlag:Re}=j;switch(se){case Ec:w(O,j,W,ae);break;case rs:C(O,j,W,ae);break;case Pl:O==null&&$(j,W,ae,pe);break;case je:We(O,j,W,ae,he,fe,pe,Ae,re);break;default:Re&1?ee(O,j,W,ae,he,fe,pe,Ae,re):Re&6?ht(O,j,W,ae,he,fe,pe,Ae,re):(Re&64||Re&128)&&se.process(O,j,W,ae,he,fe,pe,Ae,re,Se)}He!=null&&he?ga(He,O&&O.ref,fe,j||O,!j):He==null&&O&&O.ref!=null&&ga(O.ref,null,fe,O,!0)},w=(O,j,W,ae)=>{if(O==null)o(j.el=a(j.children),W,ae);else{const he=j.el=O.el;j.children!==O.children&&l(he,j.children)}},C=(O,j,W,ae)=>{O==null?o(j.el=d(j.children||""),W,ae):j.el=O.el},$=(O,j,W,ae)=>{[O.el,O.anchor]=T(O.children,j,W,ae,O.el,O.anchor)},H=({el:O,anchor:j},W,ae)=>{let he;for(;O&&O!==j;)he=m(O),o(O,W,ae),O=he;o(j,W,ae)},M=({el:O,anchor:j})=>{let W;for(;O&&O!==j;)W=m(O),i(O),O=W;i(j)},ee=(O,j,W,ae,he,fe,pe,Ae,re)=>{if(j.type==="svg"?pe="svg":j.type==="math"&&(pe="mathml"),O==null)oe(j,W,ae,he,fe,pe,Ae,re);else{const se=O.el&&O.el._isVueCE?O.el:null;try{se&&se._beginPatch(),Ce(O,j,he,fe,pe,Ae,re)}finally{se&&se._endPatch()}}},oe=(O,j,W,ae,he,fe,pe,Ae)=>{let re,se;const{props:He,shapeFlag:Re,transition:k,dirs:N}=O;if(re=O.el=r(O.type,fe,He&&He.is,He),Re&8?f(re,O.children):Re&16&&ye(O.children,re,null,ae,he,vu(O,fe),pe,Ae),N&&Ss(O,null,ae,"created"),Z(re,O,O.scopeId,pe,ae),He){for(const Y in He)Y!=="value"&&!ua(Y)&&s(re,Y,null,He[Y],fe,ae);"value"in He&&s(re,"value",null,He.value,fe),(se=He.onVnodeBeforeMount)&&Zo(se,ae,O)}N&&Ss(O,null,ae,"beforeMount");const I=u0(he,k);I&&k.beforeEnter(re),o(re,j,W),((se=He&&He.onVnodeMounted)||I||N)&&Qn(()=>{se&&Zo(se,ae,O),I&&k.enter(re),N&&Ss(O,null,ae,"mounted")},he)},Z=(O,j,W,ae,he)=>{if(W&&v(O,W),ae)for(let fe=0;fe<ae.length;fe++)v(O,ae[fe]);if(he){let fe=he.subTree;if(j===fe||Yg(fe.type)&&(fe.ssContent===j||fe.ssFallback===j)){const pe=he.vnode;Z(O,pe,pe.scopeId,pe.slotScopeIds,he.parent)}}},ye=(O,j,W,ae,he,fe,pe,Ae,re=0)=>{for(let se=re;se<O.length;se++){const He=O[se]=Ae?qi(O[se]):Qo(O[se]);P(null,He,j,W,ae,he,fe,pe,Ae)}},Ce=(O,j,W,ae,he,fe,pe)=>{const Ae=j.el=O.el;let{patchFlag:re,dynamicChildren:se,dirs:He}=j;re|=O.patchFlag&16;const Re=O.props||Jt,k=j.props||Jt;let N;if(W&&xs(W,!1),(N=k.onVnodeBeforeUpdate)&&Zo(N,W,j,O),He&&Ss(j,O,W,"beforeUpdate"),W&&xs(W,!0),(Re.innerHTML&&k.innerHTML==null||Re.textContent&&k.textContent==null)&&f(Ae,""),se?Fe(O.dynamicChildren,se,Ae,W,ae,vu(j,he),fe):pe||Oe(O,j,Ae,null,W,ae,vu(j,he),fe,!1),re>0){if(re&16)Le(Ae,Re,k,W,he);else if(re&2&&Re.class!==k.class&&s(Ae,"class",null,k.class,he),re&4&&s(Ae,"style",Re.style,k.style,he),re&8){const I=j.dynamicProps;for(let Y=0;Y<I.length;Y++){const ie=I[Y],_e=Re[ie],Ie=k[ie];(Ie!==_e||ie==="value")&&s(Ae,ie,_e,Ie,he,W)}}re&1&&O.children!==j.children&&f(Ae,j.children)}else!pe&&se==null&&Le(Ae,Re,k,W,he);((N=k.onVnodeUpdated)||He)&&Qn(()=>{N&&Zo(N,W,j,O),He&&Ss(j,O,W,"updated")},ae)},Fe=(O,j,W,ae,he,fe,pe)=>{for(let Ae=0;Ae<j.length;Ae++){const re=O[Ae],se=j[Ae],He=re.el&&(re.type===je||!ia(re,se)||re.shapeFlag&198)?g(re.el):W;P(re,se,He,null,ae,he,fe,pe,!0)}},Le=(O,j,W,ae,he)=>{if(j!==W){if(j!==Jt)for(const fe in j)!ua(fe)&&!(fe in W)&&s(O,fe,j[fe],null,he,ae);for(const fe in W){if(ua(fe))continue;const pe=W[fe],Ae=j[fe];pe!==Ae&&fe!=="value"&&s(O,fe,Ae,pe,he,ae)}"value"in W&&s(O,"value",j.value,W.value,he)}},We=(O,j,W,ae,he,fe,pe,Ae,re)=>{const se=j.el=O?O.el:a(""),He=j.anchor=O?O.anchor:a("");let{patchFlag:Re,dynamicChildren:k,slotScopeIds:N}=j;N&&(Ae=Ae?Ae.concat(N):N),O==null?(o(se,W,ae),o(He,W,ae),ye(j.children||[],W,He,he,fe,pe,Ae,re)):Re>0&&Re&64&&k&&O.dynamicChildren&&O.dynamicChildren.length===k.length?(Fe(O.dynamicChildren,k,W,he,fe,pe,Ae),(j.key!=null||he&&j===he.subTree)&&Vd(O,j,!0)):Oe(O,j,W,He,he,fe,pe,Ae,re)},ht=(O,j,W,ae,he,fe,pe,Ae,re)=>{j.slotScopeIds=Ae,O==null?j.shapeFlag&512?he.ctx.activate(j,W,ae,pe,re):De(j,W,ae,he,fe,pe,re):Ye(O,j,re)},De=(O,j,W,ae,he,fe,pe)=>{const Ae=O.component=b0(O,ae,he);if(Ig(O)&&(Ae.ctx.renderer=Se),w0(Ae,!1,pe),Ae.asyncDep){if(he&&he.registerDep(Ae,Q,pe),!O.el){const re=Ae.subTree=_t(rs);C(null,re,j,W),O.placeholder=re.el}}else Q(Ae,O,j,W,he,fe,pe)},Ye=(O,j,W)=>{const ae=j.component=O.component;if(e0(O,j,W))if(ae.asyncDep&&!ae.asyncResolved){we(ae,j,W);return}else ae.next=j,ae.update();else j.el=O.el,ae.vnode=j},Q=(O,j,W,ae,he,fe,pe)=>{const Ae=()=>{if(O.isMounted){let{next:Re,bu:k,u:N,parent:I,vnode:Y}=O;{const qe=Gg(O);if(qe){Re&&(Re.el=Y.el,we(O,Re,pe)),qe.asyncDep.then(()=>{O.isUnmounted||Ae()});return}}let ie=Re,_e;xs(O,!1),Re?(Re.el=Y.el,we(O,Re,pe)):Re=Y,k&&Nl(k),(_e=Re.props&&Re.props.onVnodeBeforeUpdate)&&Zo(_e,I,Re,Y),xs(O,!0);const Ie=Gf(O),Ue=O.subTree;O.subTree=Ie,P(Ue,Ie,g(Ue.el),de(Ue),O,he,fe),Re.el=Ie.el,ie===null&&t0(O,Ie.el),N&&Qn(N,he),(_e=Re.props&&Re.props.onVnodeUpdated)&&Qn(()=>Zo(_e,I,Re,Y),he)}else{let Re;const{el:k,props:N}=j,{bm:I,m:Y,parent:ie,root:_e,type:Ie}=O,Ue=va(j);xs(O,!1),I&&Nl(I),!Ue&&(Re=N&&N.onVnodeBeforeMount)&&Zo(Re,ie,j),xs(O,!0);{_e.ce&&_e.ce._def.shadowRoot!==!1&&_e.ce._injectChildStyle(Ie);const qe=O.subTree=Gf(O);P(null,qe,W,ae,O,he,fe),j.el=qe.el}if(Y&&Qn(Y,he),!Ue&&(Re=N&&N.onVnodeMounted)){const qe=j;Qn(()=>Zo(Re,ie,qe),he)}(j.shapeFlag&256||ie&&va(ie.vnode)&&ie.vnode.shapeFlag&256)&&O.a&&Qn(O.a,he),O.isMounted=!0,j=W=ae=null}};O.scope.on();const re=O.effect=new eg(Ae);O.scope.off();const se=O.update=re.run.bind(re),He=O.job=re.runIfDirty.bind(re);He.i=O,He.id=O.uid,re.scheduler=()=>jd(He),xs(O,!0),se()},we=(O,j,W)=>{j.component=O;const ae=O.vnode.props;O.vnode=j,O.next=null,o0(O,j.props,ae,W),a0(O,j.children,W),Ii(),Mf(O),Ti()},Oe=(O,j,W,ae,he,fe,pe,Ae,re=!1)=>{const se=O&&O.children,He=O?O.shapeFlag:0,Re=j.children,{patchFlag:k,shapeFlag:N}=j;if(k>0){if(k&128){Ke(se,Re,W,ae,he,fe,pe,Ae,re);return}else if(k&256){Qe(se,Re,W,ae,he,fe,pe,Ae,re);return}}N&8?(He&16&&Ct(se,he,fe),Re!==se&&f(W,Re)):He&16?N&16?Ke(se,Re,W,ae,he,fe,pe,Ae,re):Ct(se,he,fe,!0):(He&8&&f(W,""),N&16&&ye(Re,W,ae,he,fe,pe,Ae,re))},Qe=(O,j,W,ae,he,fe,pe,Ae,re)=>{O=O||fr,j=j||fr;const se=O.length,He=j.length,Re=Math.min(se,He);let k;for(k=0;k<Re;k++){const N=j[k]=re?qi(j[k]):Qo(j[k]);P(O[k],N,W,null,he,fe,pe,Ae,re)}se>He?Ct(O,he,fe,!0,!1,Re):ye(j,W,ae,he,fe,pe,Ae,re,Re)},Ke=(O,j,W,ae,he,fe,pe,Ae,re)=>{let se=0;const He=j.length;let Re=O.length-1,k=He-1;for(;se<=Re&&se<=k;){const N=O[se],I=j[se]=re?qi(j[se]):Qo(j[se]);if(ia(N,I))P(N,I,W,null,he,fe,pe,Ae,re);else break;se++}for(;se<=Re&&se<=k;){const N=O[Re],I=j[k]=re?qi(j[k]):Qo(j[k]);if(ia(N,I))P(N,I,W,null,he,fe,pe,Ae,re);else break;Re--,k--}if(se>Re){if(se<=k){const N=k+1,I=N<He?j[N].el:ae;for(;se<=k;)P(null,j[se]=re?qi(j[se]):Qo(j[se]),W,I,he,fe,pe,Ae,re),se++}}else if(se>k)for(;se<=Re;)vt(O[se],he,fe,!0),se++;else{const N=se,I=se,Y=new Map;for(se=I;se<=k;se++){const ot=j[se]=re?qi(j[se]):Qo(j[se]);ot.key!=null&&Y.set(ot.key,se)}let ie,_e=0;const Ie=k-I+1;let Ue=!1,qe=0;const Be=new Array(Ie);for(se=0;se<Ie;se++)Be[se]=0;for(se=N;se<=Re;se++){const ot=O[se];if(_e>=Ie){vt(ot,he,fe,!0);continue}let it;if(ot.key!=null)it=Y.get(ot.key);else for(ie=I;ie<=k;ie++)if(Be[ie-I]===0&&ia(ot,j[ie])){it=ie;break}it===void 0?vt(ot,he,fe,!0):(Be[it-I]=se+1,it>=qe?qe=it:Ue=!0,P(ot,j[it],W,null,he,fe,pe,Ae,re),_e++)}const lt=Ue?d0(Be):fr;for(ie=lt.length-1,se=Ie-1;se>=0;se--){const ot=I+se,it=j[ot],at=j[ot+1],Rt=ot+1<He?at.el||Wg(at):ae;Be[se]===0?P(null,it,W,Rt,he,fe,pe,Ae,re):Ue&&(ie<0||se!==lt[ie]?st(it,W,Rt,2):ie--)}}},st=(O,j,W,ae,he=null)=>{const{el:fe,type:pe,transition:Ae,children:re,shapeFlag:se}=O;if(se&6){st(O.component.subTree,j,W,ae);return}if(se&128){O.suspense.move(j,W,ae);return}if(se&64){pe.move(O,j,W,Se);return}if(pe===je){o(fe,j,W);for(let Re=0;Re<re.length;Re++)st(re[Re],j,W,ae);o(O.anchor,j,W);return}if(pe===Pl){H(O,j,W);return}if(ae!==2&&se&1&&Ae)if(ae===0)Ae.beforeEnter(fe),o(fe,j,W),Qn(()=>Ae.enter(fe),he);else{const{leave:Re,delayLeave:k,afterLeave:N}=Ae,I=()=>{O.ctx.isUnmounted?i(fe):o(fe,j,W)},Y=()=>{fe._isLeaving&&fe[Ab](!0),Re(fe,()=>{I(),N&&N()})};k?k(fe,I,Y):Y()}else o(fe,j,W)},vt=(O,j,W,ae=!1,he=!1)=>{const{type:fe,props:pe,ref:Ae,children:re,dynamicChildren:se,shapeFlag:He,patchFlag:Re,dirs:k,cacheIndex:N}=O;if(Re===-2&&(he=!1),Ae!=null&&(Ii(),ga(Ae,null,W,O,!0),Ti()),N!=null&&(j.renderCache[N]=void 0),He&256){j.ctx.deactivate(O);return}const I=He&1&&k,Y=!va(O);let ie;if(Y&&(ie=pe&&pe.onVnodeBeforeUnmount)&&Zo(ie,j,O),He&6)mt(O.component,W,ae);else{if(He&128){O.suspense.unmount(W,ae);return}I&&Ss(O,null,j,"beforeUnmount"),He&64?O.type.remove(O,j,W,Se,ae):se&&!se.hasOnce&&(fe!==je||Re>0&&Re&64)?Ct(se,j,W,!1,!0):(fe===je&&Re&384||!he&&He&16)&&Ct(re,j,W),ae&&yt(O)}(Y&&(ie=pe&&pe.onVnodeUnmounted)||I)&&Qn(()=>{ie&&Zo(ie,j,O),I&&Ss(O,null,j,"unmounted")},W)},yt=O=>{const{type:j,el:W,anchor:ae,transition:he}=O;if(j===je){dt(W,ae);return}if(j===Pl){M(O);return}const fe=()=>{i(W),he&&!he.persisted&&he.afterLeave&&he.afterLeave()};if(O.shapeFlag&1&&he&&!he.persisted){const{leave:pe,delayLeave:Ae}=he,re=()=>pe(W,fe);Ae?Ae(O.el,fe,re):re()}else fe()},dt=(O,j)=>{let W;for(;O!==j;)W=m(O),i(O),O=W;i(j)},mt=(O,j,W)=>{const{bum:ae,scope:he,job:fe,subTree:pe,um:Ae,m:re,a:se}=O;Kf(re),Kf(se),ae&&Nl(ae),he.stop(),fe&&(fe.flags|=8,vt(pe,O,j,W)),Ae&&Qn(Ae,j),Qn(()=>{O.isUnmounted=!0},j)},Ct=(O,j,W,ae=!1,he=!1,fe=0)=>{for(let pe=fe;pe<O.length;pe++)vt(O[pe],j,W,ae,he)},de=O=>{if(O.shapeFlag&6)return de(O.component.subTree);if(O.shapeFlag&128)return O.suspense.next();const j=m(O.anchor||O.el),W=j&&j[xg];return W?m(W):j};let me=!1;const ke=(O,j,W)=>{let ae;O==null?j._vnode&&(vt(j._vnode,null,null,!0),ae=j._vnode.component):P(j._vnode||null,O,j,null,null,null,W),j._vnode=O,me||(me=!0,Mf(ae),bg(),me=!1)},Se={p:P,um:vt,m:st,r:yt,mt:De,mc:ye,pc:Oe,pbc:Fe,n:de,o:e};return{render:ke,hydrate:void 0,createApp:Kb(ke)}}function vu({type:e,props:n},t){return t==="svg"&&e==="foreignObject"||t==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:t}function xs({effect:e,job:n},t){t?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function u0(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Vd(e,n,t=!1){const o=e.children,i=n.children;if(St(o)&&St(i))for(let s=0;s<o.length;s++){const r=o[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=qi(i[s]),a.el=r.el),!t&&a.patchFlag!==-2&&Vd(r,a)),a.type===Ec&&(a.patchFlag!==-1?a.el=r.el:a.__elIndex=s+(e.type===je?1:0)),a.type===rs&&!a.el&&(a.el=r.el)}}function d0(e){const n=e.slice(),t=[0];let o,i,s,r,a;const d=e.length;for(o=0;o<d;o++){const l=e[o];if(l!==0){if(i=t[t.length-1],e[i]<l){n[o]=i,t.push(o);continue}for(s=0,r=t.length-1;s<r;)a=s+r>>1,e[t[a]]<l?s=a+1:r=a;l<e[t[s]]&&(s>0&&(n[o]=t[s-1]),t[s]=o)}}for(s=t.length,r=t[s-1];s-- >0;)t[s]=r,r=n[r];return t}function Gg(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Gg(n)}function Kf(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}function Wg(e){if(e.placeholder)return e.placeholder;const n=e.component;return n?Wg(n.subTree):null}const Yg=e=>e.__isSuspense;function f0(e,n){n&&n.pendingBranch?St(e)?n.effects.push(...e):n.effects.push(e):bb(e)}const je=Symbol.for("v-fgt"),Ec=Symbol.for("v-txt"),rs=Symbol.for("v-cmt"),Pl=Symbol.for("v-stc"),ya=[];let ko=null;function _(e=!1){ya.push(ko=e?null:[])}function p0(){ya.pop(),ko=ya[ya.length-1]||null}let Ca=1;function Kl(e,n=!1){Ca+=e,e<0&&ko&&n&&(ko.hasOnce=!0)}function Kg(e){return e.dynamicChildren=Ca>0?ko||fr:null,p0(),Ca>0&&ko&&ko.push(e),e}function E(e,n,t,o,i,s){return Kg(c(e,n,t,o,i,s,!0))}function zn(e,n,t,o,i){return Kg(_t(e,n,t,o,i,!0))}function ql(e){return e?e.__v_isVNode===!0:!1}function ia(e,n){return e.type===n.type&&e.key===n.key}const qg=({key:e})=>e??null,jl=({ref:e,ref_key:n,ref_for:t})=>(typeof e=="number"&&(e=""+e),e!=null?yn(e)||Hn(e)||Tt(e)?{i:xo,r:e,k:n,f:!!t}:e:null);function c(e,n=null,t=null,o=0,i=null,s=e===je?0:1,r=!1,a=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&qg(n),ref:n&&jl(n),scopeId:wg,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:o,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:xo};return a?(Hd(d,t),s&128&&e.normalize(d)):t&&(d.shapeFlag|=yn(t)?8:16),Ca>0&&!r&&ko&&(d.patchFlag>0||s&6)&&d.patchFlag!==32&&ko.push(d),d}const _t=h0;function h0(e,n=null,t=null,o=0,i=null,s=!1){if((!e||e===jb)&&(e=rs),ql(e)){const a=Er(e,n,!0);return t&&Hd(a,t),Ca>0&&!s&&ko&&(a.shapeFlag&6?ko[ko.indexOf(e)]=a:ko.push(a)),a.patchFlag=-2,a}if(C0(e)&&(e=e.__vccOpts),n){n=g0(n);let{class:a,style:d}=n;a&&!yn(a)&&(n.class=pt(a)),Qt(d)&&(Pd(d)&&!St(d)&&(d=Wn({},d)),n.style=rn(d))}const r=yn(e)?1:Yg(e)?128:xb(e)?64:Qt(e)?4:Tt(e)?2:0;return c(e,n,t,o,i,r,s,!0)}function g0(e){return e?Pd(e)||jg(e)?Wn({},e):e:null}function Er(e,n,t=!1,o=!1){const{props:i,ref:s,patchFlag:r,children:a,transition:d}=e,l=n?v0(i||{},n):i,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&qg(l),ref:n&&n.ref?t&&s?St(s)?s.concat(jl(n)):[s,jl(n)]:jl(n):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==je?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Er(e.ssContent),ssFallback:e.ssFallback&&Er(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&o&&Bd(f,d.clone(f)),f}function Aa(e=" ",n=0){return _t(Ec,null,e,n)}function Zg(e,n){const t=_t(Pl,null,e);return t.staticCount=n,t}function ue(e="",n=!1){return n?(_(),zn(rs,null,e)):_t(rs,null,e)}function Qo(e){return e==null||typeof e=="boolean"?_t(rs):St(e)?_t(je,null,e.slice()):ql(e)?qi(e):_t(Ec,null,String(e))}function qi(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Er(e)}function Hd(e,n){let t=0;const{shapeFlag:o}=e;if(n==null)n=null;else if(St(n))t=16;else if(typeof n=="object")if(o&65){const i=n.default;i&&(i._c&&(i._d=!1),Hd(e,i()),i._c&&(i._d=!0));return}else{t=32;const i=n._;!i&&!jg(n)?n._ctx=xo:i===3&&xo&&(xo.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else Tt(n)?(n={default:n,_ctx:xo},t=32):(n=String(n),o&64?(t=16,n=[Aa(n)]):t=8);e.children=n,e.shapeFlag|=t}function v0(...e){const n={};for(let t=0;t<e.length;t++){const o=e[t];for(const i in o)if(i==="class")n.class!==o.class&&(n.class=pt([n.class,o.class]));else if(i==="style")n.style=rn([n.style,o.style]);else if(uc(i)){const s=n[i],r=o[i];r&&s!==r&&!(St(s)&&s.includes(r))&&(n[i]=s?[].concat(s,r):r)}else i!==""&&(n[i]=o[i])}return n}function Zo(e,n,t,o=null){ai(e,n,7,[t,o])}const m0=Mg();let y0=0;function b0(e,n,t){const o=e.type,i=(n?n.appContext:e.appContext)||m0,s={uid:y0++,vnode:e,type:o,parent:n,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(i.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ug(o,i),emitsOptions:Ng(o,i),emit:null,emitted:null,propsDefaults:Jt,inheritAttrs:o.inheritAttrs,ctx:Jt,data:Jt,props:Jt,attrs:Jt,slots:Jt,refs:Jt,setupState:Jt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=n?n.root:s,s.emit=Zb.bind(null,s),e.ce&&e.ce(s),s}let Vn=null;const _0=()=>Vn||xo;let Zl,ld;{const e=gc(),n=(t,o)=>{let i;return(i=e[t])||(i=e[t]=[]),i.push(o),s=>{i.length>1?i.forEach(r=>r(s)):i[0](s)}};Zl=n("__VUE_INSTANCE_SETTERS__",t=>Vn=t),ld=n("__VUE_SSR_SETTERS__",t=>$a=t)}const Va=e=>{const n=Vn;return Zl(e),e.scope.on(),()=>{e.scope.off(),Zl(n)}},qf=()=>{Vn&&Vn.scope.off(),Zl(null)};function Xg(e){return e.vnode.shapeFlag&4}let $a=!1;function w0(e,n=!1,t=!1){n&&ld(n);const{props:o,children:i}=e.vnode,s=Xg(e);n0(e,o,s,n),r0(e,i,t||n);const r=s?E0(e,n):void 0;return n&&ld(!1),r}function E0(e,n){const t=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ub);const{setup:o}=t;if(o){Ii();const i=e.setupContext=o.length>1?x0(e):null,s=Va(e),r=za(o,e,0,[e.props,i]),a=Yh(r);if(Ti(),s(),(a||e.sp)&&!va(e)&&$g(e),a){if(r.then(qf,qf),n)return r.then(d=>{Zf(e,d)}).catch(d=>{bc(d,e,0)});e.asyncDep=r}else Zf(e,r)}else Jg(e)}function Zf(e,n,t){Tt(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:Qt(n)&&(e.setupState=vg(n)),Jg(e)}function Jg(e,n,t){const o=e.type;e.render||(e.render=o.render||ti);{const i=Va(e);Ii();try{zb(e)}finally{Ti(),i()}}}const S0={get(e,n){return Un(e,"get",""),e[n]}};function x0(e){const n=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,S0),slots:e.slots,emit:e.emit,expose:n}}function Sc(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(vg(cb(e.exposed)),{get(n,t){if(t in n)return n[t];if(t in ma)return ma[t](e)},has(n,t){return t in n||t in ma}})):e.proxy}function k0(e,n=!0){return Tt(e)?e.displayName||e.name:e.name||n&&e.__name}function C0(e){return Tt(e)&&"__vccOpts"in e}const A=(e,n)=>hb(e,n,$a);function Qg(e,n,t){try{Kl(-1);const o=arguments.length;return o===2?Qt(n)&&!St(n)?ql(n)?_t(e,null,[n]):_t(e,n):_t(e,null,n):(o>3?t=Array.prototype.slice.call(arguments,2):o===3&&ql(t)&&(t=[t]),_t(e,n,t))}finally{Kl(1)}}const A0="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cd;const Xf=typeof window<"u"&&window.trustedTypes;if(Xf)try{cd=Xf.createPolicy("vue",{createHTML:e=>e})}catch{}const ev=cd?e=>cd.createHTML(e):e=>e,$0="http://www.w3.org/2000/svg",I0="http://www.w3.org/1998/Math/MathML",Si=typeof document<"u"?document:null,Jf=Si&&Si.createElement("template"),T0={insert:(e,n,t)=>{n.insertBefore(e,t||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,t,o)=>{const i=n==="svg"?Si.createElementNS($0,e):n==="mathml"?Si.createElementNS(I0,e):t?Si.createElement(e,{is:t}):Si.createElement(e);return e==="select"&&o&&o.multiple!=null&&i.setAttribute("multiple",o.multiple),i},createText:e=>Si.createTextNode(e),createComment:e=>Si.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Si.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,t,o,i,s){const r=t?t.previousSibling:n.lastChild;if(i&&(i===s||i.nextSibling))for(;n.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{Jf.innerHTML=ev(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const a=Jf.content;if(o==="svg"||o==="mathml"){const d=a.firstChild;for(;d.firstChild;)a.appendChild(d.firstChild);a.removeChild(d)}n.insertBefore(a,t)}return[r?r.nextSibling:n.firstChild,t?t.previousSibling:n.lastChild]}},R0=Symbol("_vtc");function F0(e,n,t){const o=e[R0];o&&(n=(n?[n,...o]:[...o]).join(" ")),n==null?e.removeAttribute("class"):t?e.setAttribute("class",n):e.className=n}const Qf=Symbol("_vod"),O0=Symbol("_vsh"),L0=Symbol(""),M0=/(?:^|;)\s*display\s*:/;function N0(e,n,t){const o=e.style,i=yn(t);let s=!1;if(t&&!i){if(n)if(yn(n))for(const r of n.split(";")){const a=r.slice(0,r.indexOf(":")).trim();t[a]==null&&Bl(o,a,"")}else for(const r in n)t[r]==null&&Bl(o,r,"");for(const r in t)r==="display"&&(s=!0),Bl(o,r,t[r])}else if(i){if(n!==t){const r=o[L0];r&&(t+=";"+r),o.cssText=t,s=M0.test(t)}}else n&&e.removeAttribute("style");Qf in e&&(e[Qf]=s?o.display:"",e[O0]&&(o.display="none"))}const ep=/\s*!important$/;function Bl(e,n,t){if(St(t))t.forEach(o=>Bl(e,n,o));else if(t==null&&(t=""),n.startsWith("--"))e.setProperty(n,t);else{const o=D0(e,n);ep.test(t)?e.setProperty(ls(o),t.replace(ep,""),"important"):e[o]=t}}const tp=["Webkit","Moz","ms"],mu={};function D0(e,n){const t=mu[n];if(t)return t;let o=Do(n);if(o!=="filter"&&o in e)return mu[n]=o;o=pc(o);for(let i=0;i<tp.length;i++){const s=tp[i]+o;if(s in e)return mu[n]=s}return n}const np="http://www.w3.org/1999/xlink";function op(e,n,t,o,i,s=By(n)){o&&n.startsWith("xlink:")?t==null?e.removeAttributeNS(np,n.slice(6,n.length)):e.setAttributeNS(np,n,t):t==null||s&&!Xh(t)?e.removeAttribute(n):e.setAttribute(n,s?"":ri(t)?String(t):t)}function ip(e,n,t,o,i){if(n==="innerHTML"||n==="textContent"){t!=null&&(e[n]=n==="innerHTML"?ev(t):t);return}const s=e.tagName;if(n==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,d=t==null?e.type==="checkbox"?"on":"":String(t);(a!==d||!("_value"in e))&&(e.value=d),t==null&&e.removeAttribute(n),e._value=t;return}let r=!1;if(t===""||t==null){const a=typeof e[n];a==="boolean"?t=Xh(t):t==null&&a==="string"?(t="",r=!0):a==="number"&&(t=0,r=!0)}try{e[n]=t}catch{}r&&e.removeAttribute(i||n)}function Cs(e,n,t,o){e.addEventListener(n,t,o)}function P0(e,n,t,o){e.removeEventListener(n,t,o)}const sp=Symbol("_vei");function j0(e,n,t,o,i=null){const s=e[sp]||(e[sp]={}),r=s[n];if(o&&r)r.value=o;else{const[a,d]=B0(n);if(o){const l=s[n]=V0(o,i);Cs(e,a,l,d)}else r&&(P0(e,a,r,d),s[n]=void 0)}}const rp=/(?:Once|Passive|Capture)$/;function B0(e){let n;if(rp.test(e)){n={};let o;for(;o=e.match(rp);)e=e.slice(0,e.length-o[0].length),n[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ls(e.slice(2)),n]}let yu=0;const U0=Promise.resolve(),z0=()=>yu||(U0.then(()=>yu=0),yu=Date.now());function V0(e,n){const t=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=t.attached)return;ai(H0(o,t.value),n,5,[o])};return t.value=e,t.attached=z0(),t}function H0(e,n){if(St(n)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},n.map(o=>i=>!i._stopped&&o&&o(i))}else return n}const ap=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,G0=(e,n,t,o,i,s)=>{const r=i==="svg";n==="class"?F0(e,o,r):n==="style"?N0(e,t,o):uc(n)?Id(n)||j0(e,n,t,o,s):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):W0(e,n,o,r))?(ip(e,n,o),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&op(e,n,o,r,s,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!yn(o))?ip(e,Do(n),o,s,n):(n==="true-value"?e._trueValue=o:n==="false-value"&&(e._falseValue=o),op(e,n,o,r))};function W0(e,n,t,o){if(o)return!!(n==="innerHTML"||n==="textContent"||n in e&&ap(n)&&Tt(t));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="sandbox"&&e.tagName==="IFRAME"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return ap(n)&&yn(t)?!1:n in e}const Xl=e=>{const n=e.props["onUpdate:modelValue"]||!1;return St(n)?t=>Nl(n,t):n};function Y0(e){e.target.composing=!0}function lp(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const vr=Symbol("_assign");function cp(e,n,t){return n&&(e=e.trim()),t&&(e=hc(e)),e}const to={created(e,{modifiers:{lazy:n,trim:t,number:o}},i){e[vr]=Xl(i);const s=o||i.props&&i.props.type==="number";Cs(e,n?"change":"input",r=>{r.target.composing||e[vr](cp(e.value,t,s))}),(t||s)&&Cs(e,"change",()=>{e.value=cp(e.value,t,s)}),n||(Cs(e,"compositionstart",Y0),Cs(e,"compositionend",lp),Cs(e,"change",lp))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:t,modifiers:{lazy:o,trim:i,number:s}},r){if(e[vr]=Xl(r),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?hc(e.value):e.value,d=n??"";a!==d&&(document.activeElement===e&&e.type!=="range"&&(o&&n===t||i&&e.value.trim()===d)||(e.value=d))}},up={deep:!0,created(e,{value:n,modifiers:{number:t}},o){const i=dc(n);Cs(e,"change",()=>{const s=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>t?hc(Jl(r)):Jl(r));e[vr](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,Ao(()=>{e._assigning=!1})}),e[vr]=Xl(o)},mounted(e,{value:n}){dp(e,n)},beforeUpdate(e,n,t){e[vr]=Xl(t)},updated(e,{value:n}){e._assigning||dp(e,n)}};function dp(e,n){const t=e.multiple,o=St(n);if(!(t&&!o&&!dc(n))){for(let i=0,s=e.options.length;i<s;i++){const r=e.options[i],a=Jl(r);if(t)if(o){const d=typeof a;d==="string"||d==="number"?r.selected=n.some(l=>String(l)===String(a)):r.selected=zy(n,a)>-1}else r.selected=n.has(a);else if(vc(Jl(r),n)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!t&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Jl(e){return"_value"in e?e._value:e.value}const K0=["ctrl","shift","alt","meta"],q0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>K0.some(t=>e[`${t}Key`]&&!n.includes(t))},Et=(e,n)=>{const t=e._withMods||(e._withMods={}),o=n.join(".");return t[o]||(t[o]=(i,...s)=>{for(let r=0;r<n.length;r++){const a=q0[n[r]];if(a&&a(i,n))return}return e(i,...s)})},Z0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Qs=(e,n)=>{const t=e._withKeys||(e._withKeys={}),o=n.join(".");return t[o]||(t[o]=i=>{if(!("key"in i))return;const s=ls(i.key);if(n.some(r=>r===s||Z0[r]===s))return e(i)})},X0=Wn({patchProp:G0},T0);let fp;function J0(){return fp||(fp=l0(X0))}const Q0=(...e)=>{const n=J0().createApp(...e),{mount:t}=n;return n.mount=o=>{const i=t_(o);if(!i)return;const s=n._component;!Tt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=t(i,!1,e_(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},n};function e_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function t_(e){return yn(e)?document.querySelector(e):e}const n_=""+new URL("../ECD_logo.png",import.meta.url).href;/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const rr=typeof document<"u";function tv(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function o_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&tv(e.default)}const Wt=Object.assign;function bu(e,n){const t={};for(const o in n){const i=n[o];t[o]=Yo(i)?i.map(e):e(i)}return t}const ba=()=>{},Yo=Array.isArray;function pp(e,n){const t={};for(const o in e)t[o]=o in n?n[o]:e[o];return t}const nv=/#/g,i_=/&/g,s_=/\//g,r_=/=/g,a_=/\?/g,ov=/\+/g,l_=/%5B/g,c_=/%5D/g,iv=/%5E/g,u_=/%60/g,sv=/%7B/g,d_=/%7C/g,rv=/%7D/g,f_=/%20/g;function Gd(e){return e==null?"":encodeURI(""+e).replace(d_,"|").replace(l_,"[").replace(c_,"]")}function p_(e){return Gd(e).replace(sv,"{").replace(rv,"}").replace(iv,"^")}function ud(e){return Gd(e).replace(ov,"%2B").replace(f_,"+").replace(nv,"%23").replace(i_,"%26").replace(u_,"`").replace(sv,"{").replace(rv,"}").replace(iv,"^")}function h_(e){return ud(e).replace(r_,"%3D")}function g_(e){return Gd(e).replace(nv,"%23").replace(a_,"%3F")}function v_(e){return g_(e).replace(s_,"%2F")}function Ia(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const m_=/\/$/,y_=e=>e.replace(m_,"");function _u(e,n,t="/"){let o,i={},s="",r="";const a=n.indexOf("#");let d=n.indexOf("?");return d=a>=0&&d>a?-1:d,d>=0&&(o=n.slice(0,d),s=n.slice(d,a>0?a:n.length),i=e(s.slice(1))),a>=0&&(o=o||n.slice(0,a),r=n.slice(a,n.length)),o=E_(o??n,t),{fullPath:o+s+r,path:o,query:i,hash:Ia(r)}}function b_(e,n){const t=n.query?e(n.query):"";return n.path+(t&&"?")+t+(n.hash||"")}function hp(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function __(e,n,t){const o=n.matched.length-1,i=t.matched.length-1;return o>-1&&o===i&&Sr(n.matched[o],t.matched[i])&&av(n.params,t.params)&&e(n.query)===e(t.query)&&n.hash===t.hash}function Sr(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function av(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var t in e)if(!w_(e[t],n[t]))return!1;return!0}function w_(e,n){return Yo(e)?gp(e,n):Yo(n)?gp(n,e):(e==null?void 0:e.valueOf())===(n==null?void 0:n.valueOf())}function gp(e,n){return Yo(n)?e.length===n.length&&e.every((t,o)=>t===n[o]):e.length===1&&e[0]===n}function E_(e,n){if(e.startsWith("/"))return e;if(!e)return n;const t=n.split("/"),o=e.split("/"),i=o[o.length-1];(i===".."||i===".")&&o.push("");let s=t.length-1,r,a;for(r=0;r<o.length;r++)if(a=o[r],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+o.slice(r).join("/")}const Hi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let dd=function(e){return e.pop="pop",e.push="push",e}({}),wu=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function S_(e){if(!e)if(rr){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),y_(e)}const x_=/^[^#]+#/;function k_(e,n){return e.replace(x_,"#")+n}function C_(e,n){const t=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:n.behavior,left:o.left-t.left-(n.left||0),top:o.top-t.top-(n.top||0)}}const xc=()=>({left:window.scrollX,top:window.scrollY});function A_(e){let n;if("el"in e){const t=e.el,o=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?o?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;n=C_(i,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function vp(e,n){return(history.state?history.state.position-n:-1)+e}const fd=new Map;function $_(e,n){fd.set(e,n)}function I_(e){const n=fd.get(e);return fd.delete(e),n}function T_(e){return typeof e=="string"||e&&typeof e=="object"}function lv(e){return typeof e=="string"||typeof e=="symbol"}let pn=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const cv=Symbol("");pn.MATCHER_NOT_FOUND+"",pn.NAVIGATION_GUARD_REDIRECT+"",pn.NAVIGATION_ABORTED+"",pn.NAVIGATION_CANCELLED+"",pn.NAVIGATION_DUPLICATED+"";function xr(e,n){return Wt(new Error,{type:e,[cv]:!0},n)}function wi(e,n){return e instanceof Error&&cv in e&&(n==null||!!(e.type&n))}const R_=["params","query","hash"];function F_(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const n={};for(const t of R_)t in e&&(n[t]=e[t]);return JSON.stringify(n,null,2)}function O_(e){const n={};if(e===""||e==="?")return n;const t=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<t.length;++o){const i=t[o].replace(ov," "),s=i.indexOf("="),r=Ia(s<0?i:i.slice(0,s)),a=s<0?null:Ia(i.slice(s+1));if(r in n){let d=n[r];Yo(d)||(d=n[r]=[d]),d.push(a)}else n[r]=a}return n}function mp(e){let n="";for(let t in e){const o=e[t];if(t=h_(t),o==null){o!==void 0&&(n+=(n.length?"&":"")+t);continue}(Yo(o)?o.map(i=>i&&ud(i)):[o&&ud(o)]).forEach(i=>{i!==void 0&&(n+=(n.length?"&":"")+t,i!=null&&(n+="="+i))})}return n}function L_(e){const n={};for(const t in e){const o=e[t];o!==void 0&&(n[t]=Yo(o)?o.map(i=>i==null?null:""+i):o==null?o:""+o)}return n}const M_=Symbol(""),yp=Symbol(""),kc=Symbol(""),Wd=Symbol(""),pd=Symbol("");function sa(){let e=[];function n(o){return e.push(o),()=>{const i=e.indexOf(o);i>-1&&e.splice(i,1)}}function t(){e=[]}return{add:n,list:()=>e.slice(),reset:t}}function Zi(e,n,t,o,i,s=r=>r()){const r=o&&(o.enterCallbacks[i]=o.enterCallbacks[i]||[]);return()=>new Promise((a,d)=>{const l=m=>{m===!1?d(xr(pn.NAVIGATION_ABORTED,{from:t,to:n})):m instanceof Error?d(m):T_(m)?d(xr(pn.NAVIGATION_GUARD_REDIRECT,{from:n,to:m})):(r&&o.enterCallbacks[i]===r&&typeof m=="function"&&r.push(m),a())},f=s(()=>e.call(o&&o.instances[i],n,t,l));let g=Promise.resolve(f);e.length<3&&(g=g.then(l)),g.catch(m=>d(m))})}function Eu(e,n,t,o,i=s=>s()){const s=[];for(const r of e)for(const a in r.components){let d=r.components[a];if(!(n!=="beforeRouteEnter"&&!r.instances[a]))if(tv(d)){const l=(d.__vccOpts||d)[n];l&&s.push(Zi(l,t,o,r,a,i))}else{let l=d();s.push(()=>l.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${a}" at "${r.path}"`);const g=o_(f)?f.default:f;r.mods[a]=f,r.components[a]=g;const m=(g.__vccOpts||g)[n];return m&&Zi(m,t,o,r,a,i)()}))}}return s}function N_(e,n){const t=[],o=[],i=[],s=Math.max(n.matched.length,e.matched.length);for(let r=0;r<s;r++){const a=n.matched[r];a&&(e.matched.find(l=>Sr(l,a))?o.push(a):t.push(a));const d=e.matched[r];d&&(n.matched.find(l=>Sr(l,d))||i.push(d))}return[t,o,i]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let D_=()=>location.protocol+"//"+location.host;function uv(e,n){const{pathname:t,search:o,hash:i}=n,s=e.indexOf("#");if(s>-1){let r=i.includes(e.slice(s))?e.slice(s).length:1,a=i.slice(r);return a[0]!=="/"&&(a="/"+a),hp(a,"")}return hp(t,e)+o+i}function P_(e,n,t,o){let i=[],s=[],r=null;const a=({state:m})=>{const v=uv(e,location),T=t.value,P=n.value;let w=0;if(m){if(t.value=v,n.value=m,r&&r===T){r=null;return}w=P?m.position-P.position:0}else o(v);i.forEach(C=>{C(t.value,T,{delta:w,type:dd.pop,direction:w?w>0?wu.forward:wu.back:wu.unknown})})};function d(){r=t.value}function l(m){i.push(m);const v=()=>{const T=i.indexOf(m);T>-1&&i.splice(T,1)};return s.push(v),v}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Wt({},m.state,{scroll:xc()}),"")}}function g(){for(const m of s)m();s=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:d,listen:l,destroy:g}}function bp(e,n,t,o=!1,i=!1){return{back:e,current:n,forward:t,replaced:o,position:window.history.length,scroll:i?xc():null}}function j_(e){const{history:n,location:t}=window,o={value:uv(e,t)},i={value:n.state};i.value||s(o.value,{back:null,current:o.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function s(d,l,f){const g=e.indexOf("#"),m=g>-1?(t.host&&document.querySelector("base")?e:e.slice(g))+d:D_()+e+d;try{n[f?"replaceState":"pushState"](l,"",m),i.value=l}catch(v){console.error(v),t[f?"replace":"assign"](m)}}function r(d,l){s(d,Wt({},n.state,bp(i.value.back,d,i.value.forward,!0),l,{position:i.value.position}),!0),o.value=d}function a(d,l){const f=Wt({},i.value,n.state,{forward:d,scroll:xc()});s(f.current,f,!0),s(d,Wt({},bp(o.value,d,null),{position:f.position+1},l),!1),o.value=d}return{location:o,state:i,push:a,replace:r}}function B_(e){e=S_(e);const n=j_(e),t=P_(e,n.state,n.location,n.replace);function o(s,r=!0){r||t.pauseListeners(),history.go(s)}const i=Wt({location:"",base:e,go:o,createHref:k_.bind(null,e)},n,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>n.state.value}),i}function U_(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),B_(e)}let As=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var An=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(An||{});const z_={type:As.Static,value:""},V_=/[a-zA-Z0-9_]/;function H_(e){if(!e)return[[]];if(e==="/")return[[z_]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(v){throw new Error(`ERR (${t})/"${l}": ${v}`)}let t=An.Static,o=t;const i=[];let s;function r(){s&&i.push(s),s=[]}let a=0,d,l="",f="";function g(){l&&(t===An.Static?s.push({type:As.Static,value:l}):t===An.Param||t===An.ParamRegExp||t===An.ParamRegExpEnd?(s.length>1&&(d==="*"||d==="+")&&n(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:As.Param,value:l,regexp:f,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):n("Invalid state to consume buffer"),l="")}function m(){l+=d}for(;a<e.length;){if(d=e[a++],d==="\\"&&t!==An.ParamRegExp){o=t,t=An.EscapeNext;continue}switch(t){case An.Static:d==="/"?(l&&g(),r()):d===":"?(g(),t=An.Param):m();break;case An.EscapeNext:m(),t=o;break;case An.Param:d==="("?t=An.ParamRegExp:V_.test(d)?m():(g(),t=An.Static,d!=="*"&&d!=="?"&&d!=="+"&&a--);break;case An.ParamRegExp:d===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+d:t=An.ParamRegExpEnd:f+=d;break;case An.ParamRegExpEnd:g(),t=An.Static,d!=="*"&&d!=="?"&&d!=="+"&&a--,f="";break;default:n("Unknown state");break}}return t===An.ParamRegExp&&n(`Unfinished custom RegExp for param "${l}"`),g(),r(),i}const _p="[^/]+?",G_={sensitive:!1,strict:!1,start:!0,end:!0};var eo=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(eo||{});const W_=/[.+*?^${}()[\]/\\]/g;function Y_(e,n){const t=Wt({},G_,n),o=[];let i=t.start?"^":"";const s=[];for(const l of e){const f=l.length?[]:[eo.Root];t.strict&&!l.length&&(i+="/");for(let g=0;g<l.length;g++){const m=l[g];let v=eo.Segment+(t.sensitive?eo.BonusCaseSensitive:0);if(m.type===As.Static)g||(i+="/"),i+=m.value.replace(W_,"\\$&"),v+=eo.Static;else if(m.type===As.Param){const{value:T,repeatable:P,optional:w,regexp:C}=m;s.push({name:T,repeatable:P,optional:w});const $=C||_p;if($!==_p){v+=eo.BonusCustomRegExp;try{`${$}`}catch(M){throw new Error(`Invalid custom RegExp for param "${T}" (${$}): `+M.message)}}let H=P?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;g||(H=w&&l.length<2?`(?:/${H})`:"/"+H),w&&(H+="?"),i+=H,v+=eo.Dynamic,w&&(v+=eo.BonusOptional),P&&(v+=eo.BonusRepeatable),$===".*"&&(v+=eo.BonusWildcard)}f.push(v)}o.push(f)}if(t.strict&&t.end){const l=o.length-1;o[l][o[l].length-1]+=eo.BonusStrict}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const r=new RegExp(i,t.sensitive?"":"i");function a(l){const f=l.match(r),g={};if(!f)return null;for(let m=1;m<f.length;m++){const v=f[m]||"",T=s[m-1];g[T.name]=v&&T.repeatable?v.split("/"):v}return g}function d(l){let f="",g=!1;for(const m of e){(!g||!f.endsWith("/"))&&(f+="/"),g=!1;for(const v of m)if(v.type===As.Static)f+=v.value;else if(v.type===As.Param){const{value:T,repeatable:P,optional:w}=v,C=T in l?l[T]:"";if(Yo(C)&&!P)throw new Error(`Provided param "${T}" is an array but it is not repeatable (* or + modifiers)`);const $=Yo(C)?C.join("/"):C;if(!$)if(w)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):g=!0);else throw new Error(`Missing required param "${T}"`);f+=$}}return f||"/"}return{re:r,score:o,keys:s,parse:a,stringify:d}}function K_(e,n){let t=0;for(;t<e.length&&t<n.length;){const o=n[t]-e[t];if(o)return o;t++}return e.length<n.length?e.length===1&&e[0]===eo.Static+eo.Segment?-1:1:e.length>n.length?n.length===1&&n[0]===eo.Static+eo.Segment?1:-1:0}function dv(e,n){let t=0;const o=e.score,i=n.score;for(;t<o.length&&t<i.length;){const s=K_(o[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-o.length)===1){if(wp(o))return 1;if(wp(i))return-1}return i.length-o.length}function wp(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const q_={strict:!1,end:!0,sensitive:!1};function Z_(e,n,t){const o=Y_(H_(e.path),t),i=Wt(o,{record:e,parent:n,children:[],alias:[]});return n&&!i.record.aliasOf==!n.record.aliasOf&&n.children.push(i),i}function X_(e,n){const t=[],o=new Map;n=pp(q_,n);function i(g){return o.get(g)}function s(g,m,v){const T=!v,P=Sp(g);P.aliasOf=v&&v.record;const w=pp(n,g),C=[P];if("alias"in g){const M=typeof g.alias=="string"?[g.alias]:g.alias;for(const ee of M)C.push(Sp(Wt({},P,{components:v?v.record.components:P.components,path:ee,aliasOf:v?v.record:P})))}let $,H;for(const M of C){const{path:ee}=M;if(m&&ee[0]!=="/"){const oe=m.record.path,Z=oe[oe.length-1]==="/"?"":"/";M.path=m.record.path+(ee&&Z+ee)}if($=Z_(M,m,w),v?v.alias.push($):(H=H||$,H!==$&&H.alias.push($),T&&g.name&&!xp($)&&r(g.name)),fv($)&&d($),P.children){const oe=P.children;for(let Z=0;Z<oe.length;Z++)s(oe[Z],$,v&&v.children[Z])}v=v||$}return H?()=>{r(H)}:ba}function r(g){if(lv(g)){const m=o.get(g);m&&(o.delete(g),t.splice(t.indexOf(m),1),m.children.forEach(r),m.alias.forEach(r))}else{const m=t.indexOf(g);m>-1&&(t.splice(m,1),g.record.name&&o.delete(g.record.name),g.children.forEach(r),g.alias.forEach(r))}}function a(){return t}function d(g){const m=ew(g,t);t.splice(m,0,g),g.record.name&&!xp(g)&&o.set(g.record.name,g)}function l(g,m){let v,T={},P,w;if("name"in g&&g.name){if(v=o.get(g.name),!v)throw xr(pn.MATCHER_NOT_FOUND,{location:g});w=v.record.name,T=Wt(Ep(m.params,v.keys.filter(H=>!H.optional).concat(v.parent?v.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),g.params&&Ep(g.params,v.keys.map(H=>H.name))),P=v.stringify(T)}else if(g.path!=null)P=g.path,v=t.find(H=>H.re.test(P)),v&&(T=v.parse(P),w=v.record.name);else{if(v=m.name?o.get(m.name):t.find(H=>H.re.test(m.path)),!v)throw xr(pn.MATCHER_NOT_FOUND,{location:g,currentLocation:m});w=v.record.name,T=Wt({},m.params,g.params),P=v.stringify(T)}const C=[];let $=v;for(;$;)C.unshift($.record),$=$.parent;return{name:w,path:P,params:T,matched:C,meta:Q_(C)}}e.forEach(g=>s(g));function f(){t.length=0,o.clear()}return{addRoute:s,resolve:l,removeRoute:r,clearRoutes:f,getRoutes:a,getRecordMatcher:i}}function Ep(e,n){const t={};for(const o of n)o in e&&(t[o]=e[o]);return t}function Sp(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:J_(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function J_(e){const n={},t=e.props||!1;if("component"in e)n.default=t;else for(const o in e.components)n[o]=typeof t=="object"?t[o]:t;return n}function xp(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Q_(e){return e.reduce((n,t)=>Wt(n,t.meta),{})}function ew(e,n){let t=0,o=n.length;for(;t!==o;){const s=t+o>>1;dv(e,n[s])<0?o=s:t=s+1}const i=tw(e);return i&&(o=n.lastIndexOf(i,o-1)),o}function tw(e){let n=e;for(;n=n.parent;)if(fv(n)&&dv(e,n)===0)return n}function fv({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function kp(e){const n=No(kc),t=No(Wd),o=A(()=>{const d=Ft(e.to);return n.resolve(d)}),i=A(()=>{const{matched:d}=o.value,{length:l}=d,f=d[l-1],g=t.matched;if(!f||!g.length)return-1;const m=g.findIndex(Sr.bind(null,f));if(m>-1)return m;const v=Cp(d[l-2]);return l>1&&Cp(f)===v&&g[g.length-1].path!==v?g.findIndex(Sr.bind(null,d[l-2])):m}),s=A(()=>i.value>-1&&rw(t.params,o.value.params)),r=A(()=>i.value>-1&&i.value===t.matched.length-1&&av(t.params,o.value.params));function a(d={}){if(sw(d)){const l=n[Ft(e.replace)?"replace":"push"](Ft(e.to)).catch(ba);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:o,href:A(()=>o.value.href),isActive:s,isExactActive:r,navigate:a}}function nw(e){return e.length===1?e[0]:e}const ow=Ag({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:kp,setup(e,{slots:n}){const t=yc(kp(e)),{options:o}=No(kc),i=A(()=>({[Ap(e.activeClass,o.linkActiveClass,"router-link-active")]:t.isActive,[Ap(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=n.default&&nw(n.default(t));return e.custom?s:Qg("a",{"aria-current":t.isExactActive?e.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),iw=ow;function sw(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function rw(e,n){for(const t in n){const o=n[t],i=e[t];if(typeof o=="string"){if(o!==i)return!1}else if(!Yo(i)||i.length!==o.length||o.some((s,r)=>s.valueOf()!==i[r].valueOf()))return!1}return!0}function Cp(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ap=(e,n,t)=>e??n??t,aw=Ag({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:t}){const o=No(pd),i=A(()=>e.route||o.value),s=No(yp,0),r=A(()=>{let l=Ft(s);const{matched:f}=i.value;let g;for(;(g=f[l])&&!g.components;)l++;return l}),a=A(()=>i.value.matched[r.value]);pa(yp,A(()=>r.value+1)),pa(M_,a),pa(pd,i);const d=K();return nt(()=>[d.value,a.value,e.name],([l,f,g],[m,v,T])=>{f&&(f.instances[g]=l,v&&v!==f&&l&&l===m&&(f.leaveGuards.size||(f.leaveGuards=v.leaveGuards),f.updateGuards.size||(f.updateGuards=v.updateGuards))),l&&f&&(!v||!Sr(f,v)||!m)&&(f.enterCallbacks[g]||[]).forEach(P=>P(l))},{flush:"post"}),()=>{const l=i.value,f=e.name,g=a.value,m=g&&g.components[f];if(!m)return $p(t.default,{Component:m,route:l});const v=g.props[f],T=v?v===!0?l.params:typeof v=="function"?v(l):v:null,w=Qg(m,Wt({},T,n,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(g.instances[f]=null)},ref:d}));return $p(t.default,{Component:w,route:l})||w}}});function $p(e,n){if(!e)return null;const t=e(n);return t.length===1?t[0]:t}const pv=aw;function lw(e){const n=X_(e.routes,e),t=e.parseQuery||O_,o=e.stringifyQuery||mp,i=e.history,s=sa(),r=sa(),a=sa(),d=ub(Hi);let l=Hi;rr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=bu.bind(null,de=>""+de),g=bu.bind(null,v_),m=bu.bind(null,Ia);function v(de,me){let ke,Se;return lv(de)?(ke=n.getRecordMatcher(de),Se=me):Se=de,n.addRoute(Se,ke)}function T(de){const me=n.getRecordMatcher(de);me&&n.removeRoute(me)}function P(){return n.getRoutes().map(de=>de.record)}function w(de){return!!n.getRecordMatcher(de)}function C(de,me){if(me=Wt({},me||d.value),typeof de=="string"){const W=_u(t,de,me.path),ae=n.resolve({path:W.path},me),he=i.createHref(W.fullPath);return Wt(W,ae,{params:m(ae.params),hash:Ia(W.hash),redirectedFrom:void 0,href:he})}let ke;if(de.path!=null)ke=Wt({},de,{path:_u(t,de.path,me.path).path});else{const W=Wt({},de.params);for(const ae in W)W[ae]==null&&delete W[ae];ke=Wt({},de,{params:g(W)}),me.params=g(me.params)}const Se=n.resolve(ke,me),Me=de.hash||"";Se.params=f(m(Se.params));const O=b_(o,Wt({},de,{hash:p_(Me),path:Se.path})),j=i.createHref(O);return Wt({fullPath:O,hash:Me,query:o===mp?L_(de.query):de.query||{}},Se,{redirectedFrom:void 0,href:j})}function $(de){return typeof de=="string"?_u(t,de,d.value.path):Wt({},de)}function H(de,me){if(l!==de)return xr(pn.NAVIGATION_CANCELLED,{from:me,to:de})}function M(de){return Z(de)}function ee(de){return M(Wt($(de),{replace:!0}))}function oe(de,me){const ke=de.matched[de.matched.length-1];if(ke&&ke.redirect){const{redirect:Se}=ke;let Me=typeof Se=="function"?Se(de,me):Se;return typeof Me=="string"&&(Me=Me.includes("?")||Me.includes("#")?Me=$(Me):{path:Me},Me.params={}),Wt({query:de.query,hash:de.hash,params:Me.path!=null?{}:de.params},Me)}}function Z(de,me){const ke=l=C(de),Se=d.value,Me=de.state,O=de.force,j=de.replace===!0,W=oe(ke,Se);if(W)return Z(Wt($(W),{state:typeof W=="object"?Wt({},Me,W.state):Me,force:O,replace:j}),me||ke);const ae=ke;ae.redirectedFrom=me;let he;return!O&&__(o,Se,ke)&&(he=xr(pn.NAVIGATION_DUPLICATED,{to:ae,from:Se}),st(Se,Se,!0,!1)),(he?Promise.resolve(he):Fe(ae,Se)).catch(fe=>wi(fe)?wi(fe,pn.NAVIGATION_GUARD_REDIRECT)?fe:Ke(fe):Oe(fe,ae,Se)).then(fe=>{if(fe){if(wi(fe,pn.NAVIGATION_GUARD_REDIRECT))return Z(Wt({replace:j},$(fe.to),{state:typeof fe.to=="object"?Wt({},Me,fe.to.state):Me,force:O}),me||ae)}else fe=We(ae,Se,!0,j,Me);return Le(ae,Se,fe),fe})}function ye(de,me){const ke=H(de,me);return ke?Promise.reject(ke):Promise.resolve()}function Ce(de){const me=dt.values().next().value;return me&&typeof me.runWithContext=="function"?me.runWithContext(de):de()}function Fe(de,me){let ke;const[Se,Me,O]=N_(de,me);ke=Eu(Se.reverse(),"beforeRouteLeave",de,me);for(const W of Se)W.leaveGuards.forEach(ae=>{ke.push(Zi(ae,de,me))});const j=ye.bind(null,de,me);return ke.push(j),Ct(ke).then(()=>{ke=[];for(const W of s.list())ke.push(Zi(W,de,me));return ke.push(j),Ct(ke)}).then(()=>{ke=Eu(Me,"beforeRouteUpdate",de,me);for(const W of Me)W.updateGuards.forEach(ae=>{ke.push(Zi(ae,de,me))});return ke.push(j),Ct(ke)}).then(()=>{ke=[];for(const W of O)if(W.beforeEnter)if(Yo(W.beforeEnter))for(const ae of W.beforeEnter)ke.push(Zi(ae,de,me));else ke.push(Zi(W.beforeEnter,de,me));return ke.push(j),Ct(ke)}).then(()=>(de.matched.forEach(W=>W.enterCallbacks={}),ke=Eu(O,"beforeRouteEnter",de,me,Ce),ke.push(j),Ct(ke))).then(()=>{ke=[];for(const W of r.list())ke.push(Zi(W,de,me));return ke.push(j),Ct(ke)}).catch(W=>wi(W,pn.NAVIGATION_CANCELLED)?W:Promise.reject(W))}function Le(de,me,ke){a.list().forEach(Se=>Ce(()=>Se(de,me,ke)))}function We(de,me,ke,Se,Me){const O=H(de,me);if(O)return O;const j=me===Hi,W=rr?history.state:{};ke&&(Se||j?i.replace(de.fullPath,Wt({scroll:j&&W&&W.scroll},Me)):i.push(de.fullPath,Me)),d.value=de,st(de,me,ke,j),Ke()}let ht;function De(){ht||(ht=i.listen((de,me,ke)=>{if(!mt.listening)return;const Se=C(de),Me=oe(Se,mt.currentRoute.value);if(Me){Z(Wt(Me,{replace:!0,force:!0}),Se).catch(ba);return}l=Se;const O=d.value;rr&&$_(vp(O.fullPath,ke.delta),xc()),Fe(Se,O).catch(j=>wi(j,pn.NAVIGATION_ABORTED|pn.NAVIGATION_CANCELLED)?j:wi(j,pn.NAVIGATION_GUARD_REDIRECT)?(Z(Wt($(j.to),{force:!0}),Se).then(W=>{wi(W,pn.NAVIGATION_ABORTED|pn.NAVIGATION_DUPLICATED)&&!ke.delta&&ke.type===dd.pop&&i.go(-1,!1)}).catch(ba),Promise.reject()):(ke.delta&&i.go(-ke.delta,!1),Oe(j,Se,O))).then(j=>{j=j||We(Se,O,!1),j&&(ke.delta&&!wi(j,pn.NAVIGATION_CANCELLED)?i.go(-ke.delta,!1):ke.type===dd.pop&&wi(j,pn.NAVIGATION_ABORTED|pn.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),Le(Se,O,j)}).catch(ba)}))}let Ye=sa(),Q=sa(),we;function Oe(de,me,ke){Ke(de);const Se=Q.list();return Se.length?Se.forEach(Me=>Me(de,me,ke)):console.error(de),Promise.reject(de)}function Qe(){return we&&d.value!==Hi?Promise.resolve():new Promise((de,me)=>{Ye.add([de,me])})}function Ke(de){return we||(we=!de,De(),Ye.list().forEach(([me,ke])=>de?ke(de):me()),Ye.reset()),de}function st(de,me,ke,Se){const{scrollBehavior:Me}=e;if(!rr||!Me)return Promise.resolve();const O=!ke&&I_(vp(de.fullPath,0))||(Se||!ke)&&history.state&&history.state.scroll||null;return Ao().then(()=>Me(de,me,O)).then(j=>j&&A_(j)).catch(j=>Oe(j,de,me))}const vt=de=>i.go(de);let yt;const dt=new Set,mt={currentRoute:d,listening:!0,addRoute:v,removeRoute:T,clearRoutes:n.clearRoutes,hasRoute:w,getRoutes:P,resolve:C,options:e,push:M,replace:ee,go:vt,back:()=>vt(-1),forward:()=>vt(1),beforeEach:s.add,beforeResolve:r.add,afterEach:a.add,onError:Q.add,isReady:Qe,install(de){de.component("RouterLink",iw),de.component("RouterView",pv),de.config.globalProperties.$router=mt,Object.defineProperty(de.config.globalProperties,"$route",{enumerable:!0,get:()=>Ft(d)}),rr&&!yt&&d.value===Hi&&(yt=!0,M(i.location).catch(Se=>{}));const me={};for(const Se in Hi)Object.defineProperty(me,Se,{get:()=>d.value[Se],enumerable:!0});de.provide(kc,mt),de.provide(Wd,hg(me)),de.provide(pd,d);const ke=de.unmount;dt.add(de),de.unmount=function(){dt.delete(de),dt.size<1&&(l=Hi,ht&&ht(),ht=null,d.value=Hi,yt=!1,we=!1),ke()}}};function Ct(de){return de.reduce((me,ke)=>me.then(()=>Ce(ke)),Promise.resolve())}return mt}function hv(){return No(kc)}function cw(e){return No(Wd)}const so=(e,n)=>{const t=e.__vccOpts||e;for(const[o,i]of n)t[o]=i;return t},uw={key:0,class:"unsaved-modal-error"},dw={class:"modal-actions"},fw=["disabled"],pw=["disabled"],hw=["disabled"],gw={__name:"UnsavedChangesModal",props:{open:Boolean,busy:Boolean,title:{type:String,default:"Unsaved changes"},message:{type:String,default:"You have unsaved changes. Save before leaving?"},saveText:{type:String,default:"Save"},discardText:{type:String,default:"Discard"},cancelText:{type:String,default:"Cancel"},errorMessage:{type:String,default:""}},emits:["save","discard","cancel"],setup(e,{emit:n}){const t=e,o=n,i=r=>{r.key==="Escape"&&(t.busy||o("cancel"))},s=r=>{document.body.style.overflow=r?"":"hidden"};return li(()=>{t.open&&s(!1),window.addEventListener("keydown",i)}),go(()=>{s(!0),window.removeEventListener("keydown",i)}),nt(()=>t.open,r=>{s(!r)}),(r,a)=>e.open?(_(),E("div",{key:0,class:"modal-backdrop",onClick:a[4]||(a[4]=d=>r.$emit("cancel"))},[c("div",{class:"modal-card",role:"dialog","aria-modal":"true",onClick:a[3]||(a[3]=Et(()=>{},["stop"]))},[c("h3",null,ge(e.title),1),c("p",null,ge(e.message),1),e.errorMessage?(_(),E("div",uw,ge(e.errorMessage),1)):ue("",!0),c("div",dw,[c("button",{class:"secondary",type:"button",disabled:e.busy,onClick:a[0]||(a[0]=d=>r.$emit("cancel"))},ge(e.cancelText),9,fw),c("button",{class:"secondary",type:"button",disabled:e.busy,onClick:a[1]||(a[1]=d=>r.$emit("discard"))},ge(e.discardText),9,pw),c("button",{type:"button",disabled:e.busy,onClick:a[2]||(a[2]=d=>r.$emit("save"))},ge(e.busy?"Saving...":e.saveText),9,hw)])])])):ue("",!0)}},vw=so(gw,[["__scopeId","data-v-fc74b31e"]]),mw={class:"app-shell"},yw={class:"builder-hero app-topbar"},bw={class:"app-topbar-actions"},_w=["disabled"],ww=["disabled"],Ew=["disabled"],Sw={key:0,class:"topbar-install-dropdown",role:"menu","aria-label":"Install options"},xw=["disabled"],kw=["disabled"],Cw={class:"app-main"},Aw={__name:"App",setup(e){const n=cw(),t=hv(),o=A(()=>n.name==="builder"),i=A(()=>n.name==="dashboard"),s=A(()=>o.value||i.value),r=K(!1),a=K(!1),d=K(!1),l=K(!1),f=K(!1),g=K(!1),m=K(!1),v=K(!1),T=K(!1),P=K(!1),w=K(!1),C=K(!1),$=K(null),H=K(!1),M=K(!1),ee=K(""),oe=K(""),Z=A(()=>o.value?r.value:f.value),ye=A(()=>o.value?a.value:g.value),Ce=A(()=>o.value?d.value:m.value),Fe=A(()=>v.value),Le=A(()=>o.value?l.value:T.value),We=A(()=>o.value&&P.value&&!Le.value&&!w.value),ht=Se=>{const Me=Se!=null&&Se.detail&&typeof Se.detail=="object"?Se.detail:{};r.value=Me.canInstall===!0,a.value=Me.canUseOta===!0,d.value=Me.canLogs===!0,l.value=Me.running===!0,P.value=Me.hasUnsavedChanges===!0},De=Se=>{const Me=Se!=null&&Se.detail&&typeof Se.detail=="object"?Se.detail:{};f.value=Me.canInstall===!0,g.value=Me.canUseOta===!0,m.value=Me.canLogs===!0,v.value=Me.canEdit===!0,T.value=Me.running===!0};li(()=>{window.addEventListener("app:builder-compile-state",ht),window.addEventListener("app:dashboard-actions-state",De),window.addEventListener("app:route-switch-request",yt),window.addEventListener("click",Ke),window.addEventListener("keydown",st)}),go(()=>{window.removeEventListener("app:builder-compile-state",ht),window.removeEventListener("app:dashboard-actions-state",De),window.removeEventListener("app:route-switch-request",yt),window.removeEventListener("click",Ke),window.removeEventListener("keydown",st)});const Ye=()=>{C.value=!1},Q=()=>{!Z.value||Le.value||(C.value=!C.value)},we=Se=>{Ye(),window.dispatchEvent(new CustomEvent("app:install-option",{detail:{mode:Se}}))},Oe=()=>{window.dispatchEvent(new CustomEvent("app:builder-logs"))},Qe=()=>{window.dispatchEvent(new CustomEvent("app:dashboard-edit"))},Ke=Se=>{if(!C.value)return;const Me=Se.target;Me instanceof Element&&($.value instanceof Element&&$.value.contains(Me)||Ye())},st=Se=>{Se.key==="Escape"&&Ye()},vt=async()=>{if(We.value){w.value=!0;try{const Se=await mt();Se.success||console.error(Se.message||"Project save failed.")}finally{w.value=!1}}},yt=Se=>{const Me=Se!=null&&Se.detail&&typeof Se.detail=="object"?Se.detail:{},O=typeof Me.routeName=="string"?Me.routeName:"";O&&ke(O)},dt=async()=>{const Se=oe.value;Se&&(oe.value="",await t.push({name:Se}))},mt=()=>{const Se=`builder-save-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;return new Promise(Me=>{const O=window.setTimeout(()=>{window.removeEventListener("app:builder-save-response",j),Me({success:!1,message:"Builder save request timed out."})},3e4),j=W=>{const ae=W!=null&&W.detail&&typeof W.detail=="object"?W.detail:{};ae.requestId===Se&&(window.clearTimeout(O),window.removeEventListener("app:builder-save-response",j),Me({success:ae.success===!0,message:typeof ae.message=="string"?ae.message:""}))};window.addEventListener("app:builder-save-response",j),window.dispatchEvent(new CustomEvent("app:builder-save-request",{detail:{requestId:Se}}))})},Ct=()=>{H.value=!1,M.value=!1,ee.value="",oe.value=""},de=async()=>{H.value=!1,M.value=!1,ee.value="",await dt()},me=async()=>{M.value=!0,ee.value="";const Se=await mt();if(!Se.success){M.value=!1,ee.value=Se.message||"Project save failed.";return}H.value=!1,M.value=!1,ee.value="",await dt()},ke=async Se=>{Ye();const Me=typeof Se=="string"&&Se?Se:"";if(Me&&n.name!==Me){if(o.value&&Me==="dashboard"&&P.value){oe.value=Me,ee.value="",M.value=!1,H.value=!0;return}await t.push({name:Me})}};return nt(()=>n.name,()=>{Ye()}),(Se,Me)=>(_(),E("div",mw,[_t(vw,{open:H.value,busy:M.value,"error-message":ee.value,title:"Unsaved project",message:"Current Builder project has unsaved changes. Save before opening Dashboard?","save-text":"Save","discard-text":"Discard","cancel-text":"Cancel",onSave:me,onDiscard:de,onCancel:Ct},null,8,["open","busy","error-message"]),c("header",yw,[Me[3]||(Me[3]=c("div",{class:"app-topbar-left"},[c("div",{class:"builder-hero-brand"},[c("img",{src:n_,alt:"ECD"}),c("span",{class:"builder-hero-meta"},"v 1.0.12")])],-1)),c("div",bw,[i.value?(_(),E("button",{key:0,class:"btn-standard action-edit",disabled:!Fe.value||Le.value,onClick:Qe}," Edit ",8,_w)):ue("",!0),o.value?(_(),E("button",{key:1,class:"btn-standard action-save",disabled:!We.value,onClick:vt}," Save ",8,ww)):ue("",!0),s.value?(_(),E("div",{key:2,ref_key:"installMenuRef",ref:$,class:"topbar-install-menu"},[c("button",{class:"btn-standard action-install",disabled:!Z.value||Le.value,onClick:Q}," Install ",8,Ew),C.value?(_(),E("div",Sw,[c("button",{type:"button",role:"menuitem",onClick:Me[0]||(Me[0]=O=>we("serial"))},"Via Serial Port"),c("button",{type:"button",role:"menuitem",disabled:!ye.value,onClick:Me[1]||(Me[1]=O=>we("ota"))}," Wireless (OTA) ",8,xw),c("button",{type:"button",role:"menuitem",onClick:Me[2]||(Me[2]=O=>we("download"))},"Download Binary")])):ue("",!0)],512)):ue("",!0),s.value?(_(),E("button",{key:3,class:"btn-standard action-logs",disabled:!Ce.value||Le.value,onClick:Oe}," Logs ",8,kw)):ue("",!0)])]),c("main",Cw,[_t(Ft(pv))])]))}},$w=so(Aw,[["__scopeId","data-v-759c1866"]]);function gv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function vv(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(n=>{const t=e[n],o=typeof t;(o==="object"||o==="function")&&!Object.isFrozen(t)&&vv(t)}),e}class Ip{constructor(n){n.data===void 0&&(n.data={}),this.data=n.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function mv(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Ji(e,...n){const t=Object.create(null);for(const o in e)t[o]=e[o];return n.forEach(function(o){for(const i in o)t[i]=o[i]}),t}const Iw="</span>",Tp=e=>!!e.scope,Tw=(e,{prefix:n})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const t=e.split(".");return[`${n}${t.shift()}`,...t.map((o,i)=>`${o}${"_".repeat(i+1)}`)].join(" ")}return`${n}${e}`};class Rw{constructor(n,t){this.buffer="",this.classPrefix=t.classPrefix,n.walk(this)}addText(n){this.buffer+=mv(n)}openNode(n){if(!Tp(n))return;const t=Tw(n.scope,{prefix:this.classPrefix});this.span(t)}closeNode(n){Tp(n)&&(this.buffer+=Iw)}value(){return this.buffer}span(n){this.buffer+=`<span class="${n}">`}}const Rp=(e={})=>{const n={children:[]};return Object.assign(n,e),n};class Yd{constructor(){this.rootNode=Rp(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(n){this.top.children.push(n)}openNode(n){const t=Rp({scope:n});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(n){return this.constructor._walk(n,this.rootNode)}static _walk(n,t){return typeof t=="string"?n.addText(t):t.children&&(n.openNode(t),t.children.forEach(o=>this._walk(n,o)),n.closeNode(t)),n}static _collapse(n){typeof n!="string"&&n.children&&(n.children.every(t=>typeof t=="string")?n.children=[n.children.join("")]:n.children.forEach(t=>{Yd._collapse(t)}))}}class Fw extends Yd{constructor(n){super(),this.options=n}addText(n){n!==""&&this.add(n)}startScope(n){this.openNode(n)}endScope(){this.closeNode()}__addSublanguage(n,t){const o=n.root;t&&(o.scope=`language:${t}`),this.add(o)}toHTML(){return new Rw(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function Ta(e){return e?typeof e=="string"?e:e.source:null}function yv(e){return js("(?=",e,")")}function Ow(e){return js("(?:",e,")*")}function Lw(e){return js("(?:",e,")?")}function js(...e){return e.map(t=>Ta(t)).join("")}function Mw(e){const n=e[e.length-1];return typeof n=="object"&&n.constructor===Object?(e.splice(e.length-1,1),n):{}}function Kd(...e){return"("+(Mw(e).capture?"":"?:")+e.map(o=>Ta(o)).join("|")+")"}function bv(e){return new RegExp(e.toString()+"|").exec("").length-1}function Nw(e,n){const t=e&&e.exec(n);return t&&t.index===0}const Dw=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function qd(e,{joinWith:n}){let t=0;return e.map(o=>{t+=1;const i=t;let s=Ta(o),r="";for(;s.length>0;){const a=Dw.exec(s);if(!a){r+=s;break}r+=s.substring(0,a.index),s=s.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?r+="\\"+String(Number(a[1])+i):(r+=a[0],a[0]==="("&&t++)}return r}).map(o=>`(${o})`).join(n)}const Pw=/\b\B/,_v="[a-zA-Z]\\w*",Zd="[a-zA-Z_]\\w*",wv="\\b\\d+(\\.\\d+)?",Ev="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Sv="\\b(0b[01]+)",jw="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Bw=(e={})=>{const n=/^#![ ]*\//;return e.binary&&(e.begin=js(n,/.*\b/,e.binary,/\b.*/)),Ji({scope:"meta",begin:n,end:/$/,relevance:0,"on:begin":(t,o)=>{t.index!==0&&o.ignoreMatch()}},e)},Ra={begin:"\\\\[\\s\\S]",relevance:0},Uw={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Ra]},zw={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Ra]},Vw={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Cc=function(e,n,t={}){const o=Ji({scope:"comment",begin:e,end:n,contains:[]},t);o.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const i=Kd("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return o.contains.push({begin:js(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),o},Hw=Cc("//","$"),Gw=Cc("/\\*","\\*/"),Ww=Cc("#","$"),Yw={scope:"number",begin:wv,relevance:0},Kw={scope:"number",begin:Ev,relevance:0},qw={scope:"number",begin:Sv,relevance:0},Zw={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Ra,{begin:/\[/,end:/\]/,relevance:0,contains:[Ra]}]},Xw={scope:"title",begin:_v,relevance:0},Jw={scope:"title",begin:Zd,relevance:0},Qw={begin:"\\.\\s*"+Zd,relevance:0},e1=function(e){return Object.assign(e,{"on:begin":(n,t)=>{t.data._beginMatch=n[1]},"on:end":(n,t)=>{t.data._beginMatch!==n[1]&&t.ignoreMatch()}})};var kl=Object.freeze({__proto__:null,APOS_STRING_MODE:Uw,BACKSLASH_ESCAPE:Ra,BINARY_NUMBER_MODE:qw,BINARY_NUMBER_RE:Sv,COMMENT:Cc,C_BLOCK_COMMENT_MODE:Gw,C_LINE_COMMENT_MODE:Hw,C_NUMBER_MODE:Kw,C_NUMBER_RE:Ev,END_SAME_AS_BEGIN:e1,HASH_COMMENT_MODE:Ww,IDENT_RE:_v,MATCH_NOTHING_RE:Pw,METHOD_GUARD:Qw,NUMBER_MODE:Yw,NUMBER_RE:wv,PHRASAL_WORDS_MODE:Vw,QUOTE_STRING_MODE:zw,REGEXP_MODE:Zw,RE_STARTERS_RE:jw,SHEBANG:Bw,TITLE_MODE:Xw,UNDERSCORE_IDENT_RE:Zd,UNDERSCORE_TITLE_MODE:Jw});function t1(e,n){e.input[e.index-1]==="."&&n.ignoreMatch()}function n1(e,n){e.className!==void 0&&(e.scope=e.className,delete e.className)}function o1(e,n){n&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=t1,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function i1(e,n){Array.isArray(e.illegal)&&(e.illegal=Kd(...e.illegal))}function s1(e,n){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function r1(e,n){e.relevance===void 0&&(e.relevance=1)}const a1=(e,n)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const t=Object.assign({},e);Object.keys(e).forEach(o=>{delete e[o]}),e.keywords=t.keywords,e.begin=js(t.beforeMatch,yv(t.begin)),e.starts={relevance:0,contains:[Object.assign(t,{endsParent:!0})]},e.relevance=0,delete t.beforeMatch},l1=["of","and","for","in","not","or","if","then","parent","list","value"],c1="keyword";function xv(e,n,t=c1){const o=Object.create(null);return typeof e=="string"?i(t,e.split(" ")):Array.isArray(e)?i(t,e):Object.keys(e).forEach(function(s){Object.assign(o,xv(e[s],n,s))}),o;function i(s,r){n&&(r=r.map(a=>a.toLowerCase())),r.forEach(function(a){const d=a.split("|");o[d[0]]=[s,u1(d[0],d[1])]})}}function u1(e,n){return n?Number(n):d1(e)?0:1}function d1(e){return l1.includes(e.toLowerCase())}const Fp={},Os=e=>{console.error(e)},Op=(e,...n)=>{console.log(`WARN: ${e}`,...n)},er=(e,n)=>{Fp[`${e}/${n}`]||(console.log(`Deprecated as of ${e}. ${n}`),Fp[`${e}/${n}`]=!0)},Ql=new Error;function kv(e,n,{key:t}){let o=0;const i=e[t],s={},r={};for(let a=1;a<=n.length;a++)r[a+o]=i[a],s[a+o]=!0,o+=bv(n[a-1]);e[t]=r,e[t]._emit=s,e[t]._multi=!0}function f1(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Os("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Ql;if(typeof e.beginScope!="object"||e.beginScope===null)throw Os("beginScope must be object"),Ql;kv(e,e.begin,{key:"beginScope"}),e.begin=qd(e.begin,{joinWith:""})}}function p1(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Os("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Ql;if(typeof e.endScope!="object"||e.endScope===null)throw Os("endScope must be object"),Ql;kv(e,e.end,{key:"endScope"}),e.end=qd(e.end,{joinWith:""})}}function h1(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function g1(e){h1(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),f1(e),p1(e)}function v1(e){function n(r,a){return new RegExp(Ta(r),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(a?"g":""))}class t{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,d){d.position=this.position++,this.matchIndexes[this.matchAt]=d,this.regexes.push([d,a]),this.matchAt+=bv(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(d=>d[1]);this.matcherRe=n(qd(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const d=this.matcherRe.exec(a);if(!d)return null;const l=d.findIndex((g,m)=>m>0&&g!==void 0),f=this.matchIndexes[l];return d.splice(0,l),Object.assign(d,f)}}class o{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const d=new t;return this.rules.slice(a).forEach(([l,f])=>d.addRule(l,f)),d.compile(),this.multiRegexes[a]=d,d}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,d){this.rules.push([a,d]),d.type==="begin"&&this.count++}exec(a){const d=this.getMatcher(this.regexIndex);d.lastIndex=this.lastIndex;let l=d.exec(a);if(this.resumingScanAtSamePosition()&&!(l&&l.index===this.lastIndex)){const f=this.getMatcher(0);f.lastIndex=this.lastIndex+1,l=f.exec(a)}return l&&(this.regexIndex+=l.position+1,this.regexIndex===this.count&&this.considerAll()),l}}function i(r){const a=new o;return r.contains.forEach(d=>a.addRule(d.begin,{rule:d,type:"begin"})),r.terminatorEnd&&a.addRule(r.terminatorEnd,{type:"end"}),r.illegal&&a.addRule(r.illegal,{type:"illegal"}),a}function s(r,a){const d=r;if(r.isCompiled)return d;[n1,s1,g1,a1].forEach(f=>f(r,a)),e.compilerExtensions.forEach(f=>f(r,a)),r.__beforeBegin=null,[o1,i1,r1].forEach(f=>f(r,a)),r.isCompiled=!0;let l=null;return typeof r.keywords=="object"&&r.keywords.$pattern&&(r.keywords=Object.assign({},r.keywords),l=r.keywords.$pattern,delete r.keywords.$pattern),l=l||/\w+/,r.keywords&&(r.keywords=xv(r.keywords,e.case_insensitive)),d.keywordPatternRe=n(l,!0),a&&(r.begin||(r.begin=/\B|\b/),d.beginRe=n(d.begin),!r.end&&!r.endsWithParent&&(r.end=/\B|\b/),r.end&&(d.endRe=n(d.end)),d.terminatorEnd=Ta(d.end)||"",r.endsWithParent&&a.terminatorEnd&&(d.terminatorEnd+=(r.end?"|":"")+a.terminatorEnd)),r.illegal&&(d.illegalRe=n(r.illegal)),r.contains||(r.contains=[]),r.contains=[].concat(...r.contains.map(function(f){return m1(f==="self"?r:f)})),r.contains.forEach(function(f){s(f,d)}),r.starts&&s(r.starts,a),d.matcher=i(d),d}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Ji(e.classNameAliases||{}),s(e)}function Cv(e){return e?e.endsWithParent||Cv(e.starts):!1}function m1(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(n){return Ji(e,{variants:null},n)})),e.cachedVariants?e.cachedVariants:Cv(e)?Ji(e,{starts:e.starts?Ji(e.starts):null}):Object.isFrozen(e)?Ji(e):e}var y1="11.11.1";class b1 extends Error{constructor(n,t){super(n),this.name="HTMLInjectionError",this.html=t}}const Su=mv,Lp=Ji,Mp=Symbol("nomatch"),_1=7,Av=function(e){const n=Object.create(null),t=Object.create(null),o=[];let i=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",r={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:Fw};function d(Q){return a.noHighlightRe.test(Q)}function l(Q){let we=Q.className+" ";we+=Q.parentNode?Q.parentNode.className:"";const Oe=a.languageDetectRe.exec(we);if(Oe){const Qe=ye(Oe[1]);return Qe||(Op(s.replace("{}",Oe[1])),Op("Falling back to no-highlight mode for this block.",Q)),Qe?Oe[1]:"no-highlight"}return we.split(/\s+/).find(Qe=>d(Qe)||ye(Qe))}function f(Q,we,Oe){let Qe="",Ke="";typeof we=="object"?(Qe=Q,Oe=we.ignoreIllegals,Ke=we.language):(er("10.7.0","highlight(lang, code, ...args) has been deprecated."),er("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Ke=Q,Qe=we),Oe===void 0&&(Oe=!0);const st={code:Qe,language:Ke};De("before:highlight",st);const vt=st.result?st.result:g(st.language,st.code,Oe);return vt.code=st.code,De("after:highlight",vt),vt}function g(Q,we,Oe,Qe){const Ke=Object.create(null);function st(I,Y){return I.keywords[Y]}function vt(){if(!pe.keywords){re.addText(se);return}let I=0;pe.keywordPatternRe.lastIndex=0;let Y=pe.keywordPatternRe.exec(se),ie="";for(;Y;){ie+=se.substring(I,Y.index);const _e=ae.case_insensitive?Y[0].toLowerCase():Y[0],Ie=st(pe,_e);if(Ie){const[Ue,qe]=Ie;if(re.addText(ie),ie="",Ke[_e]=(Ke[_e]||0)+1,Ke[_e]<=_1&&(He+=qe),Ue.startsWith("_"))ie+=Y[0];else{const Be=ae.classNameAliases[Ue]||Ue;mt(Y[0],Be)}}else ie+=Y[0];I=pe.keywordPatternRe.lastIndex,Y=pe.keywordPatternRe.exec(se)}ie+=se.substring(I),re.addText(ie)}function yt(){if(se==="")return;let I=null;if(typeof pe.subLanguage=="string"){if(!n[pe.subLanguage]){re.addText(se);return}I=g(pe.subLanguage,se,!0,Ae[pe.subLanguage]),Ae[pe.subLanguage]=I._top}else I=v(se,pe.subLanguage.length?pe.subLanguage:null);pe.relevance>0&&(He+=I.relevance),re.__addSublanguage(I._emitter,I.language)}function dt(){pe.subLanguage!=null?yt():vt(),se=""}function mt(I,Y){I!==""&&(re.startScope(Y),re.addText(I),re.endScope())}function Ct(I,Y){let ie=1;const _e=Y.length-1;for(;ie<=_e;){if(!I._emit[ie]){ie++;continue}const Ie=ae.classNameAliases[I[ie]]||I[ie],Ue=Y[ie];Ie?mt(Ue,Ie):(se=Ue,vt(),se=""),ie++}}function de(I,Y){return I.scope&&typeof I.scope=="string"&&re.openNode(ae.classNameAliases[I.scope]||I.scope),I.beginScope&&(I.beginScope._wrap?(mt(se,ae.classNameAliases[I.beginScope._wrap]||I.beginScope._wrap),se=""):I.beginScope._multi&&(Ct(I.beginScope,Y),se="")),pe=Object.create(I,{parent:{value:pe}}),pe}function me(I,Y,ie){let _e=Nw(I.endRe,ie);if(_e){if(I["on:end"]){const Ie=new Ip(I);I["on:end"](Y,Ie),Ie.isMatchIgnored&&(_e=!1)}if(_e){for(;I.endsParent&&I.parent;)I=I.parent;return I}}if(I.endsWithParent)return me(I.parent,Y,ie)}function ke(I){return pe.matcher.regexIndex===0?(se+=I[0],1):(N=!0,0)}function Se(I){const Y=I[0],ie=I.rule,_e=new Ip(ie),Ie=[ie.__beforeBegin,ie["on:begin"]];for(const Ue of Ie)if(Ue&&(Ue(I,_e),_e.isMatchIgnored))return ke(Y);return ie.skip?se+=Y:(ie.excludeBegin&&(se+=Y),dt(),!ie.returnBegin&&!ie.excludeBegin&&(se=Y)),de(ie,I),ie.returnBegin?0:Y.length}function Me(I){const Y=I[0],ie=we.substring(I.index),_e=me(pe,I,ie);if(!_e)return Mp;const Ie=pe;pe.endScope&&pe.endScope._wrap?(dt(),mt(Y,pe.endScope._wrap)):pe.endScope&&pe.endScope._multi?(dt(),Ct(pe.endScope,I)):Ie.skip?se+=Y:(Ie.returnEnd||Ie.excludeEnd||(se+=Y),dt(),Ie.excludeEnd&&(se=Y));do pe.scope&&re.closeNode(),!pe.skip&&!pe.subLanguage&&(He+=pe.relevance),pe=pe.parent;while(pe!==_e.parent);return _e.starts&&de(_e.starts,I),Ie.returnEnd?0:Y.length}function O(){const I=[];for(let Y=pe;Y!==ae;Y=Y.parent)Y.scope&&I.unshift(Y.scope);I.forEach(Y=>re.openNode(Y))}let j={};function W(I,Y){const ie=Y&&Y[0];if(se+=I,ie==null)return dt(),0;if(j.type==="begin"&&Y.type==="end"&&j.index===Y.index&&ie===""){if(se+=we.slice(Y.index,Y.index+1),!i){const _e=new Error(`0 width match regex (${Q})`);throw _e.languageName=Q,_e.badRule=j.rule,_e}return 1}if(j=Y,Y.type==="begin")return Se(Y);if(Y.type==="illegal"&&!Oe){const _e=new Error('Illegal lexeme "'+ie+'" for mode "'+(pe.scope||"<unnamed>")+'"');throw _e.mode=pe,_e}else if(Y.type==="end"){const _e=Me(Y);if(_e!==Mp)return _e}if(Y.type==="illegal"&&ie==="")return se+=`
`,1;if(k>1e5&&k>Y.index*3)throw new Error("potential infinite loop, way more iterations than matches");return se+=ie,ie.length}const ae=ye(Q);if(!ae)throw Os(s.replace("{}",Q)),new Error('Unknown language: "'+Q+'"');const he=v1(ae);let fe="",pe=Qe||he;const Ae={},re=new a.__emitter(a);O();let se="",He=0,Re=0,k=0,N=!1;try{if(ae.__emitTokens)ae.__emitTokens(we,re);else{for(pe.matcher.considerAll();;){k++,N?N=!1:pe.matcher.considerAll(),pe.matcher.lastIndex=Re;const I=pe.matcher.exec(we);if(!I)break;const Y=we.substring(Re,I.index),ie=W(Y,I);Re=I.index+ie}W(we.substring(Re))}return re.finalize(),fe=re.toHTML(),{language:Q,value:fe,relevance:He,illegal:!1,_emitter:re,_top:pe}}catch(I){if(I.message&&I.message.includes("Illegal"))return{language:Q,value:Su(we),illegal:!0,relevance:0,_illegalBy:{message:I.message,index:Re,context:we.slice(Re-100,Re+100),mode:I.mode,resultSoFar:fe},_emitter:re};if(i)return{language:Q,value:Su(we),illegal:!1,relevance:0,errorRaised:I,_emitter:re,_top:pe};throw I}}function m(Q){const we={value:Su(Q),illegal:!1,relevance:0,_top:r,_emitter:new a.__emitter(a)};return we._emitter.addText(Q),we}function v(Q,we){we=we||a.languages||Object.keys(n);const Oe=m(Q),Qe=we.filter(ye).filter(Fe).map(dt=>g(dt,Q,!1));Qe.unshift(Oe);const Ke=Qe.sort((dt,mt)=>{if(dt.relevance!==mt.relevance)return mt.relevance-dt.relevance;if(dt.language&&mt.language){if(ye(dt.language).supersetOf===mt.language)return 1;if(ye(mt.language).supersetOf===dt.language)return-1}return 0}),[st,vt]=Ke,yt=st;return yt.secondBest=vt,yt}function T(Q,we,Oe){const Qe=we&&t[we]||Oe;Q.classList.add("hljs"),Q.classList.add(`language-${Qe}`)}function P(Q){let we=null;const Oe=l(Q);if(d(Oe))return;if(De("before:highlightElement",{el:Q,language:Oe}),Q.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",Q);return}if(Q.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Q)),a.throwUnescapedHTML))throw new b1("One of your code blocks includes unescaped HTML.",Q.innerHTML);we=Q;const Qe=we.textContent,Ke=Oe?f(Qe,{language:Oe,ignoreIllegals:!0}):v(Qe);Q.innerHTML=Ke.value,Q.dataset.highlighted="yes",T(Q,Oe,Ke.language),Q.result={language:Ke.language,re:Ke.relevance,relevance:Ke.relevance},Ke.secondBest&&(Q.secondBest={language:Ke.secondBest.language,relevance:Ke.secondBest.relevance}),De("after:highlightElement",{el:Q,result:Ke,text:Qe})}function w(Q){a=Lp(a,Q)}const C=()=>{M(),er("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function $(){M(),er("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let H=!1;function M(){function Q(){M()}if(document.readyState==="loading"){H||window.addEventListener("DOMContentLoaded",Q,!1),H=!0;return}document.querySelectorAll(a.cssSelector).forEach(P)}function ee(Q,we){let Oe=null;try{Oe=we(e)}catch(Qe){if(Os("Language definition for '{}' could not be registered.".replace("{}",Q)),i)Os(Qe);else throw Qe;Oe=r}Oe.name||(Oe.name=Q),n[Q]=Oe,Oe.rawDefinition=we.bind(null,e),Oe.aliases&&Ce(Oe.aliases,{languageName:Q})}function oe(Q){delete n[Q];for(const we of Object.keys(t))t[we]===Q&&delete t[we]}function Z(){return Object.keys(n)}function ye(Q){return Q=(Q||"").toLowerCase(),n[Q]||n[t[Q]]}function Ce(Q,{languageName:we}){typeof Q=="string"&&(Q=[Q]),Q.forEach(Oe=>{t[Oe.toLowerCase()]=we})}function Fe(Q){const we=ye(Q);return we&&!we.disableAutodetect}function Le(Q){Q["before:highlightBlock"]&&!Q["before:highlightElement"]&&(Q["before:highlightElement"]=we=>{Q["before:highlightBlock"](Object.assign({block:we.el},we))}),Q["after:highlightBlock"]&&!Q["after:highlightElement"]&&(Q["after:highlightElement"]=we=>{Q["after:highlightBlock"](Object.assign({block:we.el},we))})}function We(Q){Le(Q),o.push(Q)}function ht(Q){const we=o.indexOf(Q);we!==-1&&o.splice(we,1)}function De(Q,we){const Oe=Q;o.forEach(function(Qe){Qe[Oe]&&Qe[Oe](we)})}function Ye(Q){return er("10.7.0","highlightBlock will be removed entirely in v12.0"),er("10.7.0","Please use highlightElement now."),P(Q)}Object.assign(e,{highlight:f,highlightAuto:v,highlightAll:M,highlightElement:P,highlightBlock:Ye,configure:w,initHighlighting:C,initHighlightingOnLoad:$,registerLanguage:ee,unregisterLanguage:oe,listLanguages:Z,getLanguage:ye,registerAliases:Ce,autoDetection:Fe,inherit:Lp,addPlugin:We,removePlugin:ht}),e.debugMode=function(){i=!1},e.safeMode=function(){i=!0},e.versionString=y1,e.regex={concat:js,lookahead:yv,either:Kd,optional:Lw,anyNumberOfTimes:Ow};for(const Q in kl)typeof kl[Q]=="object"&&vv(kl[Q]);return Object.assign(e,kl),e},kr=Av({});kr.newInstance=()=>Av({});var w1=kr;kr.HighlightJS=kr;kr.default=kr;const Np=gv(w1);function E1(e){const n="true false yes no null",t="[\\w#;/?:@&=+$,.~*'()[\\]]+",o={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},r={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,i]},a=e.inherit(r,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),m={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},v={end:",",endsWithParent:!0,excludeEnd:!0,keywords:n,relevance:0},T={begin:/\{/,end:/\}/,contains:[v],illegal:"\\n",relevance:0},P={begin:"\\[",end:"\\]",contains:[v],illegal:"\\n",relevance:0},w=[o,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+t},{className:"type",begin:"!<"+t+">"},{className:"type",begin:"!"+t},{className:"type",begin:"!!"+t},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:n,keywords:{literal:n}},m,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},T,P,s,r],C=[...w];return C.pop(),C.push(a),v.contains=C,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:w}}const S1={class:"modal-actions"},mr={__name:"ConfirmModal",props:{open:Boolean,title:{type:String,default:"Confirm"},message:{type:String,default:"Are you sure?"},confirmText:{type:String,default:"Yes"},cancelText:{type:String,default:"Cancel"}},emits:["confirm","cancel"],setup(e,{emit:n}){const t=e,o=n,i=r=>{r.key==="Escape"&&o("cancel")},s=r=>{document.body.style.overflow=r?"":"hidden"};return li(()=>{t.open&&s(!1),window.addEventListener("keydown",i)}),go(()=>{s(!0),window.removeEventListener("keydown",i)}),nt(()=>t.open,r=>{s(!r)}),(r,a)=>e.open?(_(),E("div",{key:0,class:"modal-backdrop",onClick:a[3]||(a[3]=d=>r.$emit("cancel"))},[c("div",{class:"modal-card",role:"dialog","aria-modal":"true",onClick:a[2]||(a[2]=Et(()=>{},["stop"]))},[c("h3",null,ge(e.title),1),c("p",null,ge(e.message),1),c("div",S1,[c("button",{class:"secondary",type:"button",onClick:a[0]||(a[0]=d=>r.$emit("cancel"))},ge(e.cancelText),1),c("button",{type:"button",onClick:a[1]||(a[1]=d=>r.$emit("confirm"))},ge(e.confirmText),1)])])])):ue("",!0)}},x1={class:"gpio-guide-card"},k1={class:"gpio-guide-header"},C1={class:"gpio-guide-title-row"},A1={class:"gpio-guide-title"},$1={class:"gpio-guide-tabs"},I1={class:"gpio-guide-body"},T1={key:0,class:"gpio-guide-empty"},R1={key:0,class:"gpio-guide-table-wrap"},F1={class:"gpio-guide-table"},O1={key:1,class:"gpio-guide-notes"},L1={__name:"GpioGuideModal",props:{open:{type:Boolean,default:!1},guide:{type:Object,default:null},fallbackTitle:{type:String,default:""}},emits:["close"],setup(e,{emit:n}){const t=e,o=n,i=K("table"),s=()=>{o("close")},r=l=>{l.key==="Escape"&&s()},a=A(()=>{var l;return((l=t.guide)==null?void 0:l.title)||t.fallbackTitle||""}),d=A(()=>{var l;return((l=t.guide)==null?void 0:l.notes)||[]});return nt(()=>t.open,l=>{l?(i.value="table",window.addEventListener("keydown",r)):window.removeEventListener("keydown",r)}),go(()=>{window.removeEventListener("keydown",r)}),(l,f)=>e.open?(_(),E("div",{key:0,class:"gpio-guide-backdrop",onClick:Et(s,["self"])},[c("div",x1,[c("header",k1,[c("div",null,[c("div",C1,[f[2]||(f[2]=c("h3",null,"GPIO Guide",-1)),c("span",A1,ge(a.value),1)]),f[3]||(f[3]=c("p",{class:"gpio-guide-sub"},"Quick reference for the selected microcontroller.",-1))]),c("button",{type:"button",class:"secondary compact",onClick:s},"Close")]),c("div",$1,[c("button",{type:"button",class:pt({active:i.value==="table"}),onClick:f[0]||(f[0]=g=>i.value="table")}," Table ",2),c("button",{type:"button",class:pt({active:i.value==="notes"}),onClick:f[1]||(f[1]=g=>i.value="notes")}," Notes ",2)]),c("div",I1,[e.guide?(_(),E(je,{key:1},[i.value==="table"?(_(),E("div",R1,[c("table",F1,[f[4]||(f[4]=c("thead",null,[c("tr",null,[c("th",null,"GPIO"),c("th",null,"Input"),c("th",null,"Output"),c("th",null,"Notes")])],-1)),c("tbody",null,[(_(!0),E(je,null,Je(e.guide.rows,(g,m)=>(_(),E("tr",{key:`${g.id}-${m}`},[c("td",null,ge(g.id),1),c("td",null,ge(g.input),1),c("td",null,ge(g.output),1),c("td",null,ge(g.note),1)]))),128))])])])):(_(),E("div",O1,[(_(!0),E(je,null,Je(d.value,(g,m)=>(_(),E("p",{key:`note-${m}`},ge(g),1))),128))]))],64)):(_(),E("div",T1," No GPIO data available for this variant. "))])])])):ue("",!0)}},M1=so(L1,[["__scopeId","data-v-aa32a730"]]),N1={key:0,class:"compile-modal-overlay"},D1=["aria-label"],P1={class:"compile-modal-header"},j1={class:"compile-meta"},B1={class:"compile-title"},U1={class:"compile-actions"},z1={key:0,class:"compile-reconnect"},V1={class:"compile-scroll-lock"},H1=["aria-checked"],G1={class:"compile-modal-body"},W1={class:"compile-log-panel","aria-label":"Console log output"},Y1=["innerHTML"],K1={class:"compile-modal-footer"},q1={class:"compile-footer-actions"},Z1=["disabled"],$v={__name:"InstallConsoleModal",props:{compileOpen:{type:Boolean,required:!0},terminalTitle:{type:String,required:!0},compileStateClass:{type:String,required:!0},compileStateLabel:{type:String,required:!0},compileIsReconnecting:{type:Boolean,required:!0},compileAutoScroll:{type:Boolean,required:!0},compileLogLines:{type:Array,required:!0},canDownloadCompiledBinary:{type:Boolean,required:!0},canCloseCompile:{type:Boolean,required:!0},onConsoleRef:{type:Function,default:null}},emits:["toggle-autoscroll","download","close-compile"],setup(e,{emit:n}){const t=e,o=n,i=s=>{typeof t.onConsoleRef=="function"&&t.onConsoleRef(s)};return(s,r)=>e.compileOpen?(_(),E("div",N1,[c("div",{class:"compile-modal",role:"dialog","aria-modal":"true","aria-label":e.terminalTitle},[c("div",P1,[c("div",j1,[c("span",B1,ge(e.terminalTitle),1),c("span",{class:pt(e.compileStateClass)},ge(e.compileStateLabel),3)]),c("div",U1,[e.compileIsReconnecting?(_(),E("span",z1,"Reconnecting...")):ue("",!0),c("div",V1,[r[4]||(r[4]=c("span",{class:"compile-scroll-lock-label"},"Scroll lock",-1)),c("button",{type:"button",class:pt(["compile-scroll-lock-switch",{"is-on":!e.compileAutoScroll}]),role:"switch","aria-checked":!e.compileAutoScroll,onClick:r[0]||(r[0]=a=>o("toggle-autoscroll"))},[...r[3]||(r[3]=[c("span",{class:"compile-scroll-lock-thumb","aria-hidden":"true"},null,-1)])],10,H1)])])]),c("div",G1,[c("section",W1,[c("div",{class:"compile-log-scroll",ref:i},[(_(!0),E(je,null,Je(e.compileLogLines,a=>(_(),E("div",{key:a.id,class:pt(a.className),innerHTML:a.html},null,10,Y1))),128))])])]),c("div",K1,[c("div",q1,[e.canDownloadCompiledBinary?(_(),E("button",{key:0,type:"button",class:"btn-standard",onClick:r[1]||(r[1]=a=>o("download"))}," Download ")):ue("",!0),c("button",{type:"button",class:"btn-standard secondary",disabled:!e.canCloseCompile,onClick:r[2]||(r[2]=a=>o("close-compile"))}," Close ",8,Z1)])])],8,D1)])):ue("",!0)}};/*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT */function Iv(e){return typeof e>"u"||e===null}function X1(e){return typeof e=="object"&&e!==null}function J1(e){return Array.isArray(e)?e:Iv(e)?[]:[e]}function Q1(e,n){var t,o,i,s;if(n)for(s=Object.keys(n),t=0,o=s.length;t<o;t+=1)i=s[t],e[i]=n[i];return e}function eE(e,n){var t="",o;for(o=0;o<n;o+=1)t+=e;return t}function tE(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var nE=Iv,oE=X1,iE=J1,sE=eE,rE=tE,aE=Q1,oo={isNothing:nE,isObject:oE,toArray:iE,repeat:sE,isNegativeZero:rE,extend:aE};function Tv(e,n){var t="",o=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(t+='in "'+e.mark.name+'" '),t+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!n&&e.mark.snippet&&(t+=`

`+e.mark.snippet),o+" "+t):o}function Fa(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=Tv(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Fa.prototype=Object.create(Error.prototype);Fa.prototype.constructor=Fa;Fa.prototype.toString=function(n){return this.name+": "+Tv(this,n)};var $i=Fa;function xu(e,n,t,o,i){var s="",r="",a=Math.floor(i/2)-1;return o-n>a&&(s=" ... ",n=o-a+s.length),t-o>a&&(r=" ...",t=o+a-r.length),{str:s+e.slice(n,t).replace(/\t/g,"")+r,pos:o-n+s.length}}function ku(e,n){return oo.repeat(" ",n-e.length)+e}function lE(e,n){if(n=Object.create(n||null),!e.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var t=/\r?\n|\r|\0/g,o=[0],i=[],s,r=-1;s=t.exec(e.buffer);)i.push(s.index),o.push(s.index+s[0].length),e.position<=s.index&&r<0&&(r=o.length-2);r<0&&(r=o.length-1);var a="",d,l,f=Math.min(e.line+n.linesAfter,i.length).toString().length,g=n.maxLength-(n.indent+f+3);for(d=1;d<=n.linesBefore&&!(r-d<0);d++)l=xu(e.buffer,o[r-d],i[r-d],e.position-(o[r]-o[r-d]),g),a=oo.repeat(" ",n.indent)+ku((e.line-d+1).toString(),f)+" | "+l.str+`
`+a;for(l=xu(e.buffer,o[r],i[r],e.position,g),a+=oo.repeat(" ",n.indent)+ku((e.line+1).toString(),f)+" | "+l.str+`
`,a+=oo.repeat("-",n.indent+f+3+l.pos)+`^
`,d=1;d<=n.linesAfter&&!(r+d>=i.length);d++)l=xu(e.buffer,o[r+d],i[r+d],e.position-(o[r]-o[r+d]),g),a+=oo.repeat(" ",n.indent)+ku((e.line+d+1).toString(),f)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var cE=lE,uE=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],dE=["scalar","sequence","mapping"];function fE(e){var n={};return e!==null&&Object.keys(e).forEach(function(t){e[t].forEach(function(o){n[String(o)]=t})}),n}function pE(e,n){if(n=n||{},Object.keys(n).forEach(function(t){if(uE.indexOf(t)===-1)throw new $i('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=n,this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(t){return t},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=fE(n.styleAliases||null),dE.indexOf(this.kind)===-1)throw new $i('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Gn=pE;function Dp(e,n){var t=[];return e[n].forEach(function(o){var i=t.length;t.forEach(function(s,r){s.tag===o.tag&&s.kind===o.kind&&s.multi===o.multi&&(i=r)}),t[i]=o}),t}function hE(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,t;function o(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(n=0,t=arguments.length;n<t;n+=1)arguments[n].forEach(o);return e}function hd(e){return this.extend(e)}hd.prototype.extend=function(n){var t=[],o=[];if(n instanceof Gn)o.push(n);else if(Array.isArray(n))o=o.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(t=t.concat(n.implicit)),n.explicit&&(o=o.concat(n.explicit));else throw new $i("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof Gn))throw new $i("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new $i("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new $i("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),o.forEach(function(s){if(!(s instanceof Gn))throw new $i("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(hd.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(o),i.compiledImplicit=Dp(i,"implicit"),i.compiledExplicit=Dp(i,"explicit"),i.compiledTypeMap=hE(i.compiledImplicit,i.compiledExplicit),i};var gE=hd,vE=new Gn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),mE=new Gn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),yE=new Gn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),bE=new gE({explicit:[vE,mE,yE]});function _E(e){if(e===null)return!0;var n=e.length;return n===1&&e==="~"||n===4&&(e==="null"||e==="Null"||e==="NULL")}function wE(){return null}function EE(e){return e===null}var SE=new Gn("tag:yaml.org,2002:null",{kind:"scalar",resolve:_E,construct:wE,predicate:EE,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function xE(e){if(e===null)return!1;var n=e.length;return n===4&&(e==="true"||e==="True"||e==="TRUE")||n===5&&(e==="false"||e==="False"||e==="FALSE")}function kE(e){return e==="true"||e==="True"||e==="TRUE"}function CE(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var AE=new Gn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:xE,construct:kE,predicate:CE,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function $E(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function IE(e){return 48<=e&&e<=55}function TE(e){return 48<=e&&e<=57}function RE(e){if(e===null)return!1;var n=e.length,t=0,o=!1,i;if(!n)return!1;if(i=e[t],(i==="-"||i==="+")&&(i=e[++t]),i==="0"){if(t+1===n)return!0;if(i=e[++t],i==="b"){for(t++;t<n;t++)if(i=e[t],i!=="_"){if(i!=="0"&&i!=="1")return!1;o=!0}return o&&i!=="_"}if(i==="x"){for(t++;t<n;t++)if(i=e[t],i!=="_"){if(!$E(e.charCodeAt(t)))return!1;o=!0}return o&&i!=="_"}if(i==="o"){for(t++;t<n;t++)if(i=e[t],i!=="_"){if(!IE(e.charCodeAt(t)))return!1;o=!0}return o&&i!=="_"}}if(i==="_")return!1;for(;t<n;t++)if(i=e[t],i!=="_"){if(!TE(e.charCodeAt(t)))return!1;o=!0}return!(!o||i==="_")}function FE(e){var n=e,t=1,o;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),o=n[0],(o==="-"||o==="+")&&(o==="-"&&(t=-1),n=n.slice(1),o=n[0]),n==="0")return 0;if(o==="0"){if(n[1]==="b")return t*parseInt(n.slice(2),2);if(n[1]==="x")return t*parseInt(n.slice(2),16);if(n[1]==="o")return t*parseInt(n.slice(2),8)}return t*parseInt(n,10)}function OE(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!oo.isNegativeZero(e)}var LE=new Gn("tag:yaml.org,2002:int",{kind:"scalar",resolve:RE,construct:FE,predicate:OE,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ME=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function NE(e){return!(e===null||!ME.test(e)||e[e.length-1]==="_")}function DE(e){var n,t;return n=e.replace(/_/g,"").toLowerCase(),t=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:t*parseFloat(n,10)}var PE=/^[-+]?[0-9]+e/;function jE(e,n){var t;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(oo.isNegativeZero(e))return"-0.0";return t=e.toString(10),PE.test(t)?t.replace("e",".e"):t}function BE(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||oo.isNegativeZero(e))}var UE=new Gn("tag:yaml.org,2002:float",{kind:"scalar",resolve:NE,construct:DE,predicate:BE,represent:jE,defaultStyle:"lowercase"}),zE=bE.extend({implicit:[SE,AE,LE,UE]}),VE=zE,Rv=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Fv=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function HE(e){return e===null?!1:Rv.exec(e)!==null||Fv.exec(e)!==null}function GE(e){var n,t,o,i,s,r,a,d=0,l=null,f,g,m;if(n=Rv.exec(e),n===null&&(n=Fv.exec(e)),n===null)throw new Error("Date resolve error");if(t=+n[1],o=+n[2]-1,i=+n[3],!n[4])return new Date(Date.UTC(t,o,i));if(s=+n[4],r=+n[5],a=+n[6],n[7]){for(d=n[7].slice(0,3);d.length<3;)d+="0";d=+d}return n[9]&&(f=+n[10],g=+(n[11]||0),l=(f*60+g)*6e4,n[9]==="-"&&(l=-l)),m=new Date(Date.UTC(t,o,i,s,r,a,d)),l&&m.setTime(m.getTime()-l),m}function WE(e){return e.toISOString()}var YE=new Gn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:HE,construct:GE,instanceOf:Date,represent:WE});function KE(e){return e==="<<"||e===null}var qE=new Gn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:KE}),Xd=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function ZE(e){if(e===null)return!1;var n,t,o=0,i=e.length,s=Xd;for(t=0;t<i;t++)if(n=s.indexOf(e.charAt(t)),!(n>64)){if(n<0)return!1;o+=6}return o%8===0}function XE(e){var n,t,o=e.replace(/[\r\n=]/g,""),i=o.length,s=Xd,r=0,a=[];for(n=0;n<i;n++)n%4===0&&n&&(a.push(r>>16&255),a.push(r>>8&255),a.push(r&255)),r=r<<6|s.indexOf(o.charAt(n));return t=i%4*6,t===0?(a.push(r>>16&255),a.push(r>>8&255),a.push(r&255)):t===18?(a.push(r>>10&255),a.push(r>>2&255)):t===12&&a.push(r>>4&255),new Uint8Array(a)}function JE(e){var n="",t=0,o,i,s=e.length,r=Xd;for(o=0;o<s;o++)o%3===0&&o&&(n+=r[t>>18&63],n+=r[t>>12&63],n+=r[t>>6&63],n+=r[t&63]),t=(t<<8)+e[o];return i=s%3,i===0?(n+=r[t>>18&63],n+=r[t>>12&63],n+=r[t>>6&63],n+=r[t&63]):i===2?(n+=r[t>>10&63],n+=r[t>>4&63],n+=r[t<<2&63],n+=r[64]):i===1&&(n+=r[t>>2&63],n+=r[t<<4&63],n+=r[64],n+=r[64]),n}function QE(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var eS=new Gn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:ZE,construct:XE,predicate:QE,represent:JE}),tS=Object.prototype.hasOwnProperty,nS=Object.prototype.toString;function oS(e){if(e===null)return!0;var n=[],t,o,i,s,r,a=e;for(t=0,o=a.length;t<o;t+=1){if(i=a[t],r=!1,nS.call(i)!=="[object Object]")return!1;for(s in i)if(tS.call(i,s))if(!r)r=!0;else return!1;if(!r)return!1;if(n.indexOf(s)===-1)n.push(s);else return!1}return!0}function iS(e){return e!==null?e:[]}var sS=new Gn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:oS,construct:iS}),rS=Object.prototype.toString;function aS(e){if(e===null)return!0;var n,t,o,i,s,r=e;for(s=new Array(r.length),n=0,t=r.length;n<t;n+=1){if(o=r[n],rS.call(o)!=="[object Object]"||(i=Object.keys(o),i.length!==1))return!1;s[n]=[i[0],o[i[0]]]}return!0}function lS(e){if(e===null)return[];var n,t,o,i,s,r=e;for(s=new Array(r.length),n=0,t=r.length;n<t;n+=1)o=r[n],i=Object.keys(o),s[n]=[i[0],o[i[0]]];return s}var cS=new Gn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:aS,construct:lS}),uS=Object.prototype.hasOwnProperty;function dS(e){if(e===null)return!0;var n,t=e;for(n in t)if(uS.call(t,n)&&t[n]!==null)return!1;return!0}function fS(e){return e!==null?e:{}}var pS=new Gn("tag:yaml.org,2002:set",{kind:"mapping",resolve:dS,construct:fS}),hS=VE.extend({implicit:[YE,qE],explicit:[eS,sS,cS,pS]}),as=Object.prototype.hasOwnProperty,ec=1,Ov=2,Lv=3,tc=4,Cu=1,gS=2,Pp=3,vS=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,mS=/[\x85\u2028\u2029]/,yS=/[,\[\]\{\}]/,Mv=/^(?:!|!!|![a-z\-]+!)$/i,Nv=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function jp(e){return Object.prototype.toString.call(e)}function ni(e){return e===10||e===13}function Ls(e){return e===9||e===32}function po(e){return e===9||e===32||e===10||e===13}function lr(e){return e===44||e===91||e===93||e===123||e===125}function bS(e){var n;return 48<=e&&e<=57?e-48:(n=e|32,97<=n&&n<=102?n-97+10:-1)}function _S(e){return e===120?2:e===117?4:e===85?8:0}function wS(e){return 48<=e&&e<=57?e-48:-1}function Bp(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function ES(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function Dv(e,n,t){n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:t}):e[n]=t}var Pv=new Array(256),jv=new Array(256);for(var tr=0;tr<256;tr++)Pv[tr]=Bp(tr)?1:0,jv[tr]=Bp(tr);function SS(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||hS,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Bv(e,n){var t={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return t.snippet=cE(t),new $i(n,t)}function gt(e,n){throw Bv(e,n)}function nc(e,n){e.onWarning&&e.onWarning.call(null,Bv(e,n))}var Up={YAML:function(n,t,o){var i,s,r;n.version!==null&&gt(n,"duplication of %YAML directive"),o.length!==1&&gt(n,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(o[0]),i===null&&gt(n,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),r=parseInt(i[2],10),s!==1&&gt(n,"unacceptable YAML version of the document"),n.version=o[0],n.checkLineBreaks=r<2,r!==1&&r!==2&&nc(n,"unsupported YAML version of the document")},TAG:function(n,t,o){var i,s;o.length!==2&&gt(n,"TAG directive accepts exactly two arguments"),i=o[0],s=o[1],Mv.test(i)||gt(n,"ill-formed tag handle (first argument) of the TAG directive"),as.call(n.tagMap,i)&&gt(n,'there is a previously declared suffix for "'+i+'" tag handle'),Nv.test(s)||gt(n,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{gt(n,"tag prefix is malformed: "+s)}n.tagMap[i]=s}};function ns(e,n,t,o){var i,s,r,a;if(n<t){if(a=e.input.slice(n,t),o)for(i=0,s=a.length;i<s;i+=1)r=a.charCodeAt(i),r===9||32<=r&&r<=1114111||gt(e,"expected valid JSON character");else vS.test(a)&&gt(e,"the stream contains non-printable characters");e.result+=a}}function zp(e,n,t,o){var i,s,r,a;for(oo.isObject(t)||gt(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(t),r=0,a=i.length;r<a;r+=1)s=i[r],as.call(n,s)||(Dv(n,s,t[s]),o[s]=!0)}function cr(e,n,t,o,i,s,r,a,d){var l,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),l=0,f=i.length;l<f;l+=1)Array.isArray(i[l])&&gt(e,"nested arrays are not supported inside keys"),typeof i=="object"&&jp(i[l])==="[object Object]"&&(i[l]="[object Object]");if(typeof i=="object"&&jp(i)==="[object Object]"&&(i="[object Object]"),i=String(i),n===null&&(n={}),o==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(l=0,f=s.length;l<f;l+=1)zp(e,n,s[l],t);else zp(e,n,s,t);else!e.json&&!as.call(t,i)&&as.call(n,i)&&(e.line=r||e.line,e.lineStart=a||e.lineStart,e.position=d||e.position,gt(e,"duplicated mapping key")),Dv(n,i,s),delete t[i];return n}function Jd(e){var n;n=e.input.charCodeAt(e.position),n===10?e.position++:n===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):gt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Sn(e,n,t){for(var o=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Ls(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(n&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(ni(i))for(Jd(e),i=e.input.charCodeAt(e.position),o++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return t!==-1&&o!==0&&e.lineIndent<t&&nc(e,"deficient indentation"),o}function Ac(e){var n=e.position,t;return t=e.input.charCodeAt(n),!!((t===45||t===46)&&t===e.input.charCodeAt(n+1)&&t===e.input.charCodeAt(n+2)&&(n+=3,t=e.input.charCodeAt(n),t===0||po(t)))}function Qd(e,n){n===1?e.result+=" ":n>1&&(e.result+=oo.repeat(`
`,n-1))}function xS(e,n,t){var o,i,s,r,a,d,l,f,g=e.kind,m=e.result,v;if(v=e.input.charCodeAt(e.position),po(v)||lr(v)||v===35||v===38||v===42||v===33||v===124||v===62||v===39||v===34||v===37||v===64||v===96||(v===63||v===45)&&(i=e.input.charCodeAt(e.position+1),po(i)||t&&lr(i)))return!1;for(e.kind="scalar",e.result="",s=r=e.position,a=!1;v!==0;){if(v===58){if(i=e.input.charCodeAt(e.position+1),po(i)||t&&lr(i))break}else if(v===35){if(o=e.input.charCodeAt(e.position-1),po(o))break}else{if(e.position===e.lineStart&&Ac(e)||t&&lr(v))break;if(ni(v))if(d=e.line,l=e.lineStart,f=e.lineIndent,Sn(e,!1,-1),e.lineIndent>=n){a=!0,v=e.input.charCodeAt(e.position);continue}else{e.position=r,e.line=d,e.lineStart=l,e.lineIndent=f;break}}a&&(ns(e,s,r,!1),Qd(e,e.line-d),s=r=e.position,a=!1),Ls(v)||(r=e.position+1),v=e.input.charCodeAt(++e.position)}return ns(e,s,r,!1),e.result?!0:(e.kind=g,e.result=m,!1)}function kS(e,n){var t,o,i;if(t=e.input.charCodeAt(e.position),t!==39)return!1;for(e.kind="scalar",e.result="",e.position++,o=i=e.position;(t=e.input.charCodeAt(e.position))!==0;)if(t===39)if(ns(e,o,e.position,!0),t=e.input.charCodeAt(++e.position),t===39)o=e.position,e.position++,i=e.position;else return!0;else ni(t)?(ns(e,o,i,!0),Qd(e,Sn(e,!1,n)),o=i=e.position):e.position===e.lineStart&&Ac(e)?gt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);gt(e,"unexpected end of the stream within a single quoted scalar")}function CS(e,n){var t,o,i,s,r,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,t=o=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return ns(e,t,e.position,!0),e.position++,!0;if(a===92){if(ns(e,t,e.position,!0),a=e.input.charCodeAt(++e.position),ni(a))Sn(e,!1,n);else if(a<256&&Pv[a])e.result+=jv[a],e.position++;else if((r=_S(a))>0){for(i=r,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(r=bS(a))>=0?s=(s<<4)+r:gt(e,"expected hexadecimal character");e.result+=ES(s),e.position++}else gt(e,"unknown escape sequence");t=o=e.position}else ni(a)?(ns(e,t,o,!0),Qd(e,Sn(e,!1,n)),t=o=e.position):e.position===e.lineStart&&Ac(e)?gt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,o=e.position)}gt(e,"unexpected end of the stream within a double quoted scalar")}function AS(e,n){var t=!0,o,i,s,r=e.tag,a,d=e.anchor,l,f,g,m,v,T=Object.create(null),P,w,C,$;if($=e.input.charCodeAt(e.position),$===91)f=93,v=!1,a=[];else if($===123)f=125,v=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),$=e.input.charCodeAt(++e.position);$!==0;){if(Sn(e,!0,n),$=e.input.charCodeAt(e.position),$===f)return e.position++,e.tag=r,e.anchor=d,e.kind=v?"mapping":"sequence",e.result=a,!0;t?$===44&&gt(e,"expected the node content, but found ','"):gt(e,"missed comma between flow collection entries"),w=P=C=null,g=m=!1,$===63&&(l=e.input.charCodeAt(e.position+1),po(l)&&(g=m=!0,e.position++,Sn(e,!0,n))),o=e.line,i=e.lineStart,s=e.position,Cr(e,n,ec,!1,!0),w=e.tag,P=e.result,Sn(e,!0,n),$=e.input.charCodeAt(e.position),(m||e.line===o)&&$===58&&(g=!0,$=e.input.charCodeAt(++e.position),Sn(e,!0,n),Cr(e,n,ec,!1,!0),C=e.result),v?cr(e,a,T,w,P,C,o,i,s):g?a.push(cr(e,null,T,w,P,C,o,i,s)):a.push(P),Sn(e,!0,n),$=e.input.charCodeAt(e.position),$===44?(t=!0,$=e.input.charCodeAt(++e.position)):t=!1}gt(e,"unexpected end of the stream within a flow collection")}function $S(e,n){var t,o,i=Cu,s=!1,r=!1,a=n,d=0,l=!1,f,g;if(g=e.input.charCodeAt(e.position),g===124)o=!1;else if(g===62)o=!0;else return!1;for(e.kind="scalar",e.result="";g!==0;)if(g=e.input.charCodeAt(++e.position),g===43||g===45)Cu===i?i=g===43?Pp:gS:gt(e,"repeat of a chomping mode identifier");else if((f=wS(g))>=0)f===0?gt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):r?gt(e,"repeat of an indentation width identifier"):(a=n+f-1,r=!0);else break;if(Ls(g)){do g=e.input.charCodeAt(++e.position);while(Ls(g));if(g===35)do g=e.input.charCodeAt(++e.position);while(!ni(g)&&g!==0)}for(;g!==0;){for(Jd(e),e.lineIndent=0,g=e.input.charCodeAt(e.position);(!r||e.lineIndent<a)&&g===32;)e.lineIndent++,g=e.input.charCodeAt(++e.position);if(!r&&e.lineIndent>a&&(a=e.lineIndent),ni(g)){d++;continue}if(e.lineIndent<a){i===Pp?e.result+=oo.repeat(`
`,s?1+d:d):i===Cu&&s&&(e.result+=`
`);break}for(o?Ls(g)?(l=!0,e.result+=oo.repeat(`
`,s?1+d:d)):l?(l=!1,e.result+=oo.repeat(`
`,d+1)):d===0?s&&(e.result+=" "):e.result+=oo.repeat(`
`,d):e.result+=oo.repeat(`
`,s?1+d:d),s=!0,r=!0,d=0,t=e.position;!ni(g)&&g!==0;)g=e.input.charCodeAt(++e.position);ns(e,t,e.position,!1)}return!0}function Vp(e,n){var t,o=e.tag,i=e.anchor,s=[],r,a=!1,d;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),d=e.input.charCodeAt(e.position);d!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,gt(e,"tab characters must not be used in indentation")),!(d!==45||(r=e.input.charCodeAt(e.position+1),!po(r))));){if(a=!0,e.position++,Sn(e,!0,-1)&&e.lineIndent<=n){s.push(null),d=e.input.charCodeAt(e.position);continue}if(t=e.line,Cr(e,n,Lv,!1,!0),s.push(e.result),Sn(e,!0,-1),d=e.input.charCodeAt(e.position),(e.line===t||e.lineIndent>n)&&d!==0)gt(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break}return a?(e.tag=o,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function IS(e,n,t){var o,i,s,r,a,d,l=e.tag,f=e.anchor,g={},m=Object.create(null),v=null,T=null,P=null,w=!1,C=!1,$;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=g),$=e.input.charCodeAt(e.position);$!==0;){if(!w&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,gt(e,"tab characters must not be used in indentation")),o=e.input.charCodeAt(e.position+1),s=e.line,($===63||$===58)&&po(o))$===63?(w&&(cr(e,g,m,v,T,null,r,a,d),v=T=P=null),C=!0,w=!0,i=!0):w?(w=!1,i=!0):gt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,$=o;else{if(r=e.line,a=e.lineStart,d=e.position,!Cr(e,t,Ov,!1,!0))break;if(e.line===s){for($=e.input.charCodeAt(e.position);Ls($);)$=e.input.charCodeAt(++e.position);if($===58)$=e.input.charCodeAt(++e.position),po($)||gt(e,"a whitespace character is expected after the key-value separator within a block mapping"),w&&(cr(e,g,m,v,T,null,r,a,d),v=T=P=null),C=!0,w=!1,i=!1,v=e.tag,T=e.result;else if(C)gt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=l,e.anchor=f,!0}else if(C)gt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=l,e.anchor=f,!0}if((e.line===s||e.lineIndent>n)&&(w&&(r=e.line,a=e.lineStart,d=e.position),Cr(e,n,tc,!0,i)&&(w?T=e.result:P=e.result),w||(cr(e,g,m,v,T,P,r,a,d),v=T=P=null),Sn(e,!0,-1),$=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>n)&&$!==0)gt(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return w&&cr(e,g,m,v,T,null,r,a,d),C&&(e.tag=l,e.anchor=f,e.kind="mapping",e.result=g),C}function TS(e){var n,t=!1,o=!1,i,s,r;if(r=e.input.charCodeAt(e.position),r!==33)return!1;if(e.tag!==null&&gt(e,"duplication of a tag property"),r=e.input.charCodeAt(++e.position),r===60?(t=!0,r=e.input.charCodeAt(++e.position)):r===33?(o=!0,i="!!",r=e.input.charCodeAt(++e.position)):i="!",n=e.position,t){do r=e.input.charCodeAt(++e.position);while(r!==0&&r!==62);e.position<e.length?(s=e.input.slice(n,e.position),r=e.input.charCodeAt(++e.position)):gt(e,"unexpected end of the stream within a verbatim tag")}else{for(;r!==0&&!po(r);)r===33&&(o?gt(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(n-1,e.position+1),Mv.test(i)||gt(e,"named tag handle cannot contain such characters"),o=!0,n=e.position+1)),r=e.input.charCodeAt(++e.position);s=e.input.slice(n,e.position),yS.test(s)&&gt(e,"tag suffix cannot contain flow indicator characters")}s&&!Nv.test(s)&&gt(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{gt(e,"tag name is malformed: "+s)}return t?e.tag=s:as.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:gt(e,'undeclared tag handle "'+i+'"'),!0}function RS(e){var n,t;if(t=e.input.charCodeAt(e.position),t!==38)return!1;for(e.anchor!==null&&gt(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),n=e.position;t!==0&&!po(t)&&!lr(t);)t=e.input.charCodeAt(++e.position);return e.position===n&&gt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function FS(e){var n,t,o;if(o=e.input.charCodeAt(e.position),o!==42)return!1;for(o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!po(o)&&!lr(o);)o=e.input.charCodeAt(++e.position);return e.position===n&&gt(e,"name of an alias node must contain at least one character"),t=e.input.slice(n,e.position),as.call(e.anchorMap,t)||gt(e,'unidentified alias "'+t+'"'),e.result=e.anchorMap[t],Sn(e,!0,-1),!0}function Cr(e,n,t,o,i){var s,r,a,d=1,l=!1,f=!1,g,m,v,T,P,w;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=r=a=tc===t||Lv===t,o&&Sn(e,!0,-1)&&(l=!0,e.lineIndent>n?d=1:e.lineIndent===n?d=0:e.lineIndent<n&&(d=-1)),d===1)for(;TS(e)||RS(e);)Sn(e,!0,-1)?(l=!0,a=s,e.lineIndent>n?d=1:e.lineIndent===n?d=0:e.lineIndent<n&&(d=-1)):a=!1;if(a&&(a=l||i),(d===1||tc===t)&&(ec===t||Ov===t?P=n:P=n+1,w=e.position-e.lineStart,d===1?a&&(Vp(e,w)||IS(e,w,P))||AS(e,P)?f=!0:(r&&$S(e,P)||kS(e,P)||CS(e,P)?f=!0:FS(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&gt(e,"alias node should not have any properties")):xS(e,P,ec===t)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):d===0&&(f=a&&Vp(e,w))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&gt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),g=0,m=e.implicitTypes.length;g<m;g+=1)if(T=e.implicitTypes[g],T.resolve(e.result)){e.result=T.construct(e.result),e.tag=T.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(as.call(e.typeMap[e.kind||"fallback"],e.tag))T=e.typeMap[e.kind||"fallback"][e.tag];else for(T=null,v=e.typeMap.multi[e.kind||"fallback"],g=0,m=v.length;g<m;g+=1)if(e.tag.slice(0,v[g].tag.length)===v[g].tag){T=v[g];break}T||gt(e,"unknown tag !<"+e.tag+">"),e.result!==null&&T.kind!==e.kind&&gt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+T.kind+'", not "'+e.kind+'"'),T.resolve(e.result,e.tag)?(e.result=T.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):gt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function OS(e){var n=e.position,t,o,i,s=!1,r;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(r=e.input.charCodeAt(e.position))!==0&&(Sn(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||r!==37));){for(s=!0,r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!po(r);)r=e.input.charCodeAt(++e.position);for(o=e.input.slice(t,e.position),i=[],o.length<1&&gt(e,"directive name must not be less than one character in length");r!==0;){for(;Ls(r);)r=e.input.charCodeAt(++e.position);if(r===35){do r=e.input.charCodeAt(++e.position);while(r!==0&&!ni(r));break}if(ni(r))break;for(t=e.position;r!==0&&!po(r);)r=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}r!==0&&Jd(e),as.call(Up,o)?Up[o](e,o,i):nc(e,'unknown document directive "'+o+'"')}if(Sn(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Sn(e,!0,-1)):s&&gt(e,"directives end mark is expected"),Cr(e,e.lineIndent-1,tc,!1,!0),Sn(e,!0,-1),e.checkLineBreaks&&mS.test(e.input.slice(n,e.position))&&nc(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ac(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Sn(e,!0,-1));return}if(e.position<e.length-1)gt(e,"end of the stream or a document separator is expected");else return}function LS(e,n){e=String(e),n=n||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var t=new SS(e,n),o=e.indexOf("\0");for(o!==-1&&(t.position=o,gt(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)OS(t);return t.documents}function MS(e,n){var t=LS(e,n);if(t.length!==0){if(t.length===1)return t[0];throw new $i("expected a single document in the stream, but found more")}}var NS=MS,DS={load:NS},PS=DS.load;const jS={class:"secrets-modal",role:"dialog","aria-modal":"true","aria-label":"Secrets"},BS={class:"secrets-modal-body"},US={class:"secrets-modal-editor-shell"},zS=["innerHTML"],VS=["disabled"],HS={key:0,class:"secrets-modal-error"},GS={class:"secrets-modal-footer"},WS=["disabled"],YS=["disabled"],KS={__name:"SecretsModal",props:{open:{type:Boolean,default:!1},content:{type:String,default:""},loading:{type:Boolean,default:!1},saving:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["close","save"],setup(e,{emit:n}){const t=e,o=n,i=K(""),s=K(""),r=K(""),a=K(null),d=K(null),l=A(()=>i.value!==s.value),f=A(()=>l.value&&!t.loading&&!t.saving&&!r.value),g=A(()=>r.value||t.error||""),m=$=>String($||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),v=$=>{if(/^\s*#/.test($))return`<span class="yaml-comment">${m($)}</span>`;const H=$.indexOf(":");if(H<0)return m($);const M=$.slice(0,H+1),ee=$.slice(H+1),oe=ee.indexOf("#");if(oe<0)return`${m(M)}<span class="yaml-value">${m(ee)}</span>`;const Z=ee.slice(0,oe),ye=ee.slice(oe);return`${m(M)}<span class="yaml-value">${m(Z)}</span><span class="yaml-comment">${m(ye)}</span>`},T=A(()=>String(i.value||"").split(`
`).map(H=>v(H)).join(`
`)),P=$=>{const H=($==null?void 0:$.message)||"Invalid YAML syntax",M=$==null?void 0:$.mark;return!M||!Number.isFinite(M.line)||!Number.isFinite(M.column)?H:`${H} (line ${M.line+1}, column ${M.column+1})`},w=()=>{try{PS(i.value||""),r.value=""}catch($){r.value=P($)}},C=()=>{const $=a.value,H=d.value;!$||!H||(H.scrollTop=$.scrollTop,H.scrollLeft=$.scrollLeft)};return nt(()=>t.open,$=>{$&&(i.value=t.content||"",s.value=t.content||"",w())}),nt(()=>t.content,$=>{if(!t.open)return;const H=$||"";l.value&&i.value!==H||(i.value=H,s.value=H,w())}),nt(()=>i.value,()=>{w()}),($,H)=>e.open?(_(),E("div",{key:0,class:"secrets-modal-overlay",onClick:H[3]||(H[3]=Et(M=>o("close"),["self"]))},[c("section",jS,[H[4]||(H[4]=c("header",{class:"secrets-modal-header"},[c("h3",null,"Secrets")],-1)),c("div",BS,[c("div",US,[c("pre",{ref_key:"highlightRef",ref:d,class:"secrets-modal-highlight","aria-hidden":"true",innerHTML:T.value},null,8,zS),Fn(c("textarea",{ref_key:"editorRef",ref:a,"onUpdate:modelValue":H[0]||(H[0]=M=>i.value=M),class:"secrets-modal-editor",spellcheck:"false",autocomplete:"off",autocapitalize:"off",placeholder:"# secrets.yaml\\n# key: value",disabled:e.loading||e.saving,onScroll:C},null,40,VS),[[to,i.value]])])]),g.value?(_(),E("p",HS,ge(g.value),1)):ue("",!0),c("footer",GS,[c("button",{type:"button",class:"btn-standard",disabled:!f.value,onClick:H[1]||(H[1]=M=>o("save",i.value))}," Save ",8,WS),c("button",{type:"button",class:"btn-standard secondary",disabled:e.saving,onClick:H[2]||(H[2]=M=>o("close"))}," Close ",8,YS)])])])):ue("",!0)}},qS=so(KS,[["__scopeId","data-v-f89a2ce1"]]),ZS={class:"icon-picker-card"},XS={class:"icon-picker-search"},JS=["disabled"],QS={class:"icon-picker-meta"},ex={key:0},tx={key:1},nx={key:2},ox={key:3},ix={key:0,class:"icon-grid"},sx=["onClick"],rx=["src","alt"],ax={key:1,class:"icon-empty"},lx="https://cdn.jsdelivr.net/npm/@mdi/svg/meta.json",cx={__name:"IconPicker",props:{open:{type:Boolean,default:!1},selected:{type:String,default:""},initialQuery:{type:String,default:""}},emits:["close","select"],setup(e,{emit:n}){const t=e,o=n,i=K(""),s=K(null),r=K([]),a=K(!1),d=K(""),l=K(!1),f=M=>`https://cdn.jsdelivr.net/npm/@mdi/svg/svg/${encodeURIComponent(M)}.svg`,g=A(()=>{const M=i.value.trim().toLowerCase();if(!M)return[];const ee=[];return r.value.forEach(oe=>{var Z,ye;if(!(ee.length>=300)){if(oe.name.toLowerCase().includes(M)){ee.push(oe);return}if((Z=oe.aliases)!=null&&Z.some(Ce=>Ce.toLowerCase().includes(M))){ee.push(oe);return}(ye=oe.tags)!=null&&ye.some(Ce=>Ce.toLowerCase().includes(M))&&ee.push(oe)}}),ee}),m=A(()=>g.value.length),v=M=>{o("select",M)},T=()=>{o("close",{query:i.value.trim()})},P=K(!1),w=()=>{P.value=!0},C=()=>{P.value&&(P.value=!1,T())},$=M=>{M.key==="Escape"&&T()},H=async()=>{if(!(l.value||a.value)){a.value=!0,d.value="";try{const M=await fetch(lx);if(!M.ok)throw new Error(`HTTP ${M.status}`);const ee=await M.json();r.value=Array.isArray(ee)?ee.filter(oe=>!oe.deprecated):[],l.value=!0}catch{d.value="Failed to load icons"}finally{a.value=!1}}};return nt(()=>t.open,async M=>{var ee;M&&(i.value=t.initialQuery||"",await H(),await Ao(),(ee=s.value)==null||ee.focus())}),nt(()=>t.open,M=>{M?window.addEventListener("keydown",$):(window.removeEventListener("keydown",$),P.value=!1)}),go(()=>{window.removeEventListener("keydown",$)}),(M,ee)=>e.open?(_(),E("div",{key:0,class:"icon-picker-backdrop",onPointerdown:Et(w,["self"]),onClick:Et(C,["self"])},[c("div",ZS,[c("header",{class:"icon-picker-header"},[ee[1]||(ee[1]=c("div",null,[c("h3",null,"Choose icon"),c("p",{class:"icon-picker-sub"},"Search the Material Design Icons catalog.")],-1)),c("button",{type:"button",class:"secondary compact",onClick:T},"Close")]),c("div",XS,[Fn(c("input",{ref_key:"searchInput",ref:s,"onUpdate:modelValue":ee[0]||(ee[0]=oe=>i.value=oe),type:"text",placeholder:"Search icons",disabled:a.value},null,8,JS),[[to,i.value]]),c("div",QS,[a.value?(_(),E("span",ex,"Loading icons...")):d.value?(_(),E("span",tx,ge(d.value),1)):m.value?(_(),E("span",nx,"Results: "+ge(m.value),1)):(_(),E("span",ox,"Type to search"))])]),g.value.length?(_(),E("div",ix,[(_(!0),E(je,null,Je(g.value,oe=>(_(),E("button",{key:oe.name,type:"button",class:pt(["icon-button",{selected:oe.name===e.selected}]),onClick:Z=>v(oe.name)},[c("img",{src:f(oe.name),alt:oe.name},null,8,rx),c("span",null,ge(oe.name),1)],10,sx))),128))])):a.value?ue("",!0):(_(),E("div",ax,"No icons to show."))])],32)):ue("",!0)}},ef=so(cx,[["__scopeId","data-v-47aaedd8"]]),ux={class:"icon-picker-card"},dx={class:"icon-picker-header"},fx={class:"filter-header-title"},px=["href","aria-label"],hx={class:"icon-picker-search"},gx=["placeholder"],vx={key:0,class:"filter-grid"},mx=["title","onClick"],yx={class:"filter-title"},bx={key:1,class:"icon-empty"},_x={__name:"PickerModal",props:{open:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},title:{type:String,default:"Choose"},helpUrl:{type:String,default:""},helpLabel:{type:String,default:"Documentation"},searchPlaceholder:{type:String,default:"Search"},emptyLabel:{type:String,default:"No items to show."},initialQuery:{type:String,default:""}},emits:["close","select"],setup(e,{emit:n}){const t=e,o=n,i=K(""),s=K(null),r=A(()=>{const l=i.value.trim().toLowerCase();return l?t.items.filter(f=>{const g=String(f.id||"").toLowerCase(),m=String(f.label||"").toLowerCase();return g.includes(l)||m.includes(l)}):t.items}),a=l=>{o("select",l)},d=()=>{o("close")};return nt(()=>t.open,async l=>{var f;l&&(i.value=t.initialQuery||"",await Ao(),(f=s.value)==null||f.focus())}),(l,f)=>e.open?(_(),E("div",{key:0,class:"icon-picker-backdrop",onClick:Et(d,["self"])},[c("div",ux,[c("header",dx,[c("div",null,[c("div",fx,[c("h3",null,ge(e.title),1),e.helpUrl?(_(),E("a",{key:0,class:"filter-help",href:e.helpUrl,target:"_blank",rel:"noopener noreferrer","aria-label":e.helpLabel}," ? ",8,px)):ue("",!0)]),f[1]||(f[1]=c("p",{class:"icon-picker-sub"},null,-1))]),c("button",{type:"button",class:"secondary compact",onClick:d},"Close")]),c("div",hx,[Fn(c("input",{ref_key:"searchInput",ref:s,"onUpdate:modelValue":f[0]||(f[0]=g=>i.value=g),type:"text",placeholder:e.searchPlaceholder},null,8,gx),[[to,i.value]]),f[2]||(f[2]=c("div",{class:"icon-picker-meta"},null,-1))]),r.value.length?(_(),E("div",vx,[(_(!0),E(je,null,Je(r.value,g=>(_(),E("button",{key:g.id,type:"button",class:"filter-card",title:g.description||g.label||g.id,onClick:m=>a(g)},[c("span",yx,ge(g.label||g.id),1)],8,mx))),128))])):(_(),E("div",bx,ge(e.emptyLabel),1))])])):ue("",!0)}},wx=so(_x,[["__scopeId","data-v-169dedb3"]]),Ex="./".endsWith("/")?"./".slice(0,-1):"./",Au=new Map,$u=new Map,Gi={data:null,promise:null},Wi={data:null,promise:null},Sx=e=>`components/${e.replace(/\./g,"/")}.json`,Ns=async e=>{if($u.has(e))return $u.get(e);const n=`${Ex}/schemas/${e}`,t=await fetch(n,{cache:"default"});if(!t.ok)throw new Error(`Schema HTTP ${t.status}`);if(!(t.headers.get("content-type")||"").includes("application/json"))throw new Error("Schema not found");const i=await t.json();return $u.set(e,i),i},gd=async e=>{let n=e;if(n.extends){const t=await Ns(`components/base_component/${n.extends}`),o=await $c(t),i=Array.isArray(o.fields)?o.fields:[],s=Array.isArray(n.fields)?n.fields:[];n={...n,fields:[...i,...s]}}if(n.type==="object"&&Array.isArray(n.fields)){const t=await Promise.all(n.fields.map(o=>gd(o)));n={...n,fields:t}}if(n.type==="list"&&n.item){const t=await gd(n.item);n={...n,item:t}}if(n.optionsFrom){const t=await Ns(n.optionsFrom),o=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.options)?t.options:[];n={...n,options:o}}return n},$c=async e=>{let n=[];if(e.extends){const i=await Ns(`components/base_component/${e.extends}`),s=await $c(i);n=Array.isArray(s.fields)?s.fields:[]}const t=Array.isArray(e.fields)?e.fields:[],o=await Promise.all(t.map(i=>gd(i)));return{...e,fields:[...n,...o]}},Uv=async e=>{if(!e)return null;if(Au.has(e))return Au.get(e);const n=await Ns(Sx(e)),t=await $c(n);return Au.set(e,t),t},Eo=async e=>{const n=await Ns(e);return $c(n)},xx=async()=>Gi.data?Gi.data:(Gi.promise||(Gi.promise=Ns("components/base_component/base_filters.json").then(e=>{const n=Array.isArray(e==null?void 0:e.filters)?e.filters:[];return Gi.data=n,n}).finally(()=>{Gi.promise=null})),Gi.promise),kx=async()=>Wi.data?Wi.data:(Wi.promise||(Wi.promise=Ns("components/base_component/base_actions.json").then(e=>{const n=Array.isArray(e==null?void 0:e.actions)?e.actions:[];return Wi.data=n,n}).finally(()=>{Wi.promise=null})),Wi.promise),Cx={class:"schema-list-header"},Ax={class:"schema-list-title"},$x={key:0,class:"schema-required"},Ix={key:0,class:"note"},Tx={class:"components-header"},Rx={class:"filter-title-row"},Fx={class:"filter-title"},Ox=["href","aria-label"],Lx={key:0,class:"schema-grid"},Mx={key:1,class:"note"},Nx={class:"schema-list-actions"},Dx=["onClick"],Px={__name:"CatalogListField",props:{variant:{type:String,required:!0},field:{type:Object,required:!0},path:{type:Array,default:()=>[]},value:{type:Array,default:()=>[]},modeLevel:{type:String,default:"Simple"},idRegistry:{type:Object,default:()=>({})},nameRegistry:{type:Object,default:()=>({})},idIndex:{type:Array,default:()=>[]},gpioOptions:{type:Array,default:()=>[]},gpioUsage:{type:Object,default:()=>({})},gpioTitle:{type:String,default:""},contextComponentId:{type:String,default:""},globalStore:{type:Object,default:()=>({})}},emits:["update"],setup(e,{emit:n}){const t=e,o=n,i=K(!1),s=K([]),r=K(!1),a=K(null),d=A(()=>t.variant==="filters"),l=A(()=>Array.isArray(t.value)?t.value:[]),f=A(()=>{var Ye,Q;return`list-group list-${((Q=(Ye=t.field)==null?void 0:Ye.lvl)==null?void 0:Q.toLowerCase())||"simple"}`}),g=A(()=>{if(d.value)return null;const De=Array.isArray(t.field.actions)?t.field.actions:null;return De&&De.length?De:null}),m=A(()=>d.value||!g.value?s.value:s.value.filter(De=>g.value.includes(De.domain))),v=A(()=>d.value?"Choose filter":"Choose action"),T=A(()=>d.value?"https://esphome.io/components/sensor/#sensor-filters":"https://esphome.io/automations/actions/"),P=A(()=>d.value?"Filter documentation":"Action documentation"),w=A(()=>d.value?"Search filters":"Search actions"),C=A(()=>d.value?"No filters to show.":"No actions to show."),$=()=>{i.value=!0},H=()=>{i.value=!1},M=De=>{var Q,we;const Ye=l.value.slice();d.value?Ye.push({type:De.id,style:De.style,valueKey:De.valueKey||((we=(Q=De.fields)==null?void 0:Q[0])==null?void 0:we.key)||"value",valueType:De.valueType||"text",config:{}}):Ye.push({type:De.id,fields:De.fields||[],config:{}}),o("update",{path:t.path,value:Ye}),i.value=!1},ee=De=>{const Ye=l.value.filter((Q,we)=>we!==De);o("update",{path:t.path,value:Ye})},oe=De=>{a.value=De,r.value=!0},Z=()=>{a.value!==null&&ee(a.value),r.value=!1,a.value=null},ye=()=>{r.value=!1,a.value=null},Ce=(De,{path:Ye,value:Q})=>{const we=l.value.map((Oe,Qe)=>{if(Qe!==De)return Oe;const Ke={...Oe.config||{}};let st=Ke;return Ye.slice(0,-1).forEach(vt=>{(!st[vt]||typeof st[vt]!="object")&&(st[vt]={}),st=st[vt]}),st[Ye[Ye.length-1]]=Q,{...Oe,config:Ke}});o("update",{path:t.path,value:we})},Fe=De=>s.value.find(Ye=>Ye.id===(De==null?void 0:De.type)),Le=De=>{const Ye=Fe(De),Q=d.value?"Filter":"Action";return(Ye==null?void 0:Ye.label)||(De==null?void 0:De.type)||Q},We=De=>{const Ye=Fe(De);return d.value?Ye?Ye.style==="scalar"?[{key:"value",type:Ye.valueType||"text",required:!0}]:Ye.style==="scalar_or_object"?Ye.fields||[]:Ye.fields||[]:[]:(Ye==null?void 0:Ye.fields)||(De==null?void 0:De.fields)||[]},ht=De=>{if(!(De!=null&&De.type))return"";if(d.value)return`https://esphome.io/components/sensor/#${De.type}`;const Q={"logger.log":"loggerlog-action","switch.turn_on":"switchturn_on-action","switch.turn_off":"switchturn_off-action","switch.toggle":"switchtoggle-action","light.turn_on":"lightturn_on-action","light.turn_off":"lightturn_off-action",delay:"delay-action",lambda:"lambda-condition"}[De.type];return Q?`https://esphome.io/automations/actions/#${Q}`:""};return li(async()=>{s.value=d.value?await xx():await kx()}),(De,Ye)=>(_(),E("div",{class:pt(["schema-list",[f.value,{"is-empty":l.value.length===0}]])},[c("div",Cx,[c("div",Ax,[c("span",null,ge(e.field.key),1),e.field.required?(_(),E("span",$x,"*")):ue("",!0),c("button",{type:"button",class:"secondary compact btn-add schema-list-add",onClick:$},"Add")])]),l.value.length===0?(_(),E("div",Ix,"No items yet.")):ue("",!0),(_(!0),E(je,null,Je(l.value,(Q,we)=>(_(),E("div",{key:we,class:"schema-list-item"},[c("div",Tx,[c("div",Rx,[c("h3",Fx,ge(Le(Q)),1),ht(Q)?(_(),E("a",{key:0,class:"filter-help",href:ht(Q),target:"_blank",rel:"noopener noreferrer","aria-label":P.value}," ? ",8,Ox)):ue("",!0)])]),We(Q).length?(_(),E("div",Lx,[(_(!0),E(je,null,Je(We(Q),Oe=>(_(),zn(Hv,{key:Oe.key,field:Oe,path:[],value:Q.config||{},"mode-level":e.modeLevel,"id-registry":e.idRegistry,"name-registry":e.nameRegistry,"id-index":e.idIndex,"gpio-options":e.gpioOptions,"gpio-usage":e.gpioUsage,"gpio-title":e.gpioTitle,"context-component-id":e.contextComponentId,"global-store":e.globalStore,onUpdate:Qe=>Ce(we,Qe)},null,8,["field","value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store","onUpdate"]))),128))])):(_(),E("div",Mx,"Brak pol konfiguracyjnych.")),c("div",Nx,[c("button",{type:"button",class:"secondary compact btn-standard",onClick:Oe=>oe(we)}," Remove ",8,Dx)])]))),128)),_t(wx,{open:i.value,items:m.value,title:v.value,"help-url":T.value,"help-label":P.value,"search-placeholder":w.value,"empty-label":C.value,onClose:H,onSelect:M},null,8,["open","items","title","help-url","help-label","search-placeholder","empty-label"]),_t(mr,{open:r.value,title:"Confirm",message:"Are you sure?","confirm-text":"Yes","cancel-text":"Cancel",onConfirm:Z,onCancel:ye},null,8,["open"])],2))}},jx={class:"gpio-picker-card"},Bx={class:"gpio-picker-header"},Ux={class:"gpio-picker-sub"},zx={class:"gpio-picker-search"},Vx={class:"gpio-picker-body"},Hx={key:0,class:"gpio-empty"},Gx=["disabled","onClick"],Wx={class:"gpio-id"},Yx={key:0,class:"gpio-tag"},Kx={class:"gpio-row-note"},qx={__name:"GpioPickerModal",props:{open:{type:Boolean,default:!1},title:{type:String,default:""},options:{type:Array,default:()=>[]},usage:{type:Object,default:()=>({})},selected:{type:String,default:""},initialQuery:{type:String,default:""}},emits:["close","select"],setup(e,{emit:n}){const t=e,o=n,i=K("");K(null);const s=A(()=>t.title||"Select GPIO"),r=C=>String(C||"").toLowerCase().replace(/\s+/g,""),a=A(()=>{const C=r((t.selected||"").replace(/^GPIO/i,""));return t.options.map($=>{var ye;const H=$.value||$.id,M=r(H),ee=((ye=t.usage)==null?void 0:ye[M])||0,Z=ee>0&&(ee>1||M!==C)?"used":$.status;return{...$,key:M,status:Z}})}),d=A(()=>{const C=i.value.trim().toLowerCase();return C?a.value.filter($=>{const H=$.error||$.warning||$.note||"";return $.id.toLowerCase().includes(C)||H.toLowerCase().includes(C)}):a.value}),l=A(()=>d.value),f=()=>{o("close")},g=K(!1),m=()=>{g.value=!0},v=()=>{g.value&&(g.value=!1,f())},T=C=>{C.selectable!==!1&&o("select",C.value||C.id)},P=C=>{C.key==="Escape"&&f()};nt(()=>t.open,C=>{if(C){i.value="";const $=(t.selected||"").toLowerCase();a.value.find(H=>(H.value||H.id||"").toLowerCase()===$),window.addEventListener("keydown",P)}else window.removeEventListener("keydown",P),g.value=!1});const w=C=>C.error||C.warning||C.note||"General-purpose GPIO.";return go(()=>{window.removeEventListener("keydown",P)}),(C,$)=>e.open?(_(),E("div",{key:0,class:"gpio-picker-backdrop",onPointerdown:Et(m,["self"]),onClick:Et(v,["self"])},[c("div",jx,[c("header",Bx,[c("div",null,[$[1]||($[1]=c("h3",null,"GPIO Picker",-1)),c("p",Ux,ge(s.value),1)]),c("button",{type:"button",class:"secondary compact",onClick:f},"Close")]),c("div",zx,[Fn(c("input",{"onUpdate:modelValue":$[0]||($[0]=H=>i.value=H),type:"text",placeholder:"Search GPIO or note"},null,512),[[to,i.value]]),$[2]||($[2]=Zg('<div class="gpio-picker-legend" data-v-cb539cc6><span class="legend-item safe" data-v-cb539cc6>Safe</span><span class="legend-item caution" data-v-cb539cc6>Caution</span><span class="legend-item avoid" data-v-cb539cc6>Avoid</span><span class="legend-item used" data-v-cb539cc6>In use</span></div>',1))]),c("div",Vx,[l.value.length?ue("",!0):(_(),E("div",Hx,"No GPIO matches.")),(_(!0),E(je,null,Je(l.value,H=>(_(),E("div",{key:H.key,class:"gpio-row"},[c("button",{type:"button",class:pt(["gpio-item",[H.status,{disabled:H.selectable===!1}]]),disabled:H.selectable===!1,onClick:M=>T(H)},[c("span",Wx,ge(H.id),1),H.selectable===!1?(_(),E("span",Yx,"Disabled")):ue("",!0)],10,Gx),c("div",Kx,ge(w(H)),1)]))),128))])])],32)):ue("",!0)}},Hp=so(qx,[["__scopeId","data-v-cb539cc6"]]),Zx=(e,n,t)=>{if(n&&n[e]!==void 0)return n[e];const o=t==null?void 0:t.find(i=>i.key===e);if(o&&o.default!==void 0)return o.default},Xx=(e,n)=>{if(!(!n||typeof n!="object"))return n[e]},Gp=(e,n)=>e?e.value!==void 0?n===e.value:Array.isArray(e.values)?e.values.includes(n):e.notValue!==void 0?n!==e.notValue:!!n:!0,Ic=(e,n,t,o)=>{const i=e==null?void 0:e.dependsOn,s=e==null?void 0:e.globalDependsOn,r=i?Zx(i.key,n,t):void 0,a=s?Xx(s.key,o):void 0;return Gp(i,r)&&Gp(s,a)},Jx=(e=[])=>{const n={},t=(i,s)=>{!i||s===void 0||(n[i]=s)},o=(i,s)=>{s!=null&&s.length&&s.forEach(r=>{var d,l;const a=i==null?void 0:i[r.key];if(r.set_global){let f=a;f===void 0&&r.default!==void 0&&(f=r.default),t(r.set_global,f)}r.type==="object"&&o(a||{},r.fields||[]),r.type==="list"&&Array.isArray(a)&&((d=r.item)==null?void 0:d.type)==="object"&&((l=r.item)!=null&&l.fields)&&a.forEach(f=>o(f||{},r.item.fields))})};return e.forEach(({config:i,fields:s})=>{o(i||{},s||[])}),n},Wp=(e,n)=>{if(!n||typeof n!="string")return;const t=n.split(".").filter(Boolean);let o=e;for(const i of t){if(!o||typeof o!="object")return;o=o[i]}return o},Qx=e=>e.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"e").replace(/[]/g,"l").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"s").replace(/[]/g,"z").replace(/[]/g,"z"),zv=(e,n=24)=>{const t=(e??"").toString(),o=Number(n)||24;return Qx(t).toLowerCase().replace(/[^a-z0-9_\s-]/g,"").replace(/[\s_]+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"").slice(0,o)},tf=(e,n,t)=>{var o,i;if((e==null?void 0:e.type)==="slug"&&((o=e==null?void 0:e.settings)!=null&&o.autoPath)){const s=Wp(t||{},e.settings.autoPath),r=String(s??"").trim(),a=String(e.settings.fallbackText??"").trim(),d=r||a;return d?zv(d,Number(e.settings.maxLength)||24):void 0}if((e==null?void 0:e.type)==="ssid"){const s=typeof((i=e.settings)==null?void 0:i.autoPath)=="string"?e.settings.autoPath.trim():"";if(!s)return;const r=Wp(t||{},s),a=String(r??"").trim(),d=String(e.settings.fallbackText??"").trim();let l="";a&&d?l=`${a} ${d}`:a?l=a:l=d;const f=Number(e.settings.maxLength)||0;return f>0?l.slice(0,f):l}},oc=e=>{var o;if((e==null?void 0:e.type)!=="password")return{mode:"none",onEmpty:!1,minLength:0,length:12,charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",bytes:32};const n=((o=e.settings)==null?void 0:o.generator)||{};return{mode:n.mode||"none",onEmpty:!!n.onEmpty,minLength:Number(n.minLength)||0,length:Number(n.length)||12,charset:n.charset||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",bytes:Number(n.bytes)||32}},Vv=e=>{var t;if(!((t=globalThis.crypto)!=null&&t.getRandomValues))return"";const n=oc(e);if(!n||n.mode==="none")return"";if(n.mode==="password"){const o=new Uint8Array(n.length);return globalThis.crypto.getRandomValues(o),Array.from(o).map(i=>n.charset[i%n.charset.length]).join("")}if(n.mode==="base64"){if(typeof btoa!="function")return"";const o=new Uint8Array(n.bytes);globalThis.crypto.getRandomValues(o);let i="";return o.forEach(s=>{i+=String.fromCharCode(s)}),btoa(i)}return""},Cl=(e,n,t,o=n)=>{const i=n==null?void 0:n[e];if(i!=null&&!(typeof i=="string"&&i.trim()===""))return i;const r=Array.isArray(t)?t.find(l=>(l==null?void 0:l.key)===e):null;if(!r)return i;const a=tf(r,n,o);return a!=null&&!(typeof a=="string"&&a.trim()==="")?a:r.default!==void 0?r.default:i},ek={key:0,class:"schema-group schema-object-group"},tk={class:"schema-group-title"},nk={class:"schema-levels"},ok=["for"],ik={key:0,class:"schema-required"},sk=["href"],rk=["id","value"],ak=["value"],lk={value:"__opt_true"},ck={value:"__opt_false"},uk={class:"schema-list-header"},dk={class:"schema-list-title"},fk=["href"],pk={key:1,class:"schema-required"},hk={key:0,class:"note"},gk={key:0,class:"schema-levels"},vk=["id","value","onChange"],mk=["value"],yk={value:"__opt_true"},bk={value:"__opt_false"},_k=["id","value","onChange"],wk=["value"],Ek={key:1,value:""},Sk=["value"],xk={key:3,class:"schema-gpio-input"},kk=["id","value","onClick"],Ck=["id","type","value","onInput"],Ak={class:"schema-list-actions"},$k=["onClick"],Ik={key:4,class:"schema-icon"},Tk={class:"schema-icon-row"},Rk=["id","value","placeholder"],Fk=["src"],Ok=["id","value","rows"],Lk=["id","value","rows"],Mk={key:7,class:"schema-search-select"},Nk=["id","value","placeholder"],Dk={key:0,class:"schema-search-options"},Pk=["onMousedown"],jk=["id","value"],Bk=["value"],Uk={key:1,value:"",disabled:""},zk=["value"],Vk={key:9,class:"schema-id"},Hk=["id","value","placeholder"],Gk={key:10,class:"schema-id"},Wk=["id","value","placeholder"],Yk={key:0,class:"id-ref-list"},Kk=["onMousedown"],qk={key:11,class:"schema-gpio"},Zk={class:"schema-gpio-input"},Xk=["id","value","placeholder"],Jk={key:12,class:"inline"},Qk=["id","type","value","placeholder"],eC=["aria-label"],tC=["src"],nC=["id","type","value","placeholder"],oC={key:14,class:"field-error"},iC={key:16,class:"field-error"},Al="__opt_",Hv=Object.assign({name:"SchemaField"},{__name:"SchemaField",props:{field:{type:Object,required:!0},path:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})},rootValue:{type:Object,default:null},modeLevel:{type:String,default:"Simple"},idRegistry:{type:Object,default:()=>({})},nameRegistry:{type:Object,default:()=>({})},idIndex:{type:Array,default:()=>[]},gpioOptions:{type:Array,default:()=>[]},gpioUsage:{type:Object,default:()=>({})},gpioTitle:{type:String,default:""},contextComponentId:{type:String,default:""},globalStore:{type:Object,default:()=>({})}},emits:["update","open-secrets"],setup(e,{emit:n}){const t=e,o=n,i=A(()=>{var J,xe,Ge;return(J=t.field)!=null&&J.error?{text:t.field.error,variant:"error"}:(xe=t.field)!=null&&xe.warning?{text:t.field.warning,variant:"warning"}:(Ge=t.field)!=null&&Ge.note?{text:t.field.note,variant:"note"}:null}),s=A(()=>!!(i.value||G.value)),r=A(()=>[...t.path,t.field.key]),a=(J,xe)=>xe.reduce((Ge,Ve)=>Ge&&Ge[Ve]!==void 0?Ge[Ve]:void 0,J),d=A(()=>a(t.value,r.value)),l=A(()=>`schema-${r.value.join("-")}`),f=A(()=>t.field.type==="object"),g=A(()=>t.field.type==="boolean"),m=A(()=>t.field.type==="select"),v=A(()=>m.value&&!!t.field.searchable),T=A(()=>{if(!v.value)return!1;const J=String(re.value||"").trim();return!J||!P.value.length?!1:!P.value.includes(J)}),P=A(()=>{var J,xe;if(!m.value)return[];if(t.field.optionsBy&&t.field.optionsMap){const Ge=(J=t.value)==null?void 0:J[t.field.optionsBy],Ve=(xe=t.field.optionsMap)==null?void 0:xe[Ge];if(Array.isArray(Ve)&&Ve.length)return Ve}return t.field.options||[]}),w=A(()=>t.field.type==="list"),C=A(()=>t.field.type==="icon"),$=A(()=>t.field.type==="yaml"||t.field.type==="raw_yaml"),H=A(()=>t.field.type==="lambda"),M=A(()=>{const J=re.value;if(!J)return 1;const xe=J.toString().split(/\r?\n/).length;return Math.max(1,xe)}),ee=A(()=>t.field.type==="id"),oe=A(()=>t.field.type==="slug"),Z=A(()=>t.field.key==="name"),ye=A(()=>t.field.type==="id_ref"),Ce=A(()=>t.field.type==="gpio"),Fe=A(()=>{var J,xe;return!!(t.field.type==="ssid"&&((J=t.field.settings)!=null&&J.autoPath)||t.field.type==="slug"&&((xe=t.field.settings)!=null&&xe.autoPath))}),Le=A(()=>oc(t.field)),We=A(()=>Le.value.mode!=="none"),ht=A(()=>/^\s*!secret\b/.test(String(re.value||""))),De=A(()=>ht.value),Ye=A(()=>We.value||ht.value),Q=A(()=>{var J;return t.field.type==="list"&&((J=t.field.item)==null?void 0:J.extends)==="base_filters.json"}),we=A(()=>{var J;return t.field.type==="list"&&((J=t.field.item)==null?void 0:J.extends)==="base_actions.json"}),Oe=A(()=>Q.value||we.value),Qe=A(()=>Q.value?"filters":"actions"),Ke=A(()=>Array.isArray(d.value)?d.value:Array.isArray(t.field.default)?t.field.default:[]),st=A(()=>{var J;return((J=t.field.item)==null?void 0:J.type)||"text"}),vt=A(()=>st.value==="object"),yt=A(()=>st.value==="boolean"),dt=A(()=>st.value==="select"),mt=A(()=>st.value==="gpio"),Ct=A(()=>st.value==="number"?"number":"text"),de={simple:1,normal:2,advanced:3},me=J=>{var Ge;const xe=(Ge=J==null?void 0:J.lvl)==null?void 0:Ge.toLowerCase();return de[xe]?xe:"simple"},ke=A(()=>{var J;return de[(J=t.modeLevel)==null?void 0:J.toLowerCase()]??de.simple}),Se=A(()=>t.field.label||t.field.key),Me=(J=[],xe=null)=>J.filter(Ge=>{if(!Ic(Ge,xe,J,t.globalStore))return!1;const Ve=me(Ge);return de[Ve]<=ke.value}),O=A(()=>Me(t.field.fields||[],d.value||{})),j=A(()=>{var J;return Me(((J=t.field.item)==null?void 0:J.fields)||[])}),W=A(()=>{var xe,Ge;return`list-group list-${((Ge=(xe=t.field)==null?void 0:xe.lvl)==null?void 0:Ge.toLowerCase())||"simple"}`}),ae=K(!1),he=A(()=>{const J=re.value||"";return J?J.startsWith("mdi:")?J.slice(4):J:""}),fe=A(()=>he.value?`mdi:${he.value}`:""),pe=A(()=>he.value?`https://cdn.jsdelivr.net/npm/@mdi/svg/svg/${he.value}.svg`:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/emoticon-plus-outline.svg"),Ae=A(()=>t.field.type==="number"?"number":"text"),re=A(()=>d.value!==void 0?d.value:t.field.default!==void 0?t.field.default:""),se=A(()=>re.value===!0?"true":re.value===!1?"false":t.field.default===!0?"true":(t.field.default===!1,"false")),He=A(()=>Object.prototype.hasOwnProperty.call(t.field||{},"default")),Re=A(()=>He.value&&t.field.default===!0?"TRUE (default)":"TRUE"),k=A(()=>He.value&&t.field.default===!1?"FALSE (default)":"FALSE"),N=A(()=>se.value==="true"?"TRUE":"FALSE"),I=A(()=>!v.value&&re.value!==void 0&&re.value!==null&&String(re.value)!==""),Y=A(()=>String(re.value??"")),ie=J=>He.value&&J===t.field.default?`${J} (default)`:J,_e=J=>J===!0?"true":"false",Ie=A(()=>Object.prototype.hasOwnProperty.call(t.field.item||{},"default")),Ue=A(()=>{var J;return Ie.value&&((J=t.field.item)==null?void 0:J.default)===!0?"TRUE (default)":"TRUE"}),qe=A(()=>{var J;return Ie.value&&((J=t.field.item)==null?void 0:J.default)===!1?"FALSE (default)":"FALSE"}),Be=J=>_e(J)==="true"?"TRUE":"FALSE",lt=J=>J!=null&&String(J)!=="",ot=J=>String(J??""),it=J=>{var xe;return Ie.value&&J===((xe=t.field.item)==null?void 0:xe.default)?`${J} (default)`:J},at=A(()=>{var bt;const J=((bt=t.field)==null?void 0:bt.domain)||"",xe=t.contextComponentId,Ge=new Set,Ve=[];return(t.idIndex||[]).forEach(Lt=>{xe&&Lt.componentId===xe||J&&Lt.domain!==J||Ge.has(Lt.idLower)||(Ge.add(Lt.idLower),Ve.push(Lt.id))}),Ve.sort((Lt,jt)=>Lt.localeCompare(jt))}),Rt=K(!1),Vt=K(""),Ot=K(!1),$t=A(()=>{const J=Vt.value.trim().toLowerCase();return J?at.value.filter(xe=>xe.toLowerCase().includes(J)):at.value}),Ht=A(()=>{const J=String(re.value||"").trim().toLowerCase();return J?P.value.filter(xe=>xe.toLowerCase().includes(J)):P.value}),At=A(()=>v.value&&Ot.value&&Ht.value.length),ln=A(()=>{var J;return t.field.type==="password"&&((J=t.field.settings)==null?void 0:J.format)||"any"}),on=A(()=>{var Ge,Ve;if(ht.value)return"";const J=re.value;if(ln.value==="base64_44"){const bt=typeof J=="string"?J.trim():"";if(!/^[A-Za-z0-9+/]{43}=$/.test(bt))return"Key must be base64 (44 chars, ending with =)."}if(!J||typeof J!="string")return"";const xe=J.toLowerCase();return ee.value?(((Ge=t.idRegistry)==null?void 0:Ge[xe])||0)>1?"ID already used":"":Z.value&&(((Ve=t.nameRegistry)==null?void 0:Ve[xe])||0)>1?"Name already used":""}),In=A(()=>{if(!ye.value)return"";if(!at.value.length)return"No matching identifiers available";const J=re.value;return!J||typeof J!="string"||at.value.some(Ge=>Ge.toLowerCase()===J.toLowerCase())?"":"No matching identifiers available"}),qt=K(!1),Mt=J=>String(J||"").toLowerCase().replace(/\s+/g,"").replace(/^gpio/,""),cn=A(()=>{const J=Mt(re.value||"");return t.gpioOptions.find(xe=>{const Ve=`GPIO${xe.value||xe.id}`;return Mt(Ve)===J})||null}),hn=A(()=>{var Ge;const J=Mt(re.value||"");if(!J)return 0;const xe=((Ge=t.gpioUsage)==null?void 0:Ge[J])||0;return re.value?Math.max(0,xe-1):xe}),gn=A(()=>{var J;return hn.value>0?"used":((J=cn.value)==null?void 0:J.status)||""}),xn=A(()=>gn.value?`gpio-${gn.value}`:""),un=J=>{var jt;const xe=Mt(J||"");if(!xe)return"";const Ge=t.gpioOptions.find(lo=>{const hi=`GPIO${lo.value||lo.id}`;return Mt(hi)===xe}),Ve=((jt=t.gpioUsage)==null?void 0:jt[xe])||0,Lt=(J?Ve>1:Ve>0)?"used":Ge==null?void 0:Ge.status;return Lt?`gpio-${Lt}`:""},G=A(()=>{if(gn.value==="used")return{text:"This GPIO is already used elsewhere.",variant:"error"};const J=cn.value||{};return J.error?{text:J.error,variant:"error"}:J.warning?{text:J.warning,variant:"warning"}:J.note?gn.value==="avoid"?{text:J.note,variant:"error"}:gn.value==="caution"?{text:J.note,variant:"warning"}:{text:J.note,variant:"note"}:null}),B=K(!1),X=K(!1),Ee=K(""),D=K(!1),p=A(()=>tf(t.field,t.value||{},t.rootValue||t.value||{})),F=()=>Vv(t.field);nt(()=>[d.value,t.field.default,t.field.required],([J,xe,Ge])=>{Ge&&(B.value||J!==void 0||xe===void 0||t.field.type!=="object"&&(t.field.type==="list"&&!Array.isArray(xe)||t.field.type!=="boolean"&&(o("update",{path:r.value,value:xe}),B.value=!0)))},{immediate:!0}),nt(()=>[p.value,re.value],([J,xe])=>{if(!Fe.value)return;const Ge=(J??"").toString(),Ve=(xe||"").toString();(!X.value||Ve===Ee.value||!Ve)&&(!Ge&&!Ve||(o("update",{path:r.value,value:Ge}),Ee.value=Ge))},{immediate:!0}),nt(()=>re.value,J=>{if(!We.value||!Le.value.onEmpty||D.value)return;const xe=Le.value.minLength;if(J&&(!xe||String(J).length>=xe))return;const Ge=F();Ge&&o("update",{path:r.value,value:Ge})},{immediate:!0});const ve=({path:J,value:xe})=>{o("update",{path:J,value:xe})},Te=()=>{o("open-secrets")},Pe=J=>J.replace(/[^a-z0-9_]/g,"").slice(0,24),R=J=>{var xe;return zv(J,Number((xe=t.field.settings)==null?void 0:xe.maxLength)||24)},$e=J=>{const xe=J.target.value,Ge=ee.value?Pe(xe):oe.value?R(xe):xe;if((ee.value||oe.value)&&xe!==Ge&&(J.target.value=Ge),Fe.value){const Ve=(p.value??"").toString();Ge?Ge!==Ve?X.value=!0:(X.value=!1,Ee.value=Ve):X.value=!1}o("update",{path:r.value,value:Ge})},Xe=J=>{Ot.value||(Ot.value=!0),$e(J)},xt=()=>{Ot.value=!0},It=()=>{window.setTimeout(()=>{Ot.value=!1},120)},kt=J=>{o("update",{path:r.value,value:J}),Ot.value=!1},dn=()=>{const J=F();J&&(D.value=!0,o("update",{path:r.value,value:J}))},ro=()=>{Te()},$o=J=>{const xe=J.target.value;Vt.value=xe,o("update",{path:r.value,value:xe})},ci=()=>{Vt.value=re.value||"",Rt.value=!0},Yn=()=>{window.setTimeout(()=>{Rt.value=!1},150)},vo=J=>{o("update",{path:r.value,value:J}),Vt.value=J,Rt.value=!1},ao=(J,xe=J==null?void 0:J.value)=>{if(!J)return;const Ge=String(xe??""),Ve=Array.from(J.options||[]).findIndex(bt=>bt.hidden&&String(bt.value??"")===Ge);Ve<0||(J.selectedIndex=Ve)},On=(J,xe)=>{const Ge=String(J??"");if(!Ge.startsWith(Al))return Ge;const Ve=Number(Ge.slice(Al.length));return!Number.isInteger(Ve)||Ve<0?Ge:(xe==null?void 0:xe[Ve])??Ge},cs=J=>`${Al}${J}`,us=J=>`${Al}${J}`,Us=J=>{const xe=On(J.target.value,P.value);o("update",{path:r.value,value:xe}),ao(J.target,xe)},zs=J=>{const Ge=J.target.value==="__opt_true";o("update",{path:r.value,value:Ge}),ao(J.target,Ge?"true":"false")},ds=()=>{ae.value=!0},ui=J=>{const xe=J.target.value;o("update",{path:r.value,value:xe})},fs=J=>{const xe=J?`mdi:${J}`:"";o("update",{path:r.value,value:xe}),ae.value=!1},Io=({query:J})=>{ae.value=!1,J||o("update",{path:r.value,value:""})},di=J=>{const xe=J?`GPIO${J}`:"";o("update",{path:r.value,value:xe}),qt.value=!1},Ln=()=>{qt.value=!0},Mr=A(()=>(re.value||"").replace(/^gpio\s*/i,"").trim()),Mn=K(!1),kn=K(null),To=A(()=>kn.value===null?"":Ke.value[kn.value]||""),Kn=J=>{kn.value=J,Mn.value=!0},bn=J=>{if(kn.value===null)return;const xe=J?`GPIO${J}`:"";Li(kn.value,xe),Mn.value=!1},Oi=J=>`${l.value}-${J}`,ps=(J,xe,Ge)=>{if(!xe.length)return Ge;const Ve={...J||{}};let bt=Ve;return xe.slice(0,-1).forEach(Lt=>{(!bt[Lt]||typeof bt[Lt]!="object")&&(bt[Lt]={}),bt=bt[Lt]}),bt[xe[xe.length-1]]=Ge,Ve},fi=(J,{path:xe,value:Ge})=>{const Ve=Ke.value.map((bt,Lt)=>Lt!==J?bt:ps(bt||{},xe,Ge));o("update",{path:r.value,value:Ve})},Li=(J,xe)=>{const Ge=Ke.value.map((Ve,bt)=>bt===J?xe:Ve);o("update",{path:r.value,value:Ge})},Nr=(J,xe)=>{const Ve=xe.target.value==="__opt_true";Li(J,Ve),ao(xe.target,Ve?"true":"false")},Ro=(J,xe)=>{var bt;const Ge=((bt=t.field.item)==null?void 0:bt.options)||[],Ve=On(xe.target.value,Ge);Li(J,Ve),ao(xe.target,Ve)},Dr=()=>{const J=Ke.value.slice();J.push(vt.value?{}:""),o("update",{path:r.value,value:J})},Pr=J=>{const xe=Ke.value.filter((Ge,Ve)=>Ve!==J);o("update",{path:r.value,value:xe})};return(J,xe)=>{const Ge=Pb("SchemaField",!0);return f.value?(_(),E("div",ek,[c("div",tk,[c("span",null,ge(Se.value),1)]),c("div",nk,[(_(!0),E(je,null,Je(O.value,Ve=>(_(),zn(Ge,{key:Ve.key,field:Ve,path:r.value,value:e.value,"root-value":e.rootValue||e.value,"mode-level":e.modeLevel,"id-registry":e.idRegistry,"name-registry":e.nameRegistry,"id-index":e.idIndex,"gpio-options":e.gpioOptions,"gpio-usage":e.gpioUsage,"gpio-title":e.gpioTitle,"context-component-id":e.contextComponentId,"global-store":e.globalStore,onUpdate:ve,onOpenSecrets:Te},null,8,["field","path","value","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"]))),128))])])):(_(),E("div",{key:1,class:pt(["schema-field",{"schema-field--stacked":s.value}])},[w.value?ue("",!0):(_(),E("label",{key:0,for:l.value},[Aa(ge(Se.value),1),e.field.required?(_(),E("span",ik,"*")):ue("",!0),e.field.helpUrl?(_(),E("a",{key:1,class:"filter-help",href:e.field.helpUrl,target:"_blank",rel:"noopener noreferrer","aria-label":"Field help"}," ? ",8,sk)):ue("",!0)],8,ok)),g.value?(_(),E("select",{key:1,id:l.value,value:se.value,onChange:zs},[c("option",{value:se.value,hidden:""},ge(N.value),9,ak),c("option",lk,ge(Re.value),1),c("option",ck,ge(k.value),1)],40,rk)):Oe.value?(_(),zn(Px,{key:2,variant:Qe.value,field:e.field,path:r.value,value:Ke.value,"mode-level":e.modeLevel,"id-registry":e.idRegistry,"name-registry":e.nameRegistry,"id-index":e.idIndex,"gpio-options":e.gpioOptions,"gpio-usage":e.gpioUsage,"gpio-title":e.gpioTitle,"context-component-id":e.contextComponentId,"global-store":e.globalStore,onUpdate:ve},null,8,["variant","field","path","value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):w.value?(_(),E("div",{key:3,class:pt(["schema-list",[W.value,{"is-empty":Ke.value.length===0}]])},[c("div",uk,[c("div",dk,[c("span",null,ge(Se.value),1),e.field.helpUrl?(_(),E("a",{key:0,class:"filter-help",href:e.field.helpUrl,target:"_blank",rel:"noopener noreferrer","aria-label":"Field help"}," ? ",8,fk)):ue("",!0),e.field.required?(_(),E("span",pk,"*")):ue("",!0)]),c("button",{type:"button",class:"secondary compact btn-add schema-list-add",onClick:Dr}," Add ")]),Ke.value.length===0?(_(),E("div",hk,"No items yet")):ue("",!0),(_(!0),E(je,null,Je(Ke.value,(Ve,bt)=>{var Lt;return _(),E("div",{key:bt,class:"schema-list-item"},[vt.value?(_(),E("div",gk,[(_(!0),E(je,null,Je(j.value,jt=>(_(),zn(Ge,{key:`${bt}-${jt.key}`,field:jt,path:[],value:Ve||{},"root-value":e.rootValue||e.value,"mode-level":e.modeLevel,"id-registry":e.idRegistry,"name-registry":e.nameRegistry,"id-index":e.idIndex,"gpio-options":e.gpioOptions,"gpio-usage":e.gpioUsage,"gpio-title":e.gpioTitle,"context-component-id":e.contextComponentId,"global-store":e.globalStore,onUpdate:lo=>fi(bt,lo),onOpenSecrets:Te},null,8,["field","value","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store","onUpdate"]))),128))])):yt.value?(_(),E("select",{key:1,id:Oi(bt),value:_e(Ve),onChange:jt=>Nr(bt,jt)},[c("option",{value:_e(Ve),hidden:""},ge(Be(Ve)),9,mk),c("option",yk,ge(Ue.value),1),c("option",bk,ge(qe.value),1)],40,vk)):dt.value?(_(),E("select",{key:2,id:Oi(bt),value:Ve??"",onChange:jt=>Ro(bt,jt)},[lt(Ve)?(_(),E("option",{key:0,value:Ve,hidden:""},ge(ot(Ve)),9,wk)):ue("",!0),e.field.required?ue("",!0):(_(),E("option",Ek,"--")),(_(!0),E(je,null,Je(((Lt=e.field.item)==null?void 0:Lt.options)||[],(jt,lo)=>(_(),E("option",{key:jt,value:us(lo)},ge(it(jt)),9,Sk))),128))],40,_k)):mt.value?(_(),E("div",xk,[c("input",{id:Oi(bt),type:"text",readonly:"",value:Ve??"",class:pt(un(Ve??"")),onClick:jt=>Kn(bt)},null,10,kk)])):(_(),E("input",{key:4,id:Oi(bt),type:Ct.value,value:Ve??"",onInput:jt=>Li(bt,jt.target.value)},null,40,Ck)),c("div",Ak,[c("button",{type:"button",class:"secondary compact btn-standard",onClick:jt=>Pr(bt)}," Remove ",8,$k)])])}),128)),_t(Hp,{open:Mn.value,options:e.gpioOptions,usage:e.gpioUsage,selected:To.value,"initial-query":To.value,title:e.gpioTitle,onClose:xe[0]||(xe[0]=Ve=>Mn.value=!1),onSelect:bn},null,8,["open","options","usage","selected","initial-query","title"])],2)):C.value?(_(),E("div",Ik,[c("div",Tk,[c("input",{id:l.value,type:"text",value:fe.value,placeholder:e.field.placeholder,onInput:ui},null,40,Rk),c("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:ds},[c("img",{src:pe.value,alt:"Add icon"},null,8,Fk)])]),_t(ef,{open:ae.value,selected:he.value,"initial-query":he.value,onClose:Io,onSelect:fs},null,8,["open","selected","initial-query"])])):$.value?(_(),E("textarea",{key:5,id:l.value,value:re.value,rows:M.value,wrap:"off",class:"lambda-textarea",onInput:$e},null,40,Ok)):H.value?(_(),E("textarea",{key:6,id:l.value,value:re.value,rows:M.value,wrap:"off",class:"lambda-textarea",onInput:$e},null,40,Lk)):v.value?(_(),E("div",Mk,[c("input",{id:l.value,type:"text",value:re.value,placeholder:e.field.placeholder,class:pt({"field-invalid":T.value}),onFocus:xt,onBlur:It,onInput:Xe},null,42,Nk),At.value?(_(),E("div",Dk,[(_(!0),E(je,null,Je(Ht.value,Ve=>(_(),E("button",{key:Ve,type:"button",class:"schema-search-option",onMousedown:Et(bt=>kt(Ve),["prevent"])},ge(Ve),41,Pk))),128))])):ue("",!0)])):m.value?(_(),E("select",{key:8,id:l.value,value:re.value,onChange:Us},[I.value?(_(),E("option",{key:0,value:re.value,hidden:""},ge(Y.value),9,Bk)):ue("",!0),e.field.placeholder?(_(),E("option",Uk,ge(e.field.placeholder),1)):ue("",!0),(_(!0),E(je,null,Je(P.value,(Ve,bt)=>(_(),E("option",{key:Ve,value:cs(bt)},ge(ie(Ve)),9,zk))),128))],40,jk)):ee.value?(_(),E("div",Vk,[c("input",{id:l.value,type:"text",value:re.value,maxlength:24,placeholder:e.field.placeholder,class:pt({"field-invalid":on.value}),onInput:$e},null,42,Hk)])):ye.value?(_(),E("div",Gk,[c("input",{id:l.value,type:"text",value:re.value,placeholder:e.field.placeholder,class:pt({"field-invalid":In.value}),onFocus:ci,onBlur:Yn,onInput:$o},null,42,Wk),Rt.value&&$t.value.length?(_(),E("div",Yk,[(_(!0),E(je,null,Je($t.value,Ve=>(_(),E("button",{key:Ve,type:"button",class:"id-ref-option",onMousedown:Et(bt=>vo(Ve),["prevent"])},ge(Ve),41,Kk))),128))])):ue("",!0)])):Ce.value?(_(),E("div",qk,[c("div",Zk,[c("input",{id:l.value,type:"text",value:re.value,placeholder:e.field.placeholder,class:pt(xn.value),onInput:$e},null,42,Xk),c("button",{type:"button",class:"secondary compact schema-icon-btn","aria-label":"Open GPIO picker",onClick:Ln},[...xe[3]||(xe[3]=[c("img",{src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/chip.svg",alt:""},null,-1)])])]),G.value?(_(),E("div",{key:0,class:pt(["field-note","notice",G.value.variant==="warning"?"notice--warning":"",G.value.variant==="error"?"notice--error":""])},ge(G.value.text),3)):ue("",!0),_t(Hp,{open:qt.value,options:e.gpioOptions,usage:e.gpioUsage,selected:Mr.value,"initial-query":re.value,title:e.gpioTitle,onClose:xe[1]||(xe[1]=Ve=>qt.value=!1),onSelect:di},null,8,["open","options","usage","selected","initial-query","title"])])):Ye.value?(_(),E("div",Jk,[c("input",{id:l.value,type:Ae.value,value:re.value,placeholder:e.field.placeholder,class:pt({"field-invalid":on.value}),onInput:$e},null,42,Qk),c("button",{type:"button",class:"secondary icon-button","aria-label":De.value?"Secret reference":"Generate",onClick:xe[2]||(xe[2]=Ve=>De.value?ro():dn())},[c("img",{src:De.value?"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/lock.svg":"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/lock-reset.svg",alt:"",class:"icon-button-img"},null,8,tC)],8,eC)])):(_(),E("input",{key:13,id:l.value,type:Ae.value,value:re.value,placeholder:e.field.placeholder,class:pt({"field-invalid":on.value}),onInput:$e},null,42,nC)),on.value?(_(),E("div",oC,ge(on.value),1)):ue("",!0),i.value?(_(),E("div",{key:15,class:pt(["field-note","notice",i.value.variant==="warning"?"notice--warning":"",i.value.variant==="error"?"notice--error":""])},ge(i.value.text),3)):ue("",!0),In.value?(_(),E("div",iC,ge(In.value),1)):ue("",!0)],2))}}}),tn=e=>{if(!e)return"";const n=String(e).trim();if(!n)return"";const t=n.startsWith("#")?n.slice(1):n;return/^[0-9a-fA-F]{6}$/.test(t)?`#${t.toUpperCase()}`:""},Gv=e=>{if(!e)return null;const t=String(e).trim().match(/^(\d{1,3})\s*:\s*(\d{1,3})\s*:\s*(\d{1,3})$/);if(!t)return null;const o=i=>Math.max(0,Math.min(255,Number(i)));return{r:o(t[1]),g:o(t[2]),b:o(t[3])}},ur=(e,n="#cbd5f5")=>{if(!e)return n;const t=String(e).trim();if(!t)return n;const o=tn(t);if(o)return o;const i=Gv(t);return i?`rgb(${i.r}, ${i.g}, ${i.b})`:t.startsWith("#")||/^rgb\(/i.test(t)||/^[a-zA-Z]+$/.test(t)?t:n},sC=e=>{if(!e)return"";const n=String(e).trim();if(!n)return"";if(n.startsWith("Color(")||n.startsWith("id("))return n;const t=tn(n);if(t)return`Color(0x${t.slice(1)})`;const o=Gv(n);return o?`Color(${o.r}, ${o.g}, ${o.b})`:n},rC={class:"display-canvas__shell"},aC=["onPointerdown","onPointermove","onPointerleave"],lC=["viewBox"],cC=["x2","y2","stroke"],uC=["width","height","fill","stroke"],dC=["cx","cy","r","fill","stroke"],fC=["points","fill","stroke"],pC=["points","fill","stroke"],hC=["viewBox"],gC={key:0,class:"display-graph__border"},vC=["width","height"],mC={key:1,class:"display-graph__grid"},yC=["x1","y1","x2","y2"],bC=["x1","y1","x2","y2"],_C={class:"display-graph__traces"},wC=["d","stroke","stroke-width","stroke-dasharray"],EC=["cx","cy","r","fill"],SC={key:2,class:"display-graph__legend"},xC=["x","y","width","height"],kC=["x","y"],CC=["x","y"],AC=["src","alt"],$C=["src","alt"],IC={key:0,class:"display-canvas__hint"},TC=2,RC={__name:"DisplayCanvas",props:{screenW:{type:Number,required:!0},screenH:{type:Number,required:!0},zoom:{type:Number,default:2},gridSize:{type:Number,default:4},elements:{type:Array,default:()=>[]},isMonochrome:{type:Boolean,default:!0},selectedId:{type:String,default:null}},emits:["select","update-element"],setup(e,{emit:n}){const t=e,o=n,i=K(null),s=K(null),r=new Map,a=new Map,d=new Map,l=K(0),f=A(()=>{const k=t.gridSize*t.zoom;return{width:`${t.screenW*t.zoom}px`,height:`${t.screenH*t.zoom}px`,backgroundSize:`${k}px ${k}px`}}),g=k=>{const N=k.type==="shape"?Number(k.rotation||0):0,I={left:`${k.x*t.zoom}px`,top:`${k.y*t.zoom}px`,width:`${k.w*t.zoom}px`,height:`${k.h*t.zoom}px`,cursor:he(k)};return N&&(I.transform=`rotate(${N}deg)`,I.transformOrigin="50% 50%"),I},m=k=>{const N=k.type==="text",I=N?Math.max(1,Math.round(k.h*t.zoom)):Math.max(8,Math.round(7*t.zoom)),Y=k.rotation&&(k.type==="image"||k.type==="icon")?`rotate(${k.rotation}deg)`:"none",ie={fontSize:`${I}px`,transform:Y};return N&&(ie.fontFamily=k.fontFamily?`"${k.fontFamily}"`:"inherit",ie.fontWeight=k.fontWeight||400,ie.fontStyle=k.fontStyle||"normal",ie.lineHeight=1,ie.position="absolute",ie.left="0px",ie.top="0px",ie.whiteSpace=k.wrap===!1?"nowrap":"pre-wrap",ie.wordBreak=k.wrap===!1?"normal":"break-word"),!t.isMonochrome&&k.color&&(ie.color=ur(k.color)),ie},v=k=>{if(k.type==="text"){if((k.textMode||"static")==="dynamic"){const I=k.prefix||"",Y=k.suffix||"";return`${I}{{val}}${Y}`}return k.text??""}return k.type==="image"?k.image||"image":k.type==="icon"?!k.icon||k.icon==="placeholder"?"icon":k.icon:k.type},T=k=>k.type==="shape",P=k=>["polygon5","polygon6","polygon7","polygon8"].includes(k),w=k=>{const N=Number(k.shapeType.replace("polygon",""));if(!N||N<3)return"";const I=k.w/2,Y=k.h/2,ie=Math.max(1,Math.min(k.w,k.h)/2),_e=[],Ie=-Math.PI/2;for(let Ue=0;Ue<N;Ue+=1){const qe=Ie+Ue*2*Math.PI/N,Be=I+ie*Math.cos(qe),lt=Y+ie*Math.sin(qe);_e.push(`${Be} ${lt}`)}return _e.join(" ")},C=k=>{if(!k)return"";const N=k.trim();return N==="placeholder"?"":N.startsWith("mdi:")?N.slice(4):N},$=k=>{const N=C(k.icon);return N?`https://cdn.jsdelivr.net/npm/@mdi/svg/svg/${encodeURIComponent(N)}.svg`:""},H=k=>{const N=$(k);return{backgroundColor:!t.isMonochrome&&k.color?ur(k.color):"#cbd5f5",maskImage:`url(${N})`,WebkitMaskImage:`url(${N})`,maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat",maskPosition:"center",WebkitMaskPosition:"center",maskSize:"100% 100%",WebkitMaskSize:"100% 100%"}},M=k=>t.isMonochrome?"#cbd5f5":ur(k.color),ee=k=>t.isMonochrome?"#cbd5f5":ur(k.color),oe=new Map,Z=k=>{let N=0;const I=String(k);for(let Y=0;Y<I.length;Y+=1)N=(N<<5)-N+I.charCodeAt(Y),N|=0;return N>>>0},ye=k=>()=>{let N=k+=1831565813;return N=Math.imul(N^N>>>15,N|1),N^=N+Math.imul(N^N>>>7,N|61),((N^N>>>14)>>>0)/4294967296},Ce=k=>{if(typeof k=="number")return k;const N=String(k||"").trim().toLowerCase();if(!N)return 0;const I=N.match(/^([0-9]+(?:\.[0-9]+)?)\s*(ms|s|min|h|d)?$/);if(!I)return 0;const Y=Number(I[1]),ie=I[2]||"min";return Number.isNaN(Y)?0:ie==="ms"?Y/6e4:ie==="s"?Y/60:ie==="h"?Y*60:ie==="d"?Y*1440:Y},Fe=(k,N)=>{const I=Ce(k),Y=Ce(N);if(!I||!Y)return 0;const ie=Math.floor(I/Y);return Math.max(0,ie)},Le=["#60a5fa","#f97316","#22c55e","#eab308","#a78bfa","#f43f5e"],We=k=>[k.id,k.graphId,k.w,k.h,k.duration,k.border,k.xGrid,k.yGrid,k.useTraces,JSON.stringify(k.traces||[]),k.sensor].join("|"),ht=k=>{const N=We(k);if(oe.has(N))return oe.get(N);const I=Math.max(10,Math.round(k.w||10)),Y=Math.max(10,Math.floor(I/4)),ie=Z(k.graphId||k.id||"graph"),Ie=(k.useTraces?k.traces||[]:[{sensor:k.sensor||"",name:""}]).map((qe,Be)=>{const lt=ie+Be*997,ot=ye(lt),it=[];let at=ot();for(let Rt=0;Rt<Y;Rt+=1){const Vt=.35+ot()*.55;at=at*.75+Vt*.25+(ot()-.5)*.08,at=Math.min(1,Math.max(0,at)),it.push(at)}return it}),Ue={pointsCount:Y,series:Ie};return oe.set(N,Ue),Ue},De=k=>{const N=Math.max(1,Math.round(k.w||1)),I=Math.max(1,Math.round(k.h||1)),Y=2,ie=k.xGrid?Fe(k.duration||"",k.xGrid):0,_e=k.yGrid?Math.max(1,Math.floor(4)):0,Ie=[];if(ie>0)for(let qe=1;qe<ie;qe+=1){const Be=Y+qe*(N-Y*2)/ie;Ie.push({x1:Be,y1:Y,x2:Be,y2:I-Y})}const Ue=[];if(_e>0)for(let qe=1;qe<_e;qe+=1){const Be=Y+qe*(I-Y*2)/_e;Ue.push({x1:Y,y1:Be,x2:N-Y,y2:Be})}return{x:Ie,y:Ue}},Ye=k=>{const N=Math.max(1,Math.round(k.w||1)),I=Math.max(1,Math.round(k.h||1)),Y=2,{pointsCount:ie,series:_e}=ht(k),Ie=k.useTraces?k.traces||[]:[{lineType:k.lineType||"SOLID",lineThickness:k.lineThickness||3,continuous:!!k.continuous,color:k.color||""}];return _e.map((Ue,qe)=>{const Be=Ie[qe]||{},lt=Math.max(1,Number(Be.lineThickness||2)),ot=t.isMonochrome?"#cbd5f5":Be.color||Le[qe%Le.length],it=Be.lineType||"SOLID",at=Be.continuous!==!1,Rt=it==="DOTTED"?"1 3":it==="DASHED"?"5 4":"",Vt=Ue.map(($t,Ht)=>{const At=Y+Ht*(N-Y*2)/Math.max(1,ie-1),ln=Y+(1-$t)*(I-Y*2);return{x:At,y:ln}}),Ot=Vt.reduce(($t,Ht,At)=>$t+`${At===0?"M":"L"}${Ht.x.toFixed(2)} ${Ht.y.toFixed(2)} `,"");return{points:Vt,path:Ot,thickness:lt,color:ot,dash:Rt,continuous:at}})},Q=k=>{if(!k.legendEnabled)return null;const N=Math.max(1,Math.round(k.w||1)),I=Math.max(1,Math.round(k.h||1)),Y=Number(k.legendWidth||0)||Math.min(80,Math.max(48,N*.5)),ie=k.useTraces?k.traces||[]:[{name:""}],_e=k.legendShowValues||"AUTO",Ie=k.legendShowUnits!==!1,Ue=Math.max(6,Number(k.legendNameFontSize||10)),qe=Math.max(6,Number(k.legendValueFontSize||8));let Be=0;const lt=[],ot=(Ot,$t,Ht)=>{Be+=$t+3,lt.push({text:Ot,y:Be,type:Ht,size:$t})},it=(Ot,$t)=>{Be+=Ue+3,lt.push({nameText:Ot,valueText:$t,nameSize:Ue,valueSize:qe,y:Be})};ie.forEach((Ot,$t)=>{const Ht=(Ot==null?void 0:Ot.name)||(Ot==null?void 0:Ot.sensor)||`Trace ${$t+1}`,At=(Math.round((.2+$t*.13)*100)/10).toFixed(1),ln=Ie?`${At} u`:At;if(_e==="NONE"){ot(Ht,Ue,"name");return}if(_e==="BELOW"){ot(Ht,Ue,"name"),ot(ln,qe,"value");return}it(`${Ht}:`,ln)});const at=Number(k.legendHeight||0)||Be+4;return{x:Math.max(1,N-Y-2),y:2,w:Y,h:Math.min(I-4,at),border:k.legendBorder!==!1,rows:lt,nameFontFamily:k.legendNameFontFamily||"",valueFontFamily:k.legendValueFontFamily||"",nameFontSize:Ue,valueFontSize:qe}},we=k=>{const N=String(k||"BINARY").trim().toUpperCase();return["BINARY","GRAYSCALE","RGB565","RGB"].includes(N)?N:"BINARY"},Oe=(k,N)=>{const I=String(N||"opaque").trim().toLowerCase();return k==="BINARY"?I==="chroma_key"?"chroma_key":"opaque":["opaque","chroma_key","alpha_channel"].includes(I)?I:"opaque"},Qe=k=>String(k||"NONE").trim().toUpperCase()==="FLOYDSTEINBERG"?"FLOYDSTEINBERG":"NONE",Ke=k=>{if((k==null?void 0:k.type)==="animation"){const I=we(k.animationType);return{type:I,transparency:Oe(I,k.animationTransparency),invertAlpha:["BINARY","GRAYSCALE"].includes(I)?!!k.animationInvertAlpha:!1,dither:["BINARY","GRAYSCALE"].includes(I)?Qe(k.animationDither):"NONE",byteOrder:I==="RGB565"?String(k.animationByteOrder||"big_endian"):"big_endian"}}const N=we(k==null?void 0:k.imageType);return{type:N,transparency:Oe(N,k==null?void 0:k.imageTransparency),invertAlpha:["BINARY","GRAYSCALE"].includes(N)?!!((k==null?void 0:k.imageInvertAlpha)??(k==null?void 0:k.invert)):!1,dither:["BINARY","GRAYSCALE"].includes(N)?Qe(k==null?void 0:k.imageDither):"NONE",byteOrder:N==="RGB565"?String((k==null?void 0:k.imageByteOrder)||"big_endian"):"big_endian"}},st=(k,N)=>k==="opaque"?255:k==="chroma_key"?N>=128?255:0:N,vt=(k,N)=>{const I=new Float32Array(k.length/4);for(let Y=0,ie=0;Y<k.length;Y+=4,ie+=1){const _e=.2126*k[Y]+.7152*k[Y+1]+.0722*k[Y+2];I[ie]=N?255-_e:_e}return I},yt=(k,N,I,Y,ie)=>{const _e=(Ie,Ue)=>Ue*N+Ie;for(let Ie=0;Ie<I;Ie+=1)for(let Ue=0;Ue<N;Ue+=1){const qe=_e(Ue,Ie);if(ie&&!ie[qe])continue;const Be=k[qe],lt=Y(Be),ot=Be-lt;k[qe]=lt,Ue+1<N&&(k[_e(Ue+1,Ie)]+=ot*7/16),Ue-1>=0&&Ie+1<I&&(k[_e(Ue-1,Ie+1)]+=ot*3/16),Ie+1<I&&(k[_e(Ue,Ie+1)]+=ot*5/16),Ue+1<N&&Ie+1<I&&(k[_e(Ue+1,Ie+1)]+=ot/16)}},dt=(k,N)=>{const{data:I,width:Y,height:ie}=k,_e=[203,213,245],Ie=[2,6,23],Ue=new Uint8Array(Y*ie);for(let Be=0,lt=0;Be<I.length;Be+=4,lt+=1){const ot=st(N.transparency,I[Be+3]);I[Be+3]=ot,Ue[lt]=ot>0?1:0}if(N.type==="RGB")return;if(N.type==="RGB565"){for(let Be=0;Be<I.length;Be+=4)I[Be+3]&&(I[Be]=Math.round(I[Be]*31/255)*8,I[Be+1]=Math.round(I[Be+1]*63/255)*4,I[Be+2]=Math.round(I[Be+2]*31/255)*8);return}const qe=vt(I,N.invertAlpha);N.dither==="FLOYDSTEINBERG"&&(N.type==="BINARY"?yt(qe,Y,ie,Be=>Be>=128?255:0,Ue):yt(qe,Y,ie,Be=>Math.round(Be/17)*17,Ue));for(let Be=0,lt=0;Be<I.length;Be+=4,lt+=1){if(!I[Be+3])continue;if(N.type==="BINARY"){(N.dither==="FLOYDSTEINBERG"?qe[lt]:qe[lt]>=128?255:0)>=128?(I[Be]=_e[0],I[Be+1]=_e[1],I[Be+2]=_e[2],I[Be+3]=255):N.transparency==="opaque"?(I[Be]=Ie[0],I[Be+1]=Ie[1],I[Be+2]=Ie[2],I[Be+3]=255):I[Be+3]=0;continue}const ot=Math.max(0,Math.min(255,Math.round((N.dither==="FLOYDSTEINBERG",qe[lt]))));I[Be]=ot,I[Be+1]=ot,I[Be+2]=ot}},mt=k=>{const N=Ke(k);return[k.imageUrl||"",N.type,N.transparency,N.invertAlpha?"1":"0",N.dither,N.byteOrder].join("|")},Ct=k=>{l.value;const N=mt(k);return a.get(N)||k.imageUrl},de=k=>{const N=Ke(k);return[k.animationUrl||"",k.autoAnimate?"1":"0",N.type,N.transparency,N.invertAlpha?"1":"0",N.dither,N.byteOrder].join("|")},me=k=>{if(l.value,k.autoAnimate)return k.animationUrl;const N=de(k);return d.get(N)||k.animationUrl},ke=async k=>{const N=(k==null?void 0:k.imageUrl)||"",I=mt(k),Y=Ke(k);if(!N||a.has(I))return;const ie=new Image;ie.src=N;try{await ie.decode()}catch{return}const _e=document.createElement("canvas");_e.width=ie.width,_e.height=ie.height;const Ie=_e.getContext("2d");if(!Ie)return;Ie.imageSmoothingEnabled=!1,Ie.drawImage(ie,0,0);const Ue=Ie.getImageData(0,0,_e.width,_e.height);dt(Ue,Y),Ie.putImageData(Ue,0,0),a.set(I,_e.toDataURL("image/png")),l.value+=1},Se=async k=>{const N=(k==null?void 0:k.animationUrl)||"";if(!N)return;const I=de(k),Y=Ke(k);if(d.has(I))return;const ie=new Image;ie.src=N;try{await ie.decode()}catch{return}const _e=document.createElement("canvas");_e.width=ie.width,_e.height=ie.height;const Ie=_e.getContext("2d");if(!Ie)return;Ie.imageSmoothingEnabled=!1,Ie.drawImage(ie,0,0);const Ue=Ie.getImageData(0,0,_e.width,_e.height);dt(Ue,Y),Ie.putImageData(Ue,0,0),d.set(I,_e.toDataURL("image/png")),l.value+=1},Me=k=>{if(!k)return!1;const N=k.toLowerCase();return N.endsWith(".ttf")||N.endsWith(".otf")||N.endsWith(".woff")||N.endsWith(".woff2")},O=async k=>{if(!(k!=null&&k.fontFamily)||!(k!=null&&k.fontUrl)||!Me(k.fontUrl))return;const N=k.fontWeight||400,I=k.fontStyle||"normal",Y=`${k.fontFamily}|${k.fontUrl}|${N}|${I}`;if(!r.has(Y))try{const _e=await new FontFace(k.fontFamily,`url(${k.fontUrl})`,{weight:`${N}`,style:I}).load();document.fonts.add(_e),r.set(Y,!0)}catch{r.set(Y,!1)}},j=(k,N,I)=>Math.min(Math.max(k,N),I),W=k=>Math.round(k/t.gridSize)*t.gridSize,ae=(k,N)=>{var ie;const I=(Math.round(N/90)%4+4)%4;return I&&((ie={n:["n","e","s","w"],e:["e","s","w","n"],s:["s","w","n","e"],w:["w","n","e","s"],ne:["ne","se","sw","nw"],se:["se","sw","nw","ne"],sw:["sw","nw","ne","se"],nw:["nw","ne","se","sw"]}[k])==null?void 0:ie[I])||k},he=k=>{var Y;if(k.id!==((Y=s.value)==null?void 0:Y.id))return"grab";const N=k.type==="shape"?Number(k.rotation||0):0,I=ae(s.value.edge,N);return I==="n"||I==="s"?"ns-resize":I==="e"||I==="w"?"ew-resize":I==="ne"||I==="sw"?"nesw-resize":I==="nw"||I==="se"?"nwse-resize":"grab"},fe=(k,N)=>{const I=k.currentTarget.getBoundingClientRect(),Y=I.left+I.width/2,ie=I.top+I.height/2,Ie=-(N.type==="shape"?Number(N.rotation||0):0)*Math.PI/180,Ue=k.clientX-Y,qe=k.clientY-ie,Be=Math.cos(Ie),lt=Math.sin(Ie),ot=Ue*Be-qe*lt,it=Ue*lt+qe*Be,at=N.w*t.zoom,Rt=N.h*t.zoom,Vt=(ot+at/2)/t.zoom,Ot=(it+Rt/2)/t.zoom,$t=Math.min(TC,N.w/2,N.h/2),Ht=Vt<=$t,At=Vt>=N.w-$t,ln=Ot<=$t,on=Ot>=N.h-$t;return ln&&Ht?"nw":ln&&At?"ne":on&&Ht?"sw":on&&At?"se":ln?"n":on?"s":Ht?"w":At?"e":null},pe=()=>{o("select",null)},Ae=(k,N)=>{if(k.button===1)return;k.preventDefault(),k.stopPropagation(),o("select",N.id);const I=fe(k,N),Y=I?"resize":"move",ie=N.type==="shape"?Number(N.rotation||0):0,_e=N.x+N.w/2,Ie=N.y+N.h/2;i.value={id:N.id,mode:Y,edge:I,rotation:ie,lockAspect:["image","icon","animation"].includes(N.type),aspectRatio:N.w&&N.h?N.w/N.h:1,startCenterX:_e,startCenterY:Ie,startClientX:k.clientX,startClientY:k.clientY,startX:N.x,startY:N.y,startW:N.w,startH:N.h},window.addEventListener("pointermove",re),window.addEventListener("pointerup",Re)},re=k=>{if(i.value){const{id:N,mode:I,edge:Y,rotation:ie,lockAspect:_e,aspectRatio:Ie,startClientX:Ue,startClientY:qe,startX:Be,startY:lt,startW:ot,startH:it,startCenterX:at,startCenterY:Rt}=i.value,Vt=(k.clientX-Ue)/t.zoom,Ot=(k.clientY-qe)/t.zoom;if(I==="move"){const kt=Math.max(0,t.screenW-ot),dn=Math.max(0,t.screenH-it),ro=j(W(Be+Vt),0,kt),$o=j(W(lt+Ot),0,dn);o("update-element",{id:N,patch:{x:ro,y:$o}});return}const $t=t.gridSize,Ht=-ie*Math.PI/180,At=Math.cos(Ht),ln=Math.sin(Ht),on=Vt*At+Ot*ln,In=-Vt*ln+Ot*At,qt=W(on),Mt=W(In),cn=Math.abs(Math.round(ie/90))%2===1,hn=cn?-qt:qt,gn=cn?-Mt:Mt,xn=ot/2,un=it/2;let G=xn,B=un,X=0,Ee=0;Y.includes("e")&&(G+=hn/2,X+=hn/2),Y.includes("w")&&(G-=hn/2,X+=hn/2),Y.includes("s")&&(B+=gn/2,Ee+=gn/2),Y.includes("n")&&(B-=gn/2,Ee+=gn/2);const D=$t/2;if(G=Math.max(D,G),B=Math.max(D,B),_e){const kt=Ie||1,dn=Math.max($t,W(G*2)),ro=Math.max($t,W(B*2)),$o=Y.includes("e")||Y.includes("w"),ci=Y.includes("n")||Y.includes("s");let Yn=dn,vo=ro;if($o&&!ci)Yn=dn,vo=Math.max($t,W(Yn/kt));else if(!$o&&ci)vo=ro,Yn=Math.max($t,W(vo*kt));else{const cs=Math.abs(dn-ot),us=Math.abs(ro-it);cs>=us?(Yn=dn,vo=Math.max($t,W(Yn/kt))):(vo=ro,Yn=Math.max($t,W(vo*kt)))}G=Yn/2,B=vo/2;const ao=G-xn,On=B-un;X=0,Ee=0,Y.includes("e")&&(X=ao),Y.includes("w")&&(X=-ao),Y.includes("s")&&(Ee=On),Y.includes("n")&&(Ee=-On)}const p=X*Math.cos(ie*Math.PI/180)-Ee*Math.sin(ie*Math.PI/180),F=X*Math.sin(ie*Math.PI/180)+Ee*Math.cos(ie*Math.PI/180),ve=W(G*2),Te=W(B*2),Pe=at+p,R=Rt+F;let $e=Pe-ve/2,Xe=R-Te/2;const xt=Math.max(0,t.screenW-ve),It=Math.max(0,t.screenH-Te);$e=j(Math.round($e),0,xt),Xe=j(Math.round(Xe),0,It),o("update-element",{id:N,patch:{x:$e,y:Xe,w:ve,h:Te}});return}},se=(k,N)=>{var Y;if(i.value)return;const I=fe(k,N);I?s.value={id:N.id,edge:I}:((Y=s.value)==null?void 0:Y.id)===N.id&&(s.value=null)},He=k=>{var N;((N=s.value)==null?void 0:N.id)===k.id&&(s.value=null)},Re=()=>{i.value=null,window.removeEventListener("pointermove",re),window.removeEventListener("pointerup",Re)};return go(()=>{window.removeEventListener("pointermove",re),window.removeEventListener("pointerup",Re)}),nt(()=>t.elements,k=>{k.filter(N=>N.type==="text").forEach(N=>{O(N)}),k.filter(N=>N.type==="graph"&&N.legendEnabled).forEach(N=>{N.legendNameFontUrl&&N.legendNameFontFamily&&O({fontFamily:N.legendNameFontFamily,fontUrl:N.legendNameFontUrl,fontWeight:N.legendNameFontWeight||400,fontStyle:N.legendNameFontStyle||"normal"}),N.legendValueFontUrl&&N.legendValueFontFamily&&O({fontFamily:N.legendValueFontFamily,fontUrl:N.legendValueFontUrl,fontWeight:N.legendValueFontWeight||400,fontStyle:N.legendValueFontStyle||"normal"})}),k.filter(N=>N.type==="image"&&N.imageUrl).forEach(N=>{ke(N)}),k.filter(N=>N.type==="animation"&&N.animationUrl).forEach(N=>{N.autoAnimate||Se(N)})},{deep:!0,immediate:!0}),(k,N)=>(_(),E("div",rC,[c("div",{class:"display-canvas",style:rn(f.value),onPointerdown:pe},[(_(!0),E(je,null,Je(e.elements,I=>(_(),E("div",{key:I.id,class:pt(["display-element",{selected:I.id===e.selectedId}]),style:rn(g(I)),onPointerdown:Y=>Ae(Y,I),onPointermove:Y=>se(Y,I),onPointerleave:Y=>He(I)},[T(I)?(_(),E("svg",{key:0,class:"display-element__shape",viewBox:`0 0 ${I.w} ${I.h}`,preserveAspectRatio:"none"},[I.shapeType==="line"?(_(),E("line",{key:0,x1:"0",y1:"0",x2:I.w,y2:I.h,stroke:M(I),"stroke-width":"1"},null,8,cC)):I.shapeType==="rect"?(_(),E("rect",{key:1,x:"0",y:"0",width:I.w,height:I.h,fill:I.filled?ee(I):"none",stroke:M(I),"stroke-width":"1"},null,8,uC)):I.shapeType==="circle"?(_(),E("circle",{key:2,cx:I.w/2,cy:I.h/2,r:Math.max(1,Math.min(I.w,I.h)/2),fill:I.filled?ee(I):"none",stroke:M(I),"stroke-width":"1"},null,8,dC)):I.shapeType==="triangle"?(_(),E("polygon",{key:3,points:`0 ${I.h} ${I.w/2} 0 ${I.w} ${I.h}`,fill:I.filled?ee(I):"none",stroke:M(I),"stroke-width":"1"},null,8,fC)):P(I.shapeType)?(_(),E("polygon",{key:4,points:w(I),fill:I.filled?ee(I):"none",stroke:M(I),"stroke-width":"1"},null,8,pC)):ue("",!0)],8,lC)):I.type==="icon"&&$(I)?(_(),E("div",{key:1,class:"display-element__icon",style:rn(H(I))},null,4)):I.type==="graph"?(_(),E("svg",{key:2,class:"display-element__graph",viewBox:`0 0 ${I.w} ${I.h}`,preserveAspectRatio:"none"},[I.border!==!1?(_(),E("g",gC,[c("rect",{x:"0.5",y:"0.5",width:Math.max(0,I.w-1),height:Math.max(0,I.h-1)},null,8,vC)])):ue("",!0),De(I).x.length||De(I).y.length?(_(),E("g",mC,[(_(!0),E(je,null,Je(De(I).x,(Y,ie)=>(_(),E("line",{key:`gx-${ie}`,x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2},null,8,yC))),128)),(_(!0),E(je,null,Je(De(I).y,(Y,ie)=>(_(),E("line",{key:`gy-${ie}`,x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2},null,8,bC))),128))])):ue("",!0),c("g",_C,[(_(!0),E(je,null,Je(Ye(I),(Y,ie)=>(_(),E(je,{key:`trace-${ie}`},[Y.path&&Y.continuous?(_(),E("path",{key:0,d:Y.path,stroke:Y.color,"stroke-width":Y.thickness,"stroke-dasharray":Y.dash,fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},null,8,wC)):(_(!0),E(je,{key:1},Je(Y.points,(_e,Ie)=>(_(),E("circle",{key:`p-${ie}-${Ie}`,cx:_e.x,cy:_e.y,r:Math.max(1,Y.thickness/2),fill:Y.color},null,8,EC))),128))],64))),128))]),Q(I)?(_(),E("g",SC,[c("rect",{x:Q(I).x,y:Q(I).y,width:Q(I).w,height:Q(I).h,class:pt({"display-graph__legend-border":Q(I).border})},null,10,xC),(_(!0),E(je,null,Je(Q(I).rows,(Y,ie)=>(_(),E(je,{key:`lr-${ie}`},[Y.valueText?(_(),E("text",{key:0,x:Q(I).x+4,y:Q(I).y+Y.y,class:"display-graph__legend-text"},[c("tspan",{style:rn({fontFamily:Q(I).nameFontFamily||"inherit",fontSize:`${Y.nameSize}px`})},ge(Y.nameText),5),c("tspan",{dx:"4",style:rn({fontFamily:Q(I).valueFontFamily||"inherit",fontSize:`${Y.valueSize}px`})},ge(Y.valueText),5)],8,kC)):(_(),E("text",{key:1,x:Q(I).x+4,y:Q(I).y+Y.y,class:"display-graph__legend-text",style:rn({fontFamily:(Y.type==="value"?Q(I).valueFontFamily:Q(I).nameFontFamily)||"inherit",fontSize:`${Y.size}px`})},ge(Y.text),13,CC))],64))),128))])):ue("",!0)],8,hC)):I.type==="animation"&&I.animationUrl?(_(),E("img",{key:3,class:"display-element__image",src:me(I),alt:I.animationFile||"animation"},null,8,AC)):I.type==="image"&&I.imageUrl?(_(),E("img",{key:4,class:"display-element__image",src:Ct(I),alt:I.image||"image"},null,8,$C)):(_(),E("div",{key:5,class:pt(["display-element__label",{"display-element__label--text":I.type==="text"}]),style:rn(m(I))},[c("span",null,ge(v(I)),1)],6))],46,aC))),128)),e.elements.length?ue("",!0):(_(),E("div",IC,' Click "Add" to place an element. '))],36)]))}},FC=so(RC,[["__scopeId","data-v-0ace3f29"]]),OC={class:"display-toolbar__group"},LC=["aria-label","data-tooltip","onClick"],MC=["src","alt"],NC={__name:"DisplayToolbar",props:{orientation:{type:String,default:"horizontal"},variant:{type:String,default:"card"}},emits:["add"],setup(e){const n=[{type:"text",label:"Add Text",icon:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/alpha-a-box-outline.svg"},{type:"image",label:"Add Image",icon:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/image.svg"},{type:"icon",label:"Add Icon",icon:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/emoticon-excited-outline.svg"},{type:"graph",label:"Add Graph",icon:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/chart-bell-curve-cumulative.svg"},{type:"animation",label:"Add Animation",icon:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/animation-play.svg"},{type:"shape",label:"Add Shape",icon:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/pentagon-outline.svg"}];return(t,o)=>(_(),E("div",{class:pt(["display-toolbar",{"display-toolbar--vertical":e.orientation==="vertical","display-toolbar--flat":e.variant==="flat"}])},[c("div",OC,[(_(),E(je,null,Je(n,i=>c("button",{key:i.type,class:"display-toolbar__icon-btn",type:"button","aria-label":i.label,"data-tooltip":i.label,onClick:s=>t.$emit("add",i.type)},[c("img",{src:i.icon,alt:i.label},null,8,MC)],8,LC)),64))])],2))}},DC=so(NC,[["__scopeId","data-v-06714625"]]),PC={class:"color-picker-card",role:"dialog","aria-modal":"true"},jC={class:"color-picker-body"},BC={class:"color-picker-row"},UC={class:"color-picker-swatches"},zC=["onClick","aria-label"],VC={__name:"ColorPickerModal",props:{open:{type:Boolean,default:!1},selected:{type:String,default:""}},emits:["close","select"],setup(e,{emit:n}){const t=e,o=n,i=["#FFFFFF","#F97316","#FACC15","#4ADE80","#2DD4BF","#38BDF8","#818CF8","#A855F7","#F472B6","#EF4444","#0F172A","#94A3B8"],s=K("#ffffff"),r=K("#FFFFFF"),a=()=>{o("close")},d=m=>{s.value=m,r.value=m.toUpperCase()},l=()=>{const m=tn(r.value)||tn(s.value);o("select",m||"")},f=()=>{const m=tn(t.selected)||"#FFFFFF";s.value=m,r.value=m};nt(()=>t.open,m=>{m&&f()});const g=m=>{m.key==="Escape"&&a()};return nt(()=>t.open,m=>{m?window.addEventListener("keydown",g):window.removeEventListener("keydown",g)}),go(()=>{window.removeEventListener("keydown",g)}),nt(()=>s.value,m=>{const v=tn(m);v&&(r.value=v)}),nt(()=>r.value,m=>{const v=tn(m);v&&(s.value=v)}),(m,v)=>e.open?(_(),E("div",{key:0,class:"color-picker-backdrop",onClick:Et(a,["self"])},[c("div",PC,[v[2]||(v[2]=c("header",{class:"color-picker-header"},[c("div",null,[c("h3",null,"Color picker"),c("p",{class:"color-picker-sub"},"Select a color for the display element.")])],-1)),c("div",jC,[c("div",BC,[Fn(c("input",{type:"color","onUpdate:modelValue":v[0]||(v[0]=T=>s.value=T),"aria-label":"Color picker"},null,512),[[to,s.value]]),Fn(c("input",{type:"text","onUpdate:modelValue":v[1]||(v[1]=T=>r.value=T),placeholder:"#RRGGBB","aria-label":"Hex color"},null,512),[[to,r.value]])]),c("div",UC,[(_(),E(je,null,Je(i,T=>c("button",{key:T,type:"button",class:"color-swatch",style:rn({backgroundColor:T}),onClick:P=>d(T),"aria-label":`Pick ${T}`},null,12,zC)),64))])]),c("footer",{class:"color-picker-actions"},[c("button",{type:"button",class:"secondary compact",onClick:l},"Apply")])])])):ue("",!0)}},ar=so(VC,[["__scopeId","data-v-1bbf085b"]]),Wv=["BINARY","GRAYSCALE","RGB565","RGB"],HC=["opaque","chroma_key","alpha_channel"],Yv=["NONE","FLOYDSTEINBERG"],Kv=["big_endian","little_endian"],vd="TRANSPARENT_BINARY",GC=e=>{const n=String(e||"").trim().toUpperCase();return n===vd?{type:"BINARY",legacyTransparentBinary:!0}:Wv.includes(n)?{type:n,legacyTransparentBinary:!1}:{type:"BINARY",legacyTransparentBinary:!1}},ic=e=>["BINARY","GRAYSCALE"].includes(String(e||"").toUpperCase()),sc=e=>["BINARY","GRAYSCALE"].includes(String(e||"").toUpperCase()),rc=e=>String(e||"").toUpperCase()==="RGB565",md=e=>String(e||"").toUpperCase()==="BINARY"?["opaque","chroma_key"]:HC,nf=e=>{const{type:n,legacyTransparentBinary:t}=GC(e.type),o=md(n);let i=String(e.transparency||"opaque").trim().toLowerCase();t&&(!i||i==="opaque")&&(i="chroma_key"),o.includes(i)||(i=n==="BINARY"?"chroma_key":"opaque");let s=String(e.dither||"NONE").trim().toUpperCase();Yv.includes(s)||(s="NONE"),sc(n)||(s="NONE");let r=String(e.byteOrder||"big_endian").trim().toLowerCase();Kv.includes(r)||(r="big_endian"),rc(n)||(r="big_endian");const a=ic(n)?!!e.invertAlpha:!1;return{type:n,transparency:i,invertAlpha:a,dither:s,byteOrder:r,legacyTransparentBinary:t}},Ar=e=>{const n=nf({type:e==null?void 0:e.imageType,transparency:e==null?void 0:e.imageTransparency,invertAlpha:(e==null?void 0:e.imageInvertAlpha)??(e==null?void 0:e.invert),dither:e==null?void 0:e.imageDither,byteOrder:e==null?void 0:e.imageByteOrder});return{imageType:n.type,imageTransparency:n.transparency,imageInvertAlpha:n.invertAlpha,imageDither:n.dither,imageByteOrder:n.byteOrder,invert:n.invertAlpha}},$r=e=>{const n=nf({type:e==null?void 0:e.animationType,transparency:e==null?void 0:e.animationTransparency,invertAlpha:e==null?void 0:e.animationInvertAlpha,dither:e==null?void 0:e.animationDither,byteOrder:e==null?void 0:e.animationByteOrder});return{animationType:n.type,animationTransparency:n.transparency,animationInvertAlpha:n.invertAlpha,animationDither:n.dither,animationByteOrder:n.byteOrder}},Yp=(e,n,t,o,i)=>{const s=nf({type:e,transparency:n,invertAlpha:t,dither:o,byteOrder:i}),r=[],a=String(e||"").trim().toUpperCase(),d=String(n||"opaque").trim().toLowerCase(),l=String(o||"NONE").trim().toUpperCase(),f=String(i||"big_endian").trim().toLowerCase();return a===vd&&r.push("Image type TRANSPARENT_BINARY is no longer supported"),a&&a!==vd&&a!==s.type&&r.push("Unsupported image type"),d!==s.transparency&&r.push("Unsupported transparency for selected image type"),!ic(s.type)&&t&&r.push("invert_alpha is only supported for BINARY and GRAYSCALE"),!sc(s.type)&&l!=="NONE"&&r.push("dither is only supported for BINARY and GRAYSCALE"),!rc(s.type)&&f!=="big_endian"&&r.push("byte_order is only supported for RGB565"),r},WC={key:0,class:"display-inspector__header"},YC={key:0,class:"display-inspector__type"},KC={key:1,class:"note"},qC={key:2,class:"display-inspector__form"},ZC=["value"],XC=["value"],JC=["value"],QC={key:0},eA=["checked"],tA={class:"display-inspector__row display-inspector__row--quad"},nA={class:"display-inspector__field"},oA=["value"],iA={class:"display-inspector__field"},sA=["value"],rA={class:"display-inspector__field"},aA=["value"],lA={class:"display-inspector__field"},cA=["value"],uA={key:1,class:"display-icon-picker"},dA={class:"schema-icon-row"},fA=["value"],pA={key:2,class:"note"},hA={class:"display-inspector__row display-inspector__row--quad"},gA={class:"display-inspector__field"},vA=["value"],mA={class:"display-inspector__field"},yA=["value"],bA={class:"display-inspector__field"},_A=["value"],wA={class:"display-inspector__field"},EA=["value"],SA={key:0},xA=["value"],kA=["value"],CA={key:0,class:"field-error-text"},AA={key:1},$A=["value"],IA=["value"],TA={key:2},RA=["value"],FA=["value"],OA={key:3},LA=["value"],MA={key:4},NA=["value"],DA=["value"],PA={key:0,class:"field-error-text"},jA={key:5,class:"display-inspector__row"},BA=["value"],UA=["value"],zA={key:6,class:"display-inspector__row"},VA={key:0},HA=["value"],GA={key:7,class:"display-inspector__row"},WA=["value"],YA=["value"],KA={key:8},qA=["value"],ZA={key:9,class:"display-icon-picker"},XA={class:"schema-icon-row"},JA=["value"],QA={key:10},e$=["value"],t$={key:11},n$=["value"],o$=["value","title"],i$={key:12,class:"display-inspector__row"},s$=["value"],r$=["value"],a$=["value"],l$=["value"],c$={key:13},u$=["value"],d$=["value","title"],f$={key:0,class:"field-error-text"},p$={key:14},h$=["value"],g$=["value"],v$={key:15},m$=["value"],y$=["value"],b$={key:16},_$=["value"],w$={key:17},E$=["value"],S$=["value"],x$={key:18},k$=["value"],C$=["value"],A$=["value"],$$={key:0,class:"field-error-text"},I$=["value"],T$=["value","title"],R$={key:0,class:"field-error-text"},F$=["value"],O$=["value"],L$=["value"],M$=["value"],N$={key:0},D$=["value"],P$={key:1},j$=["value"],B$=["value"],U$={key:2},z$=["value"],V$=["value"],H$={class:"display-inspector__row"},G$=["value"],W$=["value"],Y$={key:3},K$=["value"],q$={key:4,class:"display-inspector__row"},Z$=["value"],X$=["value"],J$={key:5},Q$=["value"],eI=["value"],tI={key:0,class:"field-error-text"},nI={class:"display-inspector__row"},oI=["value"],iI=["checked"],sI={class:"display-inspector__row"},rI=["value"],aI=["value"],lI={class:"display-inspector__row"},cI=["value"],uI=["value"],dI={class:"display-inspector__row"},fI=["value"],pI=["value"],hI=["checked"],gI={key:0,class:"display-inspector__row"},vI=["value"],mI=["value"],yI={key:1,class:"display-inspector__row"},bI={key:0,class:"display-icon-picker"},_I={class:"schema-icon-row"},wI=["value"],EI=["checked"],SI={key:2,class:"display-trace-list"},xI={key:0,class:"note"},kI={class:"display-inspector__row"},CI=["for"],AI=["id","value","onChange"],$I=["value"],II=["for"],TI=["id","value","onInput"],RI={class:"display-inspector__row"},FI=["for"],OI=["id","value","onChange"],LI=["for"],MI=["id","value","onInput"],NI={class:"display-inspector__row"},DI={key:0,class:"display-icon-picker"},PI=["for"],jI={class:"schema-icon-row"},BI=["id","value","onInput"],UI=["onClick"],zI=["for"],VI=["id","checked","onChange"],HI={class:"display-trace-actions"},GI=["onClick"],WI=["checked"],YI={key:3,class:"display-legend"},KI={class:"display-inspector__row"},qI=["value"],ZI=["value"],XI={key:0,class:"display-inspector__row"},JI=["value"],QI=["value","title"],e2=["value"],t2={key:1,class:"display-inspector__row"},n2=["value"],o2=["value"],i2=["value"],s2=["value"],r2=["value"],a2={key:2,class:"display-inspector__row"},l2=["value"],c2=["value","title"],u2=["value"],d2={key:3,class:"display-inspector__row"},f2=["value"],p2=["value"],h2=["value"],g2=["value"],v2=["value"],m2={class:"display-inspector__row"},y2=["value"],b2=["value"],_2={class:"display-inspector__row"},w2=["checked"],E2=["checked"],S2={class:"display-inspector__row"},x2=["value"],k2=["value"],C2=["checked"],A2={key:21,class:"display-icon-picker"},$2={class:"schema-icon-row"},I2=["value"],T2=["src"],R2={key:0,class:"field-error-text"},F2={key:22,class:"display-icon-picker"},O2={class:"schema-icon-row"},L2=["value"],M2="materialdesignicons-webfont.ttf",N2={__name:"DisplayInspector",props:{selectedElement:{type:Object,default:null},screenW:{type:Number,default:0},screenH:{type:Number,default:0},isMonochrome:{type:Boolean,default:!0},images:{type:Array,default:()=>[]},localFonts:{type:Array,default:()=>[]},googleFonts:{type:Array,default:()=>[]},assetsBase:{type:String,default:"/"},dynamicIds:{type:Array,default:()=>[]},mdiIcons:{type:Array,default:()=>[]},variant:{type:String,default:"card"},showHeader:{type:Boolean,default:!0}},emits:["update"],setup(e,{emit:n}){const t=e,o=n,i=K(!1),s=K(!1),r=K(!1),a=K(null),d=[0,90,180,270],l=A(()=>(t.localFonts||[]).filter(D=>String((D==null?void 0:D.file)||"").trim().toLowerCase()!==M2)),f=D=>l.value.find(p=>p.file===D),g=()=>l.value[0],m=(D,p=28)=>{const F=String(D||"");return F.length<=p?F:`${F.slice(0,p-3)}...`},v=A(()=>{var D;return["shape"].includes((D=t.selectedElement)==null?void 0:D.type)}),T=A(()=>{var p;if(t.isMonochrome)return!1;const D=(p=t.selectedElement)==null?void 0:p.type;return["text","shape"].includes(D)}),P=A(()=>{var F,ve;if(((F=t.selectedElement)==null?void 0:F.type)!=="shape")return"";const p=(ve=t.selectedElement)==null?void 0:ve.shapeType;return p==="line"?"Line uses X/Y and W/H as end point.":p==="rect"?"Rectangle uses X/Y and W/H.":p==="circle"?"Circle uses X/Y and W/H as bounds.":p==="triangle"?"Triangle uses X/Y and W/H as bounds.":p!=null&&p.startsWith("polygon")?"Polygon uses X/Y and W/H as bounds.":""}),w=(D,p)=>{var ve,Te,Pe;const F=Number(p.target.value);if(!Number.isNaN(F)){if(["w","h"].includes(D)&&["image","icon","animation"].includes((ve=t.selectedElement)==null?void 0:ve.type)){const R=Number(((Te=t.selectedElement)==null?void 0:Te.w)||0),$e=Number(((Pe=t.selectedElement)==null?void 0:Pe.h)||0),Xe=$e?R/$e:1,xt=Math.max(1,Math.round(F));if(D==="w"){const kt=Math.max(1,Math.round(xt/(Xe||1)));o("update",{w:xt,h:kt});return}const It=Math.max(1,Math.round(xt*(Xe||1)));o("update",{w:It,h:xt});return}o("update",{[D]:F})}},C=(D,p)=>{o("update",{[D]:p.target.value})},$=(D,p)=>{o("update",{[D]:p.target.checked})},H=(D,p)=>{const F=p.target.value==="true";if(D==="imageInvertAlpha"){o("update",{imageInvertAlpha:F,invert:F});return}o("update",{[D]:F})},M=Wv,ee=Yv,oe=Kv,Z=A(()=>Ar(t.selectedElement||{}).imageType),ye=A(()=>$r(t.selectedElement||{}).animationType),Ce=A(()=>md(Z.value)),Fe=A(()=>md(ye.value)),Le=A(()=>ic(Z.value)),We=A(()=>sc(Z.value)),ht=A(()=>rc(Z.value)),De=A(()=>ic(ye.value)),Ye=A(()=>sc(ye.value)),Q=A(()=>rc(ye.value)),we=D=>{const p=Ar({...t.selectedElement||{},imageType:D.target.value});o("update",p)},Oe=D=>{const p=$r({...t.selectedElement||{},animationType:D.target.value});o("update",p)},Qe=()=>{var p;const D=[...((p=t.selectedElement)==null?void 0:p.traces)||[],{sensor:"",name:"",lineType:"SOLID",lineThickness:3,continuous:!1,color:""}];o("update",{traces:D})},Ke=(D,p,F)=>{var Pe;const ve=[...((Pe=t.selectedElement)==null?void 0:Pe.traces)||[]],Te=ve[D]||{};ve[D]={...Te,[p]:F},o("update",{traces:ve})},st=D=>{var F;const p=[...((F=t.selectedElement)==null?void 0:F.traces)||[]];p.splice(D,1),o("update",{traces:p})},vt=A(()=>{var p;const D=((p=t.selectedElement)==null?void 0:p.icon)||"";return!D||D==="placeholder"?"":D}),yt=A(()=>{var p;const D=((p=t.selectedElement)==null?void 0:p.icon)||"";return!D||D==="placeholder"?"":D.startsWith("mdi:")?D.slice(4):D}),dt=A(()=>yt.value),mt=A(()=>yt.value?`https://cdn.jsdelivr.net/npm/@mdi/svg/svg/${yt.value}.svg`:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/emoticon-plus-outline.svg"),Ct=A(()=>{var p,F;if(((p=t.selectedElement)==null?void 0:p.type)!=="icon")return!1;if(!((F=t.mdiIcons)!=null&&F.length))return!0;const D=yt.value||"";return D.trim()?!t.mdiIcons.some(ve=>ve.toLowerCase()===D.toLowerCase()):!0}),de=A(()=>{var D;return(D=t.mdiIcons)!=null&&D.length?yt.value?"Invalid MDI icon name.":"Please select an icon.":"No MDI icons available."}),me=A(()=>{var D;return((D=t.selectedElement)==null?void 0:D.color)||""}),ke=A(()=>me.value?ur(me.value,"#ffffff"):"#ffffff"),Se=D=>ur(D||"","#ffffff"),Me=A(()=>{var F,ve;const D=a.value;return D==null?"":((ve=(((F=t.selectedElement)==null?void 0:F.traces)||[])[D])==null?void 0:ve.color)||""}),O=A(()=>(t.dynamicIds||[]).filter(D=>D.domain==="sensor").map(D=>({id:D.id,label:D.label})).sort((D,p)=>D.label.localeCompare(p.label))),j=A(()=>{var F;const D=((F=t.selectedElement)==null?void 0:F.dynamicDomain)||"",p=t.dynamicIds||[];return D?p.filter(ve=>ve.domain===D):p}),W=A(()=>{var p,F,ve;if(((p=t.selectedElement)==null?void 0:p.type)!=="text"||(((F=t.selectedElement)==null?void 0:F.textMode)||"static")!=="dynamic")return!1;if(!j.value.length)return!0;const D=((ve=t.selectedElement)==null?void 0:ve.dynamicId)||"";return D?!j.value.some(Te=>Te.id===D):!0}),ae=A(()=>j.value.length?"Please select a source ID.":"No source IDs available."),he=A(()=>{var D,p;return((D=t.selectedElement)==null?void 0:D.type)!=="graph"?!1:!String(((p=t.selectedElement)==null?void 0:p.graphId)||"").trim()}),fe=A(()=>{var D,p;return((D=t.selectedElement)==null?void 0:D.type)!=="graph"?!1:!String(((p=t.selectedElement)==null?void 0:p.duration)||"").trim()}),pe=A(()=>{var p,F,ve;if(((p=t.selectedElement)==null?void 0:p.type)!=="graph"||(F=t.selectedElement)!=null&&F.useTraces)return!1;if(!O.value.length)return!0;const D=((ve=t.selectedElement)==null?void 0:ve.sensor)||"";return D?!O.value.some(Te=>Te.id===D):!0}),Ae=A(()=>O.value.length?"Please select a sensor ID.":"No sensor IDs available."),re=A(()=>(t.images||[]).map(D=>(D==null?void 0:D.file)||"").filter(D=>D.toLowerCase().endsWith(".gif")).sort((D,p)=>D.localeCompare(p))),se=A(()=>(t.images||[]).map(D=>(D==null?void 0:D.file)||"").filter(D=>!!D).sort((D,p)=>D.localeCompare(p))),He=A(()=>{var D,p;return((D=t.selectedElement)==null?void 0:D.type)!=="animation"?!1:!String(((p=t.selectedElement)==null?void 0:p.animationId)||"").trim()}),Re=A(()=>{var p,F;if(((p=t.selectedElement)==null?void 0:p.type)!=="animation")return!1;if(!re.value.length)return!0;const D=((F=t.selectedElement)==null?void 0:F.animationFile)||"";return D?!re.value.includes(D):!0}),k=A(()=>re.value.length?"Please select an animation file.":"No GIF animations available."),N=A(()=>{var p,F;if(((p=t.selectedElement)==null?void 0:p.type)!=="image")return!1;if(!se.value.length)return!0;const D=((F=t.selectedElement)==null?void 0:F.image)||"";return D?!se.value.includes(D):!0}),I=A(()=>se.value.length?"Please select an image file.":"No image files available."),Y=()=>{i.value=!0},ie=()=>{i.value=!1},_e=D=>{o("update",{icon:D?`mdi:${D}`:""}),i.value=!1},Ie=()=>{s.value=!0},Ue=()=>{s.value=!1},qe=D=>{o("update",{color:D||""}),s.value=!1},Be=D=>{a.value=D,r.value=!0},lt=()=>{r.value=!1,a.value=null},ot=D=>{const p=a.value;p!=null&&Ke(p,"color",D||""),r.value=!1,a.value=null},it=D=>{o("update",D)},at=D=>{const p=`${D||""}`.toLowerCase(),F=p.includes("italic")?"italic":"normal";return{weight:Number.parseInt(p,10)||400,style:F}},Rt=(D,p)=>{const F=`${D||""} ${p||""}`.toLowerCase(),ve=F.includes("italic")?"italic":"normal";let Te=400;return F.includes("thin")?Te=100:F.includes("extralight")||F.includes("extra light")?Te=200:F.includes("light")?Te=300:F.includes("medium")?Te=500:F.includes("semibold")||F.includes("semi bold")?Te=600:F.includes("bold")?Te=700:F.includes("extrabold")||F.includes("extra bold")?Te=800:F.includes("black")&&(Te=900),{weight:Te,style:ve}},Vt=D=>{var Te,Pe,R;if(D.target.value==="google"){const $e=t.googleFonts[0],Xe=(Te=$e==null?void 0:$e.variants)!=null&&Te.includes("regular")?"regular":(Pe=$e==null?void 0:$e.variants)==null?void 0:Pe[0],xt=((R=$e==null?void 0:$e.files)==null?void 0:R[Xe])||"",{weight:It,style:kt}=at(Xe);it({fontSource:"google",fontFamily:($e==null?void 0:$e.family)||"",fontVariant:Xe||"regular",fontUrl:xt,fontFile:"",fontWeight:It,fontStyle:kt});return}const F=g(),ve=Rt(F==null?void 0:F.label,F==null?void 0:F.file);it({fontSource:"local",fontFamily:(F==null?void 0:F.label)||"",fontFile:(F==null?void 0:F.file)||"",fontVariant:"regular",fontUrl:F!=null&&F.file?`${t.assetsBase}fonts/${F.file}`:"",fontWeight:ve.weight,fontStyle:ve.style})},Ot=D=>{const p=D.target.value,F=f(p),ve=Rt(F==null?void 0:F.label,F==null?void 0:F.file);it({fontSource:"local",fontFamily:(F==null?void 0:F.label)||"",fontFile:(F==null?void 0:F.file)||"",fontVariant:"regular",fontUrl:F!=null&&F.file?`${t.assetsBase}fonts/${F.file}`:"",fontWeight:ve.weight,fontStyle:ve.style})},$t=D=>{var $e,Xe,xt;const p=D.target.value,F=t.googleFonts.find(It=>It.family===p),ve=($e=F==null?void 0:F.variants)!=null&&$e.includes("regular")?"regular":(Xe=F==null?void 0:F.variants)==null?void 0:Xe[0],Te=((xt=F==null?void 0:F.files)==null?void 0:xt[ve])||"",{weight:Pe,style:R}=at(ve);it({fontSource:"google",fontFamily:(F==null?void 0:F.family)||"",fontVariant:ve||"regular",fontUrl:Te,fontFile:"",fontWeight:Pe,fontStyle:R})},Ht=D=>{var R;const p=D.target.value,F=t.googleFonts.find($e=>{var Xe;return $e.family===((Xe=t.selectedElement)==null?void 0:Xe.fontFamily)}),ve=((R=F==null?void 0:F.files)==null?void 0:R[p])||"",{weight:Te,style:Pe}=at(p);it({fontSource:"google",fontVariant:p,fontUrl:ve,fontWeight:Te,fontStyle:Pe})},At=D=>{var Te,Pe,R;if(D.target.value==="google"){const $e=t.googleFonts[0],Xe=(Te=$e==null?void 0:$e.variants)!=null&&Te.includes("regular")?"regular":(Pe=$e==null?void 0:$e.variants)==null?void 0:Pe[0],xt=((R=$e==null?void 0:$e.files)==null?void 0:R[Xe])||"",{weight:It,style:kt}=at(Xe);it({legendNameFontSource:"google",legendNameFontFamily:($e==null?void 0:$e.family)||"",legendNameFontVariant:Xe||"regular",legendNameFontFile:"",legendNameFontUrl:xt,legendNameFontWeight:It,legendNameFontStyle:kt});return}const F=g(),ve=Rt(F==null?void 0:F.label,F==null?void 0:F.file);it({legendNameFontSource:"local",legendNameFontFamily:(F==null?void 0:F.label)||"",legendNameFontFile:(F==null?void 0:F.file)||"",legendNameFontVariant:"regular",legendNameFontUrl:F!=null&&F.file?`${t.assetsBase}fonts/${F.file}`:"",legendNameFontWeight:ve.weight,legendNameFontStyle:ve.style})},ln=D=>{var Te,Pe,R;if(D.target.value==="google"){const $e=t.googleFonts[0],Xe=(Te=$e==null?void 0:$e.variants)!=null&&Te.includes("regular")?"regular":(Pe=$e==null?void 0:$e.variants)==null?void 0:Pe[0],xt=((R=$e==null?void 0:$e.files)==null?void 0:R[Xe])||"",{weight:It,style:kt}=at(Xe);it({legendValueFontSource:"google",legendValueFontFamily:($e==null?void 0:$e.family)||"",legendValueFontVariant:Xe||"regular",legendValueFontFile:"",legendValueFontUrl:xt,legendValueFontWeight:It,legendValueFontStyle:kt});return}const F=g(),ve=Rt(F==null?void 0:F.label,F==null?void 0:F.file);it({legendValueFontSource:"local",legendValueFontFamily:(F==null?void 0:F.label)||"",legendValueFontFile:(F==null?void 0:F.file)||"",legendValueFontVariant:"regular",legendValueFontUrl:F!=null&&F.file?`${t.assetsBase}fonts/${F.file}`:"",legendValueFontWeight:ve.weight,legendValueFontStyle:ve.style})},on=D=>{const p=D.target.value,F=f(p),ve=Rt(F==null?void 0:F.label,F==null?void 0:F.file);it({legendNameFontSource:"local",legendNameFontFamily:(F==null?void 0:F.label)||"",legendNameFontFile:(F==null?void 0:F.file)||"",legendNameFontVariant:"regular",legendNameFontUrl:F!=null&&F.file?`${t.assetsBase}fonts/${F.file}`:"",legendNameFontWeight:ve.weight,legendNameFontStyle:ve.style})},In=D=>{const p=D.target.value,F=f(p),ve=Rt(F==null?void 0:F.label,F==null?void 0:F.file);it({legendValueFontSource:"local",legendValueFontFamily:(F==null?void 0:F.label)||"",legendValueFontFile:(F==null?void 0:F.file)||"",legendValueFontVariant:"regular",legendValueFontUrl:F!=null&&F.file?`${t.assetsBase}fonts/${F.file}`:"",legendValueFontWeight:ve.weight,legendValueFontStyle:ve.style})},qt=D=>{var $e,Xe,xt;const p=D.target.value,F=t.googleFonts.find(It=>It.family===p),ve=($e=F==null?void 0:F.variants)!=null&&$e.includes("regular")?"regular":(Xe=F==null?void 0:F.variants)==null?void 0:Xe[0],Te=((xt=F==null?void 0:F.files)==null?void 0:xt[ve])||"",{weight:Pe,style:R}=at(ve);it({legendNameFontSource:"google",legendNameFontFamily:(F==null?void 0:F.family)||"",legendNameFontVariant:ve||"regular",legendNameFontFile:"",legendNameFontUrl:Te,legendNameFontWeight:Pe,legendNameFontStyle:R})},Mt=D=>{var $e,Xe,xt;const p=D.target.value,F=t.googleFonts.find(It=>It.family===p),ve=($e=F==null?void 0:F.variants)!=null&&$e.includes("regular")?"regular":(Xe=F==null?void 0:F.variants)==null?void 0:Xe[0],Te=((xt=F==null?void 0:F.files)==null?void 0:xt[ve])||"",{weight:Pe,style:R}=at(ve);it({legendValueFontSource:"google",legendValueFontFamily:(F==null?void 0:F.family)||"",legendValueFontVariant:ve||"regular",legendValueFontFile:"",legendValueFontUrl:Te,legendValueFontWeight:Pe,legendValueFontStyle:R})},cn=D=>{var R;const p=D.target.value,F=t.googleFonts.find($e=>{var Xe;return $e.family===((Xe=t.selectedElement)==null?void 0:Xe.legendNameFontFamily)}),ve=((R=F==null?void 0:F.files)==null?void 0:R[p])||"",{weight:Te,style:Pe}=at(p);it({legendNameFontSource:"google",legendNameFontVariant:p,legendNameFontUrl:ve,legendNameFontWeight:Te,legendNameFontStyle:Pe})},hn=D=>{var R;const p=D.target.value,F=t.googleFonts.find($e=>{var Xe;return $e.family===((Xe=t.selectedElement)==null?void 0:Xe.legendValueFontFamily)}),ve=((R=F==null?void 0:F.files)==null?void 0:R[p])||"",{weight:Te,style:Pe}=at(p);it({legendValueFontSource:"google",legendValueFontVariant:p,legendValueFontUrl:ve,legendValueFontWeight:Te,legendValueFontStyle:Pe})},gn=D=>{const p=D.target.value,F=p?`${t.assetsBase}images/${p}`:"";if(it({animationFile:p,animationUrl:F}),!F)return;const ve=new Image;ve.src=F,ve.onload=()=>{const Te=ve.naturalWidth||ve.width||0,Pe=ve.naturalHeight||ve.height||0;if(!Te||!Pe)return;let R=Te,$e=Pe;const Xe=Number(t.screenW||0),xt=Number(t.screenH||0);if(Xe>0&&xt>0&&(Te>Xe||Pe>xt)){const It=Math.min(Xe/Te,xt/Pe,1);R=Math.max(1,Math.round(Te*It)),$e=Math.max(1,Math.round(Pe*It))}it({w:R,h:$e})}},xn=D=>{var ve,Te,Pe;const p=g();if(p){const R=Rt(p==null?void 0:p.label,p==null?void 0:p.file);return{source:"local",family:(p==null?void 0:p.label)||"",file:(p==null?void 0:p.file)||"",variant:"regular",url:p!=null&&p.file?`${t.assetsBase}fonts/${p.file}`:"",weight:R.weight,style:R.style,size:D}}const F=t.googleFonts[0];if(F){const R=(ve=F.variants)!=null&&ve.includes("regular")?"regular":(Te=F.variants)==null?void 0:Te[0],$e=((Pe=F.files)==null?void 0:Pe[R])||"",{weight:Xe,style:xt}=at(R);return{source:"google",family:F.family,file:"",variant:R||"regular",url:$e,weight:Xe,style:xt,size:D}}return null},un=D=>{var Pe,R,$e,Xe,xt,It;if(!D.target.checked){it({legendEnabled:!1});return}const F={legendEnabled:!0},ve=((Pe=t.selectedElement)==null?void 0:Pe.legendNameFontFile)||((R=t.selectedElement)==null?void 0:R.legendNameFontFamily),Te=(($e=t.selectedElement)==null?void 0:$e.legendValueFontFile)||((Xe=t.selectedElement)==null?void 0:Xe.legendValueFontFamily);if(!ve){const kt=xn(((xt=t.selectedElement)==null?void 0:xt.legendNameFontSize)||10);kt&&(F.legendNameFontSource=kt.source,F.legendNameFontFamily=kt.family,F.legendNameFontFile=kt.file,F.legendNameFontVariant=kt.variant,F.legendNameFontUrl=kt.url,F.legendNameFontWeight=kt.weight,F.legendNameFontStyle=kt.style)}if(!Te){const kt=xn(((It=t.selectedElement)==null?void 0:It.legendValueFontSize)||8);kt&&(F.legendValueFontSource=kt.source,F.legendValueFontFamily=kt.family,F.legendValueFontFile=kt.file,F.legendValueFontVariant=kt.variant,F.legendValueFontUrl=kt.url,F.legendValueFontWeight=kt.weight,F.legendValueFontStyle=kt.style)}it(F)},G=D=>{const p=D.target.value,F=t.images.find(Pe=>Pe.file===p),ve=F!=null&&F.file?`${t.assetsBase}images/${F.file}`:"";if(it({image:(F==null?void 0:F.file)||"",imageUrl:ve}),!ve)return;const Te=new Image;Te.src=ve,Te.onload=()=>{const Pe=Te.naturalWidth||Te.width||0,R=Te.naturalHeight||Te.height||0;if(!Pe||!R)return;let $e=Pe,Xe=R;const xt=Number(t.screenW||0),It=Number(t.screenH||0);if(xt>0&&It>0&&(Pe>xt||R>It)){const kt=Math.min(xt/Pe,It/R,1);$e=Math.max(1,Math.round(Pe*kt)),Xe=Math.max(1,Math.round(R*kt))}it({w:$e,h:Xe})}},B=[{value:"static",label:"Static text"},{value:"dynamic",label:"Dynamic value"}],X=D=>["sensor","number"].includes(D),Ee=D=>["binary_sensor","switch"].includes(D);return(D,p)=>{var F,ve,Te,Pe;return _(),E("aside",{class:pt(["display-inspector",{"display-inspector--flat":e.variant==="flat"}])},[e.showHeader?(_(),E("div",WC,[p[66]||(p[66]=c("h4",null,"Inspector",-1)),e.selectedElement?(_(),E("span",YC,ge(e.selectedElement.type),1)):ue("",!0)])):ue("",!0),e.selectedElement?(_(),E("div",qC,[e.selectedElement.type==="shape"?(_(),E(je,{key:0},[c("div",null,[p[68]||(p[68]=c("label",{for:"shapeType"},"Shape",-1)),c("select",{id:"shapeType",value:e.selectedElement.shapeType,onChange:p[0]||(p[0]=R=>C("shapeType",R))},[...p[67]||(p[67]=[Zg('<option value="line" data-v-f2037ff9>Line</option><option value="rect" data-v-f2037ff9>Rectangle</option><option value="circle" data-v-f2037ff9>Circle</option><option value="triangle" data-v-f2037ff9>Triangle</option><option value="polygon5" data-v-f2037ff9>Pentagon</option><option value="polygon6" data-v-f2037ff9>Hexagon</option><option value="polygon7" data-v-f2037ff9>Heptagon</option><option value="polygon8" data-v-f2037ff9>Octagon</option>',8)])],40,ZC)]),c("div",null,[p[69]||(p[69]=c("label",{for:"rotation"},"Rotation",-1)),c("select",{id:"rotation",value:e.selectedElement.rotation,onChange:p[1]||(p[1]=R=>w("rotation",R))},[(_(),E(je,null,Je(d,R=>c("option",{key:R,value:R},ge(R),9,JC)),64))],40,XC)]),e.selectedElement.shapeType!=="line"?(_(),E("div",QC,[p[70]||(p[70]=c("label",{for:"filled"},"Filled",-1)),c("input",{id:"filled",type:"checkbox",class:"schema-checkbox",checked:e.selectedElement.filled,onChange:p[2]||(p[2]=R=>$("filled",R))},null,40,eA)])):ue("",!0),c("div",tA,[c("div",nA,[p[71]||(p[71]=c("label",{for:"posX"},"X",-1)),c("input",{id:"posX",type:"number",value:e.selectedElement.x,onInput:p[3]||(p[3]=R=>w("x",R))},null,40,oA)]),c("div",iA,[p[72]||(p[72]=c("label",{for:"posY"},"Y",-1)),c("input",{id:"posY",type:"number",value:e.selectedElement.y,onInput:p[4]||(p[4]=R=>w("y",R))},null,40,sA)]),p[75]||(p[75]=c("span",{class:"display-inspector__group-divider"},null,-1)),c("div",rA,[p[73]||(p[73]=c("label",{for:"sizeW"},"W",-1)),c("input",{id:"sizeW",type:"number",value:e.selectedElement.w,onInput:p[5]||(p[5]=R=>w("w",R))},null,40,aA)]),c("div",lA,[p[74]||(p[74]=c("label",{for:"sizeH"},"H",-1)),c("input",{id:"sizeH",type:"number",value:e.selectedElement.h,onInput:p[6]||(p[6]=R=>w("h",R))},null,40,cA)])]),T.value?(_(),E("div",uA,[p[76]||(p[76]=c("label",{for:"shapeColor"},"Color",-1)),c("div",dA,[c("input",{id:"shapeColor",type:"text",value:me.value,placeholder:"#RRGGBB",onInput:p[7]||(p[7]=R=>C("color",R))},null,40,fA),c("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:Ie},[c("span",{class:"schema-color-icon",style:rn({backgroundColor:ke.value})},null,4)])]),_t(ar,{open:s.value,selected:me.value,onClose:Ue,onSelect:qe},null,8,["open","selected"])])):ue("",!0),P.value?(_(),E("div",pA,ge(P.value),1)):ue("",!0)],64)):(_(),E(je,{key:1},[c("div",hA,[c("div",gA,[p[77]||(p[77]=c("label",{for:"posX"},"X",-1)),c("input",{id:"posX",type:"number",value:e.selectedElement.x,onInput:p[8]||(p[8]=R=>w("x",R))},null,40,vA)]),c("div",mA,[p[78]||(p[78]=c("label",{for:"posY"},"Y",-1)),c("input",{id:"posY",type:"number",value:e.selectedElement.y,onInput:p[9]||(p[9]=R=>w("y",R))},null,40,yA)]),p[81]||(p[81]=c("span",{class:"display-inspector__group-divider"},null,-1)),c("div",bA,[p[79]||(p[79]=c("label",{for:"sizeW"},"W",-1)),c("input",{id:"sizeW",type:"number",value:e.selectedElement.w,onInput:p[10]||(p[10]=R=>w("w",R))},null,40,_A)]),c("div",wA,[p[80]||(p[80]=c("label",{for:"sizeH"},"H",-1)),c("input",{id:"sizeH",type:"number",value:e.selectedElement.h,onInput:p[11]||(p[11]=R=>w("h",R))},null,40,EA)])]),e.selectedElement.type==="graph"&&!e.selectedElement.useTraces?(_(),E("div",SA,[p[83]||(p[83]=c("label",{for:"graphSensor"},"Sensor ID *",-1)),c("select",{id:"graphSensor",value:e.selectedElement.sensor,class:pt({"field-error":pe.value}),onChange:p[12]||(p[12]=R=>C("sensor",R))},[p[82]||(p[82]=c("option",{value:""},"Select sensor",-1)),(_(!0),E(je,null,Je(O.value,R=>(_(),E("option",{key:R.id,value:R.id},ge(R.label),9,kA))),128))],42,xA),pe.value?(_(),E("div",CA,ge(Ae.value),1)):ue("",!0)])):ue("",!0),v.value?(_(),E("div",AA,[p[84]||(p[84]=c("label",{for:"rotation"},"Rotation",-1)),c("select",{id:"rotation",value:e.selectedElement.rotation,onChange:p[13]||(p[13]=R=>w("rotation",R))},[(_(),E(je,null,Je(d,R=>c("option",{key:R,value:R},ge(R),9,IA)),64))],40,$A)])):ue("",!0),e.selectedElement.type==="text"?(_(),E("div",TA,[p[85]||(p[85]=c("label",{for:"textMode"},"Mode",-1)),c("select",{id:"textMode",value:e.selectedElement.textMode||"static",onChange:p[14]||(p[14]=R=>C("textMode",R))},[(_(),E(je,null,Je(B,R=>c("option",{key:R.value,value:R.value},ge(R.label),9,FA)),64))],40,RA)])):ue("",!0),e.selectedElement.type==="text"&&(e.selectedElement.textMode||"static")==="static"?(_(),E("div",OA,[p[86]||(p[86]=c("label",{for:"textValue"},"Text",-1)),c("input",{id:"textValue",type:"text",value:e.selectedElement.text,onInput:p[15]||(p[15]=R=>C("text",R))},null,40,LA)])):ue("",!0),e.selectedElement.type==="text"&&(e.selectedElement.textMode||"static")==="dynamic"?(_(),E("div",MA,[p[88]||(p[88]=c("label",{for:"dynamicId"},"Source ID",-1)),c("select",{id:"dynamicId",value:e.selectedElement.dynamicId,class:pt({"field-error":W.value}),onChange:p[16]||(p[16]=R=>C("dynamicId",R))},[p[87]||(p[87]=c("option",{value:""},"Select ID",-1)),(_(!0),E(je,null,Je(j.value,R=>(_(),E("option",{key:R.id,value:R.id},ge(R.label),9,DA))),128))],42,NA),W.value?(_(),E("div",PA,ge(ae.value),1)):ue("",!0)])):ue("",!0),e.selectedElement.type==="text"&&(e.selectedElement.textMode||"static")==="dynamic"?(_(),E("div",jA,[c("div",null,[p[89]||(p[89]=c("label",{for:"prefix"},"Prefix",-1)),c("input",{id:"prefix",type:"text",value:e.selectedElement.prefix,onInput:p[17]||(p[17]=R=>C("prefix",R))},null,40,BA)]),c("div",null,[p[90]||(p[90]=c("label",{for:"suffix"},"Suffix",-1)),c("input",{id:"suffix",type:"text",value:e.selectedElement.suffix,onInput:p[18]||(p[18]=R=>C("suffix",R))},null,40,UA)])])):ue("",!0),e.selectedElement.type==="text"&&(e.selectedElement.textMode||"static")==="dynamic"?(_(),E("div",zA,[X(e.selectedElement.dynamicDomain)?(_(),E("div",VA,[p[91]||(p[91]=c("label",{for:"format"},"Format",-1)),c("input",{id:"format",type:"text",value:e.selectedElement.format,onInput:p[19]||(p[19]=R=>C("format",R))},null,40,HA)])):ue("",!0)])):ue("",!0),e.selectedElement.type==="text"&&(e.selectedElement.textMode||"static")==="dynamic"&&Ee(e.selectedElement.dynamicDomain)?(_(),E("div",GA,[c("div",null,[p[92]||(p[92]=c("label",{for:"onLabel"},"On label",-1)),c("input",{id:"onLabel",type:"text",value:e.selectedElement.onLabel,onInput:p[20]||(p[20]=R=>C("onLabel",R))},null,40,WA)]),c("div",null,[p[93]||(p[93]=c("label",{for:"offLabel"},"Off label",-1)),c("input",{id:"offLabel",type:"text",value:e.selectedElement.offLabel,onInput:p[21]||(p[21]=R=>C("offLabel",R))},null,40,YA)])])):ue("",!0),e.selectedElement.type==="text"?(_(),E("div",KA,[p[95]||(p[95]=c("label",{for:"wrap"},"Wrap text",-1)),c("select",{id:"wrap",value:(e.selectedElement.wrap!==!1).toString(),onChange:p[22]||(p[22]=R=>H("wrap",R))},[...p[94]||(p[94]=[c("option",{value:"true"},"TRUE",-1),c("option",{value:"false"},"FALSE",-1)])],40,qA)])):ue("",!0),T.value?(_(),E("div",ZA,[p[96]||(p[96]=c("label",{for:"elementColor"},"Color",-1)),c("div",XA,[c("input",{id:"elementColor",type:"text",value:me.value,placeholder:"#RRGGBB",onInput:p[23]||(p[23]=R=>C("color",R))},null,40,JA),c("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:Ie},[c("span",{class:"schema-color-icon",style:rn({backgroundColor:ke.value})},null,4)])]),_t(ar,{open:s.value,selected:me.value,onClose:Ue,onSelect:qe},null,8,["open","selected"])])):ue("",!0),e.selectedElement.type==="text"?(_(),E("div",QA,[p[98]||(p[98]=c("label",{for:"fontSource"},"Font source",-1)),c("select",{id:"fontSource",value:e.selectedElement.fontSource||"local",onChange:Vt},[...p[97]||(p[97]=[c("option",{value:"local"},"Local",-1),c("option",{value:"google"},"Google Fonts",-1)])],40,e$)])):ue("",!0),e.selectedElement.type==="text"&&(e.selectedElement.fontSource||"local")==="local"?(_(),E("div",t$,[p[99]||(p[99]=c("label",{for:"fontLocal"},"Font",-1)),c("select",{id:"fontLocal",value:e.selectedElement.fontFile,onChange:Ot},[(_(!0),E(je,null,Je(l.value,R=>(_(),E("option",{key:R.file,value:R.file,title:R.file},ge(m(R.file)),9,o$))),128))],40,n$)])):ue("",!0),e.selectedElement.type==="text"&&e.selectedElement.fontSource==="google"?(_(),E("div",i$,[c("div",null,[p[100]||(p[100]=c("label",{for:"fontFamily"},"Font family",-1)),c("select",{id:"fontFamily",value:e.selectedElement.fontFamily,onChange:$t},[(_(!0),E(je,null,Je(e.googleFonts,R=>(_(),E("option",{key:R.family,value:R.family},ge(R.family),9,r$))),128))],40,s$)]),c("div",null,[p[101]||(p[101]=c("label",{for:"fontVariant"},"Variant",-1)),c("select",{id:"fontVariant",value:e.selectedElement.fontVariant,onChange:Ht},[(_(!0),E(je,null,Je(((F=e.googleFonts.find(R=>R.family===e.selectedElement.fontFamily))==null?void 0:F.variants)||[],R=>(_(),E("option",{key:R,value:R},ge(R),9,l$))),128))],40,a$)])])):ue("",!0),e.selectedElement.type==="image"?(_(),E("div",c$,[p[103]||(p[103]=c("label",{for:"imageValue"},"Image",-1)),c("select",{id:"imageValue",value:e.selectedElement.image,class:pt({"field-error":N.value}),onChange:G},[p[102]||(p[102]=c("option",{value:""},"Select image",-1)),(_(!0),E(je,null,Je(e.images,R=>(_(),E("option",{key:R.file,value:R.file,title:R.file},ge(m(R.file)),9,d$))),128))],42,u$),N.value?(_(),E("div",f$,ge(I.value),1)):ue("",!0)])):ue("",!0),e.selectedElement.type==="image"?(_(),E("div",p$,[p[104]||(p[104]=c("label",{for:"imageType"},"Image type",-1)),c("select",{id:"imageType",value:Z.value,onChange:we},[(_(!0),E(je,null,Je(Ft(M),R=>(_(),E("option",{key:`image-type-${R}`,value:R},ge(R),9,g$))),128))],40,h$)])):ue("",!0),e.selectedElement.type==="image"?(_(),E("div",v$,[p[105]||(p[105]=c("label",{for:"imageTransparency"},"Transparency",-1)),c("select",{id:"imageTransparency",value:e.selectedElement.imageTransparency||"opaque",onChange:p[24]||(p[24]=R=>C("imageTransparency",R))},[(_(!0),E(je,null,Je(Ce.value,R=>(_(),E("option",{key:`image-transparency-${R}`,value:R},ge(R),9,y$))),128))],40,m$)])):ue("",!0),e.selectedElement.type==="image"&&Le.value?(_(),E("div",b$,[p[107]||(p[107]=c("label",{for:"imageInvertAlpha"},"invert_alpha",-1)),c("select",{id:"imageInvertAlpha",value:(!!(e.selectedElement.imageInvertAlpha??e.selectedElement.invert)).toString(),onChange:p[25]||(p[25]=R=>H("imageInvertAlpha",R))},[...p[106]||(p[106]=[c("option",{value:"true"},"TRUE",-1),c("option",{value:"false"},"FALSE",-1)])],40,_$)])):ue("",!0),e.selectedElement.type==="image"&&We.value?(_(),E("div",w$,[p[108]||(p[108]=c("label",{for:"imageDither"},"Dither",-1)),c("select",{id:"imageDither",value:e.selectedElement.imageDither||"NONE",onChange:p[26]||(p[26]=R=>C("imageDither",R))},[(_(!0),E(je,null,Je(Ft(ee),R=>(_(),E("option",{key:`image-dither-${R}`,value:R},ge(R),9,S$))),128))],40,E$)])):ue("",!0),e.selectedElement.type==="image"&&ht.value?(_(),E("div",x$,[p[109]||(p[109]=c("label",{for:"imageByteOrder"},"byte_order",-1)),c("select",{id:"imageByteOrder",value:e.selectedElement.imageByteOrder||"big_endian",onChange:p[27]||(p[27]=R=>C("imageByteOrder",R))},[(_(!0),E(je,null,Je(Ft(oe),R=>(_(),E("option",{key:`image-byte-order-${R}`,value:R},ge(R),9,C$))),128))],40,k$)])):ue("",!0),e.selectedElement.type==="animation"?(_(),E(je,{key:19},[c("div",null,[p[110]||(p[110]=c("label",{for:"animationId"},"Animation ID *",-1)),c("input",{id:"animationId",type:"text",value:e.selectedElement.animationId,placeholder:"animation_id",class:pt({"field-error":He.value}),onInput:p[28]||(p[28]=R=>C("animationId",R))},null,42,A$),He.value?(_(),E("div",$$," Please provide an animation ID. ")):ue("",!0)]),c("div",null,[p[112]||(p[112]=c("label",{for:"animationFile"},"Animation file *",-1)),c("select",{id:"animationFile",value:e.selectedElement.animationFile,class:pt({"field-error":Re.value}),onChange:gn},[p[111]||(p[111]=c("option",{value:""},"Select animation",-1)),(_(!0),E(je,null,Je(re.value,R=>(_(),E("option",{key:R,value:R,title:R},ge(m(R)),9,T$))),128))],42,I$),Re.value?(_(),E("div",R$,ge(k.value),1)):ue("",!0)]),c("div",null,[p[113]||(p[113]=c("label",{for:"animationType"},"Type",-1)),c("select",{id:"animationType",value:ye.value,onChange:Oe},[(_(!0),E(je,null,Je(Ft(M),R=>(_(),E("option",{key:`animation-type-${R}`,value:R},ge(R),9,O$))),128))],40,F$)]),c("div",null,[p[114]||(p[114]=c("label",{for:"animationTransparency"},"Transparency",-1)),c("select",{id:"animationTransparency",value:e.selectedElement.animationTransparency||"opaque",onChange:p[29]||(p[29]=R=>C("animationTransparency",R))},[(_(!0),E(je,null,Je(Fe.value,R=>(_(),E("option",{key:`animation-transparency-${R}`,value:R},ge(R),9,M$))),128))],40,L$)]),De.value?(_(),E("div",N$,[p[116]||(p[116]=c("label",{for:"animationInvertAlpha"},"invert_alpha",-1)),c("select",{id:"animationInvertAlpha",value:(!!e.selectedElement.animationInvertAlpha).toString(),onChange:p[30]||(p[30]=R=>H("animationInvertAlpha",R))},[...p[115]||(p[115]=[c("option",{value:"true"},"TRUE",-1),c("option",{value:"false"},"FALSE",-1)])],40,D$)])):ue("",!0),Ye.value?(_(),E("div",P$,[p[117]||(p[117]=c("label",{for:"animationDither"},"Dither",-1)),c("select",{id:"animationDither",value:e.selectedElement.animationDither||"NONE",onChange:p[31]||(p[31]=R=>C("animationDither",R))},[(_(!0),E(je,null,Je(Ft(ee),R=>(_(),E("option",{key:`animation-dither-${R}`,value:R},ge(R),9,B$))),128))],40,j$)])):ue("",!0),Q.value?(_(),E("div",U$,[p[118]||(p[118]=c("label",{for:"animationByteOrder"},"byte_order",-1)),c("select",{id:"animationByteOrder",value:e.selectedElement.animationByteOrder||"big_endian",onChange:p[32]||(p[32]=R=>C("animationByteOrder",R))},[(_(!0),E(je,null,Je(Ft(oe),R=>(_(),E("option",{key:`animation-byte-order-${R}`,value:R},ge(R),9,V$))),128))],40,z$)])):ue("",!0),c("div",H$,[c("div",null,[p[120]||(p[120]=c("label",{for:"animationLoop"},"Loop",-1)),c("select",{id:"animationLoop",value:(!!e.selectedElement.loopEnabled).toString(),onChange:p[33]||(p[33]=R=>H("loopEnabled",R))},[...p[119]||(p[119]=[c("option",{value:"true"},"TRUE",-1),c("option",{value:"false"},"FALSE",-1)])],40,G$)]),c("div",null,[p[122]||(p[122]=c("label",{for:"animationAuto"},"Auto animate",-1)),c("select",{id:"animationAuto",value:(!!e.selectedElement.autoAnimate).toString(),onChange:p[34]||(p[34]=R=>H("autoAnimate",R))},[...p[121]||(p[121]=[c("option",{value:"true"},"TRUE",-1),c("option",{value:"false"},"FALSE",-1)])],40,W$)])]),e.selectedElement.autoAnimate?(_(),E("div",Y$,[p[123]||(p[123]=c("label",{for:"animationInterval"},"Interval (ms)",-1)),c("input",{id:"animationInterval",type:"number",value:e.selectedElement.intervalMs,placeholder:"200",onInput:p[35]||(p[35]=R=>w("intervalMs",R))},null,40,K$)])):ue("",!0),e.selectedElement.loopEnabled?(_(),E("div",q$,[c("div",null,[p[124]||(p[124]=c("label",{for:"animationLoopStart"},"Start frame",-1)),c("input",{id:"animationLoopStart",type:"number",value:e.selectedElement.loopStart,placeholder:"0",onInput:p[36]||(p[36]=R=>w("loopStart",R))},null,40,Z$)]),c("div",null,[p[125]||(p[125]=c("label",{for:"animationLoopEnd"},"End frame",-1)),c("input",{id:"animationLoopEnd",type:"number",value:e.selectedElement.loopEnd,placeholder:"10",onInput:p[37]||(p[37]=R=>w("loopEnd",R))},null,40,X$)])])):ue("",!0),e.selectedElement.loopEnabled?(_(),E("div",J$,[p[126]||(p[126]=c("label",{for:"animationLoopRepeat"},"Repeat",-1)),c("input",{id:"animationLoopRepeat",type:"number",value:e.selectedElement.loopRepeat,placeholder:"0",onInput:p[38]||(p[38]=R=>w("loopRepeat",R))},null,40,Q$)])):ue("",!0)],64)):ue("",!0),e.selectedElement.type==="graph"?(_(),E(je,{key:20},[c("div",null,[p[127]||(p[127]=c("label",{for:"graphId"},"Graph ID *",-1)),c("input",{id:"graphId",type:"text",value:e.selectedElement.graphId,placeholder:"graph_id",class:pt({"field-error":he.value}),onInput:p[39]||(p[39]=R=>C("graphId",R))},null,42,eI),he.value?(_(),E("div",tI," Please provide a graph ID. ")):ue("",!0)]),c("div",nI,[c("div",null,[p[128]||(p[128]=c("label",{for:"graphDuration"},"Duration *",-1)),c("input",{id:"graphDuration",type:"text",value:e.selectedElement.duration,placeholder:"24h",class:pt({"field-error":fe.value}),onInput:p[40]||(p[40]=R=>C("duration",R))},null,42,oI)]),c("div",null,[p[129]||(p[129]=c("label",{for:"graphBorder"},"Border",-1)),c("input",{id:"graphBorder",type:"checkbox",class:"schema-checkbox",checked:e.selectedElement.border!==!1,onChange:p[41]||(p[41]=R=>$("border",R))},null,40,iI)])]),c("div",sI,[c("div",null,[p[130]||(p[130]=c("label",{for:"graphXGrid"},"X grid",-1)),c("input",{id:"graphXGrid",type:"text",value:e.selectedElement.xGrid,placeholder:"10min",onInput:p[42]||(p[42]=R=>C("xGrid",R))},null,40,rI)]),c("div",null,[p[131]||(p[131]=c("label",{for:"graphYGrid"},"Y grid",-1)),c("input",{id:"graphYGrid",type:"text",value:e.selectedElement.yGrid,placeholder:"1.0",onInput:p[43]||(p[43]=R=>C("yGrid",R))},null,40,aI)])]),c("div",lI,[c("div",null,[p[132]||(p[132]=c("label",{for:"graphMinRange"},"Min range",-1)),c("input",{id:"graphMinRange",type:"number",value:e.selectedElement.minRange,placeholder:"0",onInput:p[44]||(p[44]=R=>w("minRange",R))},null,40,cI)]),c("div",null,[p[133]||(p[133]=c("label",{for:"graphMaxRange"},"Max range",-1)),c("input",{id:"graphMaxRange",type:"number",value:e.selectedElement.maxRange,placeholder:"100",onInput:p[45]||(p[45]=R=>w("maxRange",R))},null,40,uI)])]),c("div",dI,[c("div",null,[p[134]||(p[134]=c("label",{for:"graphMinValue"},"Min value",-1)),c("input",{id:"graphMinValue",type:"number",value:e.selectedElement.minValue,placeholder:"0",onInput:p[46]||(p[46]=R=>w("minValue",R))},null,40,fI)]),c("div",null,[p[135]||(p[135]=c("label",{for:"graphMaxValue"},"Max value",-1)),c("input",{id:"graphMaxValue",type:"number",value:e.selectedElement.maxValue,placeholder:"100",onInput:p[47]||(p[47]=R=>w("maxValue",R))},null,40,pI)])]),c("div",null,[p[136]||(p[136]=c("label",{for:"graphUseTraces"},"Use multiple traces",-1)),c("input",{id:"graphUseTraces",type:"checkbox",class:"schema-checkbox",checked:!!e.selectedElement.useTraces,onChange:p[48]||(p[48]=R=>$("useTraces",R))},null,40,hI)]),e.selectedElement.useTraces?ue("",!0):(_(),E("div",gI,[c("div",null,[p[138]||(p[138]=c("label",{for:"graphLineType"},"Line type",-1)),c("select",{id:"graphLineType",value:e.selectedElement.lineType||"SOLID",onChange:p[49]||(p[49]=R=>C("lineType",R))},[...p[137]||(p[137]=[c("option",{value:"SOLID"},"SOLID",-1),c("option",{value:"DOTTED"},"DOTTED",-1),c("option",{value:"DASHED"},"DASHED",-1)])],40,vI)]),c("div",null,[p[139]||(p[139]=c("label",{for:"graphLineThickness"},"Thickness",-1)),c("input",{id:"graphLineThickness",type:"number",value:e.selectedElement.lineThickness||3,onInput:p[50]||(p[50]=R=>w("lineThickness",R))},null,40,mI)])])),e.selectedElement.useTraces?(_(),E("div",SI,[c("div",{class:"display-trace-header"},[p[142]||(p[142]=c("strong",null,"Traces",-1)),c("button",{type:"button",class:"secondary compact",onClick:Qe},"Add trace")]),(ve=e.selectedElement.traces)!=null&&ve.length?ue("",!0):(_(),E("div",xI,"No traces added.")),(_(!0),E(je,null,Je(e.selectedElement.traces,(R,$e)=>(_(),E("div",{key:$e,class:"display-trace-card"},[c("div",kI,[c("div",null,[c("label",{for:`traceSensor_${$e}`},"Sensor",8,CI),c("select",{id:`traceSensor_${$e}`,value:R.sensor||"",onChange:Xe=>Ke($e,"sensor",Xe.target.value)},[p[143]||(p[143]=c("option",{value:""},"Select sensor",-1)),(_(!0),E(je,null,Je(O.value,Xe=>(_(),E("option",{key:Xe.id,value:Xe.id},ge(Xe.label),9,$I))),128))],40,AI)]),c("div",null,[c("label",{for:`traceName_${$e}`},"Name",8,II),c("input",{id:`traceName_${$e}`,type:"text",value:R.name||"",onInput:Xe=>Ke($e,"name",Xe.target.value)},null,40,TI)])]),c("div",RI,[c("div",null,[c("label",{for:`traceLineType_${$e}`},"Line type",8,FI),c("select",{id:`traceLineType_${$e}`,value:R.lineType||"SOLID",onChange:Xe=>Ke($e,"lineType",Xe.target.value)},[...p[144]||(p[144]=[c("option",{value:"SOLID"},"SOLID",-1),c("option",{value:"DOTTED"},"DOTTED",-1),c("option",{value:"DASHED"},"DASHED",-1)])],40,OI)]),c("div",null,[c("label",{for:`traceThickness_${$e}`},"Thickness",8,LI),c("input",{id:`traceThickness_${$e}`,type:"number",value:R.lineThickness??3,onInput:Xe=>Ke($e,"lineThickness",Number(Xe.target.value))},null,40,MI)])]),c("div",NI,[e.isMonochrome?ue("",!0):(_(),E("div",DI,[c("label",{for:`traceColor_${$e}`},"Color",8,PI),c("div",jI,[c("input",{id:`traceColor_${$e}`,type:"text",value:R.color||"",placeholder:"#RRGGBB",onInput:Xe=>Ke($e,"color",Xe.target.value)},null,40,BI),c("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:Xe=>Be($e)},[c("span",{class:"schema-color-icon",style:rn({backgroundColor:Se(R.color)})},null,4)],8,UI)])])),c("div",null,[c("label",{for:`traceContinuous_${$e}`},"Continuous",8,zI),c("input",{id:`traceContinuous_${$e}`,type:"checkbox",class:"schema-checkbox",checked:!!R.continuous,onChange:Xe=>Ke($e,"continuous",Xe.target.checked)},null,40,VI)])]),c("div",HI,[c("button",{type:"button",class:"secondary compact",onClick:Xe=>st($e)},"Remove",8,GI)])]))),128)),_t(ar,{open:r.value,selected:Me.value,onClose:lt,onSelect:ot},null,8,["open","selected"])])):(_(),E("div",yI,[e.isMonochrome?ue("",!0):(_(),E("div",bI,[p[140]||(p[140]=c("label",{for:"graphColor"},"Color",-1)),c("div",_I,[c("input",{id:"graphColor",type:"text",value:e.selectedElement.color,placeholder:"#RRGGBB",onInput:p[51]||(p[51]=R=>C("color",R))},null,40,wI),c("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:Ie},[c("span",{class:"schema-color-icon",style:rn({backgroundColor:ke.value})},null,4)])]),_t(ar,{open:s.value,selected:me.value,onClose:Ue,onSelect:qe},null,8,["open","selected"])])),c("div",null,[p[141]||(p[141]=c("label",{for:"graphContinuous"},"Continuous",-1)),c("input",{id:"graphContinuous",type:"checkbox",class:"schema-checkbox",checked:!!e.selectedElement.continuous,onChange:p[52]||(p[52]=R=>$("continuous",R))},null,40,EI)])])),c("div",null,[p[145]||(p[145]=c("label",{for:"graphLegend"},"Legend",-1)),c("input",{id:"graphLegend",type:"checkbox",class:"schema-checkbox",checked:!!e.selectedElement.legendEnabled,onChange:un},null,40,WI)]),e.selectedElement.legendEnabled?(_(),E("div",YI,[c("div",KI,[c("div",null,[p[147]||(p[147]=c("label",{for:"legendNameFontSource"},"Name font source",-1)),c("select",{id:"legendNameFontSource",value:e.selectedElement.legendNameFontSource||"local",onChange:At},[...p[146]||(p[146]=[c("option",{value:"local"},"Local",-1),c("option",{value:"google"},"Google Fonts",-1)])],40,qI)]),c("div",null,[p[149]||(p[149]=c("label",{for:"legendValueFontSource"},"Value font source",-1)),c("select",{id:"legendValueFontSource",value:e.selectedElement.legendValueFontSource||"local",onChange:ln},[...p[148]||(p[148]=[c("option",{value:"local"},"Local",-1),c("option",{value:"google"},"Google Fonts",-1)])],40,ZI)])]),(e.selectedElement.legendNameFontSource||"local")==="local"?(_(),E("div",XI,[c("div",null,[p[151]||(p[151]=c("label",{for:"legendNameFontFile"},"Name font",-1)),c("select",{id:"legendNameFontFile",value:e.selectedElement.legendNameFontFile,onChange:on},[p[150]||(p[150]=c("option",{value:""},"Select font",-1)),(_(!0),E(je,null,Je(l.value,R=>(_(),E("option",{key:R.file,value:R.file,title:R.file},ge(m(R.file)),9,QI))),128))],40,JI)]),c("div",null,[p[152]||(p[152]=c("label",{for:"legendNameFontSize"},"Name size",-1)),c("input",{id:"legendNameFontSize",type:"number",value:e.selectedElement.legendNameFontSize||10,onInput:p[53]||(p[53]=R=>w("legendNameFontSize",R))},null,40,e2)])])):(_(),E("div",t2,[c("div",null,[p[154]||(p[154]=c("label",{for:"legendNameFontFamily"},"Name family",-1)),c("select",{id:"legendNameFontFamily",value:e.selectedElement.legendNameFontFamily,onChange:qt},[p[153]||(p[153]=c("option",{value:""},"Select family",-1)),(_(!0),E(je,null,Je(e.googleFonts,R=>(_(),E("option",{key:R.family,value:R.family},ge(R.family),9,o2))),128))],40,n2)]),c("div",null,[p[155]||(p[155]=c("label",{for:"legendNameFontVariant"},"Variant",-1)),c("select",{id:"legendNameFontVariant",value:e.selectedElement.legendNameFontVariant||"regular",onChange:cn},[(_(!0),E(je,null,Je(((Te=e.googleFonts.find(R=>R.family===e.selectedElement.legendNameFontFamily))==null?void 0:Te.variants)||[],R=>(_(),E("option",{key:R,value:R},ge(R),9,s2))),128))],40,i2)]),c("div",null,[p[156]||(p[156]=c("label",{for:"legendNameFontSizeGoogle"},"Name size",-1)),c("input",{id:"legendNameFontSizeGoogle",type:"number",value:e.selectedElement.legendNameFontSize||10,onInput:p[54]||(p[54]=R=>w("legendNameFontSize",R))},null,40,r2)])])),(e.selectedElement.legendValueFontSource||"local")==="local"?(_(),E("div",a2,[c("div",null,[p[158]||(p[158]=c("label",{for:"legendValueFontFile"},"Value font",-1)),c("select",{id:"legendValueFontFile",value:e.selectedElement.legendValueFontFile,onChange:In},[p[157]||(p[157]=c("option",{value:""},"Select font",-1)),(_(!0),E(je,null,Je(l.value,R=>(_(),E("option",{key:R.file,value:R.file,title:R.file},ge(m(R.file)),9,c2))),128))],40,l2)]),c("div",null,[p[159]||(p[159]=c("label",{for:"legendValueFontSize"},"Value size",-1)),c("input",{id:"legendValueFontSize",type:"number",value:e.selectedElement.legendValueFontSize||8,onInput:p[55]||(p[55]=R=>w("legendValueFontSize",R))},null,40,u2)])])):(_(),E("div",d2,[c("div",null,[p[161]||(p[161]=c("label",{for:"legendValueFontFamily"},"Value family",-1)),c("select",{id:"legendValueFontFamily",value:e.selectedElement.legendValueFontFamily,onChange:Mt},[p[160]||(p[160]=c("option",{value:""},"Select family",-1)),(_(!0),E(je,null,Je(e.googleFonts,R=>(_(),E("option",{key:R.family,value:R.family},ge(R.family),9,p2))),128))],40,f2)]),c("div",null,[p[162]||(p[162]=c("label",{for:"legendValueFontVariant"},"Variant",-1)),c("select",{id:"legendValueFontVariant",value:e.selectedElement.legendValueFontVariant||"regular",onChange:hn},[(_(!0),E(je,null,Je(((Pe=e.googleFonts.find(R=>R.family===e.selectedElement.legendValueFontFamily))==null?void 0:Pe.variants)||[],R=>(_(),E("option",{key:R,value:R},ge(R),9,g2))),128))],40,h2)]),c("div",null,[p[163]||(p[163]=c("label",{for:"legendValueFontSizeGoogle"},"Value size",-1)),c("input",{id:"legendValueFontSizeGoogle",type:"number",value:e.selectedElement.legendValueFontSize||8,onInput:p[56]||(p[56]=R=>w("legendValueFontSize",R))},null,40,v2)])])),c("div",m2,[c("div",null,[p[164]||(p[164]=c("label",{for:"legendWidth"},"Legend width",-1)),c("input",{id:"legendWidth",type:"number",value:e.selectedElement.legendWidth,placeholder:"80",onInput:p[57]||(p[57]=R=>w("legendWidth",R))},null,40,y2)]),c("div",null,[p[165]||(p[165]=c("label",{for:"legendHeight"},"Legend height",-1)),c("input",{id:"legendHeight",type:"number",value:e.selectedElement.legendHeight,placeholder:"32",onInput:p[58]||(p[58]=R=>w("legendHeight",R))},null,40,b2)])]),c("div",_2,[c("div",null,[p[166]||(p[166]=c("label",{for:"legendBorder"},"Legend border",-1)),c("input",{id:"legendBorder",type:"checkbox",class:"schema-checkbox",checked:e.selectedElement.legendBorder!==!1,onChange:p[59]||(p[59]=R=>$("legendBorder",R))},null,40,w2)]),c("div",null,[p[167]||(p[167]=c("label",{for:"legendShowLines"},"Show lines",-1)),c("input",{id:"legendShowLines",type:"checkbox",class:"schema-checkbox",checked:e.selectedElement.legendShowLines!==!1,onChange:p[60]||(p[60]=R=>$("legendShowLines",R))},null,40,E2)])]),c("div",S2,[c("div",null,[p[169]||(p[169]=c("label",{for:"legendShowValues"},"Show values",-1)),c("select",{id:"legendShowValues",value:e.selectedElement.legendShowValues||"AUTO",onChange:p[61]||(p[61]=R=>C("legendShowValues",R))},[...p[168]||(p[168]=[c("option",{value:"NONE"},"NONE",-1),c("option",{value:"AUTO"},"AUTO",-1),c("option",{value:"BESIDE"},"BESIDE",-1),c("option",{value:"BELOW"},"BELOW",-1)])],40,x2)]),c("div",null,[p[171]||(p[171]=c("label",{for:"legendDirection"},"Direction",-1)),c("select",{id:"legendDirection",value:e.selectedElement.legendDirection||"AUTO",onChange:p[62]||(p[62]=R=>C("legendDirection",R))},[...p[170]||(p[170]=[c("option",{value:"AUTO"},"AUTO",-1),c("option",{value:"HORIZONTAL"},"HORIZONTAL",-1),c("option",{value:"VERTICAL"},"VERTICAL",-1)])],40,k2)])]),c("div",null,[p[172]||(p[172]=c("label",{for:"legendShowUnits"},"Show units",-1)),c("input",{id:"legendShowUnits",type:"checkbox",class:"schema-checkbox",checked:e.selectedElement.legendShowUnits!==!1,onChange:p[63]||(p[63]=R=>$("legendShowUnits",R))},null,40,C2)])])):ue("",!0)],64)):ue("",!0),e.selectedElement.type==="icon"?(_(),E("div",A2,[p[173]||(p[173]=c("label",{for:"iconValue"},"Icon",-1)),c("div",$2,[c("input",{id:"iconValue",type:"text",value:vt.value,class:pt({"field-error":Ct.value}),placeholder:"mdi:home-thermometer",onInput:p[64]||(p[64]=R=>C("icon",R))},null,42,I2),c("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:Y},[c("img",{src:mt.value,alt:"Add icon"},null,8,T2)])]),Ct.value?(_(),E("div",R2,ge(de.value),1)):ue("",!0),_t(ef,{open:i.value,selected:yt.value,"initial-query":dt.value,onClose:ie,onSelect:_e},null,8,["open","selected","initial-query"])])):ue("",!0),e.selectedElement.type==="icon"&&!e.isMonochrome?(_(),E("div",F2,[p[174]||(p[174]=c("label",{for:"iconColor"},"Color",-1)),c("div",O2,[c("input",{id:"iconColor",type:"text",value:me.value,placeholder:"#RRGGBB",onInput:p[65]||(p[65]=R=>C("color",R))},null,40,L2),c("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:Ie},[c("span",{class:"schema-color-icon",style:rn({backgroundColor:ke.value})},null,4)])]),_t(ar,{open:s.value,selected:me.value,onClose:Ue,onSelect:qe},null,8,["open","selected"])])):ue("",!0)],64))])):(_(),E("div",KC,"Select an element on the canvas."))],2)}}},D2=so(N2,[["__scopeId","data-v-f2037ff9"]]),P2={class:"display-builder"},j2={class:"display-builder__trigger"},B2=["disabled"],U2={class:"display-config-card",role:"dialog","aria-modal":"true"},z2={class:"display-config-header"},V2={class:"display-config-meta"},H2={key:0},G2={class:"display-config-actions"},W2={class:"display-config-body"},Y2={class:"display-config-column"},K2={class:"display-config-panel display-config-panel--toolbox"},q2={class:"display-config-panel display-config-panel--layers"},Z2={class:"display-element-list"},X2=["onClick","onDragstart","onDragover","onDrop"],J2={class:"display-element-type"},Q2={class:"display-element-name"},eT={key:0,class:"note"},tT={class:"display-config-panel display-config-panel--canvas"},nT={class:"display-config-panel__header"},oT={class:"display-zoom"},iT=["disabled"],sT=["disabled"],rT={key:1,class:"note"},aT={class:"display-config-inspector-column"},lT={class:"display-config-panel display-config-panel--inspector"},cT={class:"display-config-panel__header"},uT={class:"display-inspector-body"},dT=2,Kp="_display_builder",fT={__name:"DisplayBuilder",props:{schema:{type:Object,default:()=>({})},componentConfig:{type:Object,default:()=>({})},idIndex:{type:Array,default:()=>[]},mdiIcons:{type:Array,default:()=>[]},images:{type:Array,default:()=>[]},localFonts:{type:Array,default:()=>[]},googleFonts:{type:Array,default:()=>[]},assetsBase:{type:String,default:""}},emits:["open-asset-manager"],setup(e,{emit:n}){const t=e,o=n,i=K(1),s=K(!1),r=K(null),a=K({w:0,h:0}),d=K(0),l=K(0),f=K(!1),g=K({x:0,y:0,panX:0,panY:0}),m=K(!1),v=A(()=>t.assetsBase||""),T=A(()=>t.images||[]),P=A(()=>t.localFonts||[]),w=A(()=>t.googleFonts||[]),C=K([]),$=K(null),H=K(null),M=K(null),ee=K(null),oe=K(!1);let Z=1;const ye=A(()=>[...C.value].reverse()),Ce=A(()=>{var G;return((G=t.schema)==null?void 0:G.model_meta)||{}}),Fe=A(()=>Object.keys(Ce.value||{})),Le=A(()=>{var G;return((G=t.componentConfig)==null?void 0:G.model)||Fe.value[0]||""}),We=A(()=>Ce.value[Le.value]||null),ht=A(()=>Le.value||"n/a"),De=A(()=>ht.value.split(" ")[0]||"n/a"),Ye=A(()=>{var G;return(((G=t.schema)==null?void 0:G.displayType)||"monochrome")==="monochrome"}),Q=A(()=>{if(!We.value)return 1;const{w:G,h:B}=a.value;return!G||!B?1:G/We.value.w}),we=A(()=>{if(!We.value)return!1;const{w:G,h:B}=a.value;return!G||!B?!1:We.value.w*i.value>G||We.value.h*i.value>B}),Oe=A(()=>we.value?1:dT),Qe=A(()=>Math.max(.2,Q.value*.4)),Ke=A(()=>Math.max(Qe.value,Q.value*2)),st=A(()=>Math.max(.02,(Ke.value-Qe.value)/30)),vt=A(()=>i.value<Ke.value-.001),yt=A(()=>i.value>Qe.value+.001),dt=A(()=>({transform:`translate(${d.value}px, ${l.value}px)`})),mt=A(()=>C.value.find(G=>G.id===$.value)),Ct=["sensor","text_sensor","binary_sensor","number","switch","select","datetime","time"],de=A(()=>(t.idIndex||[]).filter(G=>Ct.includes(G.domain)).map(G=>({id:G.id,domain:G.domain,label:`${G.id} (${G.domain})`})).sort((G,B)=>G.label.localeCompare(B.label))),me=(G,B,X)=>Math.min(Math.max(G,B),X),ke=()=>{var X,Ee,D;const G=w.value[0];if(G){const p=(X=G.variants)!=null&&X.includes("regular")?"regular":(Ee=G.variants)==null?void 0:Ee[0],F=(D=G.files)==null?void 0:D[p];return{fontSource:"google",fontFamily:G.family,fontVariant:p||"regular",fontUrl:F||"",fontStyle:p!=null&&p.includes("italic")?"italic":"normal",fontWeight:Number.parseInt(p,10)||400}}const B=P.value[0];if(B){const p=In(B.label,B.file);return{fontSource:"local",fontFamily:B.label,fontFile:B.file,fontUrl:`${v.value}fonts/${B.file}`,fontVariant:"regular",fontStyle:p.style,fontWeight:p.weight}}return{}},Se=()=>({}),Me=()=>({}),O=G=>{var Ee,D,p;const B=P.value[0];if(B){const F=In(B.label,B.file);return{source:"local",family:B.label,file:B.file,variant:"regular",url:`${v.value}fonts/${B.file}`,weight:F.weight,style:F.style,size:G}}const X=w.value[0];if(X){const F=(Ee=X.variants)!=null&&Ee.includes("regular")?"regular":(D=X.variants)==null?void 0:D[0],ve=((p=X.files)==null?void 0:p[F])||"",Te=F!=null&&F.includes("italic")?"italic":"normal",Pe=Number.parseInt(F,10)||400;return{source:"google",family:X.family,file:"",variant:F||"regular",url:ve,weight:Pe,style:Te,size:G}}return null},j=G=>{if((G==null?void 0:G.type)!=="graph")return G;const B=G.legendNameFontFile||G.legendNameFontFamily,X=G.legendValueFontFile||G.legendValueFontFamily;if(B&&X)return G;const Ee=B?null:O(10),D=X?null:O(8),p={};return Ee&&(p.legendNameFontSource=Ee.source,p.legendNameFontFamily=Ee.family,p.legendNameFontFile=Ee.file,p.legendNameFontVariant=Ee.variant,p.legendNameFontUrl=Ee.url,p.legendNameFontWeight=Ee.weight,p.legendNameFontStyle=Ee.style,p.legendNameFontSize=Ee.size),D&&(p.legendValueFontSource=D.source,p.legendValueFontFamily=D.family,p.legendValueFontFile=D.file,p.legendValueFontVariant=D.variant,p.legendValueFontUrl=D.url,p.legendValueFontWeight=D.weight,p.legendValueFontStyle=D.style,p.legendValueFontSize=D.size),Object.keys(p).length?{...G,...p}:G},W=G=>{const B={text:{w:60,h:10,text:"New text",textMode:"static",dynamicId:"",dynamicDomain:"",format:"%.1f",prefix:"",suffix:"",onLabel:"ON",offLabel:"OFF",wrap:!0},image:{w:24,h:24,image:"",imageUrl:"",imageType:"BINARY",imageTransparency:"opaque",imageInvertAlpha:!1,imageDither:"NONE",imageByteOrder:"big_endian",invert:!1},icon:{w:20,h:20,icon:""},graph:{w:80,h:32,graphId:"",duration:"1h",border:!0,xGrid:"",yGrid:"",minRange:"",maxRange:"",minValue:"",maxValue:"",sensor:"",lineType:"",lineThickness:"",continuous:!1,color:"",useTraces:!1,traces:[],legendEnabled:!1,legendNameFontSource:"local",legendNameFontFile:"",legendNameFontFamily:"",legendNameFontVariant:"regular",legendNameFontSize:10,legendNameFontUrl:"",legendNameFontWeight:400,legendNameFontStyle:"normal",legendValueFontSource:"local",legendValueFontFile:"",legendValueFontFamily:"",legendValueFontVariant:"regular",legendValueFontSize:8,legendValueFontUrl:"",legendValueFontWeight:400,legendValueFontStyle:"normal",legendWidth:"",legendHeight:"",legendBorder:!0,legendShowLines:!0,legendShowValues:"AUTO",legendShowUnits:!0,legendDirection:"AUTO"},animation:{w:48,h:48,animationId:"",animationFile:"",animationType:"BINARY",animationTransparency:"opaque",animationInvertAlpha:!1,animationDither:"NONE",animationByteOrder:"big_endian",autoAnimate:!1,intervalMs:"",loopEnabled:!1,loopStart:"",loopEnd:"",loopRepeat:""},shape:{w:40,h:24,shapeType:"rect",filled:!1,rotation:0}},X=B[G]||B.text,Ee=C.value.length*4,D=We.value||{w:128,h:64},p=me(4+Ee,0,Math.max(0,D.w-X.w)),F=me(4+Ee,0,Math.max(0,D.h-X.h)),ve={id:`el-${Z++}`,type:G,x:p,y:F,rotation:0,...X};if(G==="graph"){const Te=C.value.filter(Pe=>Pe.type==="graph").length+1;ve.graphId=ve.graphId||`graph_${Te}_id`}if(G==="animation"){const Te=C.value.filter(Pe=>Pe.type==="animation").length+1;ve.animationId=ve.animationId||`animation_${Te}_id`}return G==="text"?{...ve,...ke()}:G==="image"?{...ve,...Se()}:G==="animation"?{...ve,...Me()}:ve},ae=()=>{var D;const G=(D=t.componentConfig)==null?void 0:D[Kp];if(!(G!=null&&G.elements)||C.value.length)return;const B=Array.isArray(G.elements)?G.elements:[];C.value=B.map(p=>!p||typeof p!="object"?p:p.type==="image"?{...p,...Ar(p)}:p.type==="animation"?{...p,...$r(p)}:p);const X=C.value.map(p=>(p==null?void 0:p.id)||"").filter(Boolean).map(p=>Number(p.replace(/\D+/g,""))||0),Ee=X.length?Math.max(...X):0;Z=Math.max(Z,Ee+1)},he=G=>de.value.find(B=>B.id===G)||null,fe=G=>{const B=W(G),X=G==="graph"?j(B):B;C.value=[X,...C.value],$.value=X.id},pe=()=>{$.value&&(C.value=C.value.filter(G=>G.id!==$.value),$.value=null)},Ae=(G,B=8,X=8)=>{if(!G)return null;const Ee=We.value||{w:0,h:0},D=Number(G.w||0),p=Number(G.h||0),F=Math.max(0,Ee.w-D),ve=Math.max(0,Ee.h-p),Te=me(Number(G.x||0)+B,0,F),Pe=me(Number(G.y||0)+X,0,ve);return{...G,id:`el-${Z++}`,x:Te,y:Pe}},re=G=>{if(!G||!(G instanceof HTMLElement))return!1;const B=G.tagName;return G.isContentEditable?!0:B==="INPUT"||B==="TEXTAREA"||B==="SELECT"},se=G=>{if(!s.value)return;if(G.key==="Escape"){G.preventDefault(),At();return}if(re(G.target))return;const B=G.ctrlKey||G.metaKey;if(G.key==="Delete"){if(!$.value)return;G.preventDefault(),pe();return}if(B&&G.key.toLowerCase()==="c"){if(!mt.value)return;G.preventDefault(),H.value=JSON.parse(JSON.stringify(mt.value));return}if(B&&G.key.toLowerCase()==="v"){if(!H.value)return;G.preventDefault();const X=Ae(H.value);if(!X)return;C.value=[...C.value,X],$.value=X.id}},He=G=>{$.value=G},Re=(G,B)=>{M.value=B,ee.value=B,G!=null&&G.dataTransfer&&(G.dataTransfer.effectAllowed="move",G.dataTransfer.setData("text/plain",B))},k=G=>{!M.value||M.value===G||(ee.value=G)},N=G=>{const B=M.value;if(!B||B===G){ee.value=null;return}const X=C.value.findIndex(F=>F.id===B),Ee=C.value.findIndex(F=>F.id===G);if(X<0||Ee<0){ee.value=null,M.value=null;return}const D=[...C.value],[p]=D.splice(X,1);D.splice(Ee,0,p),C.value=D,ee.value=null,M.value=null},I=()=>{ee.value=null,M.value=null},Y=({id:G,patch:B})=>{C.value=C.value.map(X=>X.id===G?{...X,...B}:X)},ie=G=>{if(!$.value)return;let B={...G};if(Object.prototype.hasOwnProperty.call(B,"dynamicId")){const X=he(B.dynamicId);B.dynamicDomain=(X==null?void 0:X.domain)||""}Y({id:$.value,patch:B})},_e=()=>{C.value=[],$.value=null},Ie=()=>{oe.value=!1,_e()},Ue=G=>G.type==="text"&&G.textMode==="dynamic"?G.dynamicId||"Value":G.type==="text"?G.text||"Text":G.type==="image"?G.image||"Image":G.type==="icon"?!G.icon||G.icon==="placeholder"?"Icon":G.icon:G.type==="graph"?G.graphId||"Graph":G.type==="animation"?G.animationId||"Animation":G.type==="shape"?G.shapeType==="line"?"Line":G.shapeType==="rect"?G.filled?"Filled rectangle":"Rectangle":G.shapeType==="circle"?G.filled?"Filled circle":"Circle":G.shapeType==="triangle"?"Triangle":G.shapeType==="polygon5"?"Pentagon":G.shapeType==="polygon6"?"Hexagon":G.shapeType==="polygon7"?"Heptagon":G.shapeType==="polygon8"?"Octagon":"Shape":G.id,qe=G=>G!=null&&G.type?G.type==="text"?"Text":G.type==="image"?"Image":G.type==="icon"?"Icon":G.type==="graph"?"Graph":G.type==="animation"?"Animation":G.type==="shape"?"Shape":"Element":"Element",Be=G=>G.type==="text"?G.textMode==="dynamic"?"value":"text":G.type==="graph"?"graph":G.type==="animation"?"animation":G.type,lt=G=>Math.min(Math.max(G,Qe.value),Ke.value),ot=G=>{i.value=lt(G)},it=()=>{ot(i.value+st.value)},at=()=>{ot(i.value-st.value)},Rt=()=>{i.value=lt(Q.value),d.value=0,l.value=0},Vt=G=>{if(!r.value)return;const B=r.value.getBoundingClientRect(),X=B.width/2,Ee=B.height/2,D=G.clientX-B.left,p=G.clientY-B.top,F=(D-X-d.value)/i.value,ve=(p-Ee-l.value)/i.value,Te=G.deltaY>0?-1:1,Pe=lt(i.value+Te*st.value);i.value=Pe,d.value=D-X-F*Pe,l.value=p-Ee-ve*Pe},Ot=G=>{G.button===1&&(G.preventDefault(),f.value=!0,g.value={x:G.clientX,y:G.clientY,panX:d.value,panY:l.value},window.addEventListener("pointermove",$t),window.addEventListener("pointerup",Ht))},$t=G=>{if(!f.value)return;const B=G.clientX-g.value.x,X=G.clientY-g.value.y;d.value=g.value.panX+B,l.value=g.value.panY+X},Ht=()=>{f.value&&(f.value=!1,window.removeEventListener("pointermove",$t),window.removeEventListener("pointerup",Ht))},At=()=>{s.value=!1},ln=()=>{m.value=!0},on=()=>{m.value&&(m.value=!1,At())},In=(G,B)=>{const X=`${G||""} ${B||""}`.toLowerCase(),Ee=X.includes("italic")?"italic":"normal";let D=400;return X.includes("thin")?D=100:X.includes("extralight")||X.includes("extra light")?D=200:X.includes("light")?D=300:X.includes("medium")?D=500:X.includes("semibold")||X.includes("semi bold")?D=600:X.includes("bold")?D=700:X.includes("extrabold")||X.includes("extra bold")?D=800:X.includes("black")&&(D=900),{weight:D,style:Ee}},qt=()=>{const G=P.value[0],B=w.value[0];!G&&!B||(C.value=C.value.map(X=>{var Ee,D,p;if(X.type!=="text"||X.fontSource)return X;if(B){const F=(Ee=B.variants)!=null&&Ee.includes("regular")?"regular":(D=B.variants)==null?void 0:D[0],ve=(p=B.files)==null?void 0:p[F];return{...X,fontSource:"google",fontFamily:B.family,fontVariant:F,fontUrl:ve||"",fontStyle:F!=null&&F.includes("italic")?"italic":"normal",fontWeight:Number.parseInt(F,10)||400}}if(G){const F=In(G.label,G.file);return{...X,fontSource:"local",fontFamily:G.label,fontFile:G.file,fontUrl:`${v.value}fonts/${G.file}`,fontVariant:"regular",fontStyle:F.style,fontWeight:F.weight}}}))},Mt=()=>{C.value.length&&(C.value=C.value.map(G=>j(G)))},cn=()=>{C.value.length&&(C.value=C.value.map(G=>G.type!=="animation"||!G.animationFile||G.animationUrl?G:{...G,animationUrl:`${v.value}images/${G.animationFile}`}))},hn=()=>{o("open-asset-manager")},gn=G=>{document.body.style.overflow=G?"":"hidden"};nt(()=>s.value,G=>{gn(!G),G||(m.value=!1),G&&Ao(()=>{xn(),Rt()})}),li(async()=>{ae(),qt(),Mt(),cn(),window.addEventListener("keydown",se)}),nt(()=>[T.value,P.value,w.value,v.value],()=>{qt(),Mt(),cn()},{deep:!0}),nt(()=>C.value,G=>{t.componentConfig&&(t.componentConfig[Kp]={elements:G})},{deep:!0});const xn=()=>{if(!r.value)return;const G=r.value.getBoundingClientRect();a.value={w:G.width,h:G.height}};let un=null;return li(()=>{un=new ResizeObserver(()=>{xn(),s.value&&(i.value=lt(i.value),!f.value&&!M.value&&(d.value=0,l.value=0))}),r.value&&un.observe(r.value)}),nt(()=>r.value,(G,B)=>{un&&(B&&un.unobserve(B),G&&un.observe(G))}),nt(()=>We.value,()=>{s.value&&Ao(()=>{xn(),i.value=lt(i.value)})}),go(()=>{gn(!0),un&&un.disconnect(),window.removeEventListener("keydown",se),window.removeEventListener("pointermove",$t),window.removeEventListener("pointerup",Ht)}),(G,B)=>{var X,Ee;return _(),E("section",P2,[c("div",j2,[c("button",{type:"button",class:"secondary",disabled:!We.value,onClick:B[0]||(B[0]=D=>s.value=!0)}," Display configurator ",8,B2)]),s.value?(_(),E("div",{key:0,class:"display-config-backdrop",onPointerdown:Et(ln,["self"]),onClick:Et(on,["self"])},[c("div",U2,[c("header",z2,[c("div",null,[B[4]||(B[4]=c("h3",null,"Display configurator",-1)),c("p",V2,[B[3]||(B[3]=Aa(" Model: ",-1)),c("strong",null,ge(De.value),1),We.value?(_(),E("span",H2," | Resolution: "+ge(We.value.w)+"x"+ge(We.value.h)+" px",1)):ue("",!0)])]),c("div",G2,[c("button",{type:"button",class:"secondary compact",onClick:hn},"Assets"),c("button",{type:"button",class:"secondary compact",onClick:B[1]||(B[1]=D=>oe.value=!0)},"Reset")])]),_t(mr,{open:oe.value,title:"Confirm",message:"Reset all display elements?","confirm-text":"Yes","cancel-text":"Cancel",onConfirm:Ie,onCancel:B[2]||(B[2]=D=>oe.value=!1)},null,8,["open"]),c("div",W2,[c("div",Y2,[c("section",K2,[B[5]||(B[5]=c("div",{class:"display-config-panel__header"},[c("h4",null,"Toolbox")],-1)),_t(DC,{orientation:"vertical",variant:"flat",onAdd:fe})]),c("section",q2,[B[6]||(B[6]=c("div",{class:"display-config-panel__header"},[c("h4",null,"Elements")],-1)),c("div",Z2,[(_(!0),E(je,null,Je(C.value,D=>(_(),E("button",{key:D.id,type:"button",class:pt(["display-element-item",{active:D.id===$.value,"display-element-item--dragging":D.id===M.value,"display-element-item--over":D.id===ee.value}]),onClick:p=>He(D.id),draggable:"true",onDragstart:p=>Re(p,D.id),onDragover:Et(p=>k(D.id),["prevent"]),onDrop:Et(p=>N(D.id),["prevent"]),onDragend:I},[c("span",J2,ge(Be(D)),1),c("span",Q2,ge(Ue(D)),1)],42,X2))),128)),C.value.length?ue("",!0):(_(),E("div",eT,"No elements added yet."))])])]),c("section",tT,[c("div",nT,[B[8]||(B[8]=c("h4",null,"Screen",-1)),c("div",oT,[c("button",{type:"button",class:"secondary compact display-zoom__btn",disabled:!yt.value,onClick:at,"aria-label":"Zoom out"}," - ",8,iT),c("button",{type:"button",class:"secondary compact display-zoom__btn",onClick:Rt,"aria-label":"Restore view"},[...B[7]||(B[7]=[c("img",{src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/restore.svg",alt:""},null,-1)])]),c("button",{type:"button",class:"secondary compact display-zoom__btn",disabled:!vt.value,onClick:it,"aria-label":"Zoom in"}," + ",8,sT)])]),c("div",{class:pt(["display-config-canvas-wrap",{"display-config-canvas-wrap--panning":f.value}]),ref_key:"canvasWrap",ref:r,onWheel:Et(Vt,["prevent"]),onPointerdown:Ot},[c("div",{class:"display-canvas-viewport",style:rn(dt.value)},[We.value?(_(),zn(FC,{key:0,"screen-w":We.value.w,"screen-h":We.value.h,zoom:i.value,"grid-size":Oe.value,elements:ye.value,"is-monochrome":Ye.value,"selected-id":$.value,onSelect:He,onUpdateElement:Y},null,8,["screen-w","screen-h","zoom","grid-size","elements","is-monochrome","selected-id"])):(_(),E("p",rT,"Select a display model in the form to enable the configurator."))],4)],34)]),c("div",aT,[c("section",lT,[c("div",cT,[B[9]||(B[9]=c("h4",null,"Inspector",-1)),mt.value?(_(),E("button",{key:0,type:"button",class:"secondary compact display-inspector-delete",onClick:pe}," Delete "+ge(qe(mt.value)),1)):ue("",!0)]),c("div",uT,[_t(D2,{variant:"flat","show-header":!1,"selected-element":mt.value,"screen-w":((X=We.value)==null?void 0:X.w)||0,"screen-h":((Ee=We.value)==null?void 0:Ee.h)||0,"is-monochrome":Ye.value,images:T.value,"local-fonts":P.value,"google-fonts":w.value,"assets-base":v.value,"dynamic-ids":de.value,"mdi-icons":e.mdiIcons,onUpdate:ie},null,8,["selected-element","screen-w","screen-h","is-monochrome","images","local-fonts","google-fonts","assets-base","dynamic-ids","mdi-icons"])])]),c("div",{class:"display-inspector-footer"},[c("button",{type:"button",class:"secondary compact",onClick:At},"Close")])])])])],32)):ue("",!0)])}}},pT=so(fT,[["__scopeId","data-v-e2f2b4e0"]]),hT={class:"schema-renderer"},gT={key:0,class:"note"},vT={key:1,class:"schema-levels"},mT={key:2,class:"missing-schema"},yT={key:3,class:"schema-field missing-schema-field"},bT=["value"],wo={__name:"SchemaRenderer",props:{componentId:{type:String,default:""},componentConfig:{type:Object,default:()=>({})},rootValue:{type:Object,default:null},customConfig:{type:String,default:""},modeLevel:{type:String,default:"Simple"},idRegistry:{type:Object,default:()=>({})},nameRegistry:{type:Object,default:()=>({})},idIndex:{type:Array,default:()=>[]},mdiIcons:{type:Array,default:()=>[]},displayImages:{type:Array,default:()=>[]},displayFonts:{type:Array,default:()=>[]},displayGoogleFonts:{type:Array,default:()=>[]},assetsBase:{type:String,default:""},gpioOptions:{type:Array,default:()=>[]},gpioUsage:{type:Object,default:()=>({})},gpioTitle:{type:String,default:""},contextComponentId:{type:String,default:""},globalStore:{type:Object,default:()=>({})},fieldFilter:{type:Array,default:()=>[]}},emits:["update","update-custom","open-asset-manager","open-secrets"],setup(e,{emit:n}){const t=e,o=n,i=No("mdiIcons",K([])),s=A(()=>{var w;return(w=t.mdiIcons)!=null&&w.length?t.mdiIcons:(i==null?void 0:i.value)||[]}),r=K(null),a=K(!1),d=K(!1),l={simple:1,normal:2,advanced:3},f=w=>{var $;const C=($=w==null?void 0:w.lvl)==null?void 0:$.toLowerCase();return l[C]?C:"simple"},g=A(()=>{var w;return l[(w=t.modeLevel)==null?void 0:w.toLowerCase()]??l.simple}),m=A(()=>{var $;const w=(($=r.value)==null?void 0:$.fields)||[];if(!t.fieldFilter.length)return w;const C=new Set(t.fieldFilter);return w.filter(H=>C.has(H.key))}),v=A(()=>{var $;const w=($=t.componentConfig)==null?void 0:$.bus,C=m.value;return C.filter(H=>{if(!Ic(H,t.componentConfig,C,t.globalStore)||H.uiHidden||H.key==="cs_pin"&&w&&w!=="spi"||H.key==="address"&&w&&w!=="i2c")return!1;const M=f(H);return l[M]<=g.value})}),T=({path:w,value:C})=>{o("update",{path:w,value:C})},P=w=>{o("update-custom",w.target.value)};return nt(()=>t.componentId,async w=>{if(!w){r.value=null,d.value=!1;return}a.value=!0,d.value=!1;try{const C=w.startsWith("general/")?await Eo(`${w}.json`):await Uv(w);r.value=C}catch(C){(C==null?void 0:C.message)!=="Schema not found"&&console.error("Schema load failed",w,C),r.value=null}finally{a.value=!1,d.value=!0}},{immediate:!0}),(w,C)=>{var $;return _(),E("div",hT,[e.componentId?r.value?(_(),E("div",vT,[(_(!0),E(je,null,Je(v.value,H=>(_(),zn(Hv,{key:H.key,field:H,path:[],value:e.componentConfig,"root-value":e.rootValue||e.componentConfig,"mode-level":e.modeLevel,"id-registry":e.idRegistry,"name-registry":e.nameRegistry,"id-index":e.idIndex,"gpio-options":e.gpioOptions,"gpio-usage":e.gpioUsage,"gpio-title":e.gpioTitle,"context-component-id":e.contextComponentId,"global-store":e.globalStore,onUpdate:T,onOpenSecrets:C[0]||(C[0]=M=>o("open-secrets"))},null,8,["field","value","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"]))),128)),($=r.value)!=null&&$.display_builder?(_(),zn(pT,{key:0,schema:r.value,"component-config":e.componentConfig,"id-index":e.idIndex,"mdi-icons":s.value,images:e.displayImages,"local-fonts":e.displayFonts,"google-fonts":e.displayGoogleFonts,"assets-base":e.assetsBase,onOpenAssetManager:C[1]||(C[1]=H=>o("open-asset-manager"))},null,8,["schema","component-config","id-index","mdi-icons","images","local-fonts","google-fonts","assets-base"])):ue("",!0)])):d.value&&!a.value?(_(),E("div",mT," Schema missing for this component! ")):ue("",!0):(_(),E("div",gT,"Wybierz komponent z listy, aby go skonfigurowac.")),!r.value&&e.componentId&&d.value&&!a.value?(_(),E("div",yT,[C[2]||(C[2]=c("label",{for:"customConfigInput"},"custom config",-1)),c("textarea",{id:"customConfigInput",value:e.customConfig,rows:"4",wrap:"off",onInput:P},null,40,bT)])):ue("",!0)])}}},_T={class:"asset-manager__header"},wT=["disabled"],ET={class:"asset-manager__toolbar"},ST={class:"asset-manager__tabs"},xT={class:"asset-manager__search",for:"assetManagerSearch"},kT=["accept"],CT={key:0,class:"asset-manager__error"},AT={class:"asset-manager__list"},$T=["src","alt"],IT={key:1,class:"asset-item__font"},TT={key:2,class:"asset-item__audio"},RT={class:"asset-item__meta"},FT={class:"asset-item__name"},OT={class:"asset-item__details"},LT=["disabled","onClick"],MT={key:0,class:"asset-item__menu"},NT=["disabled","onClick"],DT=["disabled","onClick"],PT={key:0,class:"asset-manager__empty"},jT={class:"asset-manager__footer"},BT={__name:"AssetManagerModal",props:{open:{type:Boolean,default:!1},images:{type:Array,default:()=>[]},fonts:{type:Array,default:()=>[]},audio:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},working:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["close","refresh","upload","rename","delete-asset"],setup(e,{emit:n}){const t=e,o=n,i=K("images"),s=K(null),r=K(""),a=K(""),d=["images","fonts","audio"],l=A(()=>i.value==="images"?t.images:i.value==="fonts"?t.fonts:t.audio),f=A(()=>{const oe=r.value.trim().toLowerCase();return oe?l.value.filter(Z=>String((Z==null?void 0:Z.file)||"").toLowerCase().includes(oe)):l.value}),g=A(()=>i.value==="images"?".png,.bmp,.gif":i.value==="fonts"?".ttf,.otf":".mp3,.wav,.ogg");nt(()=>t.open,oe=>{oe&&(o("refresh"),r.value="",a.value="",s.value&&(s.value.value=""))}),nt(()=>i.value,()=>{a.value=""});const m=oe=>{var Ce;const Z=((Ce=oe.target.files)==null?void 0:Ce[0])||null;if(!Z)return;const ye=d.includes(i.value)?i.value:"images";o("upload",{kind:ye,file:Z}),s.value&&(s.value.value="")},v=()=>{!s.value||t.loading||t.working||s.value.click()},T=oe=>{a.value="";const Z=String((oe==null?void 0:oe.file)||"");if(!Z)return;const ye=window.prompt("New file name",Z);if(!ye)return;const Ce=ye.trim();if(!Ce||Ce===Z)return;const Fe=d.includes(i.value)?i.value:"images";o("rename",{kind:Fe,from:Z,to:Ce})},P=oe=>{a.value="";const Z=String((oe==null?void 0:oe.file)||"");if(!Z||!window.confirm(`Delete ${Z}?`))return;const Ce=d.includes(i.value)?i.value:"images";o("delete-asset",{kind:Ce,file:Z})},w=oe=>{const Z=Number(oe||0);return Z?Z<1024?`${Z} B`:Z<1024*1024?`${(Z/1024).toFixed(1)} KB`:`${(Z/(1024*1024)).toFixed(2)} MB`:"0 B"},C=oe=>{if(!oe)return"";const Z=new Date(oe);return Number.isNaN(Z.getTime())?"":new Intl.DateTimeFormat(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit"}).format(Z)},$=oe=>`${i.value}:${String((oe==null?void 0:oe.file)||"")}`,H=oe=>i.value!=="fonts"?!1:String((oe==null?void 0:oe.file)||"").trim().toLowerCase()==="materialdesignicons-webfont.ttf",M=oe=>!H(oe),ee=oe=>{const Z=$(oe);a.value=a.value===Z?"":Z};return(oe,Z)=>e.open?(_(),E("div",{key:0,class:"asset-manager-backdrop",onClick:Z[7]||(Z[7]=Et(ye=>o("close"),["self"]))},[c("section",{class:"asset-manager",role:"dialog","aria-modal":"true","aria-label":"Asset Manager",onClick:Z[6]||(Z[6]=ye=>a.value="")},[c("header",_T,[Z[8]||(Z[8]=c("h3",null,"Asset Manager",-1)),c("button",{type:"button",class:"secondary compact",disabled:e.loading||e.working,onClick:v}," Upload ",8,wT)]),c("div",ET,[c("div",ST,[c("button",{type:"button",class:pt(["asset-manager__tab",{"asset-manager__tab--active":i.value==="images"}]),onClick:Z[0]||(Z[0]=ye=>i.value="images")}," Images ",2),c("button",{type:"button",class:pt(["asset-manager__tab",{"asset-manager__tab--active":i.value==="fonts"}]),onClick:Z[1]||(Z[1]=ye=>i.value="fonts")}," Fonts ",2),c("button",{type:"button",class:pt(["asset-manager__tab",{"asset-manager__tab--active":i.value==="audio"}]),onClick:Z[2]||(Z[2]=ye=>i.value="audio")}," Audio ",2)]),c("label",xT,[Z[9]||(Z[9]=c("img",{class:"asset-manager__search-icon",src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/magnify.svg",alt:""},null,-1)),Fn(c("input",{id:"assetManagerSearch","onUpdate:modelValue":Z[3]||(Z[3]=ye=>r.value=ye),type:"search",placeholder:"Search files"},null,512),[[to,r.value]])])]),c("input",{ref_key:"fileInput",ref:s,class:"asset-manager__file-input",type:"file",accept:g.value,onChange:m},null,40,kT),e.error?(_(),E("p",CT,ge(e.error),1)):ue("",!0),c("div",AT,[(_(!0),E(je,null,Je(f.value,ye=>(_(),E("div",{key:`${i.value}-${ye.file}`,class:"asset-item"},[i.value==="images"?(_(),E("img",{key:0,class:"asset-item__preview",src:ye.url,alt:ye.file},null,8,$T)):i.value==="fonts"?(_(),E("div",IT,"Aa")):(_(),E("div",TT,[...Z[10]||(Z[10]=[c("img",{src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/music-note.svg",alt:"","aria-hidden":"true"},null,-1)])])),c("div",RT,[c("div",FT,ge(ye.file),1),c("div",OT,[c("span",null,ge(w(ye.size)),1),c("span",null,ge(C(ye.mtime)),1)])]),M(ye)?(_(),E("div",{key:3,class:"asset-item__menu-wrap",onClick:Z[4]||(Z[4]=Et(()=>{},["stop"]))},[c("button",{type:"button",class:"asset-item__menu-toggle",disabled:e.loading||e.working,onClick:Ce=>ee(ye),"aria-label":"Asset actions"}," ... ",8,LT),a.value===$(ye)?(_(),E("div",MT,[c("button",{type:"button",disabled:e.loading||e.working,onClick:Ce=>T(ye)},"Rename",8,NT),c("button",{type:"button",disabled:e.loading||e.working,onClick:Ce=>P(ye)},"Delete",8,DT)])):ue("",!0)])):ue("",!0)]))),128)),f.value.length?ue("",!0):(_(),E("div",PT,"No files found."))]),c("footer",jT,[c("button",{type:"button",class:"secondary compact",onClick:Z[5]||(Z[5]=ye=>o("close"))},"Close")])])])):ue("",!0)}},UT=so(BT,[["__scopeId","data-v-89cb345f"]]),zT="modulepreload",VT=function(e,n){return new URL(e,n).href},qp={},Vo=function(n,t,o){let i=Promise.resolve();if(t&&t.length>0){const r=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),d=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=VT(l,o),l in qp)return;qp[l]=!0;const f=l.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(!!o)for(let T=r.length-1;T>=0;T--){const P=r[T];if(P.href===l&&(!f||P.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${g}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":zT,f||(v.as="script"),v.crossOrigin="",v.href=l,d&&v.setAttribute("nonce",d),document.head.appendChild(v),f)return new Promise((T,P)=>{v.addEventListener("load",T),v.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return i.then(r=>{for(const a of r||[])a.status==="rejected"&&s(a.reason);return n().catch(s)})};class Xn extends Error{}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const HT=4,Zp=0,Xp=1,GT=2;function Fr(e){let n=e.length;for(;--n>=0;)e[n]=0}const WT=0,qv=1,YT=2,KT=3,qT=258,of=29,Ha=256,Oa=Ha+1+of,yr=30,sf=19,Zv=2*Oa+1,$s=15,Iu=16,ZT=7,rf=256,Xv=16,Jv=17,Qv=18,yd=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ul=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),XT=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),em=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),JT=512,xi=new Array((Oa+2)*2);Fr(xi);const _a=new Array(yr*2);Fr(_a);const La=new Array(JT);Fr(La);const Ma=new Array(qT-KT+1);Fr(Ma);const af=new Array(of);Fr(af);const ac=new Array(yr);Fr(ac);function Tu(e,n,t,o,i){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=o,this.max_length=i,this.has_stree=e&&e.length}let tm,nm,om;function Ru(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}const im=e=>e<256?La[e]:La[256+(e>>>7)],Na=(e,n)=>{e.pending_buf[e.pending++]=n&255,e.pending_buf[e.pending++]=n>>>8&255},ho=(e,n,t)=>{e.bi_valid>Iu-t?(e.bi_buf|=n<<e.bi_valid&65535,Na(e,e.bi_buf),e.bi_buf=n>>Iu-e.bi_valid,e.bi_valid+=t-Iu):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},ei=(e,n,t)=>{ho(e,t[n*2],t[n*2+1])},sm=(e,n)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--n>0);return t>>>1},QT=e=>{e.bi_valid===16?(Na(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},eR=(e,n)=>{const t=n.dyn_tree,o=n.max_code,i=n.stat_desc.static_tree,s=n.stat_desc.has_stree,r=n.stat_desc.extra_bits,a=n.stat_desc.extra_base,d=n.stat_desc.max_length;let l,f,g,m,v,T,P=0;for(m=0;m<=$s;m++)e.bl_count[m]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Zv;l++)f=e.heap[l],m=t[t[f*2+1]*2+1]+1,m>d&&(m=d,P++),t[f*2+1]=m,!(f>o)&&(e.bl_count[m]++,v=0,f>=a&&(v=r[f-a]),T=t[f*2],e.opt_len+=T*(m+v),s&&(e.static_len+=T*(i[f*2+1]+v)));if(P!==0){do{for(m=d-1;e.bl_count[m]===0;)m--;e.bl_count[m]--,e.bl_count[m+1]+=2,e.bl_count[d]--,P-=2}while(P>0);for(m=d;m!==0;m--)for(f=e.bl_count[m];f!==0;)g=e.heap[--l],!(g>o)&&(t[g*2+1]!==m&&(e.opt_len+=(m-t[g*2+1])*t[g*2],t[g*2+1]=m),f--)}},rm=(e,n,t)=>{const o=new Array($s+1);let i=0,s,r;for(s=1;s<=$s;s++)i=i+t[s-1]<<1,o[s]=i;for(r=0;r<=n;r++){let a=e[r*2+1];a!==0&&(e[r*2]=sm(o[a]++,a))}},tR=()=>{let e,n,t,o,i;const s=new Array($s+1);for(t=0,o=0;o<of-1;o++)for(af[o]=t,e=0;e<1<<yd[o];e++)Ma[t++]=o;for(Ma[t-1]=o,i=0,o=0;o<16;o++)for(ac[o]=i,e=0;e<1<<Ul[o];e++)La[i++]=o;for(i>>=7;o<yr;o++)for(ac[o]=i<<7,e=0;e<1<<Ul[o]-7;e++)La[256+i++]=o;for(n=0;n<=$s;n++)s[n]=0;for(e=0;e<=143;)xi[e*2+1]=8,e++,s[8]++;for(;e<=255;)xi[e*2+1]=9,e++,s[9]++;for(;e<=279;)xi[e*2+1]=7,e++,s[7]++;for(;e<=287;)xi[e*2+1]=8,e++,s[8]++;for(rm(xi,Oa+1,s),e=0;e<yr;e++)_a[e*2+1]=5,_a[e*2]=sm(e,5);tm=new Tu(xi,yd,Ha+1,Oa,$s),nm=new Tu(_a,Ul,0,yr,$s),om=new Tu(new Array(0),XT,0,sf,ZT)},am=e=>{let n;for(n=0;n<Oa;n++)e.dyn_ltree[n*2]=0;for(n=0;n<yr;n++)e.dyn_dtree[n*2]=0;for(n=0;n<sf;n++)e.bl_tree[n*2]=0;e.dyn_ltree[rf*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},lm=e=>{e.bi_valid>8?Na(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Jp=(e,n,t,o)=>{const i=n*2,s=t*2;return e[i]<e[s]||e[i]===e[s]&&o[n]<=o[t]},Fu=(e,n,t)=>{const o=e.heap[t];let i=t<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Jp(n,e.heap[i+1],e.heap[i],e.depth)&&i++,!Jp(n,o,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=o},Qp=(e,n,t)=>{let o,i,s=0,r,a;if(e.sym_next!==0)do o=e.pending_buf[e.sym_buf+s++]&255,o+=(e.pending_buf[e.sym_buf+s++]&255)<<8,i=e.pending_buf[e.sym_buf+s++],o===0?ei(e,i,n):(r=Ma[i],ei(e,r+Ha+1,n),a=yd[r],a!==0&&(i-=af[r],ho(e,i,a)),o--,r=im(o),ei(e,r,t),a=Ul[r],a!==0&&(o-=ac[r],ho(e,o,a)));while(s<e.sym_next);ei(e,rf,n)},bd=(e,n)=>{const t=n.dyn_tree,o=n.stat_desc.static_tree,i=n.stat_desc.has_stree,s=n.stat_desc.elems;let r,a,d=-1,l;for(e.heap_len=0,e.heap_max=Zv,r=0;r<s;r++)t[r*2]!==0?(e.heap[++e.heap_len]=d=r,e.depth[r]=0):t[r*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=o[l*2+1]);for(n.max_code=d,r=e.heap_len>>1;r>=1;r--)Fu(e,t,r);l=s;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Fu(e,t,1),a=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=a,t[l*2]=t[r*2]+t[a*2],e.depth[l]=(e.depth[r]>=e.depth[a]?e.depth[r]:e.depth[a])+1,t[r*2+1]=t[a*2+1]=l,e.heap[1]=l++,Fu(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],eR(e,n),rm(t,d,e.bl_count)},eh=(e,n,t)=>{let o,i=-1,s,r=n[0*2+1],a=0,d=7,l=4;for(r===0&&(d=138,l=3),n[(t+1)*2+1]=65535,o=0;o<=t;o++)s=r,r=n[(o+1)*2+1],!(++a<d&&s===r)&&(a<l?e.bl_tree[s*2]+=a:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[Xv*2]++):a<=10?e.bl_tree[Jv*2]++:e.bl_tree[Qv*2]++,a=0,i=s,r===0?(d=138,l=3):s===r?(d=6,l=3):(d=7,l=4))},th=(e,n,t)=>{let o,i=-1,s,r=n[0*2+1],a=0,d=7,l=4;for(r===0&&(d=138,l=3),o=0;o<=t;o++)if(s=r,r=n[(o+1)*2+1],!(++a<d&&s===r)){if(a<l)do ei(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==i&&(ei(e,s,e.bl_tree),a--),ei(e,Xv,e.bl_tree),ho(e,a-3,2)):a<=10?(ei(e,Jv,e.bl_tree),ho(e,a-3,3)):(ei(e,Qv,e.bl_tree),ho(e,a-11,7));a=0,i=s,r===0?(d=138,l=3):s===r?(d=6,l=3):(d=7,l=4)}},nR=e=>{let n;for(eh(e,e.dyn_ltree,e.l_desc.max_code),eh(e,e.dyn_dtree,e.d_desc.max_code),bd(e,e.bl_desc),n=sf-1;n>=3&&e.bl_tree[em[n]*2+1]===0;n--);return e.opt_len+=3*(n+1)+5+5+4,n},oR=(e,n,t,o)=>{let i;for(ho(e,n-257,5),ho(e,t-1,5),ho(e,o-4,4),i=0;i<o;i++)ho(e,e.bl_tree[em[i]*2+1],3);th(e,e.dyn_ltree,n-1),th(e,e.dyn_dtree,t-1)},iR=e=>{let n=4093624447,t;for(t=0;t<=31;t++,n>>>=1)if(n&1&&e.dyn_ltree[t*2]!==0)return Zp;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Xp;for(t=32;t<Ha;t++)if(e.dyn_ltree[t*2]!==0)return Xp;return Zp};let nh=!1;const sR=e=>{nh||(tR(),nh=!0),e.l_desc=new Ru(e.dyn_ltree,tm),e.d_desc=new Ru(e.dyn_dtree,nm),e.bl_desc=new Ru(e.bl_tree,om),e.bi_buf=0,e.bi_valid=0,am(e)},cm=(e,n,t,o)=>{ho(e,(WT<<1)+(o?1:0),3),lm(e),Na(e,t),Na(e,~t),t&&e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t},rR=e=>{ho(e,qv<<1,3),ei(e,rf,xi),QT(e)},aR=(e,n,t,o)=>{let i,s,r=0;e.level>0?(e.strm.data_type===GT&&(e.strm.data_type=iR(e)),bd(e,e.l_desc),bd(e,e.d_desc),r=nR(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=t+5,t+4<=i&&n!==-1?cm(e,n,t,o):e.strategy===HT||s===i?(ho(e,(qv<<1)+(o?1:0),3),Qp(e,xi,_a)):(ho(e,(YT<<1)+(o?1:0),3),oR(e,e.l_desc.max_code+1,e.d_desc.max_code+1,r+1),Qp(e,e.dyn_ltree,e.dyn_dtree)),am(e),o&&lm(e)},lR=(e,n,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,n===0?e.dyn_ltree[t*2]++:(e.matches++,n--,e.dyn_ltree[(Ma[t]+Ha+1)*2]++,e.dyn_dtree[im(n)*2]++),e.sym_next===e.sym_end);var cR=sR,uR=cm,dR=aR,fR=lR,pR=rR,hR={_tr_init:cR,_tr_stored_block:uR,_tr_flush_block:dR,_tr_tally:fR,_tr_align:pR};const gR=(e,n,t,o)=>{let i=e&65535|0,s=e>>>16&65535|0,r=0;for(;t!==0;){r=t>2e3?2e3:t,t-=r;do i=i+n[o++]|0,s=s+i|0;while(--r);i%=65521,s%=65521}return i|s<<16|0};var Da=gR;const vR=()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var o=0;o<8;o++)e=e&1?3988292384^e>>>1:e>>>1;n[t]=e}return n},mR=new Uint32Array(vR()),yR=(e,n,t,o)=>{const i=mR,s=o+t;e^=-1;for(let r=o;r<s;r++)e=e>>>8^i[(e^n[r])&255];return e^-1};var $n=yR,Ir={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Tc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:bR,_tr_stored_block:_d,_tr_flush_block:_R,_tr_tally:os,_tr_align:wR}=hR,{Z_NO_FLUSH:is,Z_PARTIAL_FLUSH:ER,Z_FULL_FLUSH:SR,Z_FINISH:Lo,Z_BLOCK:oh,Z_OK:Rn,Z_STREAM_END:ih,Z_STREAM_ERROR:oi,Z_DATA_ERROR:xR,Z_BUF_ERROR:Ou,Z_DEFAULT_COMPRESSION:kR,Z_FILTERED:CR,Z_HUFFMAN_ONLY:$l,Z_RLE:AR,Z_FIXED:$R,Z_DEFAULT_STRATEGY:IR,Z_UNKNOWN:TR,Z_DEFLATED:Rc}=Tc,RR=9,FR=15,OR=8,LR=29,MR=256,wd=MR+1+LR,NR=30,DR=19,PR=2*wd+1,jR=15,Pt=3,Qi=258,ii=Qi+Pt+1,BR=32,Tr=42,lf=57,Ed=69,Sd=73,xd=91,kd=103,Is=113,la=666,io=1,Or=2,Ds=3,Lr=4,UR=3,Ts=(e,n)=>(e.msg=Ir[n],n),sh=e=>e*2-(e>4?9:0),Xi=e=>{let n=e.length;for(;--n>=0;)e[n]=0},zR=e=>{let n,t,o,i=e.w_size;n=e.hash_size,o=n;do t=e.head[--o],e.head[o]=t>=i?t-i:0;while(--n);n=i,o=n;do t=e.prev[--o],e.prev[o]=t>=i?t-i:0;while(--n)};let VR=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask,ss=VR;const So=e=>{const n=e.state;let t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))},Co=(e,n)=>{_R(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,So(e.strm)},Gt=(e,n)=>{e.pending_buf[e.pending++]=n},ra=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=n&255},Cd=(e,n,t,o)=>{let i=e.avail_in;return i>o&&(i=o),i===0?0:(e.avail_in-=i,n.set(e.input.subarray(e.next_in,e.next_in+i),t),e.state.wrap===1?e.adler=Da(e.adler,n,i,t):e.state.wrap===2&&(e.adler=$n(e.adler,n,i,t)),e.next_in+=i,e.total_in+=i,i)},um=(e,n)=>{let t=e.max_chain_length,o=e.strstart,i,s,r=e.prev_length,a=e.nice_match;const d=e.strstart>e.w_size-ii?e.strstart-(e.w_size-ii):0,l=e.window,f=e.w_mask,g=e.prev,m=e.strstart+Qi;let v=l[o+r-1],T=l[o+r];e.prev_length>=e.good_match&&(t>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=n,!(l[i+r]!==T||l[i+r-1]!==v||l[i]!==l[o]||l[++i]!==l[o+1])){o+=2,i++;do;while(l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&l[++o]===l[++i]&&o<m);if(s=Qi-(m-o),o=m-Qi,s>r){if(e.match_start=n,r=s,s>=a)break;v=l[o+r-1],T=l[o+r]}}while((n=g[n&f])>d&&--t!==0);return r<=e.lookahead?r:e.lookahead},Rr=e=>{const n=e.w_size;let t,o,i;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-ii)&&(e.window.set(e.window.subarray(n,n+n-o),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),zR(e),o+=n),e.strm.avail_in===0)break;if(t=Cd(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=t,e.lookahead+e.insert>=Pt)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=ss(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=ss(e,e.ins_h,e.window[i+Pt-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Pt)););}while(e.lookahead<ii&&e.strm.avail_in!==0)},dm=(e,n)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o,i,s,r=0,a=e.strm.avail_in;do{if(o=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,i=e.strstart-e.block_start,o>i+e.strm.avail_in&&(o=i+e.strm.avail_in),o>s&&(o=s),o<t&&(o===0&&n!==Lo||n===is||o!==i+e.strm.avail_in)))break;r=n===Lo&&o===i+e.strm.avail_in?1:0,_d(e,0,0,r),e.pending_buf[e.pending-4]=o,e.pending_buf[e.pending-3]=o>>8,e.pending_buf[e.pending-2]=~o,e.pending_buf[e.pending-1]=~o>>8,So(e.strm),i&&(i>o&&(i=o),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,o-=i),o&&(Cd(e.strm,e.strm.output,e.strm.next_out,o),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o)}while(r===0);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),r?Lr:n!==is&&n!==Lo&&e.strm.avail_in===0&&e.strstart===e.block_start?Or:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(Cd(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,t=s>e.w_size?e.w_size:s,i=e.strstart-e.block_start,(i>=t||(i||n===Lo)&&n!==is&&e.strm.avail_in===0&&i<=s)&&(o=i>s?s:i,r=n===Lo&&e.strm.avail_in===0&&o===i?1:0,_d(e,e.block_start,o,r),e.block_start+=o,So(e.strm)),r?Ds:io)},Lu=(e,n)=>{let t,o;for(;;){if(e.lookahead<ii){if(Rr(e),e.lookahead<ii&&n===is)return io;if(e.lookahead===0)break}if(t=0,e.lookahead>=Pt&&(e.ins_h=ss(e,e.ins_h,e.window[e.strstart+Pt-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-ii&&(e.match_length=um(e,t)),e.match_length>=Pt)if(o=os(e,e.strstart-e.match_start,e.match_length-Pt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Pt){e.match_length--;do e.strstart++,e.ins_h=ss(e,e.ins_h,e.window[e.strstart+Pt-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ss(e,e.ins_h,e.window[e.strstart+1]);else o=os(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(Co(e,!1),e.strm.avail_out===0))return io}return e.insert=e.strstart<Pt-1?e.strstart:Pt-1,n===Lo?(Co(e,!0),e.strm.avail_out===0?Ds:Lr):e.sym_next&&(Co(e,!1),e.strm.avail_out===0)?io:Or},nr=(e,n)=>{let t,o,i;for(;;){if(e.lookahead<ii){if(Rr(e),e.lookahead<ii&&n===is)return io;if(e.lookahead===0)break}if(t=0,e.lookahead>=Pt&&(e.ins_h=ss(e,e.ins_h,e.window[e.strstart+Pt-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Pt-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-ii&&(e.match_length=um(e,t),e.match_length<=5&&(e.strategy===CR||e.match_length===Pt&&e.strstart-e.match_start>4096)&&(e.match_length=Pt-1)),e.prev_length>=Pt&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Pt,o=os(e,e.strstart-1-e.prev_match,e.prev_length-Pt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=ss(e,e.ins_h,e.window[e.strstart+Pt-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Pt-1,e.strstart++,o&&(Co(e,!1),e.strm.avail_out===0))return io}else if(e.match_available){if(o=os(e,0,e.window[e.strstart-1]),o&&Co(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return io}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=os(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Pt-1?e.strstart:Pt-1,n===Lo?(Co(e,!0),e.strm.avail_out===0?Ds:Lr):e.sym_next&&(Co(e,!1),e.strm.avail_out===0)?io:Or},HR=(e,n)=>{let t,o,i,s;const r=e.window;for(;;){if(e.lookahead<=Qi){if(Rr(e),e.lookahead<=Qi&&n===is)return io;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Pt&&e.strstart>0&&(i=e.strstart-1,o=r[i],o===r[++i]&&o===r[++i]&&o===r[++i])){s=e.strstart+Qi;do;while(o===r[++i]&&o===r[++i]&&o===r[++i]&&o===r[++i]&&o===r[++i]&&o===r[++i]&&o===r[++i]&&o===r[++i]&&i<s);e.match_length=Qi-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Pt?(t=os(e,1,e.match_length-Pt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=os(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(Co(e,!1),e.strm.avail_out===0))return io}return e.insert=0,n===Lo?(Co(e,!0),e.strm.avail_out===0?Ds:Lr):e.sym_next&&(Co(e,!1),e.strm.avail_out===0)?io:Or},GR=(e,n)=>{let t;for(;;){if(e.lookahead===0&&(Rr(e),e.lookahead===0)){if(n===is)return io;break}if(e.match_length=0,t=os(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(Co(e,!1),e.strm.avail_out===0))return io}return e.insert=0,n===Lo?(Co(e,!0),e.strm.avail_out===0?Ds:Lr):e.sym_next&&(Co(e,!1),e.strm.avail_out===0)?io:Or};function Xo(e,n,t,o,i){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=o,this.func=i}const ca=[new Xo(0,0,0,0,dm),new Xo(4,4,8,4,Lu),new Xo(4,5,16,8,Lu),new Xo(4,6,32,32,Lu),new Xo(4,4,16,16,nr),new Xo(8,16,32,32,nr),new Xo(8,16,128,128,nr),new Xo(8,32,128,256,nr),new Xo(32,128,258,1024,nr),new Xo(32,258,258,4096,nr)],WR=e=>{e.window_size=2*e.w_size,Xi(e.head),e.max_lazy_match=ca[e.level].max_lazy,e.good_match=ca[e.level].good_length,e.nice_match=ca[e.level].nice_length,e.max_chain_length=ca[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Pt-1,e.match_available=0,e.ins_h=0};function YR(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Rc,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(PR*2),this.dyn_dtree=new Uint16Array((2*NR+1)*2),this.bl_tree=new Uint16Array((2*DR+1)*2),Xi(this.dyn_ltree),Xi(this.dyn_dtree),Xi(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(jR+1),this.heap=new Uint16Array(2*wd+1),Xi(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*wd+1),Xi(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ga=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.status!==Tr&&n.status!==lf&&n.status!==Ed&&n.status!==Sd&&n.status!==xd&&n.status!==kd&&n.status!==Is&&n.status!==la?1:0},fm=e=>{if(Ga(e))return Ts(e,oi);e.total_in=e.total_out=0,e.data_type=TR;const n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?lf:n.wrap?Tr:Is,e.adler=n.wrap===2?0:1,n.last_flush=-2,bR(n),Rn},pm=e=>{const n=fm(e);return n===Rn&&WR(e.state),n},KR=(e,n)=>Ga(e)||e.state.wrap!==2?oi:(e.state.gzhead=n,Rn),hm=(e,n,t,o,i,s)=>{if(!e)return oi;let r=1;if(n===kR&&(n=6),o<0?(r=0,o=-o):o>15&&(r=2,o-=16),i<1||i>RR||t!==Rc||o<8||o>15||n<0||n>9||s<0||s>$R||o===8&&r!==1)return Ts(e,oi);o===8&&(o=9);const a=new YR;return e.state=a,a.strm=e,a.status=Tr,a.wrap=r,a.gzhead=null,a.w_bits=o,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Pt-1)/Pt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=n,a.strategy=s,a.method=t,pm(e)},qR=(e,n)=>hm(e,n,Rc,FR,OR,IR),ZR=(e,n)=>{if(Ga(e)||n>oh||n<0)return e?Ts(e,oi):oi;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===la&&n!==Lo)return Ts(e,e.avail_out===0?Ou:oi);const o=t.last_flush;if(t.last_flush=n,t.pending!==0){if(So(e),e.avail_out===0)return t.last_flush=-1,Rn}else if(e.avail_in===0&&sh(n)<=sh(o)&&n!==Lo)return Ts(e,Ou);if(t.status===la&&e.avail_in!==0)return Ts(e,Ou);if(t.status===Tr&&t.wrap===0&&(t.status=Is),t.status===Tr){let i=Rc+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=$l||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,i|=s<<6,t.strstart!==0&&(i|=BR),i+=31-i%31,ra(t,i),t.strstart!==0&&(ra(t,e.adler>>>16),ra(t,e.adler&65535)),e.adler=1,t.status=Is,So(e),t.pending!==0)return t.last_flush=-1,Rn}if(t.status===lf){if(e.adler=0,Gt(t,31),Gt(t,139),Gt(t,8),t.gzhead)Gt(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Gt(t,t.gzhead.time&255),Gt(t,t.gzhead.time>>8&255),Gt(t,t.gzhead.time>>16&255),Gt(t,t.gzhead.time>>24&255),Gt(t,t.level===9?2:t.strategy>=$l||t.level<2?4:0),Gt(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Gt(t,t.gzhead.extra.length&255),Gt(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=$n(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Ed;else if(Gt(t,0),Gt(t,0),Gt(t,0),Gt(t,0),Gt(t,0),Gt(t,t.level===9?2:t.strategy>=$l||t.level<2?4:0),Gt(t,UR),t.status=Is,So(e),t.pending!==0)return t.last_flush=-1,Rn}if(t.status===Ed){if(t.gzhead.extra){let i=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(e.adler=$n(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,So(e),t.pending!==0)return t.last_flush=-1,Rn;i=0,s-=a}let r=new Uint8Array(t.gzhead.extra);t.pending_buf.set(r.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>i&&(e.adler=$n(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=Sd}if(t.status===Sd){if(t.gzhead.name){let i=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(e.adler=$n(e.adler,t.pending_buf,t.pending-i,i)),So(e),t.pending!==0)return t.last_flush=-1,Rn;i=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,Gt(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>i&&(e.adler=$n(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=xd}if(t.status===xd){if(t.gzhead.comment){let i=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(e.adler=$n(e.adler,t.pending_buf,t.pending-i,i)),So(e),t.pending!==0)return t.last_flush=-1,Rn;i=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,Gt(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>i&&(e.adler=$n(e.adler,t.pending_buf,t.pending-i,i))}t.status=kd}if(t.status===kd){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(So(e),t.pending!==0))return t.last_flush=-1,Rn;Gt(t,e.adler&255),Gt(t,e.adler>>8&255),e.adler=0}if(t.status=Is,So(e),t.pending!==0)return t.last_flush=-1,Rn}if(e.avail_in!==0||t.lookahead!==0||n!==is&&t.status!==la){let i=t.level===0?dm(t,n):t.strategy===$l?GR(t,n):t.strategy===AR?HR(t,n):ca[t.level].func(t,n);if((i===Ds||i===Lr)&&(t.status=la),i===io||i===Ds)return e.avail_out===0&&(t.last_flush=-1),Rn;if(i===Or&&(n===ER?wR(t):n!==oh&&(_d(t,0,0,!1),n===SR&&(Xi(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),So(e),e.avail_out===0))return t.last_flush=-1,Rn}return n!==Lo?Rn:t.wrap<=0?ih:(t.wrap===2?(Gt(t,e.adler&255),Gt(t,e.adler>>8&255),Gt(t,e.adler>>16&255),Gt(t,e.adler>>24&255),Gt(t,e.total_in&255),Gt(t,e.total_in>>8&255),Gt(t,e.total_in>>16&255),Gt(t,e.total_in>>24&255)):(ra(t,e.adler>>>16),ra(t,e.adler&65535)),So(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Rn:ih)},XR=e=>{if(Ga(e))return oi;const n=e.state.status;return e.state=null,n===Is?Ts(e,xR):Rn},JR=(e,n)=>{let t=n.length;if(Ga(e))return oi;const o=e.state,i=o.wrap;if(i===2||i===1&&o.status!==Tr||o.lookahead)return oi;if(i===1&&(e.adler=Da(e.adler,n,t,0)),o.wrap=0,t>=o.w_size){i===0&&(Xi(o.head),o.strstart=0,o.block_start=0,o.insert=0);let d=new Uint8Array(o.w_size);d.set(n.subarray(t-o.w_size,t),0),n=d,t=o.w_size}const s=e.avail_in,r=e.next_in,a=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,Rr(o);o.lookahead>=Pt;){let d=o.strstart,l=o.lookahead-(Pt-1);do o.ins_h=ss(o,o.ins_h,o.window[d+Pt-1]),o.prev[d&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=d,d++;while(--l);o.strstart=d,o.lookahead=Pt-1,Rr(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=Pt-1,o.match_available=0,e.next_in=r,e.input=a,e.avail_in=s,o.wrap=i,Rn};var QR=qR,eF=hm,tF=pm,nF=fm,oF=KR,iF=ZR,sF=XR,rF=JR,aF="pako deflate (from Nodeca project)",wa={deflateInit:QR,deflateInit2:eF,deflateReset:tF,deflateResetKeep:nF,deflateSetHeader:oF,deflate:iF,deflateEnd:sF,deflateSetDictionary:rF,deflateInfo:aF};const lF=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var cF=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const t=n.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const o in t)lF(t,o)&&(e[o]=t[o])}}return e},uF=e=>{let n=0;for(let o=0,i=e.length;o<i;o++)n+=e[o].length;const t=new Uint8Array(n);for(let o=0,i=0,s=e.length;o<s;o++){let r=e[o];t.set(r,i),i+=r.length}return t},Fc={assign:cF,flattenChunks:uF};let gm=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{gm=!1}const Pa=new Uint8Array(256);for(let e=0;e<256;e++)Pa[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Pa[254]=Pa[254]=1;var dF=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,t,o,i,s,r=e.length,a=0;for(i=0;i<r;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<r&&(o=e.charCodeAt(i+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(a),s=0,i=0;s<a;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<r&&(o=e.charCodeAt(i+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),i++)),t<128?n[s++]=t:t<2048?(n[s++]=192|t>>>6,n[s++]=128|t&63):t<65536?(n[s++]=224|t>>>12,n[s++]=128|t>>>6&63,n[s++]=128|t&63):(n[s++]=240|t>>>18,n[s++]=128|t>>>12&63,n[s++]=128|t>>>6&63,n[s++]=128|t&63);return n};const fF=(e,n)=>{if(n<65534&&e.subarray&&gm)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let t="";for(let o=0;o<n;o++)t+=String.fromCharCode(e[o]);return t};var pF=(e,n)=>{const t=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let o,i;const s=new Array(t*2);for(i=0,o=0;o<t;){let r=e[o++];if(r<128){s[i++]=r;continue}let a=Pa[r];if(a>4){s[i++]=65533,o+=a-1;continue}for(r&=a===2?31:a===3?15:7;a>1&&o<t;)r=r<<6|e[o++]&63,a--;if(a>1){s[i++]=65533;continue}r<65536?s[i++]=r:(r-=65536,s[i++]=55296|r>>10&1023,s[i++]=56320|r&1023)}return fF(s,i)},hF=(e,n)=>{n=n||e.length,n>e.length&&(n=e.length);let t=n-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?n:t+Pa[e[t]]>n?t:n},ja={string2buf:dF,buf2string:pF,utf8border:hF};function gF(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var vm=gF;const mm=Object.prototype.toString,{Z_NO_FLUSH:vF,Z_SYNC_FLUSH:mF,Z_FULL_FLUSH:yF,Z_FINISH:bF,Z_OK:lc,Z_STREAM_END:_F,Z_DEFAULT_COMPRESSION:wF,Z_DEFAULT_STRATEGY:EF,Z_DEFLATED:SF}=Tc;function Oc(e){this.options=Fc.assign({level:wF,method:SF,chunkSize:16384,windowBits:15,memLevel:8,strategy:EF},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vm,this.strm.avail_out=0;let t=wa.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==lc)throw new Error(Ir[t]);if(n.header&&wa.deflateSetHeader(this.strm,n.header),n.dictionary){let o;if(typeof n.dictionary=="string"?o=ja.string2buf(n.dictionary):mm.call(n.dictionary)==="[object ArrayBuffer]"?o=new Uint8Array(n.dictionary):o=n.dictionary,t=wa.deflateSetDictionary(this.strm,o),t!==lc)throw new Error(Ir[t]);this._dict_set=!0}}Oc.prototype.push=function(e,n){const t=this.strm,o=this.options.chunkSize;let i,s;if(this.ended)return!1;for(n===~~n?s=n:s=n===!0?bF:vF,typeof e=="string"?t.input=ja.string2buf(e):mm.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(o),t.next_out=0,t.avail_out=o),(s===mF||s===yF)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=wa.deflate(t,s),i===_F)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=wa.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===lc;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Oc.prototype.onData=function(e){this.chunks.push(e)};Oc.prototype.onEnd=function(e){e===lc&&(this.result=Fc.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function xF(e,n){const t=new Oc(n);if(t.push(e,!0),t.err)throw t.msg||Ir[t.err];return t.result}var kF=xF,CF={deflate:kF};const Il=16209,AF=16191;var $F=function(n,t){let o,i,s,r,a,d,l,f,g,m,v,T,P,w,C,$,H,M,ee,oe,Z,ye,Ce,Fe;const Le=n.state;o=n.next_in,Ce=n.input,i=o+(n.avail_in-5),s=n.next_out,Fe=n.output,r=s-(t-n.avail_out),a=s+(n.avail_out-257),d=Le.dmax,l=Le.wsize,f=Le.whave,g=Le.wnext,m=Le.window,v=Le.hold,T=Le.bits,P=Le.lencode,w=Le.distcode,C=(1<<Le.lenbits)-1,$=(1<<Le.distbits)-1;e:do{T<15&&(v+=Ce[o++]<<T,T+=8,v+=Ce[o++]<<T,T+=8),H=P[v&C];t:for(;;){if(M=H>>>24,v>>>=M,T-=M,M=H>>>16&255,M===0)Fe[s++]=H&65535;else if(M&16){ee=H&65535,M&=15,M&&(T<M&&(v+=Ce[o++]<<T,T+=8),ee+=v&(1<<M)-1,v>>>=M,T-=M),T<15&&(v+=Ce[o++]<<T,T+=8,v+=Ce[o++]<<T,T+=8),H=w[v&$];n:for(;;){if(M=H>>>24,v>>>=M,T-=M,M=H>>>16&255,M&16){if(oe=H&65535,M&=15,T<M&&(v+=Ce[o++]<<T,T+=8,T<M&&(v+=Ce[o++]<<T,T+=8)),oe+=v&(1<<M)-1,oe>d){n.msg="invalid distance too far back",Le.mode=Il;break e}if(v>>>=M,T-=M,M=s-r,oe>M){if(M=oe-M,M>f&&Le.sane){n.msg="invalid distance too far back",Le.mode=Il;break e}if(Z=0,ye=m,g===0){if(Z+=l-M,M<ee){ee-=M;do Fe[s++]=m[Z++];while(--M);Z=s-oe,ye=Fe}}else if(g<M){if(Z+=l+g-M,M-=g,M<ee){ee-=M;do Fe[s++]=m[Z++];while(--M);if(Z=0,g<ee){M=g,ee-=M;do Fe[s++]=m[Z++];while(--M);Z=s-oe,ye=Fe}}}else if(Z+=g-M,M<ee){ee-=M;do Fe[s++]=m[Z++];while(--M);Z=s-oe,ye=Fe}for(;ee>2;)Fe[s++]=ye[Z++],Fe[s++]=ye[Z++],Fe[s++]=ye[Z++],ee-=3;ee&&(Fe[s++]=ye[Z++],ee>1&&(Fe[s++]=ye[Z++]))}else{Z=s-oe;do Fe[s++]=Fe[Z++],Fe[s++]=Fe[Z++],Fe[s++]=Fe[Z++],ee-=3;while(ee>2);ee&&(Fe[s++]=Fe[Z++],ee>1&&(Fe[s++]=Fe[Z++]))}}else if(M&64){n.msg="invalid distance code",Le.mode=Il;break e}else{H=w[(H&65535)+(v&(1<<M)-1)];continue n}break}}else if(M&64)if(M&32){Le.mode=AF;break e}else{n.msg="invalid literal/length code",Le.mode=Il;break e}else{H=P[(H&65535)+(v&(1<<M)-1)];continue t}break}}while(o<i&&s<a);ee=T>>3,o-=ee,T-=ee<<3,v&=(1<<T)-1,n.next_in=o,n.next_out=s,n.avail_in=o<i?5+(i-o):5-(o-i),n.avail_out=s<a?257+(a-s):257-(s-a),Le.hold=v,Le.bits=T};const or=15,rh=852,ah=592,lh=0,Mu=1,ch=2,IF=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),TF=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),RF=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),FF=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),OF=(e,n,t,o,i,s,r,a)=>{const d=a.bits;let l=0,f=0,g=0,m=0,v=0,T=0,P=0,w=0,C=0,$=0,H,M,ee,oe,Z,ye=null,Ce;const Fe=new Uint16Array(or+1),Le=new Uint16Array(or+1);let We=null,ht,De,Ye;for(l=0;l<=or;l++)Fe[l]=0;for(f=0;f<o;f++)Fe[n[t+f]]++;for(v=d,m=or;m>=1&&Fe[m]===0;m--);if(v>m&&(v=m),m===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(g=1;g<m&&Fe[g]===0;g++);for(v<g&&(v=g),w=1,l=1;l<=or;l++)if(w<<=1,w-=Fe[l],w<0)return-1;if(w>0&&(e===lh||m!==1))return-1;for(Le[1]=0,l=1;l<or;l++)Le[l+1]=Le[l]+Fe[l];for(f=0;f<o;f++)n[t+f]!==0&&(r[Le[n[t+f]]++]=f);if(e===lh?(ye=We=r,Ce=20):e===Mu?(ye=IF,We=TF,Ce=257):(ye=RF,We=FF,Ce=0),$=0,f=0,l=g,Z=s,T=v,P=0,ee=-1,C=1<<v,oe=C-1,e===Mu&&C>rh||e===ch&&C>ah)return 1;for(;;){ht=l-P,r[f]+1<Ce?(De=0,Ye=r[f]):r[f]>=Ce?(De=We[r[f]-Ce],Ye=ye[r[f]-Ce]):(De=96,Ye=0),H=1<<l-P,M=1<<T,g=M;do M-=H,i[Z+($>>P)+M]=ht<<24|De<<16|Ye|0;while(M!==0);for(H=1<<l-1;$&H;)H>>=1;if(H!==0?($&=H-1,$+=H):$=0,f++,--Fe[l]===0){if(l===m)break;l=n[t+r[f]]}if(l>v&&($&oe)!==ee){for(P===0&&(P=v),Z+=g,T=l-P,w=1<<T;T+P<m&&(w-=Fe[T+P],!(w<=0));)T++,w<<=1;if(C+=1<<T,e===Mu&&C>rh||e===ch&&C>ah)return 1;ee=$&oe,i[ee]=v<<24|T<<16|Z-s|0}}return $!==0&&(i[Z+$]=l-P<<24|64<<16|0),a.bits=v,0};var Ea=OF;const LF=0,ym=1,bm=2,{Z_FINISH:uh,Z_BLOCK:MF,Z_TREES:Tl,Z_OK:Ps,Z_STREAM_END:NF,Z_NEED_DICT:DF,Z_STREAM_ERROR:Po,Z_DATA_ERROR:_m,Z_MEM_ERROR:wm,Z_BUF_ERROR:PF,Z_DEFLATED:dh}=Tc,Lc=16180,fh=16181,ph=16182,hh=16183,gh=16184,vh=16185,mh=16186,yh=16187,bh=16188,_h=16189,cc=16190,Ei=16191,Nu=16192,wh=16193,Du=16194,Eh=16195,Sh=16196,xh=16197,kh=16198,Rl=16199,Fl=16200,Ch=16201,Ah=16202,$h=16203,Ih=16204,Th=16205,Pu=16206,Rh=16207,Fh=16208,an=16209,Em=16210,Sm=16211,jF=852,BF=592,UF=15,zF=UF,Oh=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function VF(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bs=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<Lc||n.mode>Sm?1:0},xm=e=>{if(Bs(e))return Po;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=n.wrap&1),n.mode=Lc,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(jF),n.distcode=n.distdyn=new Int32Array(BF),n.sane=1,n.back=-1,Ps},km=e=>{if(Bs(e))return Po;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,xm(e)},Cm=(e,n)=>{let t;if(Bs(e))return Po;const o=e.state;return n<0?(t=0,n=-n):(t=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?Po:(o.window!==null&&o.wbits!==n&&(o.window=null),o.wrap=t,o.wbits=n,km(e))},Am=(e,n)=>{if(!e)return Po;const t=new VF;e.state=t,t.strm=e,t.window=null,t.mode=Lc;const o=Cm(e,n);return o!==Ps&&(e.state=null),o},HF=e=>Am(e,zF);let Lh=!0,ju,Bu;const GF=e=>{if(Lh){ju=new Int32Array(512),Bu=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(Ea(ym,e.lens,0,288,ju,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;Ea(bm,e.lens,0,32,Bu,0,e.work,{bits:5}),Lh=!1}e.lencode=ju,e.lenbits=9,e.distcode=Bu,e.distbits=5},$m=(e,n,t,o)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),o>=s.wsize?(s.window.set(n.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>o&&(i=o),s.window.set(n.subarray(t-o,t-o+i),s.wnext),o-=i,o?(s.window.set(n.subarray(t-o,t),0),s.wnext=o,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},WF=(e,n)=>{let t,o,i,s,r,a,d,l,f,g,m,v,T,P,w=0,C,$,H,M,ee,oe,Z,ye;const Ce=new Uint8Array(4);let Fe,Le;const We=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Bs(e)||!e.output||!e.input&&e.avail_in!==0)return Po;t=e.state,t.mode===Ei&&(t.mode=Nu),r=e.next_out,i=e.output,d=e.avail_out,s=e.next_in,o=e.input,a=e.avail_in,l=t.hold,f=t.bits,g=a,m=d,ye=Ps;e:for(;;)switch(t.mode){case Lc:if(t.wrap===0){t.mode=Nu;break}for(;f<16;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,Ce[0]=l&255,Ce[1]=l>>>8&255,t.check=$n(t.check,Ce,2,0),l=0,f=0,t.mode=fh;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=an;break}if((l&15)!==dh){e.msg="unknown compression method",t.mode=an;break}if(l>>>=4,f-=4,Z=(l&15)+8,t.wbits===0&&(t.wbits=Z),Z>15||Z>t.wbits){e.msg="invalid window size",t.mode=an;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?_h:Ei,l=0,f=0;break;case fh:for(;f<16;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}if(t.flags=l,(t.flags&255)!==dh){e.msg="unknown compression method",t.mode=an;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=an;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(Ce[0]=l&255,Ce[1]=l>>>8&255,t.check=$n(t.check,Ce,2,0)),l=0,f=0,t.mode=ph;case ph:for(;f<32;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(Ce[0]=l&255,Ce[1]=l>>>8&255,Ce[2]=l>>>16&255,Ce[3]=l>>>24&255,t.check=$n(t.check,Ce,4,0)),l=0,f=0,t.mode=hh;case hh:for(;f<16;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(Ce[0]=l&255,Ce[1]=l>>>8&255,t.check=$n(t.check,Ce,2,0)),l=0,f=0,t.mode=gh;case gh:if(t.flags&1024){for(;f<16;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(Ce[0]=l&255,Ce[1]=l>>>8&255,t.check=$n(t.check,Ce,2,0)),l=0,f=0}else t.head&&(t.head.extra=null);t.mode=vh;case vh:if(t.flags&1024&&(v=t.length,v>a&&(v=a),v&&(t.head&&(Z=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(o.subarray(s,s+v),Z)),t.flags&512&&t.wrap&4&&(t.check=$n(t.check,o,v,s)),a-=v,s+=v,t.length-=v),t.length))break e;t.length=0,t.mode=mh;case mh:if(t.flags&2048){if(a===0)break e;v=0;do Z=o[s+v++],t.head&&Z&&t.length<65536&&(t.head.name+=String.fromCharCode(Z));while(Z&&v<a);if(t.flags&512&&t.wrap&4&&(t.check=$n(t.check,o,v,s)),a-=v,s+=v,Z)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=yh;case yh:if(t.flags&4096){if(a===0)break e;v=0;do Z=o[s+v++],t.head&&Z&&t.length<65536&&(t.head.comment+=String.fromCharCode(Z));while(Z&&v<a);if(t.flags&512&&t.wrap&4&&(t.check=$n(t.check,o,v,s)),a-=v,s+=v,Z)break e}else t.head&&(t.head.comment=null);t.mode=bh;case bh:if(t.flags&512){for(;f<16;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=an;break}l=0,f=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Ei;break;case _h:for(;f<32;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}e.adler=t.check=Oh(l),l=0,f=0,t.mode=cc;case cc:if(t.havedict===0)return e.next_out=r,e.avail_out=d,e.next_in=s,e.avail_in=a,t.hold=l,t.bits=f,DF;e.adler=t.check=1,t.mode=Ei;case Ei:if(n===MF||n===Tl)break e;case Nu:if(t.last){l>>>=f&7,f-=f&7,t.mode=Pu;break}for(;f<3;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}switch(t.last=l&1,l>>>=1,f-=1,l&3){case 0:t.mode=wh;break;case 1:if(GF(t),t.mode=Rl,n===Tl){l>>>=2,f-=2;break e}break;case 2:t.mode=Sh;break;case 3:e.msg="invalid block type",t.mode=an}l>>>=2,f-=2;break;case wh:for(l>>>=f&7,f-=f&7;f<32;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=an;break}if(t.length=l&65535,l=0,f=0,t.mode=Du,n===Tl)break e;case Du:t.mode=Eh;case Eh:if(v=t.length,v){if(v>a&&(v=a),v>d&&(v=d),v===0)break e;i.set(o.subarray(s,s+v),r),a-=v,s+=v,d-=v,r+=v,t.length-=v;break}t.mode=Ei;break;case Sh:for(;f<14;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}if(t.nlen=(l&31)+257,l>>>=5,f-=5,t.ndist=(l&31)+1,l>>>=5,f-=5,t.ncode=(l&15)+4,l>>>=4,f-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=an;break}t.have=0,t.mode=xh;case xh:for(;t.have<t.ncode;){for(;f<3;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}t.lens[We[t.have++]]=l&7,l>>>=3,f-=3}for(;t.have<19;)t.lens[We[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,Fe={bits:t.lenbits},ye=Ea(LF,t.lens,0,19,t.lencode,0,t.work,Fe),t.lenbits=Fe.bits,ye){e.msg="invalid code lengths set",t.mode=an;break}t.have=0,t.mode=kh;case kh:for(;t.have<t.nlen+t.ndist;){for(;w=t.lencode[l&(1<<t.lenbits)-1],C=w>>>24,$=w>>>16&255,H=w&65535,!(C<=f);){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}if(H<16)l>>>=C,f-=C,t.lens[t.have++]=H;else{if(H===16){for(Le=C+2;f<Le;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}if(l>>>=C,f-=C,t.have===0){e.msg="invalid bit length repeat",t.mode=an;break}Z=t.lens[t.have-1],v=3+(l&3),l>>>=2,f-=2}else if(H===17){for(Le=C+3;f<Le;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}l>>>=C,f-=C,Z=0,v=3+(l&7),l>>>=3,f-=3}else{for(Le=C+7;f<Le;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}l>>>=C,f-=C,Z=0,v=11+(l&127),l>>>=7,f-=7}if(t.have+v>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=an;break}for(;v--;)t.lens[t.have++]=Z}}if(t.mode===an)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=an;break}if(t.lenbits=9,Fe={bits:t.lenbits},ye=Ea(ym,t.lens,0,t.nlen,t.lencode,0,t.work,Fe),t.lenbits=Fe.bits,ye){e.msg="invalid literal/lengths set",t.mode=an;break}if(t.distbits=6,t.distcode=t.distdyn,Fe={bits:t.distbits},ye=Ea(bm,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,Fe),t.distbits=Fe.bits,ye){e.msg="invalid distances set",t.mode=an;break}if(t.mode=Rl,n===Tl)break e;case Rl:t.mode=Fl;case Fl:if(a>=6&&d>=258){e.next_out=r,e.avail_out=d,e.next_in=s,e.avail_in=a,t.hold=l,t.bits=f,$F(e,m),r=e.next_out,i=e.output,d=e.avail_out,s=e.next_in,o=e.input,a=e.avail_in,l=t.hold,f=t.bits,t.mode===Ei&&(t.back=-1);break}for(t.back=0;w=t.lencode[l&(1<<t.lenbits)-1],C=w>>>24,$=w>>>16&255,H=w&65535,!(C<=f);){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}if($&&!($&240)){for(M=C,ee=$,oe=H;w=t.lencode[oe+((l&(1<<M+ee)-1)>>M)],C=w>>>24,$=w>>>16&255,H=w&65535,!(M+C<=f);){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}l>>>=M,f-=M,t.back+=M}if(l>>>=C,f-=C,t.back+=C,t.length=H,$===0){t.mode=Th;break}if($&32){t.back=-1,t.mode=Ei;break}if($&64){e.msg="invalid literal/length code",t.mode=an;break}t.extra=$&15,t.mode=Ch;case Ch:if(t.extra){for(Le=t.extra;f<Le;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,f-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Ah;case Ah:for(;w=t.distcode[l&(1<<t.distbits)-1],C=w>>>24,$=w>>>16&255,H=w&65535,!(C<=f);){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}if(!($&240)){for(M=C,ee=$,oe=H;w=t.distcode[oe+((l&(1<<M+ee)-1)>>M)],C=w>>>24,$=w>>>16&255,H=w&65535,!(M+C<=f);){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}l>>>=M,f-=M,t.back+=M}if(l>>>=C,f-=C,t.back+=C,$&64){e.msg="invalid distance code",t.mode=an;break}t.offset=H,t.extra=$&15,t.mode=$h;case $h:if(t.extra){for(Le=t.extra;f<Le;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,f-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=an;break}t.mode=Ih;case Ih:if(d===0)break e;if(v=m-d,t.offset>v){if(v=t.offset-v,v>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=an;break}v>t.wnext?(v-=t.wnext,T=t.wsize-v):T=t.wnext-v,v>t.length&&(v=t.length),P=t.window}else P=i,T=r-t.offset,v=t.length;v>d&&(v=d),d-=v,t.length-=v;do i[r++]=P[T++];while(--v);t.length===0&&(t.mode=Fl);break;case Th:if(d===0)break e;i[r++]=t.length,d--,t.mode=Fl;break;case Pu:if(t.wrap){for(;f<32;){if(a===0)break e;a--,l|=o[s++]<<f,f+=8}if(m-=d,e.total_out+=m,t.total+=m,t.wrap&4&&m&&(e.adler=t.check=t.flags?$n(t.check,i,m,r-m):Da(t.check,i,m,r-m)),m=d,t.wrap&4&&(t.flags?l:Oh(l))!==t.check){e.msg="incorrect data check",t.mode=an;break}l=0,f=0}t.mode=Rh;case Rh:if(t.wrap&&t.flags){for(;f<32;){if(a===0)break e;a--,l+=o[s++]<<f,f+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=an;break}l=0,f=0}t.mode=Fh;case Fh:ye=NF;break e;case an:ye=_m;break e;case Em:return wm;case Sm:default:return Po}return e.next_out=r,e.avail_out=d,e.next_in=s,e.avail_in=a,t.hold=l,t.bits=f,(t.wsize||m!==e.avail_out&&t.mode<an&&(t.mode<Pu||n!==uh))&&$m(e,e.output,e.next_out,m-e.avail_out),g-=e.avail_in,m-=e.avail_out,e.total_in+=g,e.total_out+=m,t.total+=m,t.wrap&4&&m&&(e.adler=t.check=t.flags?$n(t.check,i,m,e.next_out-m):Da(t.check,i,m,e.next_out-m)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Ei?128:0)+(t.mode===Rl||t.mode===Du?256:0),(g===0&&m===0||n===uh)&&ye===Ps&&(ye=PF),ye},YF=e=>{if(Bs(e))return Po;let n=e.state;return n.window&&(n.window=null),e.state=null,Ps},KF=(e,n)=>{if(Bs(e))return Po;const t=e.state;return t.wrap&2?(t.head=n,n.done=!1,Ps):Po},qF=(e,n)=>{const t=n.length;let o,i,s;return Bs(e)||(o=e.state,o.wrap!==0&&o.mode!==cc)?Po:o.mode===cc&&(i=1,i=Da(i,n,t,0),i!==o.check)?_m:(s=$m(e,n,t,t),s?(o.mode=Em,wm):(o.havedict=1,Ps))};var ZF=km,XF=Cm,JF=xm,QF=HF,eO=Am,tO=WF,nO=YF,oO=KF,iO=qF,sO="pako inflate (from Nodeca project)",ki={inflateReset:ZF,inflateReset2:XF,inflateResetKeep:JF,inflateInit:QF,inflateInit2:eO,inflate:tO,inflateEnd:nO,inflateGetHeader:oO,inflateSetDictionary:iO,inflateInfo:sO};function rO(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var aO=rO;const Im=Object.prototype.toString,{Z_NO_FLUSH:lO,Z_FINISH:cO,Z_OK:Ba,Z_STREAM_END:Uu,Z_NEED_DICT:zu,Z_STREAM_ERROR:uO,Z_DATA_ERROR:Mh,Z_MEM_ERROR:dO}=Tc;function Mc(e){this.options=Fc.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vm,this.strm.avail_out=0;let t=ki.inflateInit2(this.strm,n.windowBits);if(t!==Ba)throw new Error(Ir[t]);if(this.header=new aO,ki.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=ja.string2buf(n.dictionary):Im.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=ki.inflateSetDictionary(this.strm,n.dictionary),t!==Ba)))throw new Error(Ir[t])}Mc.prototype.push=function(e,n){const t=this.strm,o=this.options.chunkSize,i=this.options.dictionary;let s,r,a;if(this.ended)return!1;for(n===~~n?r=n:r=n===!0?cO:lO,Im.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(o),t.next_out=0,t.avail_out=o),s=ki.inflate(t,r),s===zu&&i&&(s=ki.inflateSetDictionary(t,i),s===Ba?s=ki.inflate(t,r):s===Mh&&(s=zu));t.avail_in>0&&s===Uu&&t.state.wrap>0&&e[t.next_in]!==0;)ki.inflateReset(t),s=ki.inflate(t,r);switch(s){case uO:case Mh:case zu:case dO:return this.onEnd(s),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||s===Uu))if(this.options.to==="string"){let d=ja.utf8border(t.output,t.next_out),l=t.next_out-d,f=ja.buf2string(t.output,d);t.next_out=l,t.avail_out=o-l,l&&t.output.set(t.output.subarray(d,d+l),0),this.onData(f)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Ba&&a===0)){if(s===Uu)return s=ki.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Mc.prototype.onData=function(e){this.chunks.push(e)};Mc.prototype.onEnd=function(e){e===Ba&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Fc.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var fO=Mc,pO={Inflate:fO};const{deflate:hO}=CF,{Inflate:gO}=pO;var vO=hO,mO=gO;class Tm{constructor(n,t=!1,o=!0){this.device=n,this.tracing=t,this.slipReaderEnabled=!1,this.leftOver=new Uint8Array(0),this.baudrate=0,this.traceLog="",this.lastTraceTime=Date.now(),this._DTR_state=!1,this.slipReaderEnabled=o}getInfo(){const n=this.device.getInfo();return n.usbVendorId&&n.usbProductId?`WebSerial VendorID 0x${n.usbVendorId.toString(16)} ProductID 0x${n.usbProductId.toString(16)}`:""}getPid(){return this.device.getInfo().usbProductId}trace(n){const i=`${`TRACE ${(Date.now()-this.lastTraceTime).toFixed(3)}`} ${n}`;console.log(i),this.traceLog+=i+`
`}async returnTrace(){try{await navigator.clipboard.writeText(this.traceLog),console.log("Text copied to clipboard!")}catch(n){console.error("Failed to copy text:",n)}}hexify(n){return Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join("").padEnd(16," ")}hexConvert(n,t=!0){if(t&&n.length>16){let o="",i=n;for(;i.length>0;){const s=i.slice(0,16),r=String.fromCharCode(...s).split("").map(a=>a===" "||a>=" "&&a<="~"&&a!=="  "?a:".").join("");i=i.slice(16),o+=`
    ${this.hexify(s.slice(0,8))} ${this.hexify(s.slice(8))} | ${r}`}return o}else return this.hexify(n)}slipWriter(n){const t=[];t.push(192);for(let o=0;o<n.length;o++)n[o]===219?t.push(219,221):n[o]===192?t.push(219,220):t.push(n[o]);return t.push(192),new Uint8Array(t)}async write(n){const t=this.slipWriter(n);if(this.device.writable){const o=this.device.writable.getWriter();this.tracing&&(console.log("Write bytes"),this.trace(`Write ${t.length} bytes: ${this.hexConvert(t)}`)),await o.write(t),o.releaseLock()}}_appendBuffer(n,t){const o=new Uint8Array(n.byteLength+t.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(t),n.byteLength),o.buffer}slipReader(n){let t=0,o=0,i=0,s="init";for(;t<n.length;){if(s==="init"&&n[t]==192){o=t+1,s="valid_data",t++;continue}if(s==="valid_data"&&n[t]==192){i=t-1,s="packet_complete";break}t++}if(s!=="packet_complete")return this.leftOver=n,new Uint8Array(0);this.leftOver=n.slice(i+2);const r=new Uint8Array(i-o+1);let a=0;for(t=o;t<=i;t++,a++){if(n[t]===219&&n[t+1]===220){r[a]=192,t++;continue}if(n[t]===219&&n[t+1]===221){r[a]=219,t++;continue}r[a]=n[t]}return r.slice(0,a)}async read(n=0,t=12){let o,i=this.leftOver;if(this.leftOver=new Uint8Array(0),this.slipReaderEnabled){const s=this.slipReader(i);if(s.length>0)return s;i=this.leftOver,this.leftOver=new Uint8Array(0)}if(this.device.readable==null)return this.leftOver;this.reader=this.device.readable.getReader();try{n>0&&(o=setTimeout(()=>{this.reader&&this.reader.cancel()},n));do{const{value:s,done:r}=await this.reader.read();if(r)throw this.leftOver=i,new Error("Timeout");i=new Uint8Array(this._appendBuffer(i.buffer,s.buffer))}while(i.length<t)}finally{n>0&&clearTimeout(o),this.reader.releaseLock()}if(this.tracing&&(console.log("Read bytes"),this.trace(`Read ${i.length} bytes: ${this.hexConvert(i)}`)),this.slipReaderEnabled){const s=this.slipReader(i);return this.tracing&&(console.log("Slip reader results"),this.trace(`Read ${s.length} bytes: ${this.hexConvert(s)}`)),s}return i}async rawRead(n=0){if(this.leftOver.length!=0){const o=this.leftOver;return this.leftOver=new Uint8Array(0),o}if(!this.device.readable)return this.leftOver;this.reader=this.device.readable.getReader();let t;try{n>0&&(t=setTimeout(()=>{this.reader&&this.reader.cancel()},n));const{value:o,done:i}=await this.reader.read();return i||this.tracing&&(console.log("Raw Read bytes"),this.trace(`Read ${o.length} bytes: ${this.hexConvert(o)}`)),o}finally{n>0&&clearTimeout(t),this.reader.releaseLock()}}async setRTS(n){await this.device.setSignals({requestToSend:n}),await this.setDTR(this._DTR_state)}async setDTR(n){this._DTR_state=n,await this.device.setSignals({dataTerminalReady:n})}async connect(n=115200,t={}){await this.device.open({baudRate:n,dataBits:t==null?void 0:t.dataBits,stopBits:t==null?void 0:t.stopBits,bufferSize:t==null?void 0:t.bufferSize,parity:t==null?void 0:t.parity,flowControl:t==null?void 0:t.flowControl}),this.baudrate=n,this.leftOver=new Uint8Array(0)}async sleep(n){return new Promise(t=>setTimeout(t,n))}async waitForUnlock(n){for(;this.device.readable&&this.device.readable.locked||this.device.writable&&this.device.writable.locked;)await this.sleep(n)}async disconnect(){var n,t;!((n=this.device.readable)===null||n===void 0)&&n.locked&&await((t=this.reader)===null||t===void 0?void 0:t.cancel()),await this.waitForUnlock(400),this.reader=void 0,await this.device.close()}}function zl(e){return new Promise(n=>setTimeout(n,e))}async function yO(e){await e.setRTS(!1),await e.setDTR(!1),await zl(100),await e.setDTR(!0),await e.setRTS(!1),await zl(100),await e.setRTS(!0),await e.setDTR(!1),await e.setRTS(!0),await zl(100),await e.setRTS(!1),await e.setDTR(!1)}function bO(e){const n=["D","R","W"],t=e.split("|");for(const o of t){const i=o[0],s=o.slice(1);if(!n.includes(i))return!1;if(i==="D"||i==="R"){if(s!=="0"&&s!=="1")return!1}else if(i==="W"){const r=parseInt(s);if(isNaN(r)||r<=0)return!1}}return!0}async function _O(e,n){const t={D:async o=>await e.setDTR(o),R:async o=>await e.setRTS(o),W:async o=>await zl(o)};try{if(!bO(n))return;const i=n.split("|");for(const s of i){const r=s[0],a=s.slice(1);r==="W"?await t.W(Number(a)):(r==="D"||r==="R")&&await t[r](a==="1")}}catch{throw new Error("Invalid custom reset sequence")}}var wO=function(n){return atob(n)};const Nh=gv(wO);async function EO(e){switch(e){case 15736195:{const{ESP32ROM:n}=await Vo(async()=>{const{ESP32ROM:t}=await import("./esp32-BPYaDt9v.js");return{ESP32ROM:t}},__vite__mapDeps([0,1]),import.meta.url);return new n}case 1867591791:case 2084675695:{const{ESP32C2ROM:n}=await Vo(async()=>{const{ESP32C2ROM:t}=await import("./esp32c2-CPrCFu7Z.js");return{ESP32C2ROM:t}},__vite__mapDeps([2,3,1]),import.meta.url);return new n}case 1763790959:case 456216687:case 1216438383:case 1130455151:{const{ESP32C3ROM:n}=await Vo(async()=>{const{ESP32C3ROM:t}=await import("./esp32c3-I3vXmsVg.js");return{ESP32C3ROM:t}},__vite__mapDeps([3,1]),import.meta.url);return new n}case 752910447:{const{ESP32C6ROM:n}=await Vo(async()=>{const{ESP32C6ROM:t}=await import("./esp32c6-C93uIFil.js");return{ESP32C6ROM:t}},__vite__mapDeps([4,1]),import.meta.url);return new n}case 871374959:case 606167151:{const{ESP32C61ROM:n}=await Vo(async()=>{const{ESP32C61ROM:t}=await import("./esp32c61-ktIkGZDk.js");return{ESP32C61ROM:t}},__vite__mapDeps([5,4,1]),import.meta.url);return new n}case 285294703:case 1675706479:{const{ESP32C5ROM:n}=await Vo(async()=>{const{ESP32C5ROM:t}=await import("./esp32c5-DNmA6eRA.js");return{ESP32C5ROM:t}},__vite__mapDeps([6,4,1]),import.meta.url);return new n}case 3619110528:{const{ESP32H2ROM:n}=await Vo(async()=>{const{ESP32H2ROM:t}=await import("./esp32h2-Cf8JbGZQ.js");return{ESP32H2ROM:t}},__vite__mapDeps([7,1]),import.meta.url);return new n}case 9:{const{ESP32S3ROM:n}=await Vo(async()=>{const{ESP32S3ROM:t}=await import("./esp32s3-mu2zzjDN.js");return{ESP32S3ROM:t}},__vite__mapDeps([8,1]),import.meta.url);return new n}case 1990:{const{ESP32S2ROM:n}=await Vo(async()=>{const{ESP32S2ROM:t}=await import("./esp32s2-3nCAg6Ct.js");return{ESP32S2ROM:t}},__vite__mapDeps([9,1]),import.meta.url);return new n}case 4293968129:{const{ESP8266ROM:n}=await Vo(async()=>{const{ESP8266ROM:t}=await import("./esp8266-8VKmCx7J.js");return{ESP8266ROM:t}},__vite__mapDeps([10,1]),import.meta.url);return new n}case 0:case 182303440:case 117676761:{const{ESP32P4ROM:n}=await Vo(async()=>{const{ESP32P4ROM:t}=await import("./esp32p4-D9aWWE_i.js");return{ESP32P4ROM:t}},__vite__mapDeps([11,0,1]),import.meta.url);return new n}default:return null}}class SO{constructor(n){this.ESP_RAM_BLOCK=6144,this.ESP_FLASH_BEGIN=2,this.ESP_FLASH_DATA=3,this.ESP_FLASH_END=4,this.ESP_MEM_BEGIN=5,this.ESP_MEM_END=6,this.ESP_MEM_DATA=7,this.ESP_WRITE_REG=9,this.ESP_READ_REG=10,this.ESP_SPI_ATTACH=13,this.ESP_CHANGE_BAUDRATE=15,this.ESP_FLASH_DEFL_BEGIN=16,this.ESP_FLASH_DEFL_DATA=17,this.ESP_FLASH_DEFL_END=18,this.ESP_SPI_FLASH_MD5=19,this.ESP_ERASE_FLASH=208,this.ESP_ERASE_REGION=209,this.ESP_READ_FLASH=210,this.ESP_RUN_USER_CODE=211,this.ESP_IMAGE_MAGIC=233,this.ESP_CHECKSUM_MAGIC=239,this.ROM_INVALID_RECV_MSG=5,this.ERASE_REGION_TIMEOUT_PER_MB=3e4,this.ERASE_WRITE_TIMEOUT_PER_MB=4e4,this.MD5_TIMEOUT_PER_MB=8e3,this.CHIP_ERASE_TIMEOUT=12e4,this.FLASH_READ_TIMEOUT=1e5,this.MAX_TIMEOUT=this.CHIP_ERASE_TIMEOUT*2,this.CHIP_DETECT_MAGIC_REG_ADDR=1073745920,this.DETECTED_FLASH_SIZES={18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB"},this.DETECTED_FLASH_SIZES_NUM={18:256,19:512,20:1024,21:2048,22:4096,23:8192,24:16384},this.USB_JTAG_SERIAL_PID=4097,this.romBaudrate=115200,this.debugLogging=!1,this.syncStubDetected=!1,this.checksum=function(t){let o,i=239;for(o=0;o<t.length;o++)i^=t[o];return i},this.timeoutPerMb=function(t,o){const i=t*(o/1e6);return i<3e3?3e3:i},this.flashSizeBytes=function(t){let o=-1;return t.indexOf("KB")!==-1?o=parseInt(t.slice(0,t.indexOf("KB")))*1024:t.indexOf("MB")!==-1&&(o=parseInt(t.slice(0,t.indexOf("MB")))*1024*1024),o},this.IS_STUB=!1,this.FLASH_WRITE_SIZE=16384,this.transport=n.transport,this.baudrate=n.baudrate,n.serialOptions&&(this.serialOptions=n.serialOptions),n.romBaudrate&&(this.romBaudrate=n.romBaudrate),n.terminal&&(this.terminal=n.terminal,this.terminal.clean()),typeof n.debugLogging<"u"&&(this.debugLogging=n.debugLogging),n.port&&(this.transport=new Tm(n.port)),typeof n.enableTracing<"u"&&(this.transport.tracing=n.enableTracing),this.info("esptool.js"),this.info("Serial port "+this.transport.getInfo())}_sleep(n){return new Promise(t=>setTimeout(t,n))}write(n,t=!0){this.terminal?t?this.terminal.writeLine(n):this.terminal.write(n):console.log(n)}error(n,t=!0){this.write(`Error: ${n}`,t)}info(n,t=!0){this.write(n,t)}debug(n,t=!0){this.debugLogging&&this.write(`Debug: ${n}`,t)}_shortToBytearray(n){return new Uint8Array([n&255,n>>8&255])}_intToByteArray(n){return new Uint8Array([n&255,n>>8&255,n>>16&255,n>>24&255])}_byteArrayToShort(n,t){return n|t>>8}_byteArrayToInt(n,t,o,i){return n|t<<8|o<<16|i<<24}_appendBuffer(n,t){const o=new Uint8Array(n.byteLength+t.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(t),n.byteLength),o.buffer}_appendArray(n,t){const o=new Uint8Array(n.length+t.length);return o.set(n,0),o.set(t,n.length),o}ui8ToBstr(n){let t="";for(let o=0;o<n.length;o++)t+=String.fromCharCode(n[o]);return t}bstrToUi8(n){const t=new Uint8Array(n.length);for(let o=0;o<n.length;o++)t[o]=n.charCodeAt(o);return t}async flushInput(){try{await this.transport.rawRead(200)}catch(n){this.error(n.message)}}async readPacket(n=null,t=3e3){for(let o=0;o<100;o++){const i=await this.transport.read(t),s=i[0],r=i[1],a=this._byteArrayToInt(i[4],i[5],i[6],i[7]),d=i.slice(8);if(s==1){if(n==null||r==n)return[a,d];if(d[0]!=0&&d[1]==this.ROM_INVALID_RECV_MSG)throw await this.flushInput(),new Xn("unsupported command error")}}throw new Xn("invalid response")}async command(n=null,t=new Uint8Array(0),o=0,i=!0,s=3e3){if(n!=null){this.transport.tracing&&this.transport.trace(`command op:0x${n.toString(16).padStart(2,"0")} data len=${t.length} wait_response=${i?1:0} timeout=${(s/1e3).toFixed(3)} data=${this.transport.hexConvert(t)}`);const r=new Uint8Array(8+t.length);r[0]=0,r[1]=n,r[2]=this._shortToBytearray(t.length)[0],r[3]=this._shortToBytearray(t.length)[1],r[4]=this._intToByteArray(o)[0],r[5]=this._intToByteArray(o)[1],r[6]=this._intToByteArray(o)[2],r[7]=this._intToByteArray(o)[3];let a;for(a=0;a<t.length;a++)r[8+a]=t[a];await this.transport.write(r)}return i?this.readPacket(n,s):[0,new Uint8Array(0)]}async readReg(n,t=3e3){const o=this._intToByteArray(n);return(await this.command(this.ESP_READ_REG,o,void 0,void 0,t))[0]}async writeReg(n,t,o=4294967295,i=0,s=0){let r=this._appendArray(this._intToByteArray(n),this._intToByteArray(t));r=this._appendArray(r,this._intToByteArray(o)),r=this._appendArray(r,this._intToByteArray(i)),s>0&&(r=this._appendArray(r,this._intToByteArray(this.chip.UART_DATE_REG_ADDR)),r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,this._intToByteArray(s))),await this.checkCommand("write target memory",this.ESP_WRITE_REG,r)}async sync(){this.debug("Sync");const n=new Uint8Array(36);let t;for(n[0]=7,n[1]=7,n[2]=18,n[3]=32,t=0;t<32;t++)n[4+t]=85;try{const o=await this.command(8,n,void 0,void 0,100);return this.syncStubDetected=this.syncStubDetected&&o[0]===0,o}catch(o){throw this.debug("Sync err "+o),o}}async _connectAttempt(n="default_reset",t=!1){if(this.debug("_connect_attempt "+n+" "+t),n!=="no_reset")if(this.transport.getPid()===this.USB_JTAG_SERIAL_PID)await yO(this.transport);else{const s=t?"D0|R1|W100|W2000|D1|R0|W50|D0":"D0|R1|W100|D1|R0|W50|D0";await _O(this.transport,s)}let o=0,i=!0;for(;i;){try{const s=await this.transport.read(1e3);o+=s.length}catch(s){if(this.debug(s.message),s instanceof Error){i=!1;break}}await this._sleep(50)}for(this.transport.slipReaderEnabled=!0,this.syncStubDetected=!0,o=7;o--;){try{const s=await this.sync();return this.debug(s[0].toString()),"success"}catch(s){s instanceof Error&&(t?this.info("_",!1):this.info(".",!1))}await this._sleep(50)}return"error"}async connect(n="default_reset",t=7,o=!1){let i,s;for(this.info("Connecting...",!1),await this.transport.connect(this.romBaudrate,this.serialOptions),i=0;i<t&&(s=await this._connectAttempt(n,!1),!(s==="success"||(s=await this._connectAttempt(n,!0),s==="success")));i++);if(s!=="success")throw new Xn("Failed to connect with the device");if(this.info(`
\r`,!1),!o){const r=await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR)>>>0;this.debug("Chip Magic "+r.toString(16));const a=await EO(r);if(this.chip===null)throw new Xn(`Unexpected CHIP magic value ${r}. Failed to autodetect chip type.`);this.chip=a}}async detectChip(n="default_reset"){await this.connect(n),this.info("Detecting chip type... ",!1),this.chip!=null?this.info(this.chip.CHIP_NAME):this.info("unknown!")}async checkCommand(n="",t=null,o=new Uint8Array(0),i=0,s=3e3){this.debug("check_command "+n);const r=await this.command(t,o,i,void 0,s);return r[1].length>4?r[1]:r[0]}async memBegin(n,t,o,i){this.debug("mem_begin "+n+" "+t+" "+o+" "+i.toString(16));let s=this._appendArray(this._intToByteArray(n),this._intToByteArray(t));s=this._appendArray(s,this._intToByteArray(o)),s=this._appendArray(s,this._intToByteArray(i)),await this.checkCommand("enter RAM download mode",this.ESP_MEM_BEGIN,s)}async memBlock(n,t){let o=this._appendArray(this._intToByteArray(n.length),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,n);const i=this.checksum(n);await this.checkCommand("write to target RAM",this.ESP_MEM_DATA,o,i)}async memFinish(n){const t=n===0?1:0,o=this._appendArray(this._intToByteArray(t),this._intToByteArray(n));await this.checkCommand("leave RAM download mode",this.ESP_MEM_END,o,void 0,50)}async flashSpiAttach(n){const t=this._intToByteArray(n);await this.checkCommand("configure SPI flash pins",this.ESP_SPI_ATTACH,t)}async flashBegin(n,t){const o=Math.floor((n+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),i=this.chip.getEraseSize(t,n),s=new Date,r=s.getTime();let a=3e3;this.IS_STUB==!1&&(a=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,n)),this.debug("flash begin "+i+" "+o+" "+this.FLASH_WRITE_SIZE+" "+t+" "+n);let d=this._appendArray(this._intToByteArray(i),this._intToByteArray(o));d=this._appendArray(d,this._intToByteArray(this.FLASH_WRITE_SIZE)),d=this._appendArray(d,this._intToByteArray(t)),this.IS_STUB==!1&&(d=this._appendArray(d,this._intToByteArray(0))),await this.checkCommand("enter Flash download mode",this.ESP_FLASH_BEGIN,d,void 0,a);const l=s.getTime();return n!=0&&this.IS_STUB==!1&&this.info("Took "+(l-r)/1e3+"."+(l-r)%1e3+"s to erase flash block"),o}async flashDeflBegin(n,t,o){const i=Math.floor((t+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),s=Math.floor((n+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),r=new Date,a=r.getTime();let d,l;this.IS_STUB?(d=n,l=3e3):(d=s*this.FLASH_WRITE_SIZE,l=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,d)),this.info("Compressed "+n+" bytes to "+t+"...");let f=this._appendArray(this._intToByteArray(d),this._intToByteArray(i));f=this._appendArray(f,this._intToByteArray(this.FLASH_WRITE_SIZE)),f=this._appendArray(f,this._intToByteArray(o)),(this.chip.CHIP_NAME==="ESP32-S2"||this.chip.CHIP_NAME==="ESP32-S3"||this.chip.CHIP_NAME==="ESP32-C3"||this.chip.CHIP_NAME==="ESP32-C2")&&this.IS_STUB===!1&&(f=this._appendArray(f,this._intToByteArray(0))),await this.checkCommand("enter compressed flash mode",this.ESP_FLASH_DEFL_BEGIN,f,void 0,l);const g=r.getTime();return n!=0&&this.IS_STUB===!1&&this.info("Took "+(g-a)/1e3+"."+(g-a)%1e3+"s to erase flash block"),i}async flashBlock(n,t,o){let i=this._appendArray(this._intToByteArray(n.length),this._intToByteArray(t));i=this._appendArray(i,this._intToByteArray(0)),i=this._appendArray(i,this._intToByteArray(0)),i=this._appendArray(i,n);const s=this.checksum(n);await this.checkCommand("write to target Flash after seq "+t,this.ESP_FLASH_DATA,i,s,o)}async flashDeflBlock(n,t,o){let i=this._appendArray(this._intToByteArray(n.length),this._intToByteArray(t));i=this._appendArray(i,this._intToByteArray(0)),i=this._appendArray(i,this._intToByteArray(0)),i=this._appendArray(i,n);const s=this.checksum(n);this.debug("flash_defl_block "+n[0].toString(16)+" "+n[1].toString(16)),await this.checkCommand("write compressed data to flash after seq "+t,this.ESP_FLASH_DEFL_DATA,i,s,o)}async flashFinish(n=!1){const t=n?0:1,o=this._intToByteArray(t);await this.checkCommand("leave Flash mode",this.ESP_FLASH_END,o)}async flashDeflFinish(n=!1){const t=n?0:1,o=this._intToByteArray(t);await this.checkCommand("leave compressed flash mode",this.ESP_FLASH_DEFL_END,o)}async runSpiflashCommand(n,t,o){const a=this.chip.SPI_REG_BASE,d=a+0,l=a+this.chip.SPI_USR_OFFS,f=a+this.chip.SPI_USR1_OFFS,g=a+this.chip.SPI_USR2_OFFS,m=a+this.chip.SPI_W0_OFFS;let v;this.chip.SPI_MOSI_DLEN_OFFS!=null?v=async(Z,ye)=>{const Ce=a+this.chip.SPI_MOSI_DLEN_OFFS,Fe=a+this.chip.SPI_MISO_DLEN_OFFS;Z>0&&await this.writeReg(Ce,Z-1),ye>0&&await this.writeReg(Fe,ye-1)}:v=async(Z,ye)=>{const Ce=f,Fe=17,Le=8,We=Z===0?0:Z-1,De=(ye===0?0:ye-1)<<Le|We<<Fe;await this.writeReg(Ce,De)};const T=1<<18,P=28;if(o>32)throw new Xn("Reading more than 32 bits back from a SPI flash operation is unsupported");if(t.length>64)throw new Xn("Writing more than 64 bytes of data with one SPI command is unsupported");const w=t.length*8,C=await this.readReg(l),$=await this.readReg(g);let H=-2147483648,M;o>0&&(H|=268435456),w>0&&(H|=134217728),await v(w,o),await this.writeReg(l,H);let ee=7<<P|n;if(await this.writeReg(g,ee),w==0)await this.writeReg(m,0);else{if(t.length%4!=0){const ye=new Uint8Array(t.length%4);t=this._appendArray(t,ye)}let Z=m;for(M=0;M<t.length-4;M+=4)ee=this._byteArrayToInt(t[M],t[M+1],t[M+2],t[M+3]),await this.writeReg(Z,ee),Z+=4}for(await this.writeReg(d,T),M=0;M<10&&(ee=await this.readReg(d)&T,ee!=0);M++);if(M===10)throw new Xn("SPI command did not complete in time");const oe=await this.readReg(m);return await this.writeReg(l,C),await this.writeReg(g,$),oe}async readFlashId(){const t=new Uint8Array(0);return await this.runSpiflashCommand(159,t,24)}async eraseFlash(){this.info("Erasing flash (this may take a while)...");let n=new Date;const t=n.getTime(),o=await this.checkCommand("erase flash",this.ESP_ERASE_FLASH,void 0,void 0,this.CHIP_ERASE_TIMEOUT);n=new Date;const i=n.getTime();return this.info("Chip erase completed successfully in "+(i-t)/1e3+"s"),o}toHex(n){return Array.prototype.map.call(n,t=>("00"+t.toString(16)).slice(-2)).join("")}async flashMd5sum(n,t){const o=this.timeoutPerMb(this.MD5_TIMEOUT_PER_MB,t);let i=this._appendArray(this._intToByteArray(n),this._intToByteArray(t));i=this._appendArray(i,this._intToByteArray(0)),i=this._appendArray(i,this._intToByteArray(0));let s=await this.checkCommand("calculate md5sum",this.ESP_SPI_FLASH_MD5,i,void 0,o);return s instanceof Uint8Array&&s.length>16&&(s=s.slice(0,16)),this.toHex(s)}async readFlash(n,t,o=null){let i=this._appendArray(this._intToByteArray(n),this._intToByteArray(t));i=this._appendArray(i,this._intToByteArray(4096)),i=this._appendArray(i,this._intToByteArray(1024));const s=await this.checkCommand("read flash",this.ESP_READ_FLASH,i);if(s!=0)throw new Xn("Failed to read memory: "+s);let r=new Uint8Array(0);for(;r.length<t;){const a=await this.transport.read(this.FLASH_READ_TIMEOUT);if(a instanceof Uint8Array)a.length>0&&(r=this._appendArray(r,a),await this.transport.write(this._intToByteArray(r.length)),o&&o(a,r.length,t));else throw new Xn("Failed to read memory: "+a)}return r}async runStub(){if(this.syncStubDetected)return this.info("Stub is already running. No upload is necessary."),this.chip;this.info("Uploading stub...");let n=Nh(this.chip.ROM_TEXT),t=n.split("").map(function(a){return a.charCodeAt(0)});const o=new Uint8Array(t);n=Nh(this.chip.ROM_DATA),t=n.split("").map(function(a){return a.charCodeAt(0)});const i=new Uint8Array(t);let s=Math.floor((o.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),r;for(await this.memBegin(o.length,s,this.ESP_RAM_BLOCK,this.chip.TEXT_START),r=0;r<s;r++){const a=r*this.ESP_RAM_BLOCK,d=a+this.ESP_RAM_BLOCK;await this.memBlock(o.slice(a,d),r)}for(s=Math.floor((i.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),await this.memBegin(i.length,s,this.ESP_RAM_BLOCK,this.chip.DATA_START),r=0;r<s;r++){const a=r*this.ESP_RAM_BLOCK,d=a+this.ESP_RAM_BLOCK;await this.memBlock(i.slice(a,d),r)}this.info("Running stub..."),await this.memFinish(this.chip.ENTRY);for(let a=0;a<100;a++){const d=await this.transport.read(1e3,6);if(d[0]===79&&d[1]===72&&d[2]===65&&d[3]===73)return this.info("Stub running..."),this.IS_STUB=!0,this.FLASH_WRITE_SIZE=16384,this.chip}throw new Xn("Failed to start stub. Unexpected response")}async changeBaud(){this.info("Changing baudrate to "+this.baudrate);const n=this.IS_STUB?this.transport.baudrate:0,t=this._appendArray(this._intToByteArray(this.baudrate),this._intToByteArray(n)),o=await this.command(this.ESP_CHANGE_BAUDRATE,t);this.debug(o[0].toString()),this.info("Changed"),await this.transport.disconnect(),await this._sleep(50),await this.transport.connect(this.baudrate,this.serialOptions);try{let i=64;for(;i--;){try{await this.sync();break}catch(s){this.debug(s.message)}await this._sleep(10)}}catch(i){this.debug(i.message)}}async main(n="default_reset"){await this.detectChip(n);const t=await this.chip.getChipDescription(this);return this.info("Chip is "+t),this.info("Features: "+await this.chip.getChipFeatures(this)),this.info("Crystal is "+await this.chip.getCrystalFreq(this)+"MHz"),this.info("MAC: "+await this.chip.readMac(this)),await this.chip.readMac(this),typeof this.chip.postConnect<"u"&&await this.chip.postConnect(this),await this.runStub(),this.romBaudrate!==this.baudrate&&await this.changeBaud(),t}parseFlashSizeArg(n){if(typeof this.chip.FLASH_SIZES[n]>"u")throw new Xn("Flash size "+n+" is not supported by this chip type. Supported sizes: "+this.chip.FLASH_SIZES);return this.chip.FLASH_SIZES[n]}_updateImageFlashParams(n,t,o,i,s){if(this.debug("_update_image_flash_params "+o+" "+i+" "+s),n.length<8||t!=this.chip.BOOTLOADER_FLASH_OFFSET)return n;if(o==="keep"&&i==="keep"&&s==="keep")return this.info("Not changing the image"),n;const r=parseInt(n[0]);let a=parseInt(n[2]);const d=parseInt(n[3]);if(r!==this.ESP_IMAGE_MAGIC)return this.info("Warning: Image file at 0x"+t.toString(16)+" doesn't look like an image file, so not changing any flash settings."),n;i!=="keep"&&(a={qio:0,qout:1,dio:2,dout:3}[i]);let l=d&15;s!=="keep"&&(l={"40m":0,"26m":1,"20m":2,"80m":15}[s]);let f=d&240;o!=="keep"&&(f=this.parseFlashSizeArg(o));const g=a<<8|l+f;return this.info("Flash params set to "+g.toString(16)),parseInt(n[2])!==a<<8&&(n=n.substring(0,2)+(a<<8).toString()+n.substring(3)),parseInt(n[3])!==l+f&&(n=n.substring(0,3)+(l+f).toString()+n.substring(4)),n}async writeFlash(n){if(this.debug("EspLoader program"),n.flashSize!=="keep"){const i=this.flashSizeBytes(n.flashSize);for(let s=0;s<n.fileArray.length;s++)if(n.fileArray[s].data.length+n.fileArray[s].address>i)throw new Xn(`File ${s+1} doesn't fit in the available flash`)}this.IS_STUB===!0&&n.eraseAll===!0&&await this.eraseFlash();let t,o;for(let i=0;i<n.fileArray.length;i++){this.debug("Data Length "+n.fileArray[i].data.length),t=n.fileArray[i].data;const s=n.fileArray[i].data.length%4;if(s>0&&(t+="".substring(4-s)),o=n.fileArray[i].address,this.debug("Image Length "+t.length),t.length===0){this.debug("Warning: File is empty");continue}t=this._updateImageFlashParams(t,o,n.flashSize,n.flashMode,n.flashFreq);let r=null;n.calculateMD5Hash&&(r=n.calculateMD5Hash(t),this.debug("Image MD5 "+r));const a=t.length;let d;if(n.compress){const $=this.bstrToUi8(t);t=this.ui8ToBstr(vO($,{level:9})),d=await this.flashDeflBegin(a,t.length,o)}else d=await this.flashBegin(a,o);let l=0,f=0;const g=t.length;n.reportProgress&&n.reportProgress(i,0,g);let m=new Date;const v=m.getTime();let T=5e3;const P=new mO({chunkSize:1});let w=0;for(P.onData=function($){w+=$.byteLength};t.length>0;){this.debug("Write loop "+o+" "+l+" "+d),this.info("Writing at 0x"+(o+w).toString(16)+"... ("+Math.floor(100*(l+1)/d)+"%)");const $=this.bstrToUi8(t.slice(0,this.FLASH_WRITE_SIZE));if(n.compress){const H=w;P.push($,!1);const M=w-H;let ee=3e3;this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,M)>3e3&&(ee=this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,M)),this.IS_STUB===!1&&(T=ee),await this.flashDeflBlock($,l,T),this.IS_STUB&&(T=ee)}else throw new Xn("Yet to handle Non Compressed writes");f+=$.length,t=t.slice(this.FLASH_WRITE_SIZE,t.length),l++,n.reportProgress&&n.reportProgress(i,f,g)}this.IS_STUB&&await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR,T),m=new Date;const C=m.getTime()-v;if(n.compress&&this.info("Wrote "+a+" bytes ("+f+" compressed) at 0x"+o.toString(16)+" in "+C/1e3+" seconds."),r){const $=await this.flashMd5sum(o,a);if(new String($).valueOf()!=new String(r).valueOf())throw this.info("File  md5: "+r),this.info("Flash md5: "+$),new Xn("MD5 of file does not match data in flash!");this.info("Hash of data verified.")}}this.info("Leaving..."),this.IS_STUB&&(await this.flashBegin(0,0),n.compress?await this.flashDeflFinish():await this.flashFinish())}async flashId(){this.debug("flash_id");const n=await this.readFlashId();this.info("Manufacturer: "+(n&255).toString(16));const t=n>>16&255;this.info("Device: "+(n>>8&255).toString(16)+t.toString(16)),this.info("Detected flash size: "+this.DETECTED_FLASH_SIZES[t])}async getFlashSize(){this.debug("flash_id");const t=await this.readFlashId()>>16&255;return this.DETECTED_FLASH_SIZES_NUM[t]}async hardReset(){await this.transport.setRTS(!0),await this._sleep(100),await this.transport.setRTS(!1)}async softReset(){if(!this.IS_STUB)await this.flashBegin(0,0),await this.flashFinish(!1);else{if(this.chip.CHIP_NAME!="ESP8266")throw new Xn("Soft resetting is currently only supported on ESP8266");await this.command(this.ESP_RUN_USER_CODE,void 0,void 0,!1)}}}const Rm=e=>{const n=K(!1),t=K(null),o=B=>{t.value=B},i=K(!0),s=K(""),r=K(""),a=K(""),d=K(""),l=K([]),f=K(0),g=K(""),m=K(!1),v=K(0),T=K(""),P=K(null),w=K(!1),C=K(""),$=K(!1),H=K(!1),M=K(0),ee=e.preferLongPoll===!0,oe=5e3,Z=200,ye=6;let Ce=null,Fe=null,Le=!1,We="",ht=0,De=0,Ye=null,Q=null,we=null,Oe=null;const Qe=[],Ke=A(()=>{var B,X;return!!(((B=e.canInstall)==null?void 0:B.value)??((X=e.canInstall)==null?void 0:X.call(e))??!1)}),st=A(()=>{var B,X;return!!(((B=e.canUseOta)==null?void 0:B.value)??((X=e.canUseOta)==null?void 0:X.call(e))??!1)}),vt=A(()=>{var B,X;return!!(((B=e.canLogs)==null?void 0:B.value)??((X=e.canLogs)==null?void 0:X.call(e))??!1)}),yt=A(()=>["queued","running"].includes(r.value)),dt=A(()=>["queued","running"].includes(a.value)),mt=A(()=>!!s.value&&dt.value&&!$.value),Ct=A(()=>n.value&&T.value==="download"&&w.value&&r.value==="success"),de=A(()=>!!n.value&&!$.value),me=A(()=>C.value||"Compile Console"),ke=A(()=>r.value?r.value==="queued"?"Queued":r.value==="running"?"Running":r.value==="success"?"Success":r.value==="failed"?"Failed":r.value==="canceled"?"Canceled":r.value:"Idle"),Se=A(()=>r.value==="running"?"job-state running":r.value==="queued"?"job-state queued":r.value==="success"?"job-state success":r.value==="failed"||r.value==="canceled"?"job-state failed":"job-state"),Me=A(()=>"serial"in navigator),O=A(()=>window.isSecureContext===!0),j=A(()=>{const B=document.permissionsPolicy;if(!B||typeof B.allowsFeature!="function")return!0;try{return B.allowsFeature("serial")}catch{return!0}}),W=B=>{typeof e.setError=="function"&&e.setError(B)},ae=()=>{typeof e.clearError=="function"&&e.clearError()},he=()=>{var B;return String(((B=e.getYamlName)==null?void 0:B.call(e))||"").trim()},fe=()=>{var B;return String(((B=e.getDeviceHost)==null?void 0:B.call(e))||"").trim()},pe=async(B,X)=>{try{const Ee=await B.json();if(Ee&&typeof Ee.message=="string"&&Ee.message.trim())return Ee.message}catch{}return`${X} (HTTP ${B.status})`},Ae=async(B,X={})=>e.fetchApi(B,X),re=B=>e.streamUrl(B),se=B=>String(B).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;"),He=B=>{const X=String(B||"");return X.trim()?!!((X.match(/\|/g)||[]).length>=2&&/\|\s*$/.test(X)||/^\s*[+\-|=]+\s*$/.test(X)&&/[+|]/.test(X)):!1},Re=B=>{const X=["compile-line"],Ee=String(B||"");He(Ee)&&X.push("line-table");const D=Ee.match(/^\[[0-9:.]+\]\[([A-Z])\]/);if(D){const p=D[1];return p==="E"?X.push("line-error"):p==="W"?X.push("line-warn"):p==="I"?X.push("line-info"):p==="D"?X.push("line-debug"):p==="C"&&X.push("line-success"),X}return/^\s*(error|failed|exception)\b/i.test(Ee)?X.push("line-error"):/^\s*(warn|warning)\b/i.test(Ee)?X.push("line-warn"):/^\s*(success|ok)\b/i.test(Ee)?X.push("line-success"):/^\s*info\b/i.test(Ee)&&X.push("line-info"),X},k=B=>{const X=String(B||""),Ee=X.match(/^\[([0-9:.]+)\]\[([A-Z])\](.*)$/);if(Ee){const[,D,p,F]=Ee,ve=se(p);return`<span class="log-ts">[${se(D)}]</span><span class="log-rest log-rest-${ve}">${se(`[${p}]${F}`)}</span>`}return se(X)},N=()=>{!i.value||!t.value||(t.value.scrollTop=t.value.scrollHeight)},I=()=>{Oe||(Oe=requestAnimationFrame(()=>{Oe=null,N()}))},Y=()=>{if(we=null,!Qe.length)return;Qe.splice(0,Z).forEach(X=>{const Ee=String(X??""),D=f.value;f.value+=1,l.value.push({id:D,className:Re(Ee).join(" "),html:k(Ee)})}),l.value.length>oe&&l.value.splice(0,l.value.length-oe),I(),Qe.length&&(we=requestAnimationFrame(Y))},ie=B=>{!Array.isArray(B)||!B.length||(Qe.push(...B),we||(we=requestAnimationFrame(Y)))},_e=B=>{ie([B])},Ie=()=>{Qe.length=0,we&&(cancelAnimationFrame(we),we=null),Oe&&(cancelAnimationFrame(Oe),Oe=null)},Ue=()=>{Ie(),l.value=[],f.value=0},qe=()=>{Fe&&(clearInterval(Fe),Fe=null)},Be=()=>{Ye&&(clearTimeout(Ye),Ye=null),Q&&(clearTimeout(Q),Q=null),Ce&&(Ce.close(),Ce=null),m.value=!1},lt=()=>{Le=!1,We="",ht+=1},ot=()=>{T.value="",P.value=null,w.value=!1},it=B=>{const X=B!=null&&B.job&&typeof B.job=="object"?B.job:B;if(!(!X||typeof X!="object")){if(X.id&&(s.value=X.id),X.state&&(a.value=X.state,!$.value&&g.value!=="flash")){const Ee=T.value==="serial"&&g.value==="compile"&&X.state==="success";r.value=Ee?"running":X.state}typeof X.error_summary=="string"&&(d.value=X.error_summary)}},at=async B=>{if(B)try{const X=await Ae(`api/jobs/${B}`);if(!X.ok)return;const Ee=await X.json();it(Ee)}catch{}},Rt=async(B,X)=>{if(!B)return!1;try{const Ee=await Ae(`api/jobs/${B}/tail-wait?since=${encodeURIComponent(v.value)}&timeout=5&limit=200`);if(!Ee.ok)return!1;const D=await Ee.json();if(!Le||ht!==X||We!==B)return!1;const F=Array.isArray(D==null?void 0:D.lines)?D.lines:[];F.length&&ie(F);const ve=Number((D==null?void 0:D.next_seq)||0);v.value=Number.isFinite(ve)?ve:v.value,it((D==null?void 0:D.job)||D);const Te=D!=null&&D.job&&typeof D.job=="object"?D.job:D;return(Te==null?void 0:Te.state)&&["queued","running"].includes(Te.state)}catch{return!1}},Vt=B=>{if(!B||H.value||Le&&We===B)return;lt(),Le=!0,We=B;const X=ht;m.value=!1,(async()=>{for(;Le&&ht===X&&We===B&&await Rt(B,X););ht!==X||We!==B||(Le=!1,We="",await at(B))})()},Ot=B=>{qe(),Fe=setInterval(()=>{at(B)},1500)},$t=B=>{if(Be(),lt(),!B)return;De+=1;const X=De;if(M.value=0,H.value=!1,ee){Vt(B);return}const Ee=re(`api/jobs/${B}/stream`);Ce=new EventSource(Ee,{withCredentials:!0}),m.value=!1,Ce.addEventListener("log",D=>{X===De&&(H.value=!0,lt(),_e(D.data||""))}),Ce.addEventListener("done",async D=>{if(X===De){Be();try{const p=JSON.parse(D.data||"{}");it(p)}catch{}await at(B)}}),Ce.onerror=async()=>{if(X===De&&(Be(),!!dt.value)){if(M.value+=1,!H.value&&M.value>=2){Vt(B);return}if(M.value>ye){d.value="Log stream disconnected. Check network/proxy path.";return}if(m.value=!0,await at(B),X===De){if(!dt.value){m.value=!1;return}Q=setTimeout(()=>{X===De&&dt.value&&$t(B)},1500)}}},Ye=setTimeout(()=>{X===De&&!H.value&&dt.value&&Vt(B)},2e3)},Ht=async()=>{if(mt.value)try{const B=await Ae(`api/jobs/${s.value}/cancel`,{method:"POST"});if(!B.ok)throw new Error(await pe(B,"Cancel failed"));await at(s.value)}catch{}},At=async()=>{de.value&&(await Ht(),Be(),lt(),qe(),n.value=!1,C.value="",s.value="",a.value="",r.value="",d.value="",Ue(),$.value=!1,ot())},ln=()=>{i.value=!i.value,i.value&&Ao(N)},on=async({action:B,device:X="",resetConsole:Ee=!0,introLine:D=""})=>{if(!Ke.value||yt.value||$.value)return;const p=he();if(!p)return;if(B==="logs"?C.value="Logs Console":B==="ota"?C.value="OTA Console":T.value==="serial"?C.value="WebSerial Console":C.value="Compile Console",n.value=!0,i.value=!0,s.value="",a.value="queued",r.value="queued",d.value="",g.value=B,v.value=0,M.value=0,H.value=!1,Ee&&Ue(),D&&_e(D),B!=="logs"&&typeof e.prepareBeforeJob=="function"){_e("INFO Preparing project and device registration...");try{if(!await e.prepareBeforeJob({action:B}))throw new Error("Install preparation did not complete.")}catch(ve){const Te=ve instanceof Error?ve.message:"Install preparation failed";r.value="failed",a.value="failed",d.value=Te,_e(`ERROR ${Te}`),ot();return}}try{const ve=await Ae("api/install",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yaml:p,action:B,...X?{device:X}:{}})});if(!ve.ok)throw new Error(await pe(ve,`${B.toUpperCase()} start failed`));const Te=await ve.json(),Pe=Te!=null&&Te.job&&typeof Te.job=="object"?Te.job:null;s.value=(Pe==null?void 0:Pe.id)||(Te==null?void 0:Te.job_id)||"";const R=(Pe==null?void 0:Pe.state)||(Te==null?void 0:Te.state)||"queued";if(a.value=R,r.value=R,d.value="",!s.value)throw new Error("Missing job id");Ot(s.value),$t(s.value)}catch(ve){a.value="failed",r.value="failed",d.value=ve instanceof Error?ve.message:`${B.toUpperCase()} start failed`,_e(`ERROR ${d.value}`),ot()}},In=async()=>{const B=P.value;if(!B)throw new Error("Serial port is not selected.");$.value=!0,a.value="success",r.value="running",g.value="flash",d.value="";let X=null;try{_e("INFO Downloading factory firmware from add-on...");const Ee=await Ae(`api/firmware?yaml=${encodeURIComponent(he())}&variant=factory`);if(Ee.status===404)throw new Error("Factory firmware not found. Compile project first.");if(!Ee.ok)throw new Error(await pe(Ee,"Firmware download failed"));const D=await Ee.arrayBuffer(),p=new Uint8Array(D);if(!p.byteLength)throw new Error("Downloaded firmware is empty.");_e("INFO Starting flash..."),X=new Tm(B),X.device||(X.device=B);const F={clean:()=>{},write:Pe=>{var R;return _e(((R=Pe==null?void 0:Pe.toString)==null?void 0:R.call(Pe))||String(Pe))},writeLine:Pe=>{var R;return _e(((R=Pe==null?void 0:Pe.toString)==null?void 0:R.call(Pe))||String(Pe))}},ve=new SO({transport:X,baudrate:921600,terminal:F}),Te=ve.ui8ToBstr?ve.ui8ToBstr(p):String.fromCharCode(...p);await ve.main(),await ve.writeFlash({fileArray:[{data:Te,address:0}],flashSize:"keep",flashMode:"keep",flashFreq:"keep",eraseAll:!1,compress:!0}),r.value="success",_e("INFO Flash completed successfully.")}catch(Ee){r.value="failed",d.value=Ee instanceof Error?Ee.message:"Flash failed",_e(`ERROR ${d.value}`)}finally{if(X)try{await X.disconnect()}catch{}$.value=!1,ot()}},qt=async(B,X)=>{if(Be(),lt(),qe(),B!=="success"){X==="compile"&&ot(),g.value="";return}if(X==="compile"){if(T.value==="serial"){g.value="flash",r.value="running",_e("INFO Compile successful. Starting serial flash..."),await In();return}if(T.value==="download"){w.value=!0,_e("INFO Compile successful. Use Download button to get firmware."),g.value="";return}}(X==="ota"||X==="flash")&&ot(),g.value=""};nt(()=>a.value,async(B,X)=>{if(B===X||!["success","failed","canceled"].includes(B))return;const Ee=g.value;!Ee||Ee==="flash"||await qt(B,Ee)}),nt(()=>r.value,async(B,X)=>{B!==X&&["success","failed","canceled"].includes(B)&&(yt.value||g.value==="flash"&&await qt(B,"flash"))});const Mt=async()=>{if(!Ke.value||yt.value||$.value)return;if(!Me.value){W("Your browser does not support Web Serial.");return}if(!O.value){W("Web Serial requires HTTPS or localhost.");return}if(!j.value){W("Web Serial is blocked by Permissions-Policy.");return}let B=null;try{B=await navigator.serial.requestPort()}catch(X){if((X==null?void 0:X.name)==="NotFoundError")return;W(X instanceof Error?X.message:"Port selection failed");return}T.value="serial",P.value=B,w.value=!1,await on({action:"compile",introLine:`INFO Selected serial port. Starting compile for ${he()}`})},cn=async()=>{ae();try{const B=he(),X=await Ae(`api/firmware?yaml=${encodeURIComponent(B)}&variant=factory`);if(X.status===404)throw new Error("Factory firmware not found. Compile project first.");if(!X.ok)throw new Error(await pe(X,"Firmware download failed"));const Ee=await X.blob(),D=URL.createObjectURL(Ee),p=document.createElement("a");p.href=D,p.download=B.replace(/\.yaml$/i,".bin"),p.click(),URL.revokeObjectURL(D),_e("INFO Firmware download started.")}catch(B){const X=B instanceof Error?B.message:"Firmware download failed";n.value?(d.value=X,_e(`ERROR ${X}`)):W(X)}},hn=async()=>{await Mt()},gn=async()=>{const B=fe();if(!B||!st.value){W("Device must be online for OTA install.");return}await on({action:"ota",device:B.trim(),introLine:`INFO Starting OTA install for ${he()}`})},xn=async()=>{if(!vt.value)return;const B=fe();if(!B){W("No device host found for logs.");return}ot(),await on({action:"logs",device:B,introLine:`INFO Starting logs for ${he()}`})},un=async()=>{T.value="download",w.value=!1,await on({action:"compile",introLine:`INFO Starting compile before firmware download for ${he()}`})},G=()=>{Be(),lt(),qe(),Ie()};return go(()=>{G()}),{compileModalOpen:n,setCompileConsoleElement:o,compileAutoScroll:i,compileJobState:r,compileLogLines:l,compileIsReconnecting:m,installPlanDownloadReady:w,localFlashRunning:$,compileIsActive:yt,canDownloadCompiledBinary:Ct,canCloseCompile:de,terminalTitle:me,compileStateLabel:ke,compileStateClass:Se,toggleCompileAutoscroll:ln,closeCompileModal:At,handleInstallSerialPort:hn,handleInstallOta:gn,startLogs:xn,handleInstallDownload:un,downloadBinary:cn,dispose:G}},xO=async()=>{const n=await fetch("./gpio/gpio-map.json");if(!n.ok)throw new Error(`GPIO map load failed: ${n.status}`);return n.json()},kO=(e,n)=>e==="esp8266"?"esp8266":e!=="esp32"?"":{esp32:"esp32",esp32s2:"esp32-s2",esp32s3:"esp32-s3",esp32c2:"esp32-c2",esp32c3:"esp32-c3",esp32c5:"esp32-c5",esp32c6:"esp32-c6",esp32c61:"esp32-c6",esp32h2:"esp32-h2",esp32p4:"esp32-p4"}[n]||"",Fm=e=>typeof e=="string"?e:(e==null?void 0:e.id)||"",br=e=>e===null||["string","number","boolean"].includes(typeof e),CO=e=>e?typeof e=="string"?{type:e}:e:{type:""},Om=e=>!!(e!=null&&e.dependsOn||e!=null&&e.globalDependsOn),Lm=e=>{const n=e==null?void 0:e.emitYAML;return n==="never"||n==="always"||n==="visible"||n==="dependsOn"?n:Om(e)?"dependsOn":"visible"},Ad=(e,n)=>{if(e===n)return!0;if(Array.isArray(e)&&Array.isArray(n))return e.length!==n.length?!1:e.every((t,o)=>Ad(t,n[o]));if(e&&n&&typeof e=="object"&&typeof n=="object"&&!Array.isArray(e)&&!Array.isArray(n)){const t=Object.keys(e),o=Object.keys(n);return t.length!==o.length?!1:t.every(i=>Ad(e[i],n[i]))}return!1},AO=e=>{if((e==null?void 0:e.default)!==void 0)return e.default;if((e==null?void 0:e.type)==="boolean")return!1},$O=(e,n)=>{if(!e||Lm(e)==="always"||e.required||e.type!=="boolean"&&e.type!=="select")return!1;const t=AO(e);return t===void 0?!1:Ad(n,t)},si=(e,n)=>{const t=CO(n),o=t.type||n;return e===null?"null":typeof e=="boolean"?e?"true":"false":typeof e=="number"?String(e):typeof e=="string"?e.startsWith("!secret")||t.suppressQuotes||o==="lambda"||o==="id"||o==="id_ref"||o==="slug"?e:o==="text"||o==="icon"||o==="ssid"||o==="password"?`"${e.replace(/"/g,'\\"')}"`:e:String(e)},IO=e=>{if(typeof e=="number")return String(e);if(typeof e=="boolean")return e?"true":"false";if(typeof e!="string")return si(e);const n=e.trim();return n?/^-?\d+(?:\.\d+)?$/.test(n)?n:`"${n.replace(/"/g,'\\"')}"`:'""'},TO=(e,n,t)=>{e.forEach(o=>{if(!o||typeof o!="object")return;const i=o.key;if(!i||typeof i!="string")return;const s=o.value;if(s===void 0||s===""){t.push(`${" ".repeat(n)}${i}:`);return}t.push(`${" ".repeat(n)}${i}: ${IO(s)}`)})},Dh=(e,n,t)=>{e.forEach(o=>{o==null||o===""||t.push(`${" ".repeat(n)}- ${o}`)})},RO=(e,n,t)=>{e.forEach(o=>{if(!(o!=null&&o.type))return;const i=o.style||"object",s=o.config||{};if(i==="scalar"){const r=s.value;if(r===void 0||r===""){t.push(`${" ".repeat(n)}- ${o.type}:`);return}if(o.valueType==="lambda"&&typeof r=="string"&&r.includes(`
`)){t.push(`${" ".repeat(n)}- ${o.type}: |-`),r.split(`
`).forEach(a=>{t.push(`${" ".repeat(n+4)}${a}`)});return}t.push(`${" ".repeat(n)}- ${o.type}: ${si(r,o.valueType)}`);return}if(i==="scalar_or_object"){const{value:r,...a}=s;if(!(Object.keys(a).length>0)&&r!==void 0){t.push(`${" ".repeat(n)}- ${o.type}: ${si(r,o.valueType)}`);return}}if(i==="list"){const r=o.valueKey||"values",a=s[r]||[];t.push(`${" ".repeat(n)}- ${o.type}:`),Ms(a,{type:"text"},n+4,t,s);return}t.push(`${" ".repeat(n)}- ${o.type}:`),es(s,null,n+4,t,s)})},Mm=(e,n,t,o,i)=>{e.forEach(s=>{if(!(s!=null&&s.type))return;const r=s.config||{},a=Array.isArray(s.fields)?s.fields:[],d=a.filter(l=>r[l.key]!==void 0);if(d.length===1&&br(r[d[0].key])){const l=d[0],f=r[l.key];if(l.type==="lambda"&&typeof f=="string"&&/[\r\n]/.test(f)){t.push(`${" ".repeat(n)}- ${s.type}: |-`),f.split(/\r?\n/).forEach(g=>{t.push(`${" ".repeat(n+4)}${g}`)});return}t.push(`${" ".repeat(n)}- ${s.type}: ${si(f,l.type)}`);return}t.push(`${" ".repeat(n)}- ${s.type}:`),a.forEach(l=>{let f=r[l.key];if(f===""&&(f=void 0),f===void 0){l.required&&t.push(`${" ".repeat(n+2)}${l.key}:`);return}if(l.type==="lambda"&&typeof f=="string"&&/[\r\n]/.test(f)){t.push(`${" ".repeat(n+2)}${l.key}: |-`),f.split(/\r?\n/).forEach(g=>{t.push(`${" ".repeat(n+4)}${g}`)});return}if(br(f)){t.push(`${" ".repeat(n+2)}${l.key}: ${si(f,l.type)}`);return}if(Array.isArray(f)){if(!f.length)return;t.push(`${" ".repeat(n+2)}${l.key}:`),Ms(f,l.item,n+4,t,f,i);return}t.push(`${" ".repeat(n+2)}${l.key}:`),es(f,l.fields,n+4,t,o,i)})})},FO=(e,n,t,o,i)=>{(e||[]).forEach((s,r)=>{if(!s||typeof s!="object")return;const a=s.priority!==void 0&&s.priority!=="",d=Array.isArray(s.then)&&s.then.length>0;r===0&&a?t.push(`${" ".repeat(n)}- priority: ${si(s.priority)}`):t.push(`${" ".repeat(n)}-`),d&&(t.push(`${" ".repeat(n+2)}then:`),Mm(s.then,n+4,t,o,i))})},es=(e,n,t,o,i,s)=>{const r=e||{},a=Array.isArray(n)?n:[],d=new Set;a.forEach(l=>{var w,C;const f=l.key;if(!f)return;const g=Lm(l),m=g==="always";if(g==="never"){d.add(f);return}const v=Ic(l,r,a,s);if(g==="dependsOn"&&Om(l)&&!v){d.add(f);return}if(!m&&g==="visible"&&!v){d.add(f);return}d.add(f);let T=r[f];if(T===""&&(T=void 0),T===void 0){const $=tf(l,r,i);$!==void 0&&$!==""&&(T=$)}if(T===void 0){if(!l.required&&!m)return;if(l.type==="yaml"){o.push(`${" ".repeat(t)}${f}:`);return}if(l.default!==void 0){if(br(l.default)){o.push(`${" ".repeat(t)}${f}: ${si(l.default,l)}`);return}if(Array.isArray(l.default)){o.push(`${" ".repeat(t)}${f}:`),Ms(l.default,l.item,t+2,o,i,s);return}if(l.type==="object"){o.push(`${" ".repeat(t)}${f}:`),es(l.default,l.fields,t+2,o,i,s);return}}if(l.type==="object"){o.push(`${" ".repeat(t)}${f}:`),es({},l.fields,t+2,o,i,s);return}if(l.type==="list"){o.push(`${" ".repeat(t)}${f}:`);return}o.push(`${" ".repeat(t)}${f}:`);return}if(l.type==="raw_yaml"){const $=typeof T=="string"?T.trimEnd():"";if(!$){(l.required||m)&&o.push(`${" ".repeat(t)}${f}:`);return}$.split(/\r?\n/).forEach(H=>{o.push(`${" ".repeat(t)}${H}`)});return}if(l.type==="yaml"){const $=typeof T=="string"?T.trimEnd():"";if(!$){(l.required||m)&&o.push(`${" ".repeat(t)}${f}:`);return}o.push(`${" ".repeat(t)}${f}:`),$.split(/\r?\n/).forEach(H=>{o.push(`${" ".repeat(t+2)}${H}`)});return}if($O(l,T))return;if(br(T)){if(l.suppressDefault&&l.default!==void 0&&T===l.default)return;if(l.type==="lambda"&&typeof T=="string"&&/[\r\n]/.test(T)){o.push(`${" ".repeat(t)}${f}: |-`),T.split(/\r?\n/).forEach($=>{o.push(`${" ".repeat(t+2)}${$}`)});return}o.push(`${" ".repeat(t)}${f}: ${si(T,l)}`);return}if(f==="filters"&&Array.isArray(T)&&T.some($=>$==null?void 0:$.type)){o.push(`${" ".repeat(t)}${f}:`),RO(T,t+2,o);return}if(((w=l.item)==null?void 0:w.extends)==="base_actions.json"&&Array.isArray(T)){o.push(`${" ".repeat(t)}${f}:`),Mm(T,t+2,o,i,s);return}if(Array.isArray(T)){if(T.length===0){(l.required||m)&&o.push(`${" ".repeat(t)}${f}:`);return}if(l.rawList){o.push(`${" ".repeat(t)}${f}:`),Dh(T,t+2,o);return}if(["on_boot","on_shutdown","on_loop"].includes(f)){o.push(`${" ".repeat(t)}${f}:`),FO(T,t+2,o,i,s);return}if(f==="includes"||f==="includes_c"||f==="libraries"){o.push(`${" ".repeat(t)}${f}:`),Dh(T,t+2,o);return}if(((C=l.item)==null?void 0:C.type)==="object"&&Array.isArray(l.item.fields)&&l.item.fields.some($=>$.key==="key")&&l.item.fields.some($=>$.key==="value")){o.push(`${" ".repeat(t)}${f}:`),TO(T,t+2,o);return}o.push(`${" ".repeat(t)}${f}:`),Ms(T,l.item,t+2,o,i,s);return}const P=[];if(es(T,l.fields,t+2,P,i,s),!P.length){(l.required||m)&&o.push(`${" ".repeat(t)}${f}:`);return}o.push(`${" ".repeat(t)}${f}:`),o.push(...P)}),Object.entries(r).forEach(([l,f])=>{if(!l.startsWith("_")&&!d.has(l)&&f!==void 0){if(br(f)){o.push(`${" ".repeat(t)}${l}: ${si(f)}`);return}if(Array.isArray(f)){if(f.length===0)return;o.push(`${" ".repeat(t)}${l}:`),Ms(f,null,t+2,o,i,s);return}o.push(`${" ".repeat(t)}${l}:`),es(f,null,t+2,o,i,s)}})},Ho=(e,n,t=0,o=e,i=null)=>{const s=[];return es(e,n,t,s,o,i),s},Ms=(e,n,t,o,i,s)=>{e.forEach(r=>{if(r===void 0)return;if(br(r)){o.push(`${" ".repeat(t)}- ${si(r,n||(n==null?void 0:n.type))}`);return}if(Array.isArray(r)){if(r.length===0)return;o.push(`${" ".repeat(t)}-`),Ms(r,n==null?void 0:n.item,t+2,o,i,s);return}const a=[];if(es(r||{},n==null?void 0:n.fields,t+2,a,i,s),a.length===0){o.push(`${" ".repeat(t)}- {}`);return}const d=`${" ".repeat(t)}- `,l=a[0];o.push(`${d}${l.slice(t+2)}`),a.slice(1).forEach(f=>o.push(f))})},Nm=e=>{if(!e||typeof e!="string")return"";const n=e.trim(),t=n.startsWith("mdi:")?n.slice(4):n;return t?`mdi_${t.replace(/[^a-z0-9]/gi,"_")}`:""},cf=e=>String(e??"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),Ol=e=>cf(e).replace(/%/g,"%%"),Dm=({source:e,file:n,family:t,variant:o,size:i})=>{const s=Math.max(1,Math.round(i||12));return e==="google"?t?`google|${t}|${o||"regular"}|${s}`:"":n?`local|${n}|${s}`:""},Pm=e=>!e||e.type!=="text"?"":Dm({source:e.fontSource||"local",file:e.fontFile||"",family:e.fontFamily||"",variant:e.fontVariant||"regular",size:e.h||12}),dr=(e,n)=>{if(!e||e.type!=="graph")return"";const t=n==="value"?"legendValue":"legendName",o=e[`${t}FontSource`]||"local",i=e[`${t}FontFile`]||"",s=e[`${t}FontFamily`]||"",r=e[`${t}FontVariant`]||"regular",a=e[`${t}FontSize`]||(n==="value"?8:10);return Dm({source:o,file:i,family:s,variant:r,size:a})},jm=e=>{if(!e||e.type!=="image")return"";const n=e.image||"";if(!n)return"";const t=Ar(e),o=Math.max(1,Math.round(e.w||1)),i=Math.max(1,Math.round(e.h||1));return[n,o,i,t.imageType,t.imageTransparency,t.imageInvertAlpha?"1":"0",t.imageDither,t.imageByteOrder].join("|")},Bm=e=>{if(!e||e.type!=="animation")return"";const n=e.animationFile||"";if(!n)return"";const t=$r(e),o=Math.max(1,Math.round(e.w||1)),i=Math.max(1,Math.round(e.h||1)),s=e.autoAnimate?"1":"0",r=e.intervalMs??"",a=e.loopEnabled?"1":"0",d=e.loopStart??"",l=e.loopEnd??"",f=e.loopRepeat??"";return[n,o,i,t.animationType,t.animationTransparency,t.animationInvertAlpha?"1":"0",t.animationDither,t.animationByteOrder,s,r,a,d,l,f].join("|")},Um=e=>{if(!e||e.type!=="graph")return"";const n=e.graphId||"",t=Math.max(1,Math.round(e.w||1)),o=Math.max(1,Math.round(e.h||1)),i=e.duration||"1h",s=e.xGrid||"",r=e.yGrid??"",a=e.minRange??"",d=e.maxRange??"",l=e.minValue??"",f=e.maxValue??"",g=e.border===!1?"0":"1",m=e.useTraces?"1":"0",v=e.sensor||"",T=e.lineType||"",P=e.lineThickness??"",w=e.continuous?"1":"0",C=e.color||"",$=(e.traces||[]).map(ht=>ht?[ht.sensor||"",ht.name||"",ht.lineType||"",ht.lineThickness??"",ht.continuous?"1":"0",ht.color||""].join("|"):"").join(";"),H=e.legendEnabled?"1":"0",M=dr(e,"name"),ee=dr(e,"value"),oe=e.legendWidth??"",Z=e.legendHeight??"",ye=e.legendBorder===!1?"0":"1",Ce=e.legendShowLines===!1?"0":"1",Fe=e.legendShowValues||"AUTO",Le=e.legendShowUnits===!1?"0":"1",We=e.legendDirection||"AUTO";return[n,t,o,i,g,s,r,a,d,l,f,m,v,T,P,w,C,$,H,M,ee,oe,Z,ye,Ce,Fe,Le,We].join("~")},zm=(e,n,t)=>{const o=new Map,i=new Map,s=new Map,r=new Map,a=new Map,d=new Map,l=new Map;return(e||[]).forEach(f=>{var P;const g=Fm(f);if(!g)return;const m=n[g];if(!m||m.domain!=="display")return;const v=(P=f==null?void 0:f.config)==null?void 0:P._display_builder,T=Array.isArray(v==null?void 0:v.elements)?v.elements:[];T.length&&(i.set(f,T),T.filter(w=>(w==null?void 0:w.type)==="icon"&&(w==null?void 0:w.icon)).forEach(w=>{const C=Nm(w.icon);if(!C)return;const $=t==null?void 0:t[C];if(!$)return;const H=typeof w.icon=="string"?w.icon.trim():"",M=H?H.startsWith("mdi:")?H:`mdi:${H}`:"";M&&!s.has($)&&s.set($,M);const ee=Math.max(1,Math.round(w.h||16));o.has(ee)||o.set(ee,new Set),o.get(ee).add($)}),T.filter(w=>(w==null?void 0:w.type)==="text").forEach(w=>{const C=Pm(w);if(!C||r.has(C))return;const $=Math.max(1,Math.round(w.h||12));if(w.fontSource==="google"){const M=w.fontFamily||"",ee=w.fontVariant||"regular";if(!M)return;r.set(C,{source:"google",family:M,variant:ee,size:$});return}const H=w.fontFile||"";H&&r.set(C,{source:"local",file:H,size:$})}),T.filter(w=>(w==null?void 0:w.type)==="graph"&&(w==null?void 0:w.legendEnabled)).forEach(w=>{const C=dr(w,"name");if(C&&!r.has(C)){const H=w.legendNameFontSource||"local",M=Math.max(1,Math.round(w.legendNameFontSize||10));if(H==="google"){const ee=w.legendNameFontFamily||"",oe=w.legendNameFontVariant||"regular";ee&&r.set(C,{source:"google",family:ee,variant:oe,size:M})}else{const ee=w.legendNameFontFile||"";ee&&r.set(C,{source:"local",file:ee,size:M})}}const $=dr(w,"value");if($&&!r.has($)){const H=w.legendValueFontSource||"local",M=Math.max(1,Math.round(w.legendValueFontSize||8));if(H==="google"){const ee=w.legendValueFontFamily||"",oe=w.legendValueFontVariant||"regular";ee&&r.set($,{source:"google",family:ee,variant:oe,size:M})}else{const ee=w.legendValueFontFile||"";ee&&r.set($,{source:"local",file:ee,size:M})}}}),T.filter(w=>(w==null?void 0:w.type)==="image").forEach(w=>{const C=jm(w);if(!C||a.has(C))return;const $=Ar(w),H=Math.max(1,Math.round(w.w||1)),M=Math.max(1,Math.round(w.h||1));a.set(C,{file:w.image,w:H,h:M,type:$.imageType,transparency:$.imageTransparency,invertAlpha:$.imageInvertAlpha,dither:$.imageDither,byteOrder:$.imageByteOrder})}),T.filter(w=>(w==null?void 0:w.type)==="animation").forEach(w=>{const C=Bm(w);if(!C||l.has(C))return;const $=$r(w),H=Math.max(1,Math.round(w.w||1)),M=Math.max(1,Math.round(w.h||1));l.set(C,{file:w.animationFile,id:w.animationId||"",resizeW:H,resizeH:M,type:$.animationType,transparency:$.animationTransparency,invertAlpha:$.animationInvertAlpha,dither:$.animationDither,byteOrder:$.animationByteOrder,autoAnimate:!!w.autoAnimate,intervalMs:w.intervalMs??"",loopEnabled:!!w.loopEnabled,loopStart:w.loopStart??"",loopEnd:w.loopEnd??"",loopRepeat:w.loopRepeat??""})}),T.filter(w=>(w==null?void 0:w.type)==="graph").forEach(w=>{const C=Um(w);!C||d.has(C)||d.set(C,{graphId:w.graphId||"",displayType:m.displayType||"monochrome",width:Math.max(1,Math.round(w.w||1)),height:Math.max(1,Math.round(w.h||1)),duration:w.duration||"1h",border:w.border!==!1,xGrid:w.xGrid||"",yGrid:w.yGrid??"",minRange:w.minRange??"",maxRange:w.maxRange??"",minValue:w.minValue??"",maxValue:w.maxValue??"",useTraces:!!w.useTraces,sensor:w.sensor||"",lineType:w.lineType||"",lineThickness:w.lineThickness??"",continuous:!!w.continuous,color:w.color||"",traces:w.traces||[],legendEnabled:!!w.legendEnabled,legendNameFontKey:dr(w,"name"),legendValueFontKey:dr(w,"value"),legendWidth:w.legendWidth??"",legendHeight:w.legendHeight??"",legendBorder:w.legendBorder!==!1,legendShowLines:w.legendShowLines!==!1,legendShowValues:w.legendShowValues||"AUTO",legendShowUnits:w.legendShowUnits!==!1,legendDirection:w.legendDirection||"AUTO"})}))}),{glyphsBySize:o,elementsByEntry:i,labelsByUnicode:s,textFontsByKey:r,imagesByKey:a,graphsByKey:d,animationsByKey:l}},OO=(e,n)=>{if(!e)return[];const{glyphsBySize:t,labelsByUnicode:o,textFontsByKey:i}=e,s=t.size>0,r=i.size>0;if(!s&&!r)return[];const a=[];return a.push("font:"),[...t.entries()].sort(([d],[l])=>d-l).forEach(([d,l])=>{a.push('  - file: "esp_assets/fonts/materialdesignicons-webfont.ttf"'),a.push(`    id: mdi_font_${d}`),a.push(`    size: ${d}`),a.push("    bpp: 1"),a.push("    glyphs:"),[...l].sort().forEach(f=>{const g=o==null?void 0:o.get(f),m=g?` #${g}`:"";a.push(`      - "${f}"${m}`)})}),[...i.entries()].sort(([d],[l])=>d.localeCompare(l)).forEach(([d,l])=>{const f=n==null?void 0:n.get(d);if(f){if(l.source==="google"){const g=l.variant||"regular";a.push(`  - file: "gfonts://${l.family}@${g}"`)}else a.push(`  - file: "esp_assets/fonts/${l.file}"`);a.push(`    id: ${f}`),a.push(`    size: ${l.size}`),a.push("    bpp: 1")}}),a.push(""),a},LO=(e,n)=>{if(!e)return[];const{imagesByKey:t}=e;if(!t.size)return[];const o=[];return o.push("image:"),[...t.entries()].sort(([i],[s])=>i.localeCompare(s)).forEach(([i,s])=>{const r=n==null?void 0:n.get(i);r&&(o.push(`  - file: "esp_assets/images/${s.file}"`),o.push(`    id: ${r}`),o.push(`    resize: ${s.w}x${s.h}`),o.push(`    type: ${s.type||"BINARY"}`),s.transparency&&s.transparency!=="opaque"&&o.push(`    transparency: ${s.transparency}`),s.invertAlpha&&o.push("    invert_alpha: true"),s.dither&&s.dither!=="NONE"&&o.push(`    dither: ${s.dither}`),s.type==="RGB565"&&s.byteOrder&&s.byteOrder!=="big_endian"&&o.push(`    byte_order: ${s.byteOrder}`))}),o.push(""),o},MO=(e,n)=>{if(!e)return[];const{animationsByKey:t}=e;if(!t.size)return[];const o=[];return o.push("animation:"),[...t.entries()].sort(([i],[s])=>i.localeCompare(s)).forEach(([i,s])=>{const r=n==null?void 0:n.get(i);r&&(o.push(`  - file: "esp_assets/images/${s.file}"`),o.push(`    id: ${r}`),o.push(`    resize: ${s.resizeW}x${s.resizeH}`),o.push(`    type: ${s.type||"BINARY"}`),s.transparency&&s.transparency!=="opaque"&&o.push(`    transparency: ${s.transparency}`),s.invertAlpha&&o.push("    invert_alpha: true"),s.dither&&s.dither!=="NONE"&&o.push(`    dither: ${s.dither}`),s.type==="RGB565"&&s.byteOrder&&s.byteOrder!=="big_endian"&&o.push(`    byte_order: ${s.byteOrder}`),s.loopEnabled&&(o.push("    loop:"),s.loopStart!==""&&s.loopStart!==null&&s.loopStart!==void 0&&o.push(`      start_frame: ${s.loopStart}`),s.loopEnd!==""&&s.loopEnd!==null&&s.loopEnd!==void 0&&o.push(`      end_frame: ${s.loopEnd}`),s.loopRepeat!==""&&s.loopRepeat!==null&&s.loopRepeat!==void 0&&o.push(`      repeat: ${s.loopRepeat}`)))}),o.push(""),o},NO=(e,n={},t={})=>{var r;const o=zm(e,n,t),i=Vm((o==null?void 0:o.animationsByKey)||new Map),s=[];return(r=o==null?void 0:o.animationsByKey)!=null&&r.size&&[...o.animationsByKey.entries()].sort(([a],[d])=>a.localeCompare(d)).forEach(([a,d])=>{if(!d.autoAnimate)return;const l=i==null?void 0:i.get(a);if(!l)return;const f=Number(d.intervalMs||0)||200;s.push({interval:`${f}ms`,then:[{type:"animation.next_frame",fields:[{key:"id",type:"id_ref",domain:"animation"}],config:{id:l}}]})}),s},uf=(e,n)=>n==="monochrome"?"":sC(e),DO=(e,n,t)=>{const o=[];return(e||[]).filter(i=>(i==null?void 0:i.type)==="icon"&&(i==null?void 0:i.icon)).forEach(i=>{const s=Nm(i.icon);if(!s||!(n!=null&&n[s]))return;const r=Math.max(1,Math.round(i.h||16)),a=Math.round(i.x||0),d=Math.round(i.y||0),l=n[s],f=uf(i.color,t);if(f){o.push(`it.printf(${a}, ${d}, id(mdi_font_${r}), ${f}, "%s", "${l}");`);return}o.push(`it.printf(${a}, ${d}, id(mdi_font_${r}), "%s", "${l}");`)}),o},PO=(e,n,t)=>{const o=[];return(e||[]).filter(i=>(i==null?void 0:i.type)==="text").forEach(i=>{const s=Pm(i);if(!s)return;const r=n==null?void 0:n.get(s);if(!r)return;const a=Math.round(i.x||0),d=Math.round(i.y||0),l=i.textMode||"static",f=uf(i.color,t);if(l!=="dynamic"){const P=cf(i.text??"");if(f){o.push(`it.print(${a}, ${d}, id(${r}), ${f}, "${P}");`);return}o.push(`it.print(${a}, ${d}, id(${r}), "${P}");`);return}const g=i.dynamicId||"";if(!g)return;const m=i.dynamicDomain||"",v=Ol(i.prefix||""),T=Ol(i.suffix||"");if(["sensor","number"].includes(m)){const P=i.format||"%.1f",w=`${v}${P}${T}`;if(f){o.push(`it.printf(${a}, ${d}, id(${r}), ${f}, "${w}", id(${g}).state);`);return}o.push(`it.printf(${a}, ${d}, id(${r}), "${w}", id(${g}).state);`);return}if(["binary_sensor","switch"].includes(m)){const P=Ol(i.onLabel||"ON"),w=Ol(i.offLabel||"OFF");if(f){o.push(`it.printf(${a}, ${d}, id(${r}), ${f}, "%s%s%s", "${v}", id(${g}).state ? "${P}" : "${w}", "${T}");`);return}o.push(`it.printf(${a}, ${d}, id(${r}), "%s%s%s", "${v}", id(${g}).state ? "${P}" : "${w}", "${T}");`);return}if(["text_sensor","select"].includes(m)){if(f){o.push(`it.printf(${a}, ${d}, id(${r}), ${f}, "%s%s%s", "${v}", id(${g}).state.c_str(), "${T}");`);return}o.push(`it.printf(${a}, ${d}, id(${r}), "%s%s%s", "${v}", id(${g}).state.c_str(), "${T}");`);return}if(["time","datetime"].includes(m)){const P=m==="time"?"%H:%M":"%d-%m-%Y %H:%M";if(f){o.push(`it.printf(${a}, ${d}, id(${r}), ${f}, "%s%s%s", "${v}", id(${g}).now().strftime("${P}").c_str(), "${T}");`);return}o.push(`it.printf(${a}, ${d}, id(${r}), "%s%s%s", "${v}", id(${g}).now().strftime("${P}").c_str(), "${T}");`);return}if(f){o.push(`it.printf(${a}, ${d}, id(${r}), ${f}, "%s%s%s", "${v}", id(${g}).state.c_str(), "${T}");`);return}o.push(`it.printf(${a}, ${d}, id(${r}), "%s%s%s", "${v}", id(${g}).state.c_str(), "${T}");`)}),o},jO=(e,n)=>{const t=[];return(e||[]).filter(o=>(o==null?void 0:o.type)==="image"&&(o==null?void 0:o.image)).forEach(o=>{const i=jm(o);if(!i)return;const s=n==null?void 0:n.get(i);if(!s)return;const r=Math.round(o.x||0),a=Math.round(o.y||0);if(o.invert){t.push(`it.image(${r}, ${a}, id(${s}), COLOR_OFF, COLOR_ON);`);return}t.push(`it.image(${r}, ${a}, id(${s}));`)}),t},BO=(e,n)=>{const t=[];return(e||[]).filter(o=>(o==null?void 0:o.type)==="animation"&&(o==null?void 0:o.animationFile)).forEach(o=>{const i=Bm(o);if(!i)return;const s=n==null?void 0:n.get(i);if(!s)return;const r=Math.round(o.x||0),a=Math.round(o.y||0);t.push(`it.image(${r}, ${a}, id(${s}));`)}),t},UO=(e,n,t,o)=>{if(!o)return e;const i=o*Math.PI/180,s=Math.cos(i),r=Math.sin(i),a=e.x-n,d=e.y-t;return{x:n+a*s-d*r,y:t+a*r+d*s}},zO=e=>({x:Math.round(e.x),y:Math.round(e.y)}),VO=e=>{const n=Number(e.x||0),t=Number(e.y||0),o=Number(e.w||0),i=Number(e.h||0),s=e.shapeType||"rect";if(s==="line")return[{x:n,y:t},{x:n+o,y:t+i}];if(s==="rect")return[{x:n,y:t},{x:n+o,y:t},{x:n+o,y:t+i},{x:n,y:t+i}];if(s==="triangle")return[{x:n,y:t+i},{x:n+o/2,y:t},{x:n+o,y:t+i}];if(s.startsWith("polygon")){const r=Number(s.replace("polygon",""));if(!r||r<3)return[];const a=n+o/2,d=t+i/2,l=Math.max(1,Math.min(o,i)/2),f=[],g=-Math.PI/2;for(let m=0;m<r;m+=1){const v=g+m*2*Math.PI/r;f.push({x:a+l*Math.cos(v),y:d+l*Math.sin(v)})}return f}return[]},HO=(e,n)=>{const t=[];return(e||[]).filter(o=>(o==null?void 0:o.type)==="shape").forEach(o=>{const i=o.shapeType||"rect",s=Number(o.rotation||0),r=Number(o.x||0),a=Number(o.y||0),d=Number(o.w||0),l=Number(o.h||0),f=r+d/2,g=a+l/2,m=uf(o.color,n);if(i==="circle"){const T=Math.max(1,Math.min(d,l)/2),P=Math.round(f),w=Math.round(g),C=Math.round(T);if(o.filled){if(m){t.push(`it.filled_circle(${P}, ${w}, ${C}, ${m});`);return}t.push(`it.filled_circle(${P}, ${w}, ${C});`)}else{if(m){t.push(`it.circle(${P}, ${w}, ${C}, ${m});`);return}t.push(`it.circle(${P}, ${w}, ${C});`)}return}let v=VO(o);if(v.length){if(s&&(v=v.map(T=>UO(T,f,g,s))),v=v.map(zO),i==="line"){const[T,P]=v;if(!T||!P)return;if(m){t.push(`it.line(${T.x}, ${T.y}, ${P.x}, ${P.y}, ${m});`);return}t.push(`it.line(${T.x}, ${T.y}, ${P.x}, ${P.y});`);return}if(o.filled){if(v.length===3){const[T,P,w]=v;if(m){t.push(`it.filled_triangle(${T.x}, ${T.y}, ${P.x}, ${P.y}, ${w.x}, ${w.y}, ${m});`);return}t.push(`it.filled_triangle(${T.x}, ${T.y}, ${P.x}, ${P.y}, ${w.x}, ${w.y});`);return}for(let T=1;T<v.length-1;T+=1){const P=v[0],w=v[T],C=v[T+1];if(m){t.push(`it.filled_triangle(${P.x}, ${P.y}, ${w.x}, ${w.y}, ${C.x}, ${C.y}, ${m});`);continue}t.push(`it.filled_triangle(${P.x}, ${P.y}, ${w.x}, ${w.y}, ${C.x}, ${C.y});`)}return}for(let T=0;T<v.length;T+=1){const P=v[T],w=v[(T+1)%v.length];if(m){t.push(`it.line(${P.x}, ${P.y}, ${w.x}, ${w.y}, ${m});`);continue}t.push(`it.line(${P.x}, ${P.y}, ${w.x}, ${w.y});`)}}}),t},GO=(e,n,t)=>{if(!e)return[];const{graphsByKey:o}=e;if(!(o!=null&&o.size))return[];const i=[];return i.push("graph:"),[...o.entries()].sort(([s],[r])=>s.localeCompare(r)).forEach(([s,r])=>{var d;const a=n==null?void 0:n.get(s);if(a){if(i.push(`  - id: ${a}`),!r.useTraces&&r.sensor&&i.push(`    sensor: ${r.sensor}`),i.push(`    duration: ${r.duration}`),i.push(`    width: ${r.width}`),i.push(`    height: ${r.height}`),r.border===!1&&i.push("    border: false"),r.xGrid&&i.push(`    x_grid: ${r.xGrid}`),r.yGrid!==""&&r.yGrid!==null&&r.yGrid!==void 0&&i.push(`    y_grid: ${r.yGrid}`),r.minRange!==""&&r.minRange!==null&&r.minRange!==void 0&&i.push(`    min_range: ${r.minRange}`),r.maxRange!==""&&r.maxRange!==null&&r.maxRange!==void 0&&i.push(`    max_range: ${r.maxRange}`),r.minValue!==""&&r.minValue!==null&&r.minValue!==void 0&&i.push(`    min_value: ${r.minValue}`),r.maxValue!==""&&r.maxValue!==null&&r.maxValue!==void 0&&i.push(`    max_value: ${r.maxValue}`),r.useTraces&&((d=r.traces)!=null&&d.length))i.push("    traces:"),r.traces.forEach(l=>{const f=String((l==null?void 0:l.sensor)||"").trim();if(!f)return;i.push(`      - sensor: ${f}`),l.name&&i.push(`        name: "${cf(l.name)}"`),l.lineType&&i.push(`        line_type: ${l.lineType}`),l.lineThickness!==""&&l.lineThickness!==null&&l.lineThickness!==void 0&&i.push(`        line_thickness: ${l.lineThickness}`),l.continuous&&i.push("        continuous: true");const g=String(l.color||"").trim();g&&r.displayType!=="monochrome"&&i.push(`        color: ${g}`)});else{const l=String(r.color||"").trim();l&&r.displayType!=="monochrome"&&i.push(`    color: ${l}`)}if(r.legendEnabled){if(i.push("    legend:"),r.legendNameFontKey){const l=t==null?void 0:t.get(r.legendNameFontKey);l&&i.push(`      name_font: ${l}`)}if(r.legendValueFontKey){const l=t==null?void 0:t.get(r.legendValueFontKey);l&&i.push(`      value_font: ${l}`)}r.legendWidth!==""&&r.legendWidth!==null&&r.legendWidth!==void 0&&i.push(`      width: ${r.legendWidth}`),r.legendHeight!==""&&r.legendHeight!==null&&r.legendHeight!==void 0&&i.push(`      height: ${r.legendHeight}`),r.legendBorder===!1&&i.push("      border: false"),r.legendShowLines===!1&&i.push("      show_lines: false"),r.legendShowValues&&r.legendShowValues!=="AUTO"&&i.push(`      show_values: ${r.legendShowValues}`),r.legendShowUnits===!1&&i.push("      show_units: false"),r.legendDirection&&r.legendDirection!=="AUTO"&&i.push(`      direction: ${r.legendDirection}`)}}}),i.push(""),i},WO=(e,n)=>{const t=[];return(e||[]).filter(o=>(o==null?void 0:o.type)==="graph").forEach(o=>{const i=Um(o);if(!i)return;const s=n==null?void 0:n.get(i);if(!s)return;const r=Math.round(o.x||0),a=Math.round(o.y||0);if(t.push(`it.graph(${r}, ${a}, id(${s}));`),o.legendEnabled){const d=Math.round((o.legendX??o.x+o.w+8)||0),l=Math.round((o.legendY??o.y)||0);t.push(`it.legend(${d}, ${l}, id(${s}));`)}}),t},YO=(e,n,t,o,i,s,r)=>{const a=[];return(e||[]).forEach(d=>{if((d==null?void 0:d.type)==="icon"){const l=DO([d],n,r);a.push(...l);return}if((d==null?void 0:d.type)==="text"){const l=PO([d],t,r);a.push(...l);return}if((d==null?void 0:d.type)==="image"){const l=jO([d],o);a.push(...l);return}if((d==null?void 0:d.type)==="animation"){const l=BO([d],s);a.push(...l);return}if((d==null?void 0:d.type)==="shape"){const l=HO([d],r);a.push(...l);return}if((d==null?void 0:d.type)==="graph"){const l=WO([d],i);a.push(...l)}}),a},KO=e=>{const n=new Map;return!e||!e.size||[...e.keys()].sort((t,o)=>t.localeCompare(o)).forEach((t,o)=>{n.set(t,`text_font_${o+1}`)}),n},qO=e=>{const n=new Map;return!e||!e.size||[...e.keys()].sort((t,o)=>t.localeCompare(o)).forEach((t,o)=>{n.set(t,`image_${o+1}`)}),n},Vm=e=>{const n=new Map;if(!e||!e.size)return n;const t=new Set;return[...e.entries()].sort(([o],[i])=>o.localeCompare(i)).forEach(([o,i],s)=>{let r=(i==null?void 0:i.id)||"";r||(r=`animation_${s+1}`);let a=r,d=2;for(;t.has(a);)a=`${r}_${d}`,d+=1;t.add(a),n.set(o,a)}),n},ZO=e=>{const n=new Map;if(!e||!e.size)return n;const t=new Set;return[...e.entries()].sort(([o],[i])=>o.localeCompare(i)).forEach(([o,i],s)=>{let r=(i==null?void 0:i.graphId)||"";r||(r=`graph_${s+1}`);let a=r,d=2;for(;t.has(a);)a=`${r}_${d}`,d+=1;t.add(a),n.set(o,a)}),n},XO=(e,n={},t=null,o={})=>{const i=zm(e,n,o),s=KO((i==null?void 0:i.textFontsByKey)||new Map),r=qO((i==null?void 0:i.imagesByKey)||new Map),a=ZO((i==null?void 0:i.graphsByKey)||new Map),d=Vm((i==null?void 0:i.animationsByKey)||new Map),l=new Map;(e||[]).forEach(P=>{var Z,ye;const w=Fm(P);if(!w)return;const C=n[w];if(!C){const Ce=(P==null?void 0:P.customConfig)||"",Fe=w.includes(".")?".":"/",[Le,We]=w.split(Fe);if(!Le||!We)return;l.has(Le)||l.set(Le,[]),l.get(Le).push({type:"custom",platform:We,config:Ce});return}const $=C.domain||"component",H={...(P==null?void 0:P.config)||{}},M=H.bus;M!==void 0&&delete H.bus;let oe={platform:((Z=C.platformByBus)==null?void 0:Z[M])||C.platform,...H};if(C.domain==="display"&&oe._display_builder&&delete oe._display_builder,C.domain==="display"){const Ce=((ye=i.elementsByEntry)==null?void 0:ye.get(P))||[],Fe=YO(Ce,o,s,r,a,d,C.displayType||"monochrome");if(Fe.length){const We=[typeof oe.lambda=="string"?oe.lambda.trim():"",...Fe].filter(Boolean).join(`
`);oe={...oe,lambda:We}}}l.has($)||l.set($,[]),l.get($).push({type:"schema",payload:oe,schema:C})});const f=[],g=OO(i,s);g.length&&f.push(...g);const m=LO(i,r);m.length&&f.push(...m);const v=MO(i,d);v.length&&f.push(...v);const T=GO(i,a,s);return T.length&&f.push(...T),l.forEach((P,w)=>{f.push(`${w}:`),P.forEach(C=>{var H;if(C.type==="custom"){f.push(`  - platform: ${C.platform}`),C.config.split(/\r?\n/).forEach(M=>{f.push(`    ${M}`)});return}const $=[{key:"platform",type:"select"},...((H=C.schema)==null?void 0:H.fields)||[]].filter(M=>{var ee;return!((ee=C.schema)!=null&&ee.platformByBus&&M.key==="bus")});Ms([C.payload],{type:"object",fields:$},2,f,C.payload,t)}),f.push("")}),f.length&&f[f.length-1]===""&&f.pop(),f},JO=e=>!e||typeof e!="string"?"":e.trim()||"",Ph=(e,n,t)=>{if(e&&e[n]!==void 0)return e[n];const o=t==null?void 0:t.find(i=>i.key===n);if(o&&o.default!==void 0)return o.default},Vu=(e,n,t)=>{Array.isArray(e)&&e.forEach(o=>{const i=JO(o);i&&(t&&!t.has(i)||n.add(i))})},Hu=(e,n,t,o)=>{if(e){if(Vu(e.requires,t,o),e.requiresByBus){const i=Ph(n,"bus",e.fields||[]);i&&Vu(e.requiresByBus[i],t,o)}if(e.requiresByType){const i=Ph(n,"type",e.fields||[]);i&&Vu(e.requiresByType[i],t,o)}}},Gu=({components:e=[],componentSchemas:n={},networkConfig:t={},networkSchema:o=null,protocolsConfig:i={},enabledProtocols:s=[],protocolsSchemas:r={},supported:a=null})=>{const d=new Set;return e.forEach(l=>{const f=typeof l=="string"?l:(l==null?void 0:l.id)||"";if(!f)return;const g=n==null?void 0:n[f];g&&Hu(g,(l==null?void 0:l.config)||{},d,a)}),Hu(o,t,d,a),s.forEach(l=>{const f=r==null?void 0:r[l];if(!f)return;const g=(i==null?void 0:i[l])||{};Hu(f,g,d,a)}),d},_r="vebBuilderDeviceConfig",QO=()=>{try{const e=localStorage.getItem(_r);if(!e)return null;const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}},eL=()=>{const e=QO();return!e||e.schemaVersion!==1?!1:e.isSaved===!1},tL=e=>{localStorage.setItem(_r,JSON.stringify(e))},Hm="ecdDeviceStatusCacheV1",nL=e=>String(e||"").trim().toLowerCase()==="online"?"online":"offline",Wa=e=>{const n=String(e||"").trim().toLowerCase();return n?n.endsWith(".json")||n.endsWith(".yaml")?n.slice(0,-5):n:""},Gm=e=>!e||typeof e!="object"?null:{status:nL(e.status),host:String(e.host||"").trim(),name:String(e.name||"").trim(),updatedAt:Number.isFinite(Number(e.updatedAt))?Number(e.updatedAt):Date.now()},df=()=>{try{const e=localStorage.getItem(Hm);if(!e)return{};const n=JSON.parse(e);if(!n||typeof n!="object"||Array.isArray(n))return{};const t={};return Object.entries(n).forEach(([o,i])=>{const s=Wa(o);if(!s)return;const r=Gm(i);r&&(t[s]=r)}),t}catch{return{}}},oL=e=>{try{localStorage.setItem(Hm,JSON.stringify(e&&typeof e=="object"?e:{}))}catch{}},Wm=e=>{if(!e||typeof e!="object")return;const n=df();Object.entries(e).forEach(([t,o])=>{const i=Wa(t);if(!i)return;const s=Gm(o);s&&(n[i]=s)}),oL(n)},iL=e=>{const n=Wa(e);return n&&df()[n]||null},Nc=async(e,n)=>{try{const t=await e.json(),o=t==null?void 0:t.message;if(typeof o=="string"&&o.trim())return o}catch{}return n},sL=async(e,{kind:n="all",refresh:t=!1}={})=>{const o=new URLSearchParams({kind:n,refresh:t?"1":"0"}),i=await e(`api/assets/manifest?${o.toString()}`);if(!i.ok)throw new Error(await Nc(i,"Failed to load assets manifest"));return i.json()},rL=async(e,{kind:n,file:t})=>{const o=new FormData;o.append("kind",n),o.append("file",t);const i=await e(`api/assets/upload?kind=${encodeURIComponent(n)}`,{method:"POST",body:o});if(!i.ok)throw new Error(await Nc(i,"Asset upload failed"));return i.json()},aL=async(e,{kind:n,from:t,to:o})=>{const i=await e("api/assets/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:n,from:t,to:o})});if(!i.ok)throw new Error(await Nc(i,"Asset rename failed"));return i.json()},lL=async(e,{kind:n,file:t})=>{const o=encodeURIComponent(t),i=await e(`api/assets/${encodeURIComponent(n)}/${o}`,{method:"DELETE"});if(!i.ok)throw new Error(await Nc(i,"Asset delete failed"));return i.json()},Wu=(e,n,t)=>{if(!n||!t)return"";const o=encodeURIComponent(n),i=encodeURIComponent(t);return e(`api/assets/${o}/${i}`)},cL={class:"builder-layout"},uL={key:0,class:"notice notice--error notice--block"},dL={key:1,class:"notice notice--error notice--block"},fL={key:2,class:"notice notice--warning notice--block"},pL={class:"builder-shell"},hL={class:"builder-sidebar"},gL={class:"sidebar-top"},vL={class:"sidebar-panel sidebar-panel--project","aria-label":"Current project"},mL={class:"sidebar-panel__header"},yL={class:"sidebar-panel__body project-summary-body"},bL={class:"project-summary-list"},_L={class:"project-summary-item"},wL={class:"project-summary-item"},EL={class:"project-summary-item"},SL={key:0,class:"project-summary-item"},xL={class:"sidebar-middle"},kL={class:"sidebar-panel sidebar-panel--components"},CL={class:"sidebar-panel__body"},AL={class:"sidebar-components"},$L={class:"components-toolbar"},IL=["onClick"],TL=["onClick"],RL={class:"builder-content"},FL={class:"builder-grid"},OL={class:"builder-panel"},LL={class:"config-title"},ML={key:0,class:"preview-tabs"},NL=["disabled"],DL=["onClick"],PL=["disabled"],jL={key:1,class:"preview-tab-measure"},BL={class:"yaml-scroll"},UL={class:"preview-card"},zL={key:0,class:"preview-callout hljs"},VL={class:"hljs-comment"},HL=["innerHTML"],GL={class:"builder-panel"},WL={class:"config-title"},YL={class:"config-scroll"},KL={key:0,class:"module-card"},qL={class:"components-header"},ZL={class:"components-title"},XL=["href"],JL={class:"module-card__body"},QL={key:1,class:"module-card"},eM={class:"components-header"},tM={class:"components-title"},nM=["href"],oM={class:"module-card__body"},iM={key:2,class:"module-card"},sM={class:"components-header"},rM={class:"components-title"},aM=["href"],lM={class:"module-card__body"},cM={key:3,class:"module-card"},uM={class:"components-header"},dM={class:"components-title"},fM=["href"],pM={class:"module-card__body"},hM={class:"module-tabs"},gM=["onClick"],vM={key:4,class:"module-card"},mM={class:"components-header"},yM={class:"components-title"},bM=["href"],_M={class:"module-card__body"},wM={class:"module-tabs"},EM=["onClick"],SM={key:5,class:"module-card"},xM={class:"components-header"},kM={class:"components-title"},CM=["href"],AM={class:"module-card__body"},$M={class:"module-tabs"},IM=["onClick"],TM={key:6,class:"module-card"},RM={class:"components-header"},FM={class:"components-title"},OM=["href"],LM={class:"module-card__body"},MM={class:"module-tabs"},NM=["onClick"],DM={key:1,class:"schema-group"},PM={class:"schema-list-item"},jM={key:7,class:"module-card"},BM={class:"components-header"},UM={class:"components-title"},zM=["href"],VM={key:0,class:"components-actions"},HM={key:0,class:"components-picker-shell"},GM={class:"components-picker"},WM={key:0,class:"notice notice--error components-error"},YM={class:"components-list"},KM=["open"],qM={key:0,class:"components-items"},ZM=["onClick"],XM={class:"component-id"},JM={class:"components-items"},QM=["onClick"],eN={class:"component-id"},tN={key:1,class:"component-form"},nN={key:0,class:"notice notice--warning component-bus-note"},jh="general/core/core",Bh="general/core/substitutions",Uh="general/platform/platform",ir="general/network/network",zh=4,Oo="root",Yu="Projects",oN="vebProjectsUpdatedSignal",iN="ecd-projects",sN={__name:"BuilderView",setup(e){var wf,Ef,Sf,xf;Np.registerLanguage("yaml",E1);const n=["Core","Platform","Network","Protocols","Busses","System","Automation"],t=K(n[0]),o=K(!1),i=K("core"),s=K(null),r=K([]),a=K(0),d=K([]),l=K(0),f=K([]),g=K(null),m=K(!1),v=K(""),T=K(!1);let P=null;const w=new Set,C=K(!1);let $=null;const H=K(null),M=K(!1),ee=K(!1),oe=K(null),Z=K({}),ye=K({categories:[]}),Ce=K(!0),Fe=K(null),Le=["Simple","Normal","Advanced"],We=K(!1),ht=K(!1),De=K(!1),Ye=K(!1),Q=K(""),we=K(!1),Oe=K(""),Qe=K(!1),Ke=K(!1),st=K(""),vt=K(""),yt=K(""),dt=K("offline"),mt=K(""),Ct=K("");let de=null,me=null;const ke=K(Le[0]),Se=u=>{if(typeof u!="string")return Le[0];const h=u.trim();if(Le.includes(h))return h;const S=h.replace(/\s*mode$/i,"");return Le.includes(S)?S:Le[0]},Me=K(!1),O=K(!1),j=K({sections:{}}),W=K(null),ae=K(null),he=K(null),fe=K(null),pe=K(null),Ae=K(null),re=K({}),se=K({}),He=K({}),Re=K({}),k=(u,h,S)=>{const x={},L=q=>{if(!q)return;const te=q.toLowerCase();x[te]=(x[te]||0)+1},U=(q,te)=>{te!=null&&te.length&&te.forEach(ce=>{var ze,Ze;const ne=q==null?void 0:q[ce.key];S(ce,ne)&&L(ne),ce.type==="object"&&U(ne||{},ce.fields||[]),ce.type==="list"&&Array.isArray(ne)&&((ze=ce.item)==null?void 0:ze.type)==="object"&&((Ze=ce.item)!=null&&Ze.fields)&&ne.forEach(ut=>U(ut||{},ce.item.fields))})};return u.forEach(q=>{const te=At(q);if(!te)return;const ce=h[te];ce!=null&&ce.fields&&U((q==null?void 0:q.config)||{},ce.fields)}),x},N=(u,h,S)=>{const x=new Set,L=[];return(u||[]).forEach(U=>{S&&U.componentId===S||h&&U.domain!==h||x.has(U.idLower)||(x.add(U.idLower),L.push(U.id))}),L},I=(u,h,S)=>{const x=[],L=(te,ce,ne)=>{const ze=te?te.split(/[./]/).pop():"component",Ze=ce.length?`${ze}.${ce.join(".")}`:ze;x.push({path:Ze,message:ne})},U=(te,ce,ne,ze)=>{const Ze=N(S,ce.domain,ne);if(!Ze.length){L(ne,ze,"No matching identifiers available");return}if(!te||typeof te!="string")return;Ze.some(rt=>rt.toLowerCase()===te.toLowerCase())||L(ne,ze,"No matching identifiers available")},q=(te,ce,ne,ze=[])=>{ce!=null&&ce.length&&ce.forEach(Ze=>{var tt,wt,Nt;const ut=te==null?void 0:te[Ze.key],rt=[...ze,Ze.key];Ze.type==="id_ref"&&U(ut,Ze,ne,rt),Ze.type==="object"&&q(ut||{},Ze.fields||[],ne,rt),Ze.type==="list"&&Array.isArray(ut)&&((tt=Ze.item)==null?void 0:tt.type)==="object"&&((wt=Ze.item)!=null&&wt.fields)&&ut.forEach((zt,En)=>{q(zt||{},Ze.item.fields,ne,[...rt,String(En)])}),((Nt=Ze.item)==null?void 0:Nt.extends)==="base_actions.json"&&Array.isArray(ut)&&ut.forEach((zt,En)=>{const uo=Array.isArray(zt==null?void 0:zt.fields)?zt.fields:[],ft=(zt==null?void 0:zt.config)||{};uo.forEach(Bo=>{if(Bo.type!=="id_ref")return;const Bn=[...rt,String(En),Bo.key],Fo=ft[Bo.key];U(Fo,Bo,ne,Bn)})})})};return u.forEach(te=>{const ce=At(te);if(!ce)return;const ne=h[ce];ne!=null&&ne.fields&&q((te==null?void 0:te.config)||{},ne.fields,ce,[])}),x},Y=(u,h,S,x,L,U)=>{const q=[],te=(rt,tt,wt)=>{const Nt=rt?rt.split(/[./]/).pop():"component",zt=tt.length?`${Nt}.${tt.join(".")}`:Nt;q.push({path:zt,message:wt})},ce=(rt,tt)=>tt.some(wt=>wt.toLowerCase()===String(rt||"").toLowerCase()),ne=(rt,tt,wt,Nt,zt)=>{if(!tt.length){te(wt,Nt,"No matching identifiers available");return}if(!rt||!String(rt).trim()){te(wt,Nt,zt||"Please select an ID");return}ce(rt,tt)||te(wt,Nt,"No matching identifiers available")},ze=(rt,tt,wt,Nt,zt,En)=>{if(!tt.length){te(wt,Nt,zt);return}if(!rt||!String(rt).trim()){te(wt,Nt,En);return}tt.includes(rt)||te(wt,Nt,zt)},Ze=(rt,tt,wt,Nt)=>{if(!tt.length){te(wt,Nt,"No MDI icons available");return}const zt=String(rt||"").trim(),En=zt.startsWith("mdi:")?zt.slice(4):zt;if(!En){te(wt,Nt,"Please select an icon");return}tt.some(uo=>uo.toLowerCase()===En.toLowerCase())||te(wt,Nt,"Invalid MDI icon name")},ut=(rt,tt,wt,Nt)=>{if(rt==="image"){Yp(tt==null?void 0:tt.imageType,tt==null?void 0:tt.imageTransparency,(tt==null?void 0:tt.imageInvertAlpha)??(tt==null?void 0:tt.invert),tt==null?void 0:tt.imageDither,tt==null?void 0:tt.imageByteOrder).forEach(uo=>{te(wt,[...Nt,"imageType"],uo)});return}Yp(tt==null?void 0:tt.animationType,tt==null?void 0:tt.animationTransparency,tt==null?void 0:tt.animationInvertAlpha,tt==null?void 0:tt.animationDither,tt==null?void 0:tt.animationByteOrder).forEach(En=>{te(wt,[...Nt,"animationType"],En)})};return u.forEach((rt,tt)=>{var uo;const wt=At(rt);if(!wt)return;const Nt=h==null?void 0:h[wt];if((Nt==null?void 0:Nt.domain)!=="display")return;const zt=(uo=rt==null?void 0:rt.config)==null?void 0:uo._display_builder,En=Array.isArray(zt==null?void 0:zt.elements)?zt.elements:[];En.length&&En.forEach((ft,Bo)=>{const Bn=["_display_builder","elements",String(Bo)];if((ft==null?void 0:ft.type)==="text"&&(ft==null?void 0:ft.textMode)==="dynamic"){const Fo=N(S,(ft==null?void 0:ft.dynamicDomain)||"",wt);ne(ft==null?void 0:ft.dynamicId,Fo,wt,[...Bn,"dynamicId"],"Please select a source ID")}if((ft==null?void 0:ft.type)==="graph")if(String((ft==null?void 0:ft.graphId)||"").trim()||te(wt,[...Bn,"graphId"],"Please provide a graph ID"),ft!=null&&ft.useTraces)(Array.isArray(ft==null?void 0:ft.traces)?ft.traces:[]).forEach((yo,Uo)=>{const bi=N(S,"sensor",wt);ne(yo==null?void 0:yo.sensor,bi,wt,[...Bn,"traces",String(Uo),"sensor"],"Please select a sensor ID")});else{const Fo=N(S,"sensor",wt);ne(ft==null?void 0:ft.sensor,Fo,wt,[...Bn,"sensor"],"Please select a sensor ID")}(ft==null?void 0:ft.type)==="animation"&&(String((ft==null?void 0:ft.animationId)||"").trim()||te(wt,[...Bn,"animationId"],"Please provide an animation ID"),ze(ft==null?void 0:ft.animationFile,L||[],wt,[...Bn,"animationFile"],"No GIF animations available","Please select an animation file"),ut("animation",ft,wt,Bn)),(ft==null?void 0:ft.type)==="image"&&(ze(ft==null?void 0:ft.image,x||[],wt,[...Bn,"image"],"No image files available","Please select an image file"),ut("image",ft,wt,Bn)),(ft==null?void 0:ft.type)==="icon"&&Ze(ft==null?void 0:ft.icon,U||[],wt,[...Bn,"icon"])})}),q},ie=(u,h,S)=>{if(h&&h[u]!==void 0)return h[u];const x=S==null?void 0:S.find(L=>L.key===u);if(x&&x.default!==void 0)return x.default},_e=(u,h,S)=>{const x=u==null?void 0:u.dependsOn;if(!x)return!0;const L=ie(x.key,h,S);return x.value!==void 0?L===x.value:Array.isArray(x.values)?x.values.includes(L):x.notValue!==void 0?L!==x.notValue:!!L},Ie=u=>{const h=[],S=(U,q,te)=>{const ce=q.length?`${U}.${q.join(".")}`:U;h.push({path:ce,message:te})},x=(U,q,te,ce)=>{var ne;if((q==null?void 0:q.type)==="password"&&((ne=q==null?void 0:q.settings)==null?void 0:ne.format)==="base64_44"){const ze=typeof U=="string"?U.trim():"";/^[A-Za-z0-9+/]{43}=$/.test(ze)||S(te,ce,"Key must be base64 (44 chars, ending with =).")}},L=(U,q,te,ce=[])=>{q!=null&&q.length&&q.forEach(ne=>{var ut,rt;if(!(ne!=null&&ne.key))return;const ze=U==null?void 0:U[ne.key],Ze=[...ce,ne.key];_e(ne,U,q)&&(x(ze,ne,te,Ze),ne.type==="object"&&L(ze||{},ne.fields||[],te,Ze),ne.type==="list"&&Array.isArray(ze)&&((ut=ne.item)==null?void 0:ut.type)==="object"&&((rt=ne.item)!=null&&rt.fields)&&ze.forEach((tt,wt)=>{L(tt||{},ne.item.fields,te,[...Ze,String(wt)])}))})};return u.forEach(U=>{var q;(q=U==null?void 0:U.schema)!=null&&q.fields&&L(U.config||{},U.schema.fields,U.label,[])}),h},Ue=(u,h,S=[])=>{const x={},L=te=>te.toLowerCase().replace(/\s+/g,"").replace(/^gpio/,""),U=te=>{if(!te||typeof te!="string")return;const ce=L(te);x[ce]=(x[ce]||0)+1},q=(te,ce)=>{ce!=null&&ce.length&&ce.forEach(ne=>{var Ze,ut,rt;const ze=te==null?void 0:te[ne.key];ne.type==="gpio"&&U(ze),ne.type==="object"&&q(ze||{},ne.fields||[]),ne.type==="list"&&Array.isArray(ze)&&(((Ze=ne.item)==null?void 0:Ze.type)==="gpio"?ze.forEach(tt=>U(tt)):((ut=ne.item)==null?void 0:ut.type)==="object"&&((rt=ne.item)!=null&&rt.fields)&&ze.forEach(tt=>q(tt||{},ne.item.fields)))})};return u.forEach(te=>{const ce=At(te);if(!ce)return;const ne=h[ce];ne!=null&&ne.fields&&q((te==null?void 0:te.config)||{},ne.fields)}),S.forEach(te=>{te!=null&&te.fields&&q(te.config||{},te.fields)}),x},qe=(u,h)=>{const S=[],x=(U,q,te)=>{U&&S.push({id:U,idLower:U.toLowerCase(),domain:(q==null?void 0:q.domain)||te.split(/[./]/)[0]||"",componentId:te})},L=(U,q,te,ce)=>{q!=null&&q.length&&q.forEach(ne=>{var Ze,ut;const ze=U==null?void 0:U[ne.key];ne.type==="id"&&typeof ze=="string"&&ze.trim()&&x(ze,te,ce),ne.type==="object"&&L(ze||{},ne.fields||[],te,ce),ne.type==="list"&&Array.isArray(ze)&&((Ze=ne.item)==null?void 0:Ze.type)==="object"&&((ut=ne.item)!=null&&ut.fields)&&ze.forEach(rt=>L(rt||{},ne.item.fields,te,ce))})};return u.forEach(U=>{const q=At(U);if(!q)return;const te=h[q];te!=null&&te.fields&&L((U==null?void 0:U.config)||{},te.fields,te,q)}),S},Be=(u,h,S,x)=>{const L=[],U=(te,ce,ne)=>{const ze=te?te.split(/[./]/).pop():"component",Ze=ce.length?`${ze}.${ce.join(".")}`:ze;L.push({path:Ze,message:ne})},q=(te,ce,ne,ze=[])=>{ce!=null&&ce.length&&ce.forEach(Ze=>{var tt,wt;const ut=te==null?void 0:te[Ze.key],rt=[...ze,Ze.key];if(Ze.type==="id"&&typeof ut=="string"&&ut.trim()){const Nt=ut.toLowerCase();(S[Nt]||0)>1&&U(ne,rt,"ID already used")}if(Ze.key==="name"&&typeof ut=="string"&&ut.trim()){const Nt=ut.toLowerCase();(x[Nt]||0)>1&&U(ne,rt,"Name already used")}Ze.type==="object"&&q(ut||{},Ze.fields||[],ne,rt),Ze.type==="list"&&Array.isArray(ut)&&((tt=Ze.item)==null?void 0:tt.type)==="object"&&((wt=Ze.item)!=null&&wt.fields)&&ut.forEach((Nt,zt)=>{q(Nt||{},Ze.item.fields,ne,[...rt,String(zt)])})})};return u.forEach(te=>{const ce=At(te);if(!ce)return;const ne=h[ce];ne!=null&&ne.fields&&q((te==null?void 0:te.config)||{},ne.fields,ce,[])}),L},lt=(u,h)=>{if(!h)return!0;const S=h.toLowerCase();return u.name.toLowerCase().includes(S)||u.id.toLowerCase().includes(S)},ot=A(()=>{var h,S;const u=new Map;return(S=(h=ye.value)==null?void 0:h.categories)==null||S.forEach(x=>{x.items.forEach(L=>u.set(L.id,L.name)),x.subcategories.forEach(L=>{L.items.forEach(U=>u.set(U.id,U.name))})}),u}),it=u=>u?ot.value.get(u)??u:"",at=A(()=>{var L;const u=V.value.esphomeCore||{},h=((L=W.value)==null?void 0:L.fields)||[],S=Cl("name",u,h,V.value),x=String(S||"").trim();return x?x.toLowerCase().endsWith(".yaml")?x:`${x}.yaml`:"new_file.yaml"}),Rt=A(()=>{var u;return((u=V.value)==null?void 0:u.isSaved)===!0}),Vt=A(()=>Rt.value?at.value:`${at.value}*`),Ot=A(()=>{var L;const u=V.value.esphomeCore||{},h=((L=W.value)==null?void 0:L.fields)||[],S=String(Cl("friendly_name",u,h,V.value)||"").trim();return S||String(Cl("name",u,h,V.value)||"").trim()||"-"}),$t=A(()=>{var S;const u=V.value.esphomeCore||{},h=((S=W.value)==null?void 0:S.fields)||[];return String(Cl("comment",u,h,V.value)||"").trim()}),Ht=A(()=>{var S,x;const u=String(((S=B.value)==null?void 0:S.platform)||"").trim().toUpperCase(),h=String(((x=B.value)==null?void 0:x.variant)||"").trim().toUpperCase();return u?!h||h===u?u:`${u} (${h})`:"Unknown"}),At=u=>typeof u=="string"?u:(u==null?void 0:u.id)||"",ln=u=>{if(!u)return{domain:"",platform:""};const h=u.includes(".")?".":"/",[S,x]=u.split(h);return{domain:S||"",platform:x||""}},on=A(()=>new Set(V.value.components.map(u=>At(u)).filter(Boolean))),In=A(()=>{if(H.value===null)return"Components";const u=At(V.value.components[H.value]);return u?it(u):"Add"}),qt=u=>{const h=u==null?void 0:u.helpUrl;return typeof h=="string"?h.trim():""},Mt=A(()=>{var u,h,S,x,L;if(t.value==="Core")return qt(W.value)||qt(ae.value);if(t.value==="Platform")return qt(fe.value)||qt(he.value);if(t.value==="Network")return qt(pe.value)||qt(Ae.value);if(t.value==="Protocols")return qt((u=re.value)==null?void 0:u[ve.value]);if(t.value==="Busses")return qt((h=se.value)==null?void 0:h[dn.value]);if(t.value==="System")return qt((S=He.value)==null?void 0:S[Ln.value]);if(t.value==="Automation")return qt((x=Re.value)==null?void 0:x[bn.value]);if(t.value==="Components"){if(H.value===null)return"";const U=At(V.value.components[H.value]);return U?qt((L=Z.value)==null?void 0:L[U]):""}return""}),cn=A(()=>H.value===null?null:V.value.components[H.value]||null),hn=A(()=>At(cn.value)),gn=A(()=>{var u;return((u=cn.value)==null?void 0:u.config)||{}}),xn=A(()=>{var u;return((u=cn.value)==null?void 0:u.customConfig)||""}),un=A(()=>V.value.esphomeCore||{}),G=A(()=>V.value.substitutions||{}),B=A(()=>V.value.platformCore||{}),X=A(()=>{var h;const u=(h=B.value)==null?void 0:h.platform;return u?`general/platform/${u}`:""}),Ee=A(()=>V.value.networkCore||{}),D=A(()=>{var h;const u=(h=Ee.value)==null?void 0:h.transport;return u?`general/network/${u}`:""}),p=A(()=>V.value.protocolsCore||{}),F=[{key:"api",label:"API",schemaId:"general/protocols/api"},{key:"mqtt",label:"MQTT",schemaId:"general/protocols/mqtt"},{key:"espnow",label:"ESP-NOW",schemaId:"general/protocols/esp-now"}],ve=K(((wf=F[0])==null?void 0:wf.key)||""),Te=u=>{var L,U,q;const h=((L=p.value)==null?void 0:L[u])||{};if(h.enabled!==void 0)return!!h.enabled;const S=(U=re.value)==null?void 0:U[u],x=(q=S==null?void 0:S.fields)==null?void 0:q.find(te=>te.key==="enabled");return(x==null?void 0:x.default)!==void 0?!!x.default:!1},Pe=A(()=>F.filter(u=>Te(u.key)).map(u=>u.key)),R=A(()=>F.map(u=>({key:u.key,label:u.label}))),$e=A(()=>{const u=F.find(h=>h.key===ve.value);return(u==null?void 0:u.schemaId)||""}),Xe=A(()=>{var u;return ve.value?((u=p.value)==null?void 0:u[ve.value])||{}:{}}),xt=A(()=>V.value.bussesCore||{}),It=[{key:"i2c",label:"I2C",schemaId:"general/busses/i2c"},{key:"spi",label:"SPI",schemaId:"general/busses/spi"},{key:"uart",label:"UART",schemaId:"general/busses/uart"},{key:"one_wire",label:"1-Wire",schemaId:"general/busses/one_wire"},{key:"i2s",label:"I2S",schemaId:"general/busses/i2s"},{key:"canbus",label:"CAN Bus",schemaId:"general/busses/canbus"}],kt=new Set(It.map(u=>u.key)),dn=K(((Ef=It[0])==null?void 0:Ef.key)||""),ro=u=>{var L,U,q;const h=((L=xt.value)==null?void 0:L[u])||{};if(h.enabled!==void 0)return!!h.enabled;const S=(U=se.value)==null?void 0:U[u],x=(q=S==null?void 0:S.fields)==null?void 0:q.find(te=>te.key==="enabled");return(x==null?void 0:x.default)!==void 0?!!x.default:!1},$o=A(()=>{var h;if(!cn.value)return[];const u=hn.value;return!u||!((h=Z.value)!=null&&h[u])?[]:Array.from(Gu({components:[cn.value],componentSchemas:Z.value,supported:kt}))}),ci=A(()=>$o.value.length?$o.value.map(h=>{var S;return((S=It.find(x=>x.key===h))==null?void 0:S.label)||h}).join("/"):""),Yn=A(()=>$o.value[0]||""),vo=()=>{t.value="Busses",Yn.value&&(dn.value=Yn.value)},ao=A(()=>(V.value.components||[]).map(u=>At(u)).filter(Boolean)),On=u=>{var L;if(!u)return;const h=(V.value.components||[]).find(U=>At(U)===u);if(!h||!((L=Z.value)==null?void 0:L[u]))return;Gu({components:[h],componentSchemas:Z.value,supported:kt}).size&&cs()},cs=()=>{P&&(clearTimeout(P),P=null),T.value=!1,requestAnimationFrame(()=>{T.value=!0,P=setTimeout(()=>{T.value=!1,P=null},3e3)})},us=A(()=>{const u=V.value.components.map(h=>At(h)).filter(Boolean);return u.length?u.every(h=>Z.value[h]):!0}),Us=A(()=>Gu({components:V.value.components,componentSchemas:Z.value,networkConfig:Ee.value,networkSchema:pe.value,protocolsConfig:p.value,enabledProtocols:Pe.value,protocolsSchemas:re.value,supported:kt})),zs=A(()=>Array.from(Us.value).sort()),ds=A(()=>It.map(u=>({key:u.key,label:u.label}))),ui=A(()=>{const u=It.find(h=>h.key===dn.value);return(u==null?void 0:u.schemaId)||""}),fs=A(()=>{var u;return dn.value?((u=xt.value)==null?void 0:u[dn.value])||{}:{}}),Io=[{key:"logger",label:"Logger",schemaId:"general/system/logger"},{key:"status_led",label:"Status LED",schemaId:"general/system/status_led"},{key:"debug",label:"Debug",schemaId:"general/system/debug"}],di=A(()=>V.value.system||{}),Ln=K(((Sf=Io[0])==null?void 0:Sf.key)||""),Mr=A(()=>Io.map(u=>({key:u.key,label:u.label}))),Mn=A(()=>{const u=Io.find(h=>h.key===Ln.value);return(u==null?void 0:u.schemaId)||""}),kn=A(()=>{var h;return Ln.value?((h=di.value)==null?void 0:h[Ln.value])||{}:{}}),To=A(()=>V.value.automation||{}),Kn=[{key:"time",label:"Time",schemaId:"general/automation/time"},{key:"deep_sleep",label:"Deep Sleep",schemaId:"general/automation/deep_sleep"},{key:"script",label:"Script",schemaId:"general/automation/script"},{key:"globals",label:"Globals",schemaId:"general/automation/globals"},{key:"interval",label:"Interval",schemaId:"general/automation/interval"}],bn=K(((xf=Kn[0])==null?void 0:xf.key)||""),Oi=A(()=>Kn.map(u=>({key:u.key,label:u.label}))),ps=A(()=>{const u=Kn.find(h=>h.key===bn.value);return(u==null?void 0:u.schemaId)||""}),fi=A(()=>{var u;return bn.value&&((u=Re.value)==null?void 0:u[bn.value])||null}),Li=A(()=>To.value||{}),Nr=A(()=>{var x,L;const u=bn.value;if(!u)return[];const S=(((x=fi.value)==null?void 0:x.fields)||[]).find(U=>U.key===u);return((L=S==null?void 0:S.item)==null?void 0:L.fields)||[]}),Ro=A(()=>({time:[],deep_sleep:[],script:[],globals:[],interval:NO(V.value.components,Z.value,lo.value)})),Dr=A(()=>{var u;return o.value&&i.value==="display"&&(((u=Ro.value)==null?void 0:u.interval)||[]).length>0}),Pr=(u,h)=>{var x;if(!(h!=null&&h.key))return"";const S=u==null?void 0:u[h.key];if(S==null||S==="")return"";if(h.key==="then"&&Array.isArray(S)){if(!S.length)return"";const L=S[0]||{},U=L.type||"",q=(x=L==null?void 0:L.config)!=null&&x.id?`: ${L.config.id}`:"";return U&&S.length===1?`then: ${U}${q}`:`then: ${S.length} actions`}return Array.isArray(S)?S.length?`${h.key}: ${S.length} items`:"":typeof S=="object"?`${h.key}: ${JSON.stringify(S)}`:`${h.key}: ${S}`},J=u=>Nr.value.map(h=>Pr(u,h)).filter(Boolean),xe=A(()=>{var u;return((u=B.value)==null?void 0:u.platform)||V.value.device.platform}),Ge=A(()=>{var u;return((u=B.value)==null?void 0:u.variant)||V.value.device.variant}),Ve=A(()=>kO(xe.value,Ge.value)),bt=A(()=>{var u;return Ve.value&&((u=j.value.sections)==null?void 0:u[Ve.value])||null}),Lt=A(()=>{var u;return((u=bt.value)==null?void 0:u.rows)||[]}),jt=A(()=>{var u;return((u=bt.value)==null?void 0:u.title)||"GPIO Guide"}),lo=K({}),pi=K([]),hi=K([]),jr=K([]),Vs=K([]),gi=K([]);pa("mdiIcons",gi);const Nn=A(()=>k(V.value.components,Z.value,(u,h)=>u.type==="id"&&typeof h=="string"&&h.trim())),_n=A(()=>qe(V.value.components,Z.value)),Ya=A(()=>pi.value.map(u=>(u==null?void 0:u.file)||"").filter(u=>!!u)),Dc=A(()=>Ya.value.filter(u=>u.toLowerCase().endsWith(".gif"))),Dn=A(()=>k(V.value.components,Z.value,(u,h)=>u.key==="name"&&typeof h=="string"&&h.trim())),Pc=A(()=>Be(V.value.components,Z.value,Nn.value,Dn.value)),jc=A(()=>I(V.value.components,Z.value,_n.value)),Ka=A(()=>Y(V.value.components,Z.value,_n.value,Ya.value,Dc.value,gi.value)),Pn=A(()=>{var U,q;const u=(U=Ee.value)==null?void 0:U.transport,h=((q=pe.value)==null?void 0:q.fields)||[],S=u?V.value.networkCore||{}:null,x=S?[{config:S,fields:h}]:[],L=[];return It.forEach(te=>{var ne,ze;if(!ro(te.key))return;const ce=(ne=se.value)==null?void 0:ne[te.key];ce!=null&&ce.fields&&L.push({config:((ze=xt.value)==null?void 0:ze[te.key])||{},fields:ce.fields})}),Ue(V.value.components,Z.value,[...x,...L])}),Zt=A(()=>{var S,x,L,U,q,te,ce,ne,ze,Ze,ut,rt,tt,wt,Nt,zt,En,uo,ft,Bo,Bn,Fo;const u=[],h=(yo,Uo)=>{Array.isArray(Uo)&&Uo.length&&u.push({config:yo,fields:Uo})};return h(un.value,(S=W.value)==null?void 0:S.fields),h(G.value,(x=ae.value)==null?void 0:x.fields),h(B.value,(L=he.value)==null?void 0:L.fields),h(B.value,(U=fe.value)==null?void 0:U.fields),h(Ee.value,(q=Ae.value)==null?void 0:q.fields),h(Ee.value,(te=pe.value)==null?void 0:te.fields),h(di.value||{},(ne=(ce=He.value)==null?void 0:ce.logger)==null?void 0:ne.fields),h(di.value||{},(Ze=(ze=He.value)==null?void 0:ze.status_led)==null?void 0:Ze.fields),h(di.value||{},(rt=(ut=He.value)==null?void 0:ut.debug)==null?void 0:rt.fields),h(To.value||{},(wt=(tt=Re.value)==null?void 0:tt.time)==null?void 0:wt.fields),h(To.value||{},(zt=(Nt=Re.value)==null?void 0:Nt.deep_sleep)==null?void 0:zt.fields),h(To.value||{},(uo=(En=Re.value)==null?void 0:En.script)==null?void 0:uo.fields),h(To.value||{},(Bo=(ft=Re.value)==null?void 0:ft.globals)==null?void 0:Bo.fields),h(To.value||{},(Fo=(Bn=Re.value)==null?void 0:Bn.interval)==null?void 0:Fo.fields),(V.value.components||[]).forEach(yo=>{var ea;const Uo=At(yo);if(!Uo)return;const bi=(ea=Z.value)==null?void 0:ea[Uo];bi!=null&&bi.fields&&h((yo==null?void 0:yo.config)||{},bi.fields)}),Jx(u)}),Br=A(()=>{var S,x;const u=[],h=((S=re.value)==null?void 0:S.api)||null;return Pe.value.includes("api")&&(h!=null&&h.fields)&&u.push({label:"protocols.api",config:((x=p.value)==null?void 0:x.api)||{},schema:h}),Ie(u)}),Hs=A(()=>[...Pc.value,...jc.value,...Ka.value,...Br.value]),qa=A({get:()=>o.value?"tabs":"single",set:u=>{o.value=u==="tabs"}});nt(()=>o.value,u=>{(!V.value.ui||typeof V.value.ui!="object")&&(V.value.ui={}),V.value.ui.splitPreview=!!u;try{localStorage.setItem("vebBuilderSplitPreview",u?"1":"0")}catch(h){console.error("Failed to store preview mode",h)}Cn()}),nt(()=>ke.value,u=>{(!V.value.ui||typeof V.value.ui!="object")&&(V.value.ui={}),V.value.ui.modeLevel=Se(u),Cn()});const Za=u=>{H.value=u,t.value="Components",M.value=!1},Xa=()=>{H.value=V.value.components.length,t.value="Components",M.value=!0,v.value=""},Ja=u=>{if(!(u<0&&!Ys.value)&&!(u>0&&!Ks.value)){if(u>0){a.value=Math.min(a.value+1,Math.max(0,co.value.length-1));return}a.value=Math.max(0,a.value-1)}},Ur=u=>{var h,S;(S=(h=u==null?void 0:u.target)==null?void 0:h.blur)==null||S.call(h)},Qa=()=>{window.dispatchEvent(new CustomEvent("app:route-switch-request",{detail:{routeName:"dashboard"}}))},el=u=>{if(H.value===null)return;const h=H.value,S=V.value.components[h],x=At(S),L={id:u.id,config:x===u.id?(S==null?void 0:S.config)||{}:{},customConfig:x===u.id&&(S==null?void 0:S.customConfig)||""};h>=V.value.components.length?V.value.components.push(L):V.value.components.splice(h,1,L),zr(u.id),M.value=!1},Mi=u=>{oe.value=u,ee.value=!0},Bc=()=>{oe.value!==null&&(V.value.components.splice(oe.value,1),H.value=null,oe.value=null,ee.value=!1,Xa(),Cn())},hs=()=>{oe.value=null,ee.value=!1};nt(()=>t.value,u=>{u!=="Components"&&(M.value=!1,v.value="")});const Gs=A(()=>{var h;const u=v.value.trim().toLowerCase();return(((h=ye.value)==null?void 0:h.categories)||[]).map(S=>{const x=S.items.filter(U=>lt(U,u)),L=S.subcategories.map(U=>({...U,items:U.items.filter(q=>lt(q,u))})).filter(U=>U.items.length>0);return{...S,items:x,subcategories:L}}).filter(S=>S.items.length>0||S.subcategories.length>0)}),zr=u=>{!u||Z.value[u]||Uv(u).then(h=>{Z.value={...Z.value,[u]:h}}).catch(()=>{Z.value={...Z.value,[u]:null}})},vi=()=>({schemaVersion:1,isSaved:!1,esphomeCore:{},substitutions:{},automation:{},system:{logger:{enabled:!0,level:"DEBUG"}},platformCore:{platform:"esp32",variant:"esp32",framework:"esp-idf"},networkCore:{transport:"wifi"},protocolsCore:{},bussesCore:{},device:{friendlyName:"Kitchen Sensor",platform:"esp32",variant:"esp32",framework:"arduino"},components:[],ui:{splitPreview:!1,modeLevel:"Simple",deviceHost:""}}),Ni=u=>{if(!u||typeof u!="object")return vi();let h;try{h=JSON.parse(vs(u))}catch{h=vi()}return(!h||typeof h!="object")&&(h=vi()),delete h.isModified,h.ui&&typeof h.ui=="object"&&(delete h.ui.isModified,delete h.ui.isSaved),h.isSaved=h.isSaved===!0,h},gs=u=>{const h=Ni(u);return delete h.isSaved,vs(h)},Di=K(""),Uc=u=>{const h=u==null?void 0:u.emitYAML;return h==="never"||h==="always"||h==="visible"||h==="dependsOn"?h:u!=null&&u.dependsOn||u!=null&&u.globalDependsOn?"dependsOn":"visible"},zc=(u,h,S,x)=>Ic(u,h,S,x),tl=(u,h,S,x)=>{const L=Uc(u);if(L==="never")return!1;if(L==="always")return!0;const U=zc(u,h,S,x);return L==="dependsOn"&&(u!=null&&u.dependsOn||u!=null&&u.globalDependsOn),U},Vc=(u,h)=>{if(u==null)return!1;const S=String(u);if(!S.trim())return!1;const x=Number(h==null?void 0:h.minLength)||0;return x?S.length>=x:!0},Ws=(u,h,S)=>!Array.isArray(u)||!u.length?!1:u.some(x=>{var q,te;const L=x==null?void 0:x.key;if(!L||!tl(x,h,u,S))return!1;if(x.type==="password"){const ce=oc(x);return ce.mode!=="none"&&ce.onEmpty}const U=h==null?void 0:h[L];if(x.type==="object"){const ce=U&&typeof U=="object"&&!Array.isArray(U)?U:{};return Ws(x.fields||[],ce,S)}return x.type==="list"&&Array.isArray(U)&&((q=x.item)==null?void 0:q.type)==="object"&&Array.isArray((te=x.item)==null?void 0:te.fields)?U.some(ce=>ce&&typeof ce=="object"&&!Array.isArray(ce)&&Ws(x.item.fields,ce,S)):!1}),mi=(u,h,S)=>{if(!u||typeof u!="object"||!Array.isArray(h))return!1;let x=!1;return h.forEach(L=>{var te,ce;const U=L==null?void 0:L.key;if(!U||!tl(L,u,h,S))return;if(L.type==="password"){const ne=oc(L);if(ne.mode==="none"||!ne.onEmpty)return;const ze=u[U];if(Vc(ze,ne))return;const Ze=Vv(L);if(!Ze)return;u[U]=Ze,x=!0;return}const q=u[U];if(L.type==="object"){let ne=q&&typeof q=="object"&&!Array.isArray(q)?q:null;if(!ne){if(!Ws(L.fields||[],{},S))return;u[U]={},ne=u[U],x=!0}mi(ne,L.fields||[],S)&&(x=!0);return}L.type==="list"&&Array.isArray(q)&&((te=L.item)==null?void 0:te.type)==="object"&&Array.isArray((ce=L.item)==null?void 0:ce.fields)&&q.forEach(ne=>{!ne||typeof ne!="object"||Array.isArray(ne)||mi(ne,L.item.fields,S)&&(x=!0)})}),x},nl=()=>{var L,U,q,te,ce,ne;const u=V.value;if(!u||typeof u!="object")return!1;const h=Zt.value||{};let S=!1;const x=(ze,Ze,ut)=>{if(!Array.isArray(ut)||!ut.length||!ze||typeof ze!="object")return;let rt=ze[Ze];if(!rt||typeof rt!="object"||Array.isArray(rt)){if(!Ws(ut,{},h))return;ze[Ze]={},rt=ze[Ze],S=!0}mi(rt,ut,h)&&(S=!0)};return x(u,"esphomeCore",((L=W.value)==null?void 0:L.fields)||[]),x(u,"substitutions",((U=ae.value)==null?void 0:U.fields)||[]),x(u,"platformCore",((q=he.value)==null?void 0:q.fields)||[]),u.platformCore&&typeof u.platformCore=="object"&&mi(u.platformCore,((te=fe.value)==null?void 0:te.fields)||[],h)&&(S=!0),x(u,"networkCore",((ce=Ae.value)==null?void 0:ce.fields)||[]),u.networkCore&&typeof u.networkCore=="object"&&mi(u.networkCore,((ne=pe.value)==null?void 0:ne.fields)||[],h)&&(S=!0),(!u.protocolsCore||typeof u.protocolsCore!="object")&&(u.protocolsCore={},S=!0),F.forEach(ze=>{var Ze,ut;x(u.protocolsCore,ze.key,((ut=(Ze=re.value)==null?void 0:Ze[ze.key])==null?void 0:ut.fields)||[])}),(!u.bussesCore||typeof u.bussesCore!="object")&&(u.bussesCore={},S=!0),It.forEach(ze=>{var Ze,ut;x(u.bussesCore,ze.key,((ut=(Ze=se.value)==null?void 0:Ze[ze.key])==null?void 0:ut.fields)||[])}),(!u.system||typeof u.system!="object")&&(u.system={},S=!0),Io.forEach(ze=>{var Ze,ut;x(u.system,ze.key,((ut=(Ze=He.value)==null?void 0:Ze[ze.key])==null?void 0:ut.fields)||[])}),(!u.automation||typeof u.automation!="object")&&(u.automation={},S=!0),Kn.forEach(ze=>{var Ze,ut;mi(u.automation,((ut=(Ze=Re.value)==null?void 0:Ze[ze.key])==null?void 0:ut.fields)||[],h)&&(S=!0)}),(u.components||[]).forEach(ze=>{var rt,tt;const Ze=At(ze);if(!Ze)return;const ut=((tt=(rt=Z.value)==null?void 0:rt[Ze])==null?void 0:tt.fields)||[];ut.length&&((!ze.config||typeof ze.config!="object")&&(ze.config={},S=!0),mi(ze.config,ut,h)&&(S=!0))}),S},V=K(vi()),Ko=K(!0);let Pi=!1;const Hc=A(()=>{var u;return(u=bt.value)!=null&&u.title?bt.value.title:xe.value==="esp8266"?"ESP8266":xe.value==="esp32"?Ge.value||"esp32":""});nt(()=>V.value.components.map(u=>At(u)),u=>{u.filter(Boolean).forEach(h=>zr(h))},{immediate:!0}),nt(()=>Hs.value.length,u=>{u||(Me.value=!1)}),nt(()=>V.value,()=>{if(!Ko.value&&!Pi){Pi=!0;try{nl()}finally{Pi=!1}}},{deep:!0,immediate:!0}),nt(()=>[W.value,ae.value,he.value,fe.value,Ae.value,pe.value,re.value,se.value,He.value,Re.value,Z.value],()=>{if(!Ko.value&&!Pi){Pi=!0;try{nl()}finally{Pi=!1}}},{deep:!0});const vs=u=>{const h=new WeakSet;return JSON.stringify(u,(S,x)=>{if(typeof x!="function"){if(typeof x=="object"&&x!==null){if(h.has(x))return;h.add(x)}return x}},2)};A(()=>vs(V.value));const jo=(u,h)=>{if(!u||typeof u!="object")return{};const S={};return(h||[]).forEach(x=>{var U;if(!(x!=null&&x.key))return;const L=u[x.key];if(L!==void 0){if(x.type==="object"&&L&&typeof L=="object"&&!Array.isArray(L)){S[x.key]=jo(L,x.fields||[]);return}if(x.type==="list"&&Array.isArray(L)&&((U=x.item)!=null&&U.fields)){S[x.key]=L.map(q=>q&&typeof q=="object"?jo(q,x.item.fields||[]):q);return}S[x.key]=L}}),S},Vr=u=>{const h=Array.isArray(u)?u:[];return h.length?!h.some(S=>S.required):!1},ji=A(()=>{var yo,Uo,bi,ea,kf,Cf,Af,$f,If;const u=[],h=V.value.substitutions||{},S=((yo=ae.value)==null?void 0:yo.fields)||[];if(S.length){const Dt=jo(h,S),Xt=Ho(Dt,S,0,V.value,Zt.value);Xt.length&&u.push(...Xt)}const x=V.value.esphomeCore||{},L=((Uo=W.value)==null?void 0:Uo.fields)||[];if(L.length){const Dt=jo(x,L),Xt=Ho(Dt,L,2,V.value,Zt.value);Xt.length&&(u.push(""),u.push("esphome:"),u.push(...Xt))}const U=(bi=B.value)==null?void 0:bi.platform,q=((ea=fe.value)==null?void 0:ea.fields)||[];if(U&&q.length)if(u.push(""),u.push(`${U}:`),U==="esp32"){const{platform:Dt,framework:Xt,framework_config:en,advanced:vn,components:fn,...Tn}=B.value||{},bo=q.filter(qo=>!["framework","framework_config","advanced","components"].includes(qo.key)),zo=Ho(Tn,bo,2,V.value,Zt.value);zo.length&&u.push(...zo);const zi=en||{},ws=Xt||Object.keys(zi).length,Zn=vn&&Object.keys(vn).length,mn=Array.isArray(fn)&&fn.length;if(ws||Zn||mn){u.push("  framework:"),Xt&&u.push(`    type: ${Xt}`);const qo=q.find(na=>na.key==="framework_config"),ta=q.find(na=>na.key==="advanced"),Vi=q.find(na=>na.key==="components"),_o=[...(qo==null?void 0:qo.fields)||[],...ta?[ta]:[],...Vi?[Vi]:[]],Es={...zi,...Zn?{advanced:vn}:{},...mn?{components:fn}:{}},Tf=Ho(Es,_o,4,V.value,Zt.value);Tf.length&&u.push(...Tf)}}else{const{platform:Dt,...Xt}=B.value||{};u.push(...Ho(Xt,q,2,V.value,Zt.value))}const te=(kf=Ee.value)==null?void 0:kf.transport,ce=((Cf=Ae.value)==null?void 0:Cf.fields)||[],ne=((Af=pe.value)==null?void 0:Af.fields)||[];if(te&&ne.length){const{transport:Dt,...Xt}=Ee.value||{},en=jo(Xt,ne),vn=jo(Xt,ce);let fn=!1,Tn=null,bo=[],zo=!1;if(te==="wifi"){const mn=en.ap;if(mn&&typeof mn=="object")if((mn.enabled!==void 0?mn.enabled:!0)===!1)delete en.ap;else{const{enabled:ta,captive_portal:Vi,..._o}=mn;fn=Vi!==void 0?!!Vi:!0,en.ap=Object.keys(_o).length?_o:{}}}const zi=ce.find(mn=>mn.key==="web_server");bo=(zi==null?void 0:zi.fields)||[];const ws=vn.web_server;if(ws&&typeof ws=="object"&&(zo=ws.enabled!==void 0?!!ws.enabled:!1,zo)){const{enabled:mn,...qo}=ws;Tn=qo}const Zn=Ho(en,ne,2,V.value,Zt.value);if(Zn.length){if(te==="wifi"){const _o=Zn.findIndex(Es=>Es.startsWith("  ")&&Es.trimStart().startsWith("ap:"));if(_o!==-1){const Es=[Zn.splice(_o,1)[0]];for(;_o<Zn.length&&Zn[_o].startsWith("    ");)Es.push(Zn.splice(_o,1)[0]);Zn.length&&Zn[Zn.length-1].trim()!==""&&Zn.push(""),Zn.push("  # Enable fallback hotspot (captive portal) in case wifi connection fails",...Es)}}u.push(""),u.push(`${te}:`),u.push(...Zn),te==="wifi"&&fn&&(u.push(""),u.push("captive_portal:"));const mn=(($f=Ee.value)==null?void 0:$f.ota)||null,qo=(mn==null?void 0:mn.enabled)??!0,ta=(mn==null?void 0:mn.use_password)??!0,Vi=(If=mn==null?void 0:mn.password)==null?void 0:If.trim();if(qo&&(u.push(""),u.push("ota:"),u.push("  - platform: esphome"),ta&&Vi&&u.push(`    password: "${Vi}"`)),zo&&(u.push(""),u.push("web_server:"),bo.length)){const _o=Ho(Tn||{},bo,2,V.value,Zt.value);_o.length&&u.push(..._o)}}}const ze=p.value||{},Ze=re.value||{};F.forEach(Dt=>{if(!Pe.value.includes(Dt.key))return;const Xt=Ze[Dt.key],en=(Xt==null?void 0:Xt.fields)||[];if(!en.length)return;const vn=jo(ze[Dt.key]||{},en),fn=Ho(vn,en,2,V.value,Zt.value);!fn.length&&!Vr(en)||(u.push(""),u.push(`${Dt.key}:`),fn.length&&u.push(...fn))});const ut=He.value||{},rt=di.value||{};[{key:"logger",label:"logger"},{key:"status_led",label:"status_led"},{key:"debug",label:"debug"}].forEach(Dt=>{const Xt=ut[Dt.key],en=(Xt==null?void 0:Xt.fields)||[];if(!en.length)return;const vn=rt[Dt.key]||{};if(!vn.enabled)return;const fn=jo(vn||{},en),Tn=Ho(fn,en,2,V.value,Zt.value);!Tn.length&&!Vr(en)||(u.push(""),u.push(`${Dt.label}:`),u.push(...Tn))});const wt=Re.value||{},Nt=To.value||{},zt=Ro.value||{},En=(Dt,Xt)=>{const en=[];return Dt.forEach(vn=>{const fn=Ho(vn||{},Xt,4,V.value,Zt.value);if(!fn.length){en.push("  - {}");return}const Tn="  - ",bo=fn[0];en.push(`${Tn}${bo.slice(4)}`),fn.slice(1).forEach(zo=>en.push(zo))}),en},uo=Dt=>Array.isArray(Dt)?Dt:Dt&&typeof Dt=="object"?[Dt]:[];Kn.forEach(Dt=>{var zo;const Xt=wt[Dt.key],vn=((Xt==null?void 0:Xt.fields)||[]).find(zi=>zi.key===Dt.key),fn=((zo=vn==null?void 0:vn.item)==null?void 0:zo.fields)||[],Tn=uo(zt[Dt.key]),bo=uo(Nt[Dt.key]);!fn.length||!Tn.length&&!bo.length||(u.push(""),u.push(`${Dt.key}:`),Tn.length&&(u.push("  # Auto-generated"),u.push(...En(Tn,fn))),bo.length&&(Tn.length&&u.push("  # Added by user"),u.push(...En(bo,fn))))});const ft=xt.value||{},Bo=se.value||{};[{key:"i2c",label:"i2c"},{key:"spi",label:"spi"},{key:"uart",label:"uart"},{key:"one_wire",label:"one_wire"},{key:"i2s",label:"i2s"},{key:"canbus",label:"canbus"}].forEach(Dt=>{if(!It.find(bo=>bo.key===Dt.key)||!ro(Dt.key))return;const en=Bo[Dt.key],vn=(en==null?void 0:en.fields)||[];if(!vn.length)return;const fn=jo(ft[Dt.key]||{},vn),Tn=Ho(fn,vn,2,V.value,Zt.value);!Tn.length&&!Vr(vn)||(u.push(""),u.push(`${Dt.label}:`),u.push(...Tn))});const Fo=XO(V.value.components,Z.value,Zt.value,lo.value);for(Fo.length&&(u.push(""),u.push(...Fo));u.length&&u[0].trim()==="";)u.shift();return u.join(`
`)}),Gc=u=>{const h=[],S=(u||"").split(/\r?\n/);let x=null;const L=U=>{if(!U||/^\s/.test(U))return!1;const q=U.trim();return!q||q.startsWith("#")?!1:q.includes(":")};return S.forEach(U=>{if(L(U)){x&&h.push(x),x={key:U.split(":")[0].trim(),lines:[U]};return}x&&x.lines.push(U)}),x&&h.push(x),h},Wc=A(()=>Gc(ji.value)),Yc=A(()=>{var x,L;const u=new Set(["esphome","substitutions","ota","api","mqtt","espnow","captive_portal","web_server","logger","status_led","debug"]),h=(x=B.value)==null?void 0:x.platform;h&&u.add(h);const S=(L=Ee.value)==null?void 0:L.transport;return S&&u.add(S),u}),ol=new Set(["font","image","images","graph","animation"]),il=new Set(["time","deep_sleep","script","globals","interval"]),Kc=A(()=>new Set(It.map(u=>u.key))),sl=u=>u.split(" ").filter(Boolean).map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" "),Hr=u=>{const h={api:"API",ota:"OTA",mqtt:"MQTT",espnow:"ESP-NOW",esphome:"ESPHome",i2c:"I2C",spi:"SPI",uart:"UART",i2s:"I2S",one_wire:"1-Wire",canbus:"CAN Bus",status_led:"Status LED",web_server:"Web Server"};if(h[u])return h[u];const S=u.replace(/[_-]+/g," ").trim();return sl(S)},Gr=(u=[])=>u.map(S=>S.lines.join(`
`).replace(/\n+$/g,"")).join(`

`).trim(),co=A(()=>{const u=Wc.value,h=new Set,S=[],x=u.filter(ne=>Yc.value.has(ne.key));x.length&&(S.push({key:"core",label:"Core",blocks:x}),x.forEach(ne=>h.add(ne.key)));const L=u.filter(ne=>il.has(ne.key));L.length&&(S.push({key:"automation",label:"Automation",blocks:L}),L.forEach(ne=>h.add(ne.key)));const U=u.filter(ne=>Kc.value.has(ne.key));U.length&&(S.push({key:"busses",label:"Busses",blocks:U}),U.forEach(ne=>h.add(ne.key)));const q=u.filter(ne=>ol.has(ne.key)),te=u.filter(ne=>ne.key==="display"),ce=[...q,...te];return ce.length&&(S.push({key:"display",label:"Display",blocks:ce}),ce.forEach(ne=>h.add(ne.key))),u.forEach(ne=>{h.has(ne.key)||(S.push({key:ne.key,label:Hr(ne.key),blocks:[ne]}),h.add(ne.key))}),S});Rg(()=>{r.value=[]});const mo=async()=>{await Ao();const u=s.value;l.value=(u==null?void 0:u.clientWidth)||0,d.value=r.value.map(h=>(h==null?void 0:h.offsetWidth)||0),a.value>=co.value.length&&(a.value=0)},Wr=u=>{const h=d.value,S=l.value;if(!h.length||S<=0)return Math.max(0,u);let x=0,L=u;for(let U=u;U>=0;U-=1){const q=h[U]||0,te=U===u?q:x+zh+q;if(te>S)break;x=te,L=U}return L},Yr=A(()=>{const u=co.value,h=d.value,S=l.value;if(!u.length)return[];let x=0;const L=Math.min(a.value,u.length-1),U=[];for(let q=L;q<u.length;q+=1){const te=h[q]||0,ce=U.length?x+zh+te:x+te;if(ce>S)break;x=ce,U.push(u[q])}return U}),Kr=A(()=>Yr.value.length?a.value+Yr.value.length-1:-1),Ys=A(()=>a.value>0),Ks=A(()=>Kr.value>=0&&Kr.value<co.value.length-1),rl=u=>{if(u<a.value){a.value=u;return}u>Kr.value&&(a.value=Wr(u))},qc=async u=>{const h=co.value.findIndex(S=>S.key===u);h!==-1&&(i.value=u,await mo(),rl(h))},Zc=()=>{if(t.value==="Busses")return"busses";if(t.value==="Automation")return"automation";if(t.value==="Components"){const{domain:u}=ln(hn.value||"");return u?u==="display"?"display":u:""}return"core"},qr=async()=>{if(!o.value)return;const u=Zc();if(!u)return;const h=co.value.findIndex(S=>S.key===u);h!==-1&&(i.value=co.value[h].key,await mo(),rl(h))};nt(()=>co.value,async u=>{const h=u.map(q=>q.key),S=f.value,x=new Set(S),L=h.find(q=>!x.has(q));if(f.value=h,!o.value)return;if(!S.length){await mo(),await qr();return}if(!L||Ko.value||L==="busses")return;const U=h.indexOf(L);U!==-1&&(i.value=L,await mo(),a.value=Wr(U))},{immediate:!0}),nt(()=>[t.value,hn.value],()=>{qr()}),nt(()=>o.value,u=>{u&&qr()});const ms=A(()=>{if(!o.value)return ji.value;const u=co.value.find(h=>h.key===i.value);return u?Gr(u.blocks):""}),ys=()=>{const u=g.value;if(!u){m.value=!1;return}const h=u.scrollHeight>u.clientHeight+1,S=u.scrollWidth>u.clientWidth+1;m.value=h||S},Xc=A(()=>C.value?"Copied":"Copy code"),Jc=async()=>{const u=ms.value||"";if(u)try{await navigator.clipboard.writeText(u),C.value=!0,$&&clearTimeout($),$=setTimeout(()=>{C.value=!1,$=null},1500)}catch(h){console.error("Failed to copy preview",h)}};nt(()=>[o.value,co.value],([u,h])=>{if(!u)return;if(!h.length){i.value="";return}h.some(x=>x.key===i.value)||(i.value=h[0].key),mo()},{immediate:!0}),nt(()=>[ms.value,o.value,i.value],async()=>{await Ao(),ys()},{immediate:!0}),li(()=>{ys(),le(),window.addEventListener("resize",ys),window.addEventListener("keydown",vf),document.addEventListener("visibilitychange",ff),window.addEventListener("app:builder-export",ll),window.addEventListener("app:install-option",hf),window.addEventListener("app:builder-logs",gf),window.addEventListener("app:builder-save-request",mf),pf(),vl()}),nt(()=>o.value,()=>{mo()}),nt(()=>co.value.length,()=>{mo()});const al=A(()=>{const u=ms.value||"";return Np.highlight(u,{language:"yaml"}).value}),Qc=()=>{if(Hs.value.length){Me.value=!0;return}const u=new Blob([ji.value],{type:"text/yaml"}),h=URL.createObjectURL(u),S=document.createElement("a");S.href=h,S.download=at.value||"config.yaml",S.click(),URL.revokeObjectURL(h)},ll=()=>{Qc()},Cn=()=>{if(!Ko.value)try{const u=vs(Ni(V.value));localStorage.setItem(_r,u)}catch(u){console.error("Failed to save config",u)}},cl=new URL("./",window.location.href).toString(),ul=new URL("api/assets/",cl).toString(),bs=u=>new URL(u,cl).toString(),jn=async(u,h={})=>fetch(bs(u),{credentials:"include",...h}),eu=u=>{const h=String(u).toLowerCase(),S=h.includes("italic")?"italic":"normal",x=Number.parseInt(h,10),L=Number.isFinite(x)?x:400;return{style:S,weight:L}},dl=u=>new Set((u||[]).map(h=>String((h==null?void 0:h.file)||"").trim()).filter(h=>!!h)),qs=()=>{var L,U,q;const u=Vs.value[0];if(!u)return null;const h=(L=u.variants)!=null&&L.includes("regular")?"regular":((U=u.variants)==null?void 0:U[0])||"regular",{style:S,weight:x}=eu(h);return{source:"google",family:u.family||"",variant:h,url:((q=u.files)==null?void 0:q[h])||"",style:S,weight:x}},fl=(u,h)=>{if(!h){u.fontSource="",u.fontFamily="",u.fontVariant="regular",u.fontUrl="",u.fontFile="",u.fontWeight=400,u.fontStyle="normal";return}u.fontSource="google",u.fontFamily=h.family,u.fontVariant=h.variant,u.fontUrl=h.url,u.fontFile="",u.fontWeight=h.weight,u.fontStyle=h.style},Zr=(u,h,S)=>{if(!S){u[`${h}FontSource`]="",u[`${h}FontFamily`]="",u[`${h}FontVariant`]="regular",u[`${h}FontUrl`]="",u[`${h}FontFile`]="",u[`${h}FontWeight`]=400,u[`${h}FontStyle`]="normal";return}u[`${h}FontSource`]="google",u[`${h}FontFamily`]=S.family,u[`${h}FontVariant`]=S.variant,u[`${h}FontUrl`]=S.url,u[`${h}FontFile`]="",u[`${h}FontWeight`]=S.weight,u[`${h}FontStyle`]=S.style},pl=()=>{const u=dl(pi.value),h=new Set([...u].filter(U=>U.toLowerCase().endsWith(".gif"))),S=dl(hi.value),x=qs();let L=!1;return(V.value.components||[]).forEach(U=>{var te;const q=(te=U==null?void 0:U.config)==null?void 0:te._display_builder;!q||!Array.isArray(q.elements)||q.elements.forEach(ce=>{if(!(!ce||typeof ce!="object")){if(ce.type==="image"){const ne=Ar(ce);(ce.imageType!==ne.imageType||ce.imageTransparency!==ne.imageTransparency||!!(ce.imageInvertAlpha??ce.invert)!==ne.imageInvertAlpha||ce.imageDither!==ne.imageDither||ce.imageByteOrder!==ne.imageByteOrder)&&(Object.assign(ce,ne),L=!0);const ze=String(ce.image||"").trim();ze&&!u.has(ze)&&(ce.image="",ce.imageUrl="",L=!0)}if(ce.type==="animation"){const ne=$r(ce);(ce.animationType!==ne.animationType||ce.animationTransparency!==ne.animationTransparency||!!ce.animationInvertAlpha!==ne.animationInvertAlpha||ce.animationDither!==ne.animationDither||ce.animationByteOrder!==ne.animationByteOrder)&&(Object.assign(ce,ne),L=!0);const ze=String(ce.animationFile||"").trim();ze&&!h.has(ze)&&(ce.animationFile="",ce.animationUrl="",L=!0)}if(ce.type==="text"){const ne=String(ce.fontFile||"").trim();String(ce.fontSource||"")==="local"&&ne&&!S.has(ne)&&(fl(ce,x),L=!0)}if(ce.type==="graph"){const ne=String(ce.legendNameFontFile||"").trim();String(ce.legendNameFontSource||"")==="local"&&ne&&!S.has(ne)&&(Zr(ce,"legendName",x),L=!0);const ze=String(ce.legendValueFontFile||"").trim();String(ce.legendValueFontSource||"")==="local"&&ze&&!S.has(ze)&&(Zr(ce,"legendValue",x),L=!0)}}})}),L&&(V.value.isSaved=!1,Cn()),L},Bi=async(u=!1,h=!1)=>{var S,x,L;Q.value="",De.value=!0;try{const U=await sL(jn,{kind:"all",refresh:u}),q=Array.isArray((S=U==null?void 0:U.images)==null?void 0:S.items)?U.images.items:[],te=Array.isArray((x=U==null?void 0:U.fonts)==null?void 0:x.items)?U.fonts.items:[],ce=Array.isArray((L=U==null?void 0:U.audio)==null?void 0:L.items)?U.audio.items:[];pi.value=q.map(ne=>({...ne,url:Wu(bs,"images",ne.file)})),hi.value=te.map(ne=>({...ne,url:Wu(bs,"fonts",ne.file)})),jr.value=ce.map(ne=>({...ne,url:Wu(bs,"audio",ne.file)})),Vs.value=Array.isArray(U==null?void 0:U.googleFonts)?U.googleFonts:[],h&&pl()}catch(U){Q.value=U instanceof Error?U.message:"Assets load failed",pi.value=[],hi.value=[],jr.value=[],Vs.value=[]}finally{De.value=!1}},Zs=()=>{ht.value=!0},tu=()=>{Zs()},Xr=async(u,h)=>{try{const S=await u.json(),x=typeof(S==null?void 0:S.error)=="string"?S.error.trim():"",L=typeof(S==null?void 0:S.details)=="string"?S.details.trim():"";if(x&&L)return`${x}: ${L}`;if(x)return x;if(L)return L}catch{}return h},Jr=async()=>{st.value="",Qe.value=!0;try{const u=await jn("api/secrets/raw");if(!u.ok)throw new Error(await Xr(u,`Secrets load failed (${u.status})`));const h=await u.json();Oe.value=typeof(h==null?void 0:h.content)=="string"?h.content:""}catch(u){st.value=u instanceof Error?u.message:"Secrets load failed",Oe.value=""}finally{Qe.value=!1}},qn=async()=>{Qe.value||Ke.value||(we.value=!0,await Jr())},nu=()=>{Ke.value||(we.value=!1,st.value="")},ou=async u=>{if(!(Qe.value||Ke.value)){st.value="",Ke.value=!0;try{const h=await jn("api/secrets/raw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:typeof u=="string"?u:""})});if(!h.ok)throw new Error(await Xr(h,`Secrets save failed (${h.status})`));Oe.value=typeof u=="string"?u:""}catch(h){st.value=h instanceof Error?h.message:"Secrets save failed"}finally{Ke.value=!1}}},y=async({kind:u,file:h})=>{const S=["images","fonts","audio"].includes(String(u||"").toLowerCase())?String(u).toLowerCase():"";if(!S||!h){Q.value="Invalid kind";return}Q.value="",Ye.value=!0;try{await rL(jn,{kind:S,file:h}),await Bi(!0,!0)}catch(x){Q.value=x instanceof Error?x.message:"Asset upload failed"}finally{Ye.value=!1}},b=async({kind:u,from:h,to:S})=>{const x=["images","fonts","audio"].includes(String(u||"").toLowerCase())?String(u).toLowerCase():"";if(!x){Q.value="Invalid kind";return}Q.value="",Ye.value=!0;try{await aL(jn,{kind:x,from:h,to:S}),await Bi(!0,!0)}catch(L){Q.value=L instanceof Error?L.message:"Asset rename failed"}finally{Ye.value=!1}},z=async({kind:u,file:h})=>{const S=["images","fonts","audio"].includes(String(u||"").toLowerCase())?String(u).toLowerCase():"";if(!S){Q.value="Invalid kind";return}Q.value="",Ye.value=!0;try{await lL(jn,{kind:S,file:h}),await Bi(!0,!0)}catch(x){Q.value=x instanceof Error?x.message:"Asset delete failed"}finally{Ye.value=!1}},le=()=>{if(!(!("BroadcastChannel"in window)||me))try{me=new BroadcastChannel(iN)}catch{me=null}},be=()=>{me&&(me.close(),me=null)},Ne=()=>{const u={type:"projects-updated",ts:Date.now()};window.dispatchEvent(new CustomEvent("app:projects-updated",{detail:u})),me&&me.postMessage(u);try{localStorage.setItem(oN,JSON.stringify(u))}catch{}},et=u=>{const h=u.split(".");if(h.length!==4)return!1;const S=h.map(x=>Number(x));return S.some(x=>Number.isNaN(x)||x<0||x>255)?!1:S[0]===10||S[0]===127||S[0]===192&&S[1]===168||S[0]===172&&S[1]>=16&&S[1]<=31},ct=u=>{if(!u)return!1;const h=u.toLowerCase();return h==="localhost"||h.endsWith(".local")||h==="::1"||h==="[::1]"?!0:et(h)},Ut=A(()=>String(at.value||"").replace(/\.yaml$/i,"")),wn=A(()=>Wa(at.value)),sn=u=>{const h=String(u||"").trim();if(!h)return"";const S=h.replace(/\.yaml$/i,"").trim();return S?`${S}.local`:""},yi=A(()=>{var u,h;return String(((h=(u=V.value)==null?void 0:u.ui)==null?void 0:h.deviceHost)||"").trim()}),hl=A(()=>{const u=yi.value;return u||sn(at.value)}),iu=()=>{const u=wn.value;if(!u){dt.value="offline",mt.value="",Ct.value="";return}const h=iL(u);if(!h){dt.value="offline",mt.value="",Ct.value="";return}dt.value=String(h.status||"").toLowerCase()==="online"?"online":"offline",mt.value=String(h.host||"").trim(),Ct.value=String(h.name||Ut.value).trim()},Xs=({status:u,host:h="",name:S=""})=>{const x=wn.value;x&&Wm({[x]:{status:u==="online"?"online":"offline",host:String(h||"").trim(),name:String(S||"").trim(),updatedAt:Date.now()}})},gl=async u=>{if(!u)return;const h=sn(u),S=await jn("api/devices/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yaml:u,...h?{host:h}:{}})});if(!S.ok)throw new Error(await Qr(S,"Device registration failed"))},_s=async({refresh:u=!1}={})=>{const h=String(at.value||"").trim();if(!h){dt.value="offline",mt.value="",Ct.value="";return}try{const S=await jn(`api/devices/status?yaml=${encodeURIComponent(h)}&refresh=${u?1:0}`);if(!S.ok){dt.value="offline",mt.value="",Ct.value="",Xs({status:"offline"});return}const x=await S.json(),L=Ut.value,U=x!=null&&x.device&&typeof x.device=="object"?x.device:null;if(!U){dt.value="offline",mt.value="",Ct.value="",Xs({status:"offline"});return}const q=String(U.status||"").toLowerCase()==="online"?"online":"offline";dt.value=q,mt.value=String(U.host||"").trim(),Ct.value=String(U.name||L).trim(),Xs({status:q,host:mt.value,name:Ct.value})}catch{dt.value="offline",mt.value="",Ct.value="",Xs({status:"offline"})}},vl=()=>{document.visibilityState==="visible"&&(de||(de=setInterval(()=>{bl.value||_s({refresh:!0})},12e3)))},ml=()=>{de&&(clearInterval(de),de=null)},ff=()=>{if(document.visibilityState==="visible"){_s({refresh:!0}),vl();return}ml()},yl=A(()=>{const u=String(at.value||"").trim(),h=String(ji.value||"").trim();return!!(u&&h)}),su=A(()=>dt.value==="online"&&!!hl.value),ru=A(()=>dt.value==="online"),Ym=A(()=>dt.value==="online"?"Online":"Offline"),Km=A(()=>dt.value==="online"?"is-online":"is-offline"),qm=Rm({canInstall:()=>yl.value,canUseOta:()=>su.value,canLogs:()=>ru.value,getYamlName:()=>at.value,getDeviceHost:()=>hl.value,fetchApi:jn,streamUrl:bs,setError:u=>{yt.value=u},clearError:()=>{yt.value=""},prepareBeforeJob:async()=>{if(await bf(),!await cu(!0))throw new Error(yt.value||"Project save failed before install");return await gl(at.value),!0},preferLongPoll:!ct(window.location.hostname||"")}),{compileModalOpen:Zm,compileAutoScroll:Xm,compileLogLines:Jm,compileIsReconnecting:Qm,localFlashRunning:au,compileIsActive:bl,canDownloadCompiledBinary:ey,canCloseCompile:ty,terminalTitle:ny,compileStateLabel:oy,compileStateClass:iy,setCompileConsoleElement:sy,toggleCompileAutoscroll:ry,closeCompileModal:ay,handleInstallSerialPort:ly,handleInstallOta:cy,startLogs:uy,handleInstallDownload:dy,downloadBinary:fy,dispose:py}=qm,pf=()=>{window.dispatchEvent(new CustomEvent("app:builder-compile-state",{detail:{canInstall:yl.value,canUseOta:su.value,canLogs:ru.value,canExport:!0,running:bl.value||au.value,hasUnsavedChanges:!Rt.value}}))},hf=u=>{if(!yl.value||bl.value||au.value||We.value)return;const h=u!=null&&u.detail&&typeof u.detail=="object"?u.detail:{},S=typeof h.mode=="string"?h.mode:"";if(S==="ota"){if(!su.value)return;cy();return}if(S==="download"){dy();return}ly()},gf=()=>{uy()},vf=u=>{if(u.defaultPrevented)return;const h=String(u.key||"").toLowerCase();!((u.ctrlKey||u.metaKey)&&h==="s")||u.altKey||(u.preventDefault(),!u.repeat&&cu(!0))},mf=async u=>{const h=u!=null&&u.detail&&typeof u.detail=="object"?u.detail:{},S=typeof h.requestId=="string"?h.requestId:"";if(!S)return;let x=!1,L="";try{x=await cu(!0),x||(L=yt.value||"Project save failed.")}catch(U){x=!1,L=U instanceof Error?U.message:"Project save failed."}window.dispatchEvent(new CustomEvent("app:builder-save-response",{detail:{requestId:S,success:x,message:L}}))};nt(()=>[yl.value,ru.value,bl.value,au.value,at.value,ji.value,Rt.value],()=>{pf()},{immediate:!0}),nt(()=>V.value,()=>{Ko.value||!Rt.value||!Di.value||gs(V.value)===Di.value||(V.value.isSaved=!1,Cn())},{deep:!0}),nt(()=>at.value,u=>{var x,L;const h=sn(u),S=String(((L=(x=V.value)==null?void 0:x.ui)==null?void 0:L.deviceHost)||"").trim();if(iu(),S===h){_s({refresh:!0});return}V.value.ui={...V.value.ui||{},deviceHost:h},_s({refresh:!0})},{immediate:!0}),nt(()=>yi.value,u=>{u&&(mt.value||(mt.value=u))},{immediate:!0});const hy=u=>{const h=String(u).trim();return h?h.toLowerCase().endsWith(".yaml")?`${h.slice(0,-5)}.json`:`${h}.json`:"new_file.json"},Qr=async(u,h)=>{try{const S=await u.json();if(S&&typeof S.message=="string"&&S.message.trim())return S.message}catch{}return`${h} (HTTP ${u.status})`},yf=u=>{if(typeof u!="string")return"";const h=u.trim();if(!h)return"";const S=Date.parse(h);return Number.isFinite(S)?new Date(S).toISOString():""},lu=()=>({version:1,updatedAt:new Date().toISOString(),folders:[{id:Oo,name:Yu,parentId:null}],projectPlacement:[]}),gy=u=>{const h=lu();if(!u||typeof u!="object")return h;const S=new Map;if(Array.isArray(u.folders)&&u.folders.forEach(q=>{if(!q||typeof q!="object")return;const te=typeof q.id=="string"?q.id.trim():"";if(!te||S.has(te))return;const ce=typeof q.name=="string"&&q.name.trim()?q.name.trim():te,ne=q.parentId===null||q.parentId===void 0?null:String(q.parentId).trim()||Oo;S.set(te,{id:te,name:ce,parentId:ne})}),!S.has(Oo))S.set(Oo,{id:Oo,name:Yu,parentId:null});else{const q=S.get(Oo);S.set(Oo,{id:Oo,name:(q==null?void 0:q.name)||Yu,parentId:null})}const x=new Set(S.keys()),L=Array.from(S.values()).map(q=>q.id===Oo?{...q,parentId:null}:!q.parentId||!x.has(q.parentId)||q.parentId===q.id?{...q,parentId:Oo}:q),U=new Map;return Array.isArray(u.projectPlacement)&&u.projectPlacement.forEach(q=>{if(!q||typeof q!="object")return;const te=typeof q.name=="string"?q.name.trim():"";if(!te||U.has(te))return;const ce=typeof q.folderId=="string"&&x.has(q.folderId)?q.folderId:Oo,ne=yf(q.lastEditedAt);U.set(te,{name:te,folderId:ce,...ne?{lastEditedAt:ne}:{}})}),{version:1,updatedAt:new Date().toISOString(),folders:L,projectPlacement:Array.from(U.values())}},vy=(u,h,S)=>{const x=gy(u),L=Array.isArray(x.projectPlacement)?[...x.projectPlacement]:[],U=L.findIndex(ce=>ce.name===h),q=yf(S),te={name:h,folderId:Oo,...q?{lastEditedAt:q}:{}};return U>=0?L.splice(U,1,te):L.push(te),x.projectPlacement=L,x.updatedAt=new Date().toISOString(),x},my=()=>Ni(V.value),bf=async()=>{const u=at.value||"config.yaml",h=await jn("save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:u,yaml:ji.value})});if(!h.ok)throw new Error(await Qr(h,"Failed to save YAML"))},yy=async(u=!1)=>{var Ze,ut;const h=at.value||"config.yaml",S=hy(h),x=new Date().toISOString(),L=sn(h),U=String(((ut=(Ze=V.value)==null?void 0:Ze.ui)==null?void 0:ut.deviceHost)||"").trim();L&&U!==L&&(V.value.ui={...V.value.ui||{},deviceHost:L}),await bf();const q=await jn("projects/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S,data:{...my(),isSaved:!0}})});if(!q.ok)throw new Error(await Qr(q,"Failed to save project JSON"));let te=lu();const ce=await jn("projects/load?name=projects.json");if(ce.ok)try{const rt=await ce.json();rt!=null&&rt.data&&typeof rt.data=="object"&&(te=rt.data)}catch{te=lu()}else if(ce.status!==404)throw new Error(await Qr(ce,"Failed to load projects index"));const ne=vy(te,S,x),ze=await jn("projects/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"projects.json",data:ne})});if(!ze.ok)throw new Error(await Qr(ze,"Failed to update projects.json"));return Di.value=gs(V.value),V.value.isSaved=!0,Cn(),await gl(h),await _s(),Ne(),u||(vt.value=`Saved ${h} and ${S}.`),!0},cu=async(u=!1)=>{if(We.value)return!1;if(Rt.value)return u||(yt.value="",vt.value=`${at.value} is already saved.`),!0;We.value=!0,yt.value="",u||(vt.value="");try{return await yy(u),!0}catch(h){return yt.value=h instanceof Error?h.message:"Unknown save error",!1}finally{We.value=!1}},by=u=>{if(typeof u=="string"&&u)return{id:u,config:{}};if(u&&typeof u=="object"){const h=typeof u.id=="string"?u.id:"";if(!h)return null;const S=u.config&&typeof u.config=="object"?u.config:{},x=typeof u.customConfig=="string"?u.customConfig:"";return{id:h,config:S,customConfig:x}}return null},_y=u=>{var q;const h=vi();if(!u||typeof u!="object")return h;const{logger:S,otherCore:x,...L}=u;delete L.isModified;const U={...h,...L,isSaved:typeof L.isSaved=="boolean"?L.isSaved:!0,device:{...h.device,...u.device??{}},components:Array.isArray(u.components)?u.components.map(by).filter(Boolean):h.components,protocolsCore:{...h.protocolsCore,...u.protocolsCore??{}},bussesCore:{...h.bussesCore,...u.bussesCore??{}},system:{...h.system,...u.system??{}},ui:{...h.ui,...u.ui??{}}};return U.ui&&typeof U.ui=="object"&&(delete U.ui.isModified,delete U.ui.isSaved),(!((q=U.system)!=null&&q.logger)||Object.keys(U.system.logger||{}).length===0)&&S&&Object.keys(S).length&&(U.system={...U.system,logger:{enabled:!0,...S}}),U},wy=()=>{var h,S,x;const u=localStorage.getItem(_r);if(!u){const L=localStorage.getItem("vebBuilderSplitPreview");L!==null&&(o.value=L==="1",(!V.value.ui||typeof V.value.ui!="object")&&(V.value.ui={}),V.value.ui.splitPreview=o.value),ke.value=Se((h=V.value.ui)==null?void 0:h.modeLevel),(!V.value.ui||typeof V.value.ui!="object")&&(V.value.ui={}),V.value.ui.modeLevel=ke.value,Di.value="",Ko.value=!1;return}try{const L=JSON.parse(u);if((L==null?void 0:L.schemaVersion)===1){V.value=_y(L);try{localStorage.setItem(_r,vs(Ni(V.value)))}catch(q){console.error("Failed to clean stored config",q)}}const U=localStorage.getItem("vebBuilderSplitPreview");U!==null?(o.value=U==="1",(!V.value.ui||typeof V.value.ui!="object")&&(V.value.ui={}),V.value.ui.splitPreview=o.value):o.value=!!((S=V.value.ui)!=null&&S.splitPreview),ke.value=Se((x=V.value.ui)==null?void 0:x.modeLevel),(!V.value.ui||typeof V.value.ui!="object")&&(V.value.ui={}),V.value.ui.modeLevel=ke.value,Di.value=Rt.value?gs(V.value):"",Ko.value=!1}catch{Di.value="",Ko.value=!1}},Ey=(u,h,S)=>{const x=V.value.components[u];if(!x)return;(!x.config||typeof x.config!="object")&&(x.config={});let L=x.config;const U=h[h.length-1];h.slice(0,-1).forEach(q=>{(!L[q]||typeof L[q]!="object")&&(L[q]={}),L=L[q]}),L[U]=S},Ui=(u,h,S)=>{if(!u||typeof u!="object")return;let x=u;const L=h[h.length-1];h.slice(0,-1).forEach(U=>{(!x[U]||typeof x[U]!="object")&&(x[U]={}),x=x[U]}),x[L]=S},Sy=({path:u,value:h})=>{if(H.value!==null){if(Ey(H.value,u,h),u[u.length-1]==="bus"){const S=V.value.components[H.value];if(!(S!=null&&S.config))return;h==="i2c"&&delete S.config.cs_pin,h==="spi"&&delete S.config.address}Cn()}},xy=({path:u,value:h})=>{(!V.value.esphomeCore||typeof V.value.esphomeCore!="object")&&(V.value.esphomeCore={}),Ui(V.value.esphomeCore,u,h),Cn()},ky=({path:u,value:h})=>{(!V.value.substitutions||typeof V.value.substitutions!="object")&&(V.value.substitutions={}),Ui(V.value.substitutions,u,h),Cn()},_f=({path:u,value:h})=>{(!V.value.platformCore||typeof V.value.platformCore!="object")&&(V.value.platformCore={}),Ui(V.value.platformCore,u,h),Cn()},_l=({path:u,value:h})=>{(!V.value.networkCore||typeof V.value.networkCore!="object")&&(V.value.networkCore={}),Ui(V.value.networkCore,u,h),Cn()},Cy=({path:u,value:h})=>{const S=dn.value;S&&((!V.value.bussesCore||typeof V.value.bussesCore!="object")&&(V.value.bussesCore={}),(!V.value.bussesCore[S]||typeof V.value.bussesCore[S]!="object")&&(V.value.bussesCore[S]={}),Ui(V.value.bussesCore[S],u,h),Cn())},Ay=({path:u,value:h})=>{const S=ve.value;S&&((!V.value.protocolsCore||typeof V.value.protocolsCore!="object")&&(V.value.protocolsCore={}),(!V.value.protocolsCore[S]||typeof V.value.protocolsCore[S]!="object")&&(V.value.protocolsCore[S]={}),Ui(V.value.protocolsCore[S],u,h),Cn())},$y=({path:u,value:h})=>{const S=Ln.value;S&&((!V.value.system||typeof V.value.system!="object")&&(V.value.system={}),(!V.value.system[S]||typeof V.value.system[S]!="object")&&(V.value.system[S]={}),Ui(V.value.system[S],u,h),Cn())},Iy=({path:u,value:h})=>{bn.value&&((!V.value.automation||typeof V.value.automation!="object")&&(V.value.automation={}),Ui(V.value.automation,u,h),Cn())},Ty=u=>{if(H.value===null)return;const h=V.value.components[H.value];h&&(h.customConfig=u,Cn())};return nt(()=>{var u;return(u=V.value.platformCore)==null?void 0:u.variant},u=>{u&&((!V.value.platformCore||typeof V.value.platformCore!="object")&&(V.value.platformCore={}),V.value.platformCore.framework="esp-idf")}),nt(()=>V.value,()=>{Cn()},{deep:!0}),nt(()=>t.value,u=>{u==="Automation"&&Kn.length&&(bn.value||(bn.value=Kn[0].key))}),li(async()=>{var S,x;wy(),window.addEventListener("resize",mo),mo();try{const L="./",U=L.endsWith("/")?L:`${L}/`,q=await fetch(`${U}components_list/components_list.json`);if(!q.ok)throw new Error(`Component catalog load failed (${q.status})`);ye.value=await q.json(),Fe.value=null}catch(L){Fe.value=L,ye.value={categories:[]},console.error("Component catalog load failed",L)}finally{Ce.value=!1}try{const L=await jn("api/assets/mdi-substitutions");if(L.ok){const U=await L.json();lo.value=U!=null&&U.substitutions&&typeof U.substitutions=="object"?U.substitutions:{}}else lo.value={}}catch(L){console.error("MDI substitutions load failed",L),lo.value={}}try{const L=await fetch("https://cdn.jsdelivr.net/npm/@mdi/svg/meta.json");if(!L.ok)throw new Error(`MDI icon list load failed (${L.status})`);const U=await L.json();gi.value=Array.isArray(U)?U.filter(q=>!q.deprecated).map(q=>q.name):[]}catch(L){console.error("MDI icon list load failed",L),gi.value=[]}await Bi(!0,!0);try{j.value=await xO()}catch(L){console.error(L)}try{W.value=await Eo("general/core/core.json")}catch(L){console.error("ESPHome core schema load failed",L)}try{ae.value=await Eo("general/core/substitutions.json")}catch(L){console.error("Substitutions schema load failed",L)}try{he.value=await Eo("general/platform/platform.json")}catch(L){console.error("Platform core schema load failed",L)}try{const L={};await Promise.all(F.map(async U=>{const q=await Eo(`${U.schemaId}.json`);L[U.key]=q})),re.value=L}catch(L){console.error("Protocols schemas load failed",L)}try{const L={};await Promise.all(Io.map(async U=>{const q=await Eo(`general/system/${U.key}.json`);L[U.key]=q})),He.value=L}catch(L){console.error("System schemas load failed",L)}try{const L={};await Promise.all(Kn.map(async U=>{const q=await Eo(`general/automation/${U.key}.json`);L[U.key]=q})),Re.value=L}catch(L){console.error("Automation schemas load failed",L)}try{const L={};await Promise.all(It.map(async U=>{const q=await Eo(`general/busses/${U.key}.json`);L[U.key]=q})),se.value=L}catch(L){console.error("Busses schemas load failed",L)}try{Ae.value=await Eo("general/network/network.json")}catch(L){console.error("Network core schema load failed",L)}const u=(S=B.value)==null?void 0:S.platform;if(u)try{fe.value=await Eo(`general/platform/${u}.json`)}catch(L){console.error("Platform schema load failed",L)}const h=(x=Ee.value)==null?void 0:x.transport;if(h)try{pe.value=await Eo(`general/network/${h}.json`)}catch(L){console.error("Network schema load failed",L)}}),go(()=>{window.removeEventListener("resize",mo)}),nt(()=>{var u;return(u=B.value)==null?void 0:u.platform},async(u,h)=>{var S,x;if(!u){fe.value=null;return}h&&h!==u&&(u==="esp8266"?V.value.platformCore={platform:u,board:"esp01_1m"}:u==="esp32"?V.value.platformCore={platform:u,variant:"esp32",framework:"esp-idf"}:u==="rp2040"?V.value.platformCore={platform:u,board:"rpipicow"}:u==="bk72xx"?V.value.platformCore={platform:u,board:"generic-bk7231n-qfn32-tuya"}:u==="rtl87xx"?V.value.platformCore={platform:u,board:"generic-rtl8710bn-2mb-788k"}:u==="ln882x"?V.value.platformCore={platform:u,board:"generic-ln882hki"}:u==="nrf52"?V.value.platformCore={platform:u,board:"adafruit_feather_nrf52840",dcdc:!0}:u==="host"?V.value.platformCore={platform:u,mac_address:"06:35:69:ab:f6:79"}:V.value.platformCore={platform:u});try{fe.value=await Eo(`general/platform/${u}.json`)}catch(L){console.error("Platform schema load failed",L),fe.value=null}if((x=(S=fe.value)==null?void 0:S.fields)!=null&&x.length){const L=new Set(["platform",...fe.value.fields.map(U=>U.key)]);u==="esp32"&&(L.add("framework"),L.add("framework_config"),L.add("advanced"),L.add("components")),Object.keys(V.value.platformCore||{}).forEach(U=>{L.has(U)||delete V.value.platformCore[U]})}u==="esp8266"&&((!V.value.platformCore||typeof V.value.platformCore!="object")&&(V.value.platformCore={platform:u,board:"esp01_1m"}),V.value.platformCore.board||(V.value.platformCore.board="esp01_1m")),u==="esp32"&&((!V.value.platformCore||typeof V.value.platformCore!="object")&&(V.value.platformCore={platform:u,variant:"esp32",framework:"esp-idf"}),V.value.platformCore.variant||(V.value.platformCore.variant="esp32"),V.value.platformCore.framework||(V.value.platformCore.framework="esp-idf"),h==="esp8266"&&V.value.platformCore.board==="esp01_1m"&&delete V.value.platformCore.board),u==="rp2040"&&((!V.value.platformCore||typeof V.value.platformCore!="object")&&(V.value.platformCore={platform:u,board:"rpipicow"}),V.value.platformCore.board||(V.value.platformCore.board="rpipicow")),u==="bk72xx"&&((!V.value.platformCore||typeof V.value.platformCore!="object")&&(V.value.platformCore={platform:u,board:"generic-bk7231n-qfn32-tuya"}),V.value.platformCore.board||(V.value.platformCore.board="generic-bk7231n-qfn32-tuya")),u==="rtl87xx"&&((!V.value.platformCore||typeof V.value.platformCore!="object")&&(V.value.platformCore={platform:u,board:"generic-rtl8710bn-2mb-788k"}),V.value.platformCore.board||(V.value.platformCore.board="generic-rtl8710bn-2mb-788k")),u==="ln882x"&&((!V.value.platformCore||typeof V.value.platformCore!="object")&&(V.value.platformCore={platform:u,board:"generic-ln882hki"}),V.value.platformCore.board||(V.value.platformCore.board="generic-ln882hki")),u==="nrf52"&&((!V.value.platformCore||typeof V.value.platformCore!="object")&&(V.value.platformCore={platform:u,board:"adafruit_feather_nrf52840",dcdc:!0}),V.value.platformCore.board||(V.value.platformCore.board="adafruit_feather_nrf52840"),V.value.platformCore.dcdc===void 0&&(V.value.platformCore.dcdc=!0)),u==="host"&&((!V.value.platformCore||typeof V.value.platformCore!="object")&&(V.value.platformCore={platform:u,mac_address:"06:35:69:ab:f6:79"}),V.value.platformCore.mac_address||(V.value.platformCore.mac_address="06:35:69:ab:f6:79"))}),nt(()=>{var u;return(u=Ee.value)==null?void 0:u.transport},async(u,h)=>{if(!u){pe.value=null;return}try{pe.value=await Eo(`general/network/${u}.json`)}catch(S){pe.value=null,console.error("Network schema load failed",S)}}),nt(()=>{var u,h;return(h=(u=Ee.value)==null?void 0:u.ap)==null?void 0:h.enabled},u=>{u===!1&&(V.value.networkCore.ap={enabled:!1})}),nt(()=>{var u,h;return(h=(u=Ee.value)==null?void 0:u.web_server)==null?void 0:h.enabled},u=>{u===!1&&(V.value.networkCore.web_server={enabled:!1})}),nt(()=>{var u,h;return(h=(u=Ee.value)==null?void 0:u.ota)==null?void 0:h.enabled},u=>{var h;if(u===!1){const S=((h=V.value.networkCore)==null?void 0:h.ota)||{};S.use_password=!1,V.value.networkCore.ota=S}}),nt(()=>{var u,h;return[(u=Ee.value)==null?void 0:u.transport,(h=Ee.value)==null?void 0:h.type]},([u,h],[S,x])=>{if(u!=="ethernet"||!h||h===x)return;const U=new Set(["W5500","DM9051"]).has(h),q=V.value.networkCore;if(!q||typeof q!="object")return;const te=ce=>{q[ce]!==void 0&&delete q[ce]};if(U){te("mdc_pin"),te("mdio_pin"),te("power_pin"),q.clk&&typeof q.clk=="object"&&(delete q.clk.pin,Object.keys(q.clk).length||delete q.clk);return}te("cs_pin"),te("interrupt_pin"),te("reset_pin"),Us.value.has("spi")||V.value.bussesCore&&typeof V.value.bussesCore=="object"&&V.value.bussesCore.spi&&typeof V.value.bussesCore.spi=="object"&&(V.value.bussesCore.spi={})}),nt(()=>t.value,u=>{var h,S,x;u==="Protocols"&&!ve.value&&(ve.value=((h=F[0])==null?void 0:h.key)||""),u==="Busses"&&!dn.value&&(dn.value=((S=It[0])==null?void 0:S.key)||""),u==="System"&&(Ln.value||(Ln.value=((x=Io[0])==null?void 0:x.key)||""))}),nt(()=>zs.value,u=>{if(!us.value)return;(!V.value.bussesCore||typeof V.value.bussesCore!="object")&&(V.value.bussesCore={});const h=new Set(u||[]);It.forEach(S=>{const x=h.has(S.key);(!V.value.bussesCore[S.key]||typeof V.value.bussesCore[S.key]!="object")&&(V.value.bussesCore[S.key]={});const L=V.value.bussesCore[S.key];if(x&&L.enabled!==!0){L.enabled=!0;return}!x&&L.enabled!==!1&&(L.enabled=!1)})},{immediate:!0}),nt(()=>ao.value,(u,h)=>{const S=new Set(h||[]);(u||[]).forEach(x=>{var U;if(!x||S.has(x))return;if(zr(x),((U=Z.value)==null?void 0:U[x])===void 0){w.add(x);return}On(x)})}),nt(()=>Z.value,()=>{w.size&&Array.from(w).forEach(u=>{var S;const h=(S=Z.value)==null?void 0:S[u];h!==void 0&&(w.delete(u),h&&On(u))})},{deep:!0}),go(()=>{P&&clearTimeout(P),$&&clearTimeout($),window.removeEventListener("resize",ys),window.removeEventListener("keydown",vf),document.removeEventListener("visibilitychange",ff),window.removeEventListener("app:builder-export",ll),window.removeEventListener("app:install-option",hf),window.removeEventListener("app:builder-logs",gf),window.removeEventListener("app:builder-save-request",mf),py(),ml(),be(),window.dispatchEvent(new CustomEvent("app:builder-compile-state",{detail:{canInstall:!1,canUseOta:!1,canLogs:!1,canExport:!1,running:!1,hasUnsavedChanges:!1}}))}),(u,h)=>{var S;return _(),E("div",cL,[_t(mr,{open:ee.value,title:"Confirm",message:"Are you sure?","confirm-text":"Yes","cancel-text":"Cancel",onConfirm:Bc,onCancel:hs},null,8,["open"]),_t(M1,{open:O.value,guide:bt.value,"fallback-title":Hc.value,onClose:h[0]||(h[0]=x=>O.value=!1)},null,8,["open","guide","fallback-title"]),_t(UT,{open:ht.value,images:pi.value,fonts:hi.value,audio:jr.value,loading:De.value,working:Ye.value,error:Q.value,onClose:h[1]||(h[1]=x=>ht.value=!1),onRefresh:h[2]||(h[2]=x=>Bi(!0)),onUpload:y,onRename:b,onDeleteAsset:z},null,8,["open","images","fonts","audio","loading","working","error"]),_t(qS,{open:we.value,content:Oe.value,loading:Qe.value,saving:Ke.value,error:st.value,onSave:ou,onClose:nu},null,8,["open","content","loading","saving","error"]),Me.value&&Hs.value.length?(_(),E("div",uL,[h[10]||(h[10]=c("strong",null,"There are errors in the form. Fix them before exporting.",-1)),c("ul",null,[(_(!0),E(je,null,Je(Hs.value,(x,L)=>(_(),E("li",{key:`${x.path}-${L}`},ge(x.path)+' = "'+ge(x.message)+'" ',1))),128))])])):ue("",!0),yt.value?(_(),E("div",dL,[h[11]||(h[11]=c("strong",null,"Project save failed.",-1)),c("div",null,ge(yt.value),1)])):vt.value?(_(),E("div",fL,ge(vt.value),1)):ue("",!0),_t($v,{"compile-open":Ft(Zm),"terminal-title":Ft(ny),"compile-state-class":Ft(iy),"compile-state-label":Ft(oy),"compile-is-reconnecting":Ft(Qm),"compile-auto-scroll":Ft(Xm),"compile-log-lines":Ft(Jm),"can-download-compiled-binary":Ft(ey),"can-close-compile":Ft(ty),"on-console-ref":Ft(sy),onToggleAutoscroll:Ft(ry),onDownload:Ft(fy),onCloseCompile:Ft(ay)},null,8,["compile-open","terminal-title","compile-state-class","compile-state-label","compile-is-reconnecting","compile-auto-scroll","compile-log-lines","can-download-compiled-binary","can-close-compile","on-console-ref","onToggleAutoscroll","onDownload","onCloseCompile"]),c("div",pL,[c("aside",hL,[c("div",gL,[c("button",{type:"button",class:"btn-standard secondary sidebar-back-button",onClick:Qa},[...h[12]||(h[12]=[c("span",{class:"sidebar-back-button-icon","aria-hidden":"true"},null,-1),c("span",null,"Back to Dashboard",-1)])]),c("section",vL,[c("div",mL,[h[13]||(h[13]=c("h4",null,"Project",-1)),c("span",{class:pt(["project-status-badge",Km.value])},ge(Ym.value),3)]),c("div",yL,[c("dl",bL,[c("div",_L,[h[14]||(h[14]=c("dt",null,"name:",-1)),c("dd",null,ge(Ot.value),1)]),c("div",wL,[h[15]||(h[15]=c("dt",null,"file:",-1)),c("dd",{class:pt(["project-summary-file",{"is-unsaved":!Rt.value}])},ge(Vt.value),3)]),c("div",EL,[h[16]||(h[16]=c("dt",null,"platform:",-1)),c("dd",null,ge(Ht.value),1)]),$t.value?(_(),E("div",SL,[h[17]||(h[17]=c("dt",null,"comment:",-1)),c("dd",null,ge($t.value),1)])):ue("",!0)])])])]),c("div",xL,[c("div",kL,[h[21]||(h[21]=c("div",{class:"sidebar-panel__header"},[c("h4",null,"Components")],-1)),c("div",CL,[c("div",AL,[c("div",$L,[(_(),E(je,null,Je(n,x=>c("button",{key:`tab-${x}`,class:pt(["component-chip",{active:t.value===x,"component-chip--pulse":x==="Busses"&&T.value}]),onClick:L=>t.value=x},[c("span",null,ge(x),1)],10,IL)),64)),c("button",{class:"component-chip",type:"button",onClick:tu},[...h[18]||(h[18]=[c("span",null,"Assets",-1)])]),h[20]||(h[20]=c("div",{class:"component-separator-line"},null,-1)),c("div",{class:"component-separator"},[c("div",{class:"component-separator__row"},[h[19]||(h[19]=c("span",null,"User components",-1)),c("button",{class:"secondary compact btn-add sidebar-components-add",type:"button","aria-label":"Add component",onClick:Xa}," Add ")])]),(_(!0),E(je,null,Je(V.value.components,(x,L)=>(_(),E("button",{key:`${At(x)||"component"}-${L}`,class:pt(["component-chip",{active:H.value===L&&t.value==="Components"}]),type:"button",onClick:U=>Za(L)},[c("span",null,ge(it(At(x))),1)],10,TL))),128))])])])])])]),c("div",RL,[c("section",FL,[c("div",OL,[c("div",LL,[Fn(c("select",{id:"viewSelect",class:"config-title-select","onUpdate:modelValue":h[3]||(h[3]=x=>qa.value=x),onChange:Ur},[...h[22]||(h[22]=[c("option",{value:"single"},"Single YAML Preview",-1),c("option",{value:"tabs"},"Tabbed YAML Preview",-1)])],544),[[up,qa.value]])]),c("div",{class:pt(["preview-shell",{split:o.value}])},[o.value?(_(),E("div",ML,[c("button",{class:"preview-scroll",type:"button","aria-label":"Scroll tabs left",disabled:!Ys.value,onClick:h[4]||(h[4]=x=>Ja(-1))},[...h[23]||(h[23]=[c("span",{class:"preview-scroll-icon"},"",-1)])],8,NL),c("div",{class:"preview-tab-list",ref_key:"previewTabList",ref:s},[(_(!0),E(je,null,Je(Yr.value,x=>(_(),E("button",{key:x.key,class:pt(["preview-tab-button",{active:i.value===x.key}]),type:"button",onClick:L=>i.value=x.key},ge(x.label),11,DL))),128))],512),c("button",{class:"preview-scroll",type:"button","aria-label":"Scroll tabs right",disabled:!Ks.value,onClick:h[5]||(h[5]=x=>Ja(1))},[...h[24]||(h[24]=[c("span",{class:"preview-scroll-icon"},"",-1)])],8,PL)])):ue("",!0),o.value?(_(),E("div",jL,[(_(!0),E(je,null,Je(co.value,x=>(_(),E("button",{key:x.key,ref_for:!0,ref_key:"previewTabMeasureButtons",ref:r,class:"preview-tab-button",type:"button"},ge(x.label),1))),128))])):ue("",!0),c("div",BL,[c("div",UL,[c("button",{type:"button",class:pt(["preview-copy",{"preview-copy--shift":m.value}]),onClick:Jc},[h[25]||(h[25]=c("img",{src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/content-copy.svg",alt:"Copy code"},null,-1)),c("span",null,ge(Xc.value),1)],2),Dr.value?(_(),E("div",zL,[c("span",VL,[h[26]||(h[26]=Aa(" # Interval section live in the Automation tab - ",-1)),c("a",{href:"#",class:"preview-callout-link",onClick:h[6]||(h[6]=Et(x=>qc("automation"),["prevent"]))}," LINK ")])])):ue("",!0),c("div",{class:"yaml-scroll-inner",ref_key:"previewScrollInner",ref:g},[c("pre",null,[c("code",{class:"hljs",innerHTML:al.value},null,8,HL)])],512)])])],2)]),c("div",GL,[c("div",WL,[Fn(c("select",{id:"modeSelect",class:"config-title-select","onUpdate:modelValue":h[7]||(h[7]=x=>ke.value=x),onChange:Ur},[...h[27]||(h[27]=[c("option",{value:"Simple"},"Simple configuration",-1),c("option",{value:"Normal"},"Normal configuration",-1),c("option",{value:"Advanced"},"Advanced configuration",-1)])],544),[[up,ke.value]])]),c("div",YL,[t.value==="Core"?(_(),E("div",KL,[c("div",qL,[c("div",ZL,[h[28]||(h[28]=c("h2",null,"Core",-1)),Mt.value?(_(),E("a",{key:0,class:"filter-help",href:Mt.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,XL)):ue("",!0)])]),c("div",JL,[_t(wo,{"component-id":jh,"component-config":un.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":jh,"global-store":Zt.value,onUpdate:xy,onOpenSecrets:qn},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"]),_t(wo,{"component-id":Bh,"component-config":G.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":Bh,"global-store":Zt.value,onUpdate:ky,onOpenSecrets:qn},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"])])])):ue("",!0),t.value==="Platform"?(_(),E("div",QL,[c("div",eM,[c("div",tM,[h[29]||(h[29]=c("h2",null,"Platform",-1)),Mt.value?(_(),E("a",{key:0,class:"filter-help",href:Mt.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,nM)):ue("",!0)])]),c("div",oM,[_t(wo,{"component-id":Uh,"component-config":B.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":Uh,"global-store":Zt.value,onUpdate:_f,onOpenSecrets:qn},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"]),X.value?(_(),zn(wo,{key:0,"component-id":X.value,"component-config":B.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":X.value,"global-store":Zt.value,onUpdate:_f,onOpenSecrets:qn},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):ue("",!0)])])):ue("",!0),t.value==="Network"?(_(),E("div",iM,[c("div",sM,[c("div",rM,[h[30]||(h[30]=c("h2",null,"Network",-1)),Mt.value?(_(),E("a",{key:0,class:"filter-help",href:Mt.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,aM)):ue("",!0)])]),c("div",lM,[_t(wo,{"component-id":ir,"component-config":Ee.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":ir,"field-filter":["transport"],"global-store":Zt.value,onUpdate:_l,onOpenSecrets:qn},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"]),D.value?(_(),zn(wo,{key:0,"component-id":D.value,"component-config":Ee.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":D.value,"global-store":Zt.value,onUpdate:_l,onOpenSecrets:qn},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):ue("",!0),_t(wo,{"component-id":ir,"component-config":Ee.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":ir,"field-filter":["ota"],"global-store":Zt.value,onUpdate:_l,onOpenSecrets:qn},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"]),_t(wo,{"component-id":ir,"component-config":Ee.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":ir,"field-filter":["web_server"],"global-store":Zt.value,onUpdate:_l,onOpenSecrets:qn},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"])])])):ue("",!0),t.value==="Protocols"?(_(),E("div",cM,[c("div",uM,[c("div",dM,[h[31]||(h[31]=c("h2",null,"Protocols",-1)),Mt.value?(_(),E("a",{key:0,class:"filter-help",href:Mt.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,fM)):ue("",!0)])]),c("div",pM,[c("div",hM,[(_(!0),E(je,null,Je(R.value,x=>(_(),E("button",{key:x.key,class:pt(["btn-standard",{active:ve.value===x.key}]),onClick:L=>ve.value=x.key},ge(x.label),11,gM))),128))]),$e.value?(_(),zn(wo,{key:0,"component-id":$e.value,"component-config":Xe.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":$e.value,"global-store":Zt.value,onUpdate:Ay,onOpenSecrets:qn},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):ue("",!0)])])):ue("",!0),t.value==="Busses"?(_(),E("div",vM,[c("div",mM,[c("div",yM,[h[32]||(h[32]=c("h2",null,"Busses",-1)),Mt.value?(_(),E("a",{key:0,class:"filter-help",href:Mt.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,bM)):ue("",!0)])]),c("div",_M,[h[33]||(h[33]=c("div",{class:"notice notice--warning"}," Required interfaces are enabled automatically when you add a component that needs them, so you do not have to enable them right away. You still need to configure them manually. ",-1)),c("div",wM,[(_(!0),E(je,null,Je(ds.value,x=>(_(),E("button",{key:x.key,class:pt(["btn-standard",{active:dn.value===x.key}]),onClick:L=>dn.value=x.key},ge(x.label),11,EM))),128))]),ui.value?(_(),zn(wo,{key:0,"component-id":ui.value,"component-config":fs.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":ui.value,"global-store":Zt.value,onUpdate:Cy,onOpenSecrets:qn},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):ue("",!0)])])):ue("",!0),t.value==="System"?(_(),E("div",SM,[c("div",xM,[c("div",kM,[h[34]||(h[34]=c("h2",null,"System",-1)),Mt.value?(_(),E("a",{key:0,class:"filter-help",href:Mt.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,CM)):ue("",!0)])]),c("div",AM,[c("div",$M,[(_(!0),E(je,null,Je(Mr.value,x=>(_(),E("button",{key:x.key,class:pt(["btn-standard",{active:Ln.value===x.key}]),onClick:L=>Ln.value=x.key},ge(x.label),11,IM))),128))]),Mn.value?(_(),zn(wo,{key:0,"component-id":Mn.value,"component-config":kn.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":Mn.value,"global-store":Zt.value,onUpdate:$y,onOpenSecrets:qn},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):ue("",!0)])])):ue("",!0),t.value==="Automation"?(_(),E("div",TM,[c("div",RM,[c("div",FM,[h[35]||(h[35]=c("h2",null,"Automation",-1)),Mt.value?(_(),E("a",{key:0,class:"filter-help",href:Mt.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,OM)):ue("",!0)])]),c("div",LM,[c("div",MM,[(_(!0),E(je,null,Je(Oi.value,x=>(_(),E("button",{key:x.key,type:"button",class:pt(["btn-standard",{active:bn.value===x.key}]),onClick:L=>bn.value=x.key},ge(x.label),11,NM))),128))]),ps.value?(_(),zn(wo,{key:0,"component-id":ps.value,"component-config":Li.value,"root-value":V.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":ps.value,"global-store":Zt.value,onUpdate:Iy,onOpenSecrets:qn},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):ue("",!0),(ke.value==="Normal"||ke.value==="Advanced")&&((S=Ro.value[bn.value])!=null&&S.length)?(_(),E("div",DM,[(_(!0),E(je,null,Je(Ro.value[bn.value],(x,L)=>(_(),E("div",{key:`generated-${bn.value}-${L}`,class:"schema-list list-normal read-only-box"},[h[36]||(h[36]=c("div",{class:"schema-list-header"},"Auto-generated (read-only)",-1)),c("div",PM,[(_(!0),E(je,null,Je(J(x),(U,q)=>(_(),E("div",{key:`generated-line-${L}-${q}`,class:"note"},ge(U),1))),128))])]))),128))])):ue("",!0)])])):ue("",!0),t.value==="Components"?(_(),E("div",jM,[c("div",BM,[c("div",UM,[c("h2",null,ge(In.value),1),Mt.value?(_(),E("a",{key:0,class:"filter-help",href:Mt.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,zM)):ue("",!0)]),M.value?ue("",!0):(_(),E("div",VM,[H.value!==null?(_(),E("button",{key:0,type:"button",class:"secondary compact btn-standard",onClick:h[8]||(h[8]=x=>Mi(H.value))}," Remove ")):ue("",!0)]))]),c("div",{class:pt(["module-card__body",{"module-card__body--picker":M.value}])},[M.value?(_(),E("div",HM,[c("div",GM,[Fn(c("input",{id:"componentsSearch","onUpdate:modelValue":h[9]||(h[9]=x=>v.value=x),placeholder:"Search components"},null,512),[[to,v.value]]),Fe.value?(_(),E("div",WM," components_list.json not found ")):ue("",!0),c("div",YM,[(_(!0),E(je,null,Je(Gs.value,(x,L)=>(_(),E("details",{key:`${x.slug}-${L}`,class:"components-category",open:!!v.value},[c("summary",null,ge(x.title),1),x.items.length?(_(),E("div",qM,[(_(!0),E(je,null,Je(x.items,(U,q)=>(_(),E("button",{key:`${U.id}-${x.slug}-${q}`,type:"button",class:pt(["component-item",{selected:on.value.has(U.id)}]),onClick:te=>el(U)},[c("span",null,ge(U.name),1),c("span",XM,ge(U.id),1)],10,ZM))),128))])):ue("",!0),(_(!0),E(je,null,Je(x.subcategories,(U,q)=>(_(),E("div",{key:`${U.slug}-${q}`,class:"components-subcategory"},[c("h3",null,ge(U.title),1),c("div",JM,[(_(!0),E(je,null,Je(U.items,(te,ce)=>(_(),E("button",{key:`${te.id}-${U.slug}-${ce}`,class:pt(["component-item",{selected:on.value.has(te.id)}]),type:"button",onClick:ne=>el(te)},[c("span",null,ge(te.name),1),c("span",eN,ge(te.id),1)],10,QM))),128))])]))),128))],8,KM))),128))])])])):(_(),E("div",tN,[ci.value?(_(),E("div",nN,[Aa(" Make sure "+ge(ci.value)+" is configured correctly. ",1),c("a",{href:"#",class:"preview-callout-link",onClick:Et(vo,["prevent"])}," LINK ")])):ue("",!0),_t(wo,{"component-id":hn.value,"component-config":gn.value,"custom-config":xn.value,"mode-level":ke.value,"id-registry":Nn.value,"name-registry":Dn.value,"id-index":_n.value,"gpio-options":Lt.value,"gpio-usage":Pn.value,"gpio-title":jt.value,"context-component-id":hn.value,"global-store":Zt.value,"display-images":pi.value,"display-fonts":hi.value,"display-google-fonts":Vs.value,"assets-base":Ft(ul),onUpdate:Sy,onUpdateCustom:Ty,onOpenAssetManager:Zs,onOpenSecrets:qn},null,8,["component-id","component-config","custom-config","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store","display-images","display-fonts","display-google-fonts","assets-base"])]))],2)])):ue("",!0)])])])])])])}}},rN=["draggable"],aN={class:"project-card__top"},lN={class:"project-card__title-wrap"},cN={class:"project-card__icon-wrap"},uN={key:1,class:"project-status-badge project-status-badge--tile is-online"},dN={class:"project-card__meta-line"},fN={class:"project-card__meta-line"},pN={__name:"ProjectTileCard",props:{title:{type:String,default:""},yamlName:{type:String,default:""},lastEditedLabel:{type:String,default:""},tileStyle:{type:Object,default:()=>({})},iconStyle:{type:Object,default:()=>({})},active:{type:Boolean,default:!1},online:{type:Boolean,default:!1},showMenu:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},interactive:{type:Boolean,default:!1}},emits:["click","dblclick","menu","dragstart","dragend"],setup(e,{emit:n}){const t=e,o=n,i=l=>{t.interactive&&o("click",l)},s=l=>{t.interactive&&o("dblclick",l)},r=l=>{o("menu",l)},a=l=>{t.draggable&&o("dragstart",l)},d=l=>{t.draggable&&o("dragend",l)};return(l,f)=>(_(),E("article",{class:pt(["project-card",{"project-card--active":e.active,"project-card--online":e.online,"project-card--online-active":e.active&&e.online,"project-card--interactive":e.interactive}]),style:rn(e.tileStyle),draggable:e.draggable,onClick:i,onDblclick:s,onDragstart:a,onDragend:d},[c("div",aN,[c("div",lN,[c("span",cN,[c("span",{class:"project-card__icon",style:rn(e.iconStyle),"aria-hidden":"true"},null,4)]),c("h4",null,ge(e.title),1)]),e.showMenu?(_(),E("button",{key:0,type:"button",class:"project-card__menu","aria-label":"Project actions",onClick:Et(r,["stop"])}," ... ")):ue("",!0),e.online?(_(),E("span",uN,"Online")):ue("",!0)]),c("p",{class:pt(["project-card__meta",{"project-card__meta--with-menu":e.showMenu}])},[c("span",dN,ge(e.yamlName),1),c("span",fN,ge(e.lastEditedLabel),1)],2)],46,rN))}},Vh=so(pN,[["__scopeId","data-v-980d5a1f"]]),hN={key:0,class:"dashboard-state dashboard-state--error"},gN={class:"dashboard-sidebar"},vN=["onClick","onDragover","onDragenter","onDragleave","onDrop"],mN={class:"folder-row-label"},yN=["onClick","onKeydown"],bN=["src"],_N={key:1,class:"folder-inline-toggle-placeholder"},wN={class:"folder-row-name"},EN=["onClick","onKeydown"],SN={key:0,class:"folder-menu"},xN=["onClick"],kN=["onClick"],CN=["onClick"],AN={class:"project-tree-label"},$N=["onKeydown"],IN={class:"dashboard-content"},TN={class:"dashboard-toolbar-wrap"},RN={class:"dashboard-toolbar"},FN=["disabled"],ON={class:"toolbar-breadcrumb",role:"navigation","aria-label":"Folder path"},LN=["onClick"],MN={key:0,class:"breadcrumb-sep"},NN={class:"dashboard-search",for:"dashboardSearch"},DN={key:0,class:"dashboard-state"},PN={key:1,class:"dashboard-state dashboard-state--error"},jN={key:2,class:"dashboard-state dashboard-state--warning"},BN={key:0,class:"entries-section"},UN={class:"folders-grid"},zN=["onDragover","onDragenter","onDragleave","onDrop","onDblclick"],VN={class:"folder-tile-top"},HN={class:"project-icon project-icon--folder"},GN=["src"],WN={class:"folder-tile-hint"},YN={key:1,class:"entries-section"},KN={class:"entries-title"},qN={class:"projects-grid"},ZN={key:2,class:"project-empty"},XN=["disabled"],JN={class:"customize-modal",role:"dialog","aria-modal":"true","aria-label":"Customize tile"},QN={class:"customize-modal-header"},eD={class:"customize-modal-preview"},tD={class:"customize-modal-body"},nD={class:"customize-field-row"},oD={class:"customize-field-inputs"},iD={class:"customize-field-row"},sD={class:"customize-field-inputs"},rD={class:"customize-field-row"},aD={class:"customize-field-inputs"},lD={class:"customize-field-row"},cD={class:"customize-field-inputs"},uD={class:"customize-field-row"},dD={class:"customize-field-inputs"},fD={key:0,class:"customize-modal-error"},pD={class:"customize-modal-actions"},hD=["disabled"],gD=["disabled"],vD=["disabled"],Bt="root",Ku="Projects",Hh="vebProjectsUpdatedSignal",mD="ecd-projects",yD=5e3,bD=210,_D=520,Ll="memory",Ml="#0F172A",qu="#FFFFFF",Zu="#1F3F6D",Xu="#7190B8",Gh="https://cdn.jsdelivr.net/npm/@mdi/svg/svg/folder-outline.svg",wD="https://cdn.jsdelivr.net/npm/@mdi/svg/svg/chevron-right.svg",ED="https://cdn.jsdelivr.net/npm/@mdi/svg/svg/chevron-down.svg",SD="https://cdn.jsdelivr.net/npm/@mdi/svg/svg/arrow-up.svg",xD={__name:"DashboardView",setup(e){const n=hv(),t=K(!1),o=K(""),i=K(""),s=K(""),r=K([]),a=K([{id:Bt,name:Ku,parentId:null}]),d=K([]),l=K(new Map),f=K(new Map),g=K(null),m=K(Bt),v=K(""),T=K(null),P=K(""),w=K(null),C=K(null),$=K({top:0,left:0}),H=K(!1),M=K(""),ee=K(""),oe=K(new Set([Bt])),Z=K(0),ye=K(!0),Ce=K(null),Fe=K(250),Le=K(!1),We=K(""),ht=K(""),De=K(null),Ye=K(!1),Q=K(""),we=K(!1),Oe=K(""),Qe=K(!1),Ke=K(!1),st=K(""),vt=K(!1),yt=K(""),dt=K(!1),mt=K(""),Ct=K(!1),de=K("icon"),me=K({iconName:"",iconColor:"",backgroundColor:"",titleColor:"",metaColor:""}),ke=K(!1),Se=K(null),Me=K(!1),O=K(new Set),j=K(new Map),W=K("");let ae=null,he=null,fe=null,pe=0,Ae=null,re=null;const se=K("all"),He=new URL("./",window.location.href).toString(),Re=!1,k="./runtime/esp_projects/projects.json",N=y=>new URL(y,He).toString(),I=N("projects/list"),Y=N("projects/load?name=projects.json"),ie=N("projects/save"),_e=y=>{const b=encodeURIComponent(String(y||"").trim());return N(`projects/load?name=${b}`)},Ie=async(y,b={})=>await fetch(y,{...b,credentials:"include"}),Ue=async(y,b={})=>Ie(N(y),b),qe=async(y,b)=>{try{const z=await y.json();if(z&&typeof z.message=="string"&&z.message.trim())return z.message}catch{}return`${b} (HTTP ${y.status})`},Be=y=>{const b=String(y||"").trim();return b?b.toLowerCase().endsWith(".json")?`${b.slice(0,-5)}.yaml`:`${b}.yaml`:""},lt=y=>Wa(y),ot=y=>String(y||"").replace(/\.json$/i,"").trim()||"Untitled project",it=y=>{const b=typeof y=="string"?y.trim():"";return b?(b.startsWith("mdi:")?b.slice(4):b).trim().toLowerCase():""},at=y=>{const b=it(y)||Ll;return`https://cdn.jsdelivr.net/npm/@mdi/svg/svg/${encodeURIComponent(b)}.svg`},Rt=(y,b)=>{const z=tn(y);if(!z)return"";const le=String(b).replace(/[^0-9a-f]/gi,"").slice(0,2).padStart(2,"0");return`${z}${le}`},Vt=y=>{const b=y&&typeof y=="object"?y:{},z=it(b.icon),le=tn(b.iconColor)||"",be=tn(b.backgroundColor)||"",Ne=tn(b.titleColor)||"",et=tn(b.metaColor)||"";return{iconName:z,iconColor:le,backgroundColor:be,titleColor:Ne,metaColor:et}},Ot=y=>!y||typeof y!="object"?!1:!!(y.iconName||y.iconColor||y.backgroundColor||y.titleColor||y.metaColor),$t=y=>{const b=f.value.get(y);return{iconName:(b==null?void 0:b.iconName)||Ll,iconColor:(b==null?void 0:b.iconColor)||Ml,backgroundColor:(b==null?void 0:b.backgroundColor)||qu,titleColor:(b==null?void 0:b.titleColor)||Zu,metaColor:(b==null?void 0:b.metaColor)||Xu}},Ht=y=>{const b=$t(y);return{"--tree-icon-url":`url("${at(b.iconName)}")`,color:b.iconColor}},At=(y,b)=>{const z=$t(y),be=(Number.isFinite(Number(b))?Number(b):10)+17;return{marginLeft:`${be}px`,maxWidth:`calc(100% - ${be}px)`,"--tree-title-color":z.titleColor,"--tree-bg-color":z.backgroundColor,"--tree-border-color":Rt(z.titleColor,"2E")||"#dbe3ef"}},ln=y=>{const b=$t(y);return{"--project-icon-url":`url("${at(b.iconName)}")`,color:b.iconColor}},on=y=>{const b=$t(y);return{background:b.backgroundColor,"--tile-title-color":b.titleColor,"--tile-meta-color":b.metaColor}},In=(y,b)=>{var z,le,be,Ne;if(b&&typeof b=="object"){const et=String(b.friendly_name||((z=b.esphomeCore)==null?void 0:z.friendly_name)||((le=b.esphome)==null?void 0:le.friendly_name)||"").trim();if(et)return et;const ct=String(b.name||((be=b.esphomeCore)==null?void 0:be.name)||((Ne=b.esphome)==null?void 0:Ne.name)||"").trim();if(ct)return ct}return ot(y)},qt=y=>{const b=y!=null&&y.ui&&typeof y.ui=="object"?y.ui:{};return Vt(b.dashboardTile)},Mt=async y=>{const b=Array.from(new Set(y.map(X).filter(Boolean))),z=++pe;if(b.length===0){l.value=new Map,f.value=new Map;return}const le=await Promise.all(b.map(async et=>{try{const ct=await Ie(_e(et));if(!ct.ok)return[et,{title:ot(et),tile:Vt(null)}];const Ut=await ct.json();return[et,{title:In(et,Ut==null?void 0:Ut.data),tile:qt(Ut==null?void 0:Ut.data)}]}catch{return[et,{title:ot(et),tile:Vt(null)}]}}));if(z!==pe)return;const be=new Map,Ne=new Map;le.forEach(([et,ct])=>{be.set(et,(ct==null?void 0:ct.title)||ot(et)),Ot(ct==null?void 0:ct.tile)&&Ne.set(et,ct.tile)}),l.value=be,f.value=Ne},cn=y=>{const b=String(y||"").trim();if(!b)return"";const z=b.replace(/\.yaml$/i,"").trim();return z?`${z}.local`:""},hn=y=>{const b=lt((y==null?void 0:y.device_key)||"");if(b)return b;const z=lt((y==null?void 0:y.yaml)||"");return z||lt((y==null?void 0:y.name)||"")},gn=()=>{const y=df(),b=new Map,z=[];Object.entries(y).forEach(([le,be])=>{const Ne=lt(le);if(!Ne)return;const et=String((be==null?void 0:be.status)||"").toLowerCase(),ct=String((be==null?void 0:be.host)||"").trim();ct&&b.set(Ne,ct),et==="online"&&z.push(Ne)}),z.length&&(O.value=new Set(z)),b.size&&(j.value=b)},xn=async()=>{try{const y=await Ie(N("api/devices/list?refresh=1"));if(!y.ok)return;const b=await y.json(),z=Array.isArray(b==null?void 0:b.devices)?b.devices:[],le=new Map,be={},Ne=z.filter(et=>{const ct=hn(et);if(!ct)return!1;const Ut=`${ct}.yaml`,wn=cn(Ut),sn=String((et==null?void 0:et.host)||wn).trim();sn&&le.set(ct,sn);const yi=String((et==null?void 0:et.status)||"").toLowerCase()==="online"?"online":"offline";return be[ct]={status:yi,host:sn,name:String((et==null?void 0:et.name)||"").trim(),updatedAt:Date.now()},yi==="online"}).map(et=>hn(et)).filter(Boolean);O.value=new Set(Ne),j.value=le,Wm(be)}catch{}},un=()=>{document.visibilityState==="visible"&&(ae||(ae=setInterval(()=>{xn()},yD)))},G=()=>{ae&&(clearInterval(ae),ae=null)},B=()=>{if(document.visibilityState==="visible"){xn(),un();return}G()},X=y=>{if(typeof y!="string")return"";const b=y.trim();return!b||b.toLowerCase()==="projects.json"||!b.toLowerCase().endsWith(".json")?"":b},Ee=y=>{if(typeof y!="string")return"";const b=y.trim();if(!b)return"";const z=Date.parse(b);return Number.isFinite(z)?new Date(z).toISOString():""},D=y=>{const b=Ee(y);if(!b)return"No save timestamp";const z=new Date(b),le=z.getFullYear(),be=String(z.getMonth()+1).padStart(2,"0"),Ne=String(z.getDate()).padStart(2,"0"),et=String(z.getHours()).padStart(2,"0"),ct=String(z.getMinutes()).padStart(2,"0");return`${le}-${be}-${Ne} ${et}:${ct}`},p=y=>{if(typeof y!="string")return"";const b=y.trim();return b?b.slice(0,40):""},F=async()=>{try{const y=await fetch(k,{credentials:"include"});return y.ok?await y.json():null}catch{return null}},ve=async()=>{try{const y=await Ie(I);if(!y.ok)throw new Error(`HTTP ${y.status}`);const b=await y.json(),le=(Array.isArray(b==null?void 0:b.projects)?b.projects:[]).map(X).filter(Boolean);return ye.value=!0,Array.from(new Set(le)).sort((be,Ne)=>be.localeCompare(Ne))}catch{const y=await F(),b=Array.isArray(y==null?void 0:y.projects)?y.projects:[],z=Array.isArray(y==null?void 0:y.projectPlacement)?y.projectPlacement:[],le=b.map(be=>typeof be=="string"?X(be):be&&typeof be=="object"?X(be.file||be.name||""):"").concat(z.map(be=>X((be==null?void 0:be.name)||""))).filter(Boolean);return ye.value=!1,Array.from(new Set(le)).sort((be,Ne)=>be.localeCompare(Ne))}},Te=async()=>{try{const y=await Ie(Y);if(y.status===404)return null;if(!y.ok)throw new Error(`HTTP ${y.status}`);const b=await y.json();return(b==null?void 0:b.status)==="ok"&&(b!=null&&b.data)&&typeof b.data=="object"?(ye.value=!0,b.data):null}catch{return await F()}},Pe=()=>({version:1,updatedAt:new Date().toISOString(),folders:[{id:Bt,name:Ku,parentId:null}],projectPlacement:[]}),R=y=>{const b=[],z=new Set;b.push({id:Bt,name:Ku,parentId:null}),z.add(Bt),Array.isArray(y)&&y.forEach(Ne=>{if(!Ne||typeof Ne!="object")return;const et=typeof Ne.id=="string"?Ne.id.trim():"";if(!et||et===Bt||z.has(et))return;const ct=p(Ne.name);if(!ct)return;const Ut=typeof Ne.parentId=="string"&&Ne.parentId.trim()||Bt;b.push({id:et,name:ct,parentId:Ut}),z.add(et)});const le=new Set(b.map(Ne=>Ne.id));b.forEach(Ne=>{Ne.id!==Bt&&(!le.has(Ne.parentId)||Ne.parentId===Ne.id)&&(Ne.parentId=Bt)});const be=new Map(b.map(Ne=>[Ne.id,Ne]));return b.forEach(Ne=>{if(Ne.id===Bt)return;const et=new Set([Ne.id]);let ct=Ne.parentId;for(;ct&&ct!==Bt;){if(et.has(ct)){Ne.parentId=Bt;break}et.add(ct);const Ut=be.get(ct);if(!Ut){Ne.parentId=Bt;break}ct=Ut.parentId}}),b},$e=(y,b,z)=>{const le=new Map;return Array.isArray(y)&&y.forEach(be=>{if(!be||typeof be!="object")return;const Ne=X(be.name||"");if(!Ne||le.has(Ne))return;const et=typeof be.folderId=="string"&&b.has(be.folderId)?be.folderId:Bt,ct=Ee(be.lastEditedAt);le.set(Ne,{name:Ne,folderId:et,lastEditedAt:ct})}),z.forEach(be=>{le.has(be)||le.set(be,{name:be,folderId:Bt,lastEditedAt:""})}),Array.from(le.values()).filter(be=>z.includes(be.name)).map(be=>({name:be.name,folderId:be.folderId,...be.lastEditedAt?{lastEditedAt:be.lastEditedAt}:{}}))},Xe=(y,b)=>{const z=Array.isArray(y==null?void 0:y.projects)?y.projects:[],le=Array.isArray(y==null?void 0:y.projectPlacement)?y.projectPlacement:[],be=z.map(sn=>typeof sn=="string"?X(sn):sn&&typeof sn=="object"?X(sn.file||sn.name||""):"").filter(Boolean),Ne=le.map(sn=>X((sn==null?void 0:sn.name)||"")).filter(Boolean),et=Array.from(new Set([...b,...be,...Ne])).sort((sn,yi)=>sn.localeCompare(yi)),ct=R(y==null?void 0:y.folders),Ut=new Set(ct.map(sn=>sn.id)),wn=$e(y==null?void 0:y.projectPlacement,Ut,et);return{version:1,updatedAt:new Date().toISOString(),folders:ct,projectPlacement:wn,projectFiles:et}},xt=async()=>{if(!ye.value)return;const y={version:1,updatedAt:new Date().toISOString(),folders:a.value,projectPlacement:d.value};try{const b=JSON.stringify(Re?y:{name:"projects.json",data:y}),z=await Ie(ie,{method:"POST",headers:{"Content-Type":"application/json"},body:b});if(!z.ok)throw new Error(`HTTP ${z.status}`);i.value=""}catch(b){i.value=`Cannot save projects.json: ${b.message}`}},It=y=>{r.value=y.projectFiles,a.value=y.folders,d.value=y.projectPlacement;const b=y.folders.reduce((le,be)=>{const Ne=String(be.id).match(/(\d+)$/);return Ne?Math.max(le,Number.parseInt(Ne[1],10)||0):le},0);Z.value=b,new Set(y.folders.map(le=>le.id)).has(m.value)||(m.value=Bt),v.value&&!y.projectFiles.includes(v.value)&&(v.value="")},kt=async()=>{if(fe){await fe;return}fe=(async()=>{try{const[y,b]=await Promise.all([ve(),Te()]),z=Xe(b||Pe(),y);It(z),await Mt(z.projectFiles)}catch{}})();try{await fe}finally{fe=null}},dn=()=>{kt()},ro=y=>{if(!(y.key!==Hh||!y.newValue)){try{const b=JSON.parse(y.newValue);if((b==null?void 0:b.type)!=="projects-updated")return}catch{return}kt()}},$o=()=>{if("BroadcastChannel"in window)try{he=new BroadcastChannel(mD),he.onmessage=y=>{var b;((b=y==null?void 0:y.data)==null?void 0:b.type)==="projects-updated"&&kt()}}catch{he=null}},ci=()=>{he&&(he.close(),he=null)},Yn=()=>{const y={type:"projects-updated",ts:Date.now()};window.dispatchEvent(new CustomEvent("app:projects-updated",{detail:y})),he&&he.postMessage(y);try{localStorage.setItem(Hh,JSON.stringify(y))}catch{}},vo=async()=>{t.value=!0,o.value="";try{const[y,b]=await Promise.all([ve(),Te()]),z=Xe(b||Pe(),y);It(z),await Mt(z.projectFiles),ye.value&&await xt()}catch(y){o.value=`Unable to load projects: ${y.message}`}finally{t.value=!1}},ao=A(()=>{const y=new Map;return a.value.forEach(b=>{const z=b.parentId||Bt;y.has(z)||y.set(z,[]),b.id!==Bt&&y.get(z).push(b.id)}),y}),On=A(()=>new Map(a.value.map(y=>[y.id,y]))),cs=A(()=>{const y=new Map;return a.value.forEach(b=>{y.set(b.id,[])}),r.value.forEach(b=>{const z=zs.value.get(b)||Bt,le=On.value.has(z)?z:Bt;y.has(le)||y.set(le,[]),y.get(le).push(b)}),y.forEach(b=>{b.sort((z,le)=>z.localeCompare(le))}),y}),us=y=>{const b=[y],z=[y];for(;z.length;){const le=z.pop();(ao.value.get(le)||[]).forEach(Ne=>{b.push(Ne),z.push(Ne)})}return b},Us=A(()=>{const y=[],b=(z,le)=>{const be=On.value.get(z);if(!be)return;const Ne=oe.value.has(z),et=cs.value.get(z)||[],ct=ao.value.get(z)||[],Ut=ct.length>0||et.length>0||We.value===z;y.push({kind:"folder",id:be.id,name:be.name,depth:le,isRoot:be.id===Bt,isExpanded:Ne,hasChildren:Ut}),Ne&&(ct.forEach(wn=>b(wn,le+1)),We.value===z&&y.push({kind:"draft",id:`draft:${z}`,depth:le+1}),et.forEach(wn=>{y.push({kind:"project",id:`project:${wn}`,projectName:wn,name:wn.replace(/\.json$/i,""),depth:le+1})}))};return b(Bt,0),y}),zs=A(()=>{const y=new Map;return d.value.forEach(b=>{y.set(b.name,b.folderId||Bt)}),y}),ds=A(()=>{const y=new Map;return d.value.forEach(b=>{const z=X((b==null?void 0:b.name)||"");z&&y.set(z,{name:z,folderId:(b==null?void 0:b.folderId)||Bt,lastEditedAt:Ee((b==null?void 0:b.lastEditedAt)||"")})}),y}),ui=y=>zs.value.get(y)||Bt,fs=A(()=>{const y=m.value,b=s.value.trim().toLowerCase();if(se.value!=="folder")return[];const le=[...ao.value.get(y)||[]].sort((be,Ne)=>{var Ut,wn;const et=((Ut=On.value.get(be))==null?void 0:Ut.name)||"",ct=((wn=On.value.get(Ne))==null?void 0:wn.name)||"";return et.localeCompare(ct)}).map(be=>{const Ne=On.value.get(be);if(!Ne)return null;const et=ao.value.get(be)||[],ct=r.value.filter(Ut=>ui(Ut)===be);return{kind:"folder",key:`folder:${Ne.id}`,id:Ne.id,title:Ne.name,icon:Gh,folderCount:et.length,projectCount:ct.length}}).filter(Boolean);return b?le.filter(be=>be.title.toLowerCase().includes(b)):le}),Io=A(()=>{const y=m.value,b=s.value.trim().toLowerCase(),z=r.value.filter(le=>se.value==="all"?!0:ui(le)===y).sort((le,be)=>le.localeCompare(be)).map(le=>{const be=O.value.has(lt(le)),Ne=ds.value.get(le);return{kind:"project",key:`project:${le}`,name:le,title:l.value.get(le)||ot(le),yamlName:Be(le),lastEditedLabel:D((Ne==null?void 0:Ne.lastEditedAt)||""),online:be}});return b?z.filter(le=>le.title.toLowerCase().includes(b)||String(le.name||"").toLowerCase().includes(b)):z}),di=y=>{Ln(y);const b=new Set(oe.value);b.add(y),oe.value=b},Ln=y=>{m.value=y,v.value="",se.value="folder"},Mr=y=>v.value?!1:y===m.value,Mn=(y,b={})=>{const{forceFolderView:z=!1}=b,le=ui(y);Kn(),bn(),P.value="",w.value=null,C.value=null,H.value=!1,v.value=y,m.value=le,z&&(se.value="folder")},kn=()=>{Kn(),bn(),P.value="",w.value=null,C.value=null,H.value=!1},To=()=>{v.value=""},Kn=()=>{Ae&&(cancelAnimationFrame(Ae),Ae=null)},bn=()=>{re&&(re.disconnect(),re=null)},Oi=y=>{bn(),w.value=y,y instanceof HTMLElement&&(typeof ResizeObserver=="function"&&(re=new ResizeObserver(()=>{fi()}),re.observe(y)),fi())},ps=()=>{const y=w.value,b=C.value;if(!(y instanceof HTMLElement)||!(b instanceof HTMLElement))return;if(!b.isConnected){kn();return}const z=b.getBoundingClientRect(),le=y.offsetHeight,be=y.offsetWidth,Ne=window.innerHeight||document.documentElement.clientHeight,et=window.innerWidth||document.documentElement.clientWidth,ct=8,Ut=6,wn=z.bottom+Ut+le<=Ne-ct,sn=z.top-Ut-le>=ct,yi=!wn&&sn,hl=z.left+be<=et-ct,iu=z.right-be>=ct,Xs=!hl&&iu,gl=yi?z.top-Ut-le:z.bottom+Ut,_s=Xs?z.right-be:z.left,vl=Math.max(ct,Math.min(gl,Ne-ct-le)),ml=Math.max(ct,Math.min(_s,et-ct-be));$.value={top:Math.round(vl),left:Math.round(ml)},H.value=!0},fi=()=>{Kn(),Ae=requestAnimationFrame(()=>{Ae=null,ps()})},Li=async(y,b)=>{if(T.value=null,P.value===y){kn();return}P.value=y,C.value=b instanceof HTMLElement?b:null,H.value=!1,await Ao(),fi()},Nr=async(y,b)=>{const z=b==null?void 0:b.currentTarget;Mn(y),await Li(y,z)},Ro=()=>String(P.value||"").trim(),Dr=()=>{const y=Ro();y&&(Mn(y),kn(),Hr({detail:{mode:"serial"}}))},Pr=()=>{const y=Ro();y&&(Mn(y),kn(),Gr())},J=()=>{const y=Ro();y&&(Mn(y),kn(),co())},xe=y=>{const b=f.value.get(y);return{iconName:it((b==null?void 0:b.iconName)||""),iconColor:tn(b==null?void 0:b.iconColor)||"",backgroundColor:tn(b==null?void 0:b.backgroundColor)||"",titleColor:tn(b==null?void 0:b.titleColor)||"",metaColor:tn(b==null?void 0:b.metaColor)||""}},Ge=A(()=>{const y=st.value;return y?l.value.get(y)||ot(y):"Project"}),Ve=A(()=>Be(st.value||"")),bt=A(()=>{const y=st.value;if(!y)return"No save timestamp";const b=ds.value.get(y);return D((b==null?void 0:b.lastEditedAt)||"")}),Lt=A({get:()=>me.value.iconName?`mdi:${me.value.iconName}`:"",set:y=>{me.value.iconName=it(y)}}),jt=A(()=>{const y={iconName:me.value.iconName||Ll,iconColor:tn(me.value.iconColor)||Ml,backgroundColor:tn(me.value.backgroundColor)||qu,titleColor:tn(me.value.titleColor)||Zu,metaColor:tn(me.value.metaColor)||Xu};return{background:y.backgroundColor,"--tile-title-color":y.titleColor,"--tile-meta-color":y.metaColor}}),lo=A(()=>{const y=me.value.iconName||Ll,b=tn(me.value.iconColor)||Ml;return{"--project-icon-url":`url("${at(y)}")`,color:b}}),pi=A(()=>de.value==="background"?tn(me.value.backgroundColor)||qu:de.value==="title"?tn(me.value.titleColor)||Zu:de.value==="meta"?tn(me.value.metaColor)||Xu:tn(me.value.iconColor)||Ml),hi=()=>{mt.value=me.value.iconName||"",dt.value=!0},jr=y=>{dt.value=!1,y&&typeof y=="object"&&typeof y.query=="string"&&(mt.value=y.query)},Vs=y=>{me.value.iconName=it(y),dt.value=!1},gi=y=>{y==="background"||y==="title"||y==="meta"?de.value=y:de.value="icon",Ct.value=!0},Nn=y=>{const b=tn(y)||"";de.value==="background"?me.value.backgroundColor=b:de.value==="title"?me.value.titleColor=b:de.value==="meta"?me.value.metaColor=b:me.value.iconColor=b,Ct.value=!1},_n=(y=!1)=>{vt.value&&!y||(Ke.value=!1,st.value="",yt.value="",dt.value=!1,Ct.value=!1)},Ya=y=>{const b=X(y);if(!b)return;const z=xe(b);st.value=b,me.value={iconName:z.iconName,iconColor:z.iconColor,backgroundColor:z.backgroundColor,titleColor:z.titleColor,metaColor:z.metaColor},yt.value="",Ke.value=!0},Dc=()=>{const y=Ro();y&&(kn(),Ya(y))},Dn=async(y,b)=>{const z=await Ie(_e(y));if(!z.ok)throw new Error(await qe(z,"Failed to load project for customization"));const le=await z.json();if(!(le!=null&&le.data)||typeof le.data!="object")throw new Error("Invalid project payload");const be=JSON.parse(JSON.stringify(le.data));be.ui=be.ui&&typeof be.ui=="object"?be.ui:{},Ot(b)?be.ui.dashboardTile={...b.iconName?{icon:`mdi:${b.iconName}`}:{},...b.iconColor?{iconColor:b.iconColor}:{},...b.backgroundColor?{backgroundColor:b.backgroundColor}:{},...b.titleColor?{titleColor:b.titleColor}:{},...b.metaColor?{metaColor:b.metaColor}:{}}:be.ui&&typeof be.ui=="object"&&delete be.ui.dashboardTile;const Ne=await Ue("projects/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:y,data:be})});if(!Ne.ok)throw new Error(await qe(Ne,"Failed to save project customization"))},Pc=async()=>{const y=X(st.value);if(!(!y||vt.value)){vt.value=!0,yt.value="";try{const b=Vt({icon:me.value.iconName,iconColor:me.value.iconColor,backgroundColor:me.value.backgroundColor,titleColor:me.value.titleColor,metaColor:me.value.metaColor});await Dn(y,b);const z=new Map(f.value);Ot(b)?z.set(y,b):z.delete(y),f.value=z,Yn(),_n(!0)}catch(b){yt.value=b instanceof Error?b.message:"Customization save failed"}finally{vt.value=!1}}},jc=()=>{me.value={iconName:"",iconColor:"",backgroundColor:"",titleColor:"",metaColor:""}},Ka=async y=>{if(y){Me.value=!0,W.value="";try{const b=await Ie(_e(y));if(!b.ok)throw new Error(await qe(b,"Failed to load project for Builder"));const z=await b.json();if(!(z!=null&&z.data)||typeof z.data!="object")throw new Error("Invalid project payload");tL(z.data),await n.push({name:"builder"})}catch(b){W.value=b instanceof Error?b.message:"Failed to open project in Builder"}finally{Me.value=!1}}},Pn=async()=>{if(!Me.value){Me.value=!0,W.value="";try{localStorage.removeItem(_r),await n.push({name:"builder"})}catch(y){W.value=y instanceof Error?y.message:"Failed to open new project in Builder"}finally{Me.value=!1}}},Zt=y=>{if(!Me.value&&!(!y||typeof y!="object")){if(!eL()){if(y.type==="project"){Ka(y.projectName);return}Pn();return}Se.value=y,ke.value=!0}},Br=y=>{const b=X(y);!b||Me.value||(Mn(b),kn(),Zt({type:"project",projectName:b}))},Hs=()=>{Br(Ro())},qa=()=>{Me.value||(kn(),W.value="",Zt({type:"blank"}))},Za=()=>{ke.value=!1,Se.value=null},Xa=async()=>{if(Me.value)return;const y=Se.value;if(Za(),!(!y||typeof y!="object")){if(y.type==="project"){const b=X(y.projectName);if(!b)return;await Ka(b);return}await Pn()}},Ja=A(()=>{var y;return((y=Se.value)==null?void 0:y.type)==="blank"?"There is an unsaved project in Builder. Overwrite it by starting a new project?":"There is an unsaved project in Builder. Overwrite it by opening this project?"}),Ur=y=>{if(y.key==="Escape"&&!(dt.value||Ct.value)){if(Ke.value){_n();return}To(),kn(),T.value=null}},Qa=A(()=>{const y=lt(v.value);return y?O.value.has(y):!1}),el=y=>{const b=lt(y);return b?O.value.has(b):!1},Mi=A(()=>!!String(v.value||"").trim()),Bc=A(()=>Mi.value),hs=A(()=>Mi.value),Gs=A(()=>Mi.value&&Qa.value),zr=A(()=>el(P.value)),vi=A(()=>Be(v.value)),Ni=A(()=>{const y=lt(v.value);if(!y)return"";const b=j.value.get(y);return b||cn(`${y}.yaml`)}),gs=A(()=>hs.value&&Qa.value&&!!Ni.value),Di=A(()=>({top:`${$.value.top}px`,left:`${$.value.left}px`,visibility:H.value?"visible":"hidden"})),Uc=Rm({canInstall:()=>hs.value,canUseOta:()=>gs.value,canLogs:()=>Gs.value,getYamlName:()=>vi.value,getDeviceHost:()=>Ni.value,fetchApi:Ue,streamUrl:N,setError:y=>{W.value=y},clearError:()=>{W.value=""},prepareBeforeJob:async()=>ou()}),{compileModalOpen:zc,compileAutoScroll:tl,compileLogLines:Vc,compileIsReconnecting:Ws,canDownloadCompiledBinary:mi,canCloseCompile:nl,terminalTitle:V,compileStateLabel:Ko,compileStateClass:Pi,setCompileConsoleElement:Hc,toggleCompileAutoscroll:vs,closeCompileModal:jo,handleInstallSerialPort:Vr,handleInstallOta:ji,startLogs:Gc,handleInstallDownload:Wc,downloadBinary:Yc,compileIsActive:ol,localFlashRunning:il,dispose:Kc}=Uc,sl=()=>{window.dispatchEvent(new CustomEvent("app:dashboard-actions-state",{detail:{canInstall:hs.value,canUseOta:gs.value,canLogs:Gs.value,canEdit:Mi.value,running:ol.value||il.value}}))},Hr=y=>{if(!hs.value)return;const b=y!=null&&y.detail&&typeof y.detail=="object"?y.detail:{},z=typeof b.mode=="string"?b.mode:"";if(W.value="",z==="ota"){if(!gs.value)return;ji();return}if(z==="download"){Wc();return}Vr()},Gr=()=>{Gs.value&&(W.value="",Gc())},co=()=>{Bc.value&&(W.value="",nu())},mo=()=>{Mi.value&&(W.value="",Br(v.value))},Wr=A(()=>{const y=[];let b=m.value;const z=a.value.length+2;let le=0;for(;b&&le<z;){const be=On.value.get(b);if(!be||(y.push({id:be.id,name:be.name}),!be.parentId))break;b=be.parentId,le+=1}return y.reverse()}),Yr=()=>{const y=On.value.get(m.value);!y||!y.parentId||Ln(y.parentId)},Kr=A(()=>m.value===Bt),Ys=y=>{const b=new Set(oe.value);b.has(y)?b.delete(y):b.add(y),oe.value=b},Ks=y=>{T.value=T.value===y?null:y},rl=(y,b,z="")=>{const le=b.trim().toLowerCase();return a.value.some(be=>be.id===z||(be.parentId||Bt)!==y?!1:be.name.trim().toLowerCase()===le)},qc=async(y,b)=>{Z.value+=1;const z=`fld_${Z.value}`;a.value=[...a.value,{id:z,name:b,parentId:y}];const le=new Set(oe.value);le.add(y),le.add(z),oe.value=le,await xt()},Zc=y=>{De.value=y},qr=async y=>{var z;We.value=y,ht.value="",T.value=null;const b=new Set(oe.value);b.add(y),oe.value=b,await Ao(),(z=De.value)==null||z.focus()},ms=()=>{We.value="",ht.value=""},ys=async()=>{var z,le,be;const y=We.value;if(!y)return;const b=p(ht.value||"");if(!b){ms();return}if(rl(y,b)){window.alert("Folder with this name already exists in the selected location."),await Ao(),(z=De.value)==null||z.focus(),(be=(le=De.value)==null?void 0:le.select)==null||be.call(le);return}ms(),await qc(y,b)},Xc=async y=>{if(y===Bt)return;const b=new Set(us(y));a.value=a.value.filter(le=>!b.has(le.id)),d.value=d.value.map(le=>b.has(le.folderId)?{...le,folderId:Bt}:le);const z=new Set(oe.value);b.forEach(le=>z.delete(le)),z.add(Bt),oe.value=z,b.has(m.value)&&(m.value=Bt),T.value=null,await xt()},Jc=y=>{y!==Bt&&(Q.value=y,Ye.value=!0)},al=()=>{Ye.value=!1,Q.value=""},Qc=async()=>{const y=Q.value;al(),y&&await Xc(y)},ll=y=>{r.value=r.value.filter(be=>be!==y),d.value=d.value.filter(be=>be.name!==y);const b=new Map(l.value);b.delete(y),l.value=b;const z=new Map(f.value);z.delete(y),f.value=z;const le=lt(y);if(le){const be=new Set(O.value);be.delete(le),O.value=be;const Ne=new Map(j.value);Ne.delete(le),j.value=Ne}v.value===y&&(v.value="")},Cn=y=>{const b=X(y);b&&(kn(),Oe.value=b,we.value=!0)},cl=()=>{Cn(P.value)},ul=()=>{we.value=!1,Oe.value=""},bs=async()=>{if(Qe.value)return;const y=X(Oe.value);if(ul(),!!y){Qe.value=!0,W.value="";try{const b=await Ue(`api/projects/purge?name=${encodeURIComponent(y)}`,{method:"DELETE"});if(!b.ok&&b.status!==404)throw new Error(await qe(b,"Project delete failed"));ll(y),Yn(),await kt()}catch(b){W.value=b instanceof Error?b.message:"Project delete failed"}finally{Qe.value=!1}}},jn=(y,b)=>{const z=d.value.filter(be=>be.name!==y),le=ds.value.get(y);z.push({name:y,folderId:b,...le!=null&&le.lastEditedAt?{lastEditedAt:le.lastEditedAt}:{}}),d.value=z},eu=(y,b)=>{ee.value=y,b.dataTransfer&&(b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text/plain",y))},dl=()=>{ee.value="",M.value=""},qs=y=>{ee.value&&(M.value=y)},fl=(y,b)=>{const z=b.currentTarget;if(!(z instanceof Element))return;const le=b.relatedTarget;le instanceof Node&&z.contains(le)||M.value===y&&(M.value="")},Zr=async y=>{const b=ee.value;M.value="",ee.value="",b&&(jn(b,y),await xt())},pl=y=>{const b=y.target;b instanceof Element&&(b.closest(".folder-menu")||b.closest(".folder-menu-toggle")||b.closest(".project-menu")||b.closest(".project-more")||(T.value=null,kn()))},Bi=()=>{P.value&&fi()},Zs=()=>{P.value&&fi()},tu=y=>Math.max(bD,Math.min(_D,y)),Xr=y=>{if(!Le.value)return;const b=Ce.value;if(!b)return;const z=b.getBoundingClientRect(),le=tu(y.clientX-z.left);Fe.value=le},Jr=()=>{Le.value&&(Le.value=!1,document.body.classList.remove("is-sidebar-resizing"))},qn=()=>{Le.value=!0,document.body.classList.add("is-sidebar-resizing")},nu=async()=>{try{const y=vi.value;if(!y)return;const b=await Ue(`yaml/load?name=${encodeURIComponent(y)}`);if(!b.ok)throw new Error(await qe(b,"Failed to load YAML"));const z=await b.json(),le=String((z==null?void 0:z.yaml)||"").trim();if(!le)throw new Error("Project does not contain exportable YAML.");const be=new Blob([le],{type:"text/yaml"}),Ne=URL.createObjectURL(be),et=document.createElement("a");et.href=Ne,et.download=y,et.click(),URL.revokeObjectURL(Ne)}catch(y){W.value=y instanceof Error?y.message:"Export failed"}},ou=async()=>{const y=String(v.value||"").trim(),b=vi.value;if(!y||!b)throw new Error("No project selected for install.");try{const z=await Ue(`projects/load?name=${encodeURIComponent(y)}`);if(!z.ok)throw new Error(await qe(z,"Failed to load project before install"));const le=await z.json(),be=le==null?void 0:le.data;if(!be||typeof be!="object")throw new Error("Invalid project payload");const Ne=JSON.parse(JSON.stringify(be));let et=!1;if(Object.prototype.hasOwnProperty.call(Ne,"isModified")&&(delete Ne.isModified,et=!0),Ne.ui&&typeof Ne.ui=="object"&&(Object.prototype.hasOwnProperty.call(Ne.ui,"isModified")&&(delete Ne.ui.isModified,et=!0),Object.prototype.hasOwnProperty.call(Ne.ui,"isSaved")&&(delete Ne.ui.isSaved,et=!0)),Ne.isSaved!==!0&&(Ne.isSaved=!0,et=!0),et){const wn=await Ue("projects/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:y,data:Ne})});if(!wn.ok)throw new Error(await qe(wn,"Project save failed before install"))}const ct=Ni.value||cn(b),Ut=await Ue("api/devices/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yaml:b,...ct?{host:ct}:{}})});if(!Ut.ok)throw new Error(await qe(Ut,"Device registration failed"));return!0}catch(z){throw z instanceof Error?z:new Error("Install preparation failed")}};return nt(()=>[hs.value,Gs.value,Mi.value,ol.value,il.value],()=>{sl()},{immediate:!0}),nt(()=>g.value,(y,b)=>{b instanceof HTMLElement&&b.removeEventListener("scroll",Zs),y instanceof HTMLElement&&y.addEventListener("scroll",Zs,{passive:!0})},{immediate:!0}),li(()=>{vo(),gn(),xn(),un(),document.addEventListener("visibilitychange",B),$o(),window.addEventListener("app:projects-updated",dn),window.addEventListener("storage",ro),window.addEventListener("click",pl),window.addEventListener("keydown",Ur),window.addEventListener("resize",Bi),window.addEventListener("mousemove",Xr),window.addEventListener("mouseup",Jr),window.addEventListener("app:install-option",Hr),window.addEventListener("app:builder-logs",Gr),window.addEventListener("app:dashboard-edit",mo),sl()}),go(()=>{ci(),window.removeEventListener("app:projects-updated",dn),window.removeEventListener("storage",ro),window.removeEventListener("click",pl),window.removeEventListener("keydown",Ur),window.removeEventListener("resize",Bi),window.removeEventListener("mousemove",Xr),window.removeEventListener("mouseup",Jr),window.removeEventListener("app:install-option",Hr),window.removeEventListener("app:builder-logs",Gr),window.removeEventListener("app:dashboard-edit",mo),document.removeEventListener("visibilitychange",B),g.value instanceof HTMLElement&&g.value.removeEventListener("scroll",Zs),Kn(),bn(),Kc(),G(),Jr(),window.dispatchEvent(new CustomEvent("app:dashboard-actions-state",{detail:{canInstall:!1,canUseOta:!1,canLogs:!1,canEdit:!1,running:!1}}))}),(y,b)=>(_(),E(je,null,[_t(mr,{open:Ye.value,title:"Confirm",message:"Delete this folder and all nested folders?","confirm-text":"Yes","cancel-text":"Cancel",onConfirm:Qc,onCancel:al},null,8,["open"]),_t(mr,{open:we.value,title:"Confirm",message:"Delete this project and all related files?","confirm-text":"Yes","cancel-text":"Cancel",onConfirm:bs,onCancel:ul},null,8,["open"]),_t(mr,{open:ke.value,title:"Confirm",message:Ja.value,"confirm-text":"Yes","cancel-text":"Cancel",onConfirm:Xa,onCancel:Za},null,8,["open","message"]),W.value?(_(),E("div",hN,ge(W.value),1)):ue("",!0),_t($v,{"compile-open":Ft(zc),"terminal-title":Ft(V),"compile-state-class":Ft(Pi),"compile-state-label":Ft(Ko),"compile-is-reconnecting":Ft(Ws),"compile-auto-scroll":Ft(tl),"compile-log-lines":Ft(Vc),"can-download-compiled-binary":Ft(mi),"can-close-compile":Ft(nl),"on-console-ref":Ft(Hc),onToggleAutoscroll:Ft(vs),onDownload:Ft(Yc),onCloseCompile:Ft(jo)},null,8,["compile-open","terminal-title","compile-state-class","compile-state-label","compile-is-reconnecting","compile-auto-scroll","compile-log-lines","can-download-compiled-binary","can-close-compile","on-console-ref","onToggleAutoscroll","onDownload","onCloseCompile"]),c("section",{ref_key:"dashboardViewRef",ref:Ce,class:"dashboard-view",style:rn({gridTemplateColumns:`${Fe.value}px 8px minmax(0, 1fr)`})},[c("aside",gN,[(_(!0),E(je,null,Je(Us.value,z=>(_(),E("div",{key:z.id,class:"folder-row"},[z.kind==="folder"?(_(),E(je,{key:0},[c("button",{type:"button",class:pt(["folder-row-button",{active:Mr(z.id),"drop-target":M.value===z.id}]),style:rn({paddingLeft:`${10+z.depth*14}px`}),onClick:le=>Ln(z.id),onDragover:Et(le=>qs(z.id),["prevent"]),onDragenter:Et(le=>qs(z.id),["prevent"]),onDragleave:le=>fl(z.id,le),onDrop:Et(le=>Zr(z.id),["prevent"])},[c("span",mN,[z.hasChildren?(_(),E("span",{key:0,class:"folder-inline-toggle",role:"button",tabindex:"0","aria-label":"Toggle folder",onClick:Et(le=>Ys(z.id),["stop"]),onKeydown:[Qs(Et(le=>Ys(z.id),["stop","prevent"]),["enter"]),Qs(Et(le=>Ys(z.id),["stop","prevent"]),["space"])]},[c("img",{src:z.isExpanded?ED:wD,alt:"","aria-hidden":"true"},null,8,bN)],40,yN)):(_(),E("span",_N)),c("img",{class:"tree-row-icon",src:Gh,alt:"","aria-hidden":"true"}),c("span",wN,ge(z.name),1)]),c("span",{class:"folder-menu-toggle",role:"button",tabindex:"0","aria-label":"Folder menu",onClick:Et(le=>Ks(z.id),["stop"]),onKeydown:[Qs(Et(le=>Ks(z.id),["stop","prevent"]),["enter"]),Qs(Et(le=>Ks(z.id),["stop","prevent"]),["space"])]},[...b[15]||(b[15]=[c("span",{class:"vertical-dots","aria-hidden":"true"},[c("span"),c("span"),c("span")],-1)])],40,EN)],46,vN),T.value===z.id?(_(),E("div",SN,[c("button",{type:"button",onClick:Et(le=>qr(z.id),["stop"])},"Add folder",8,xN),z.isRoot?ue("",!0):(_(),E("button",{key:0,type:"button",onClick:Et(le=>Jc(z.id),["stop"])}," Delete folder ",8,kN))])):ue("",!0)],64)):z.kind==="project"?(_(),E("button",{key:1,type:"button",class:pt(["project-tree-item",{active:z.projectName===v.value}]),style:rn(At(z.projectName,10+z.depth*14)),onClick:le=>Mn(z.projectName,{forceFolderView:!0})},[c("span",{class:"tree-row-icon tree-row-icon--project",style:rn(Ht(z.projectName)),"aria-hidden":"true"},null,4),c("span",AN,ge(z.name),1)],14,CN)):(_(),E("div",{key:2,class:"folder-draft-item",style:rn({paddingLeft:`${10+z.depth*14}px`})},[Fn(c("input",{ref_for:!0,ref:Zc,"onUpdate:modelValue":b[0]||(b[0]=le=>ht.value=le),type:"text",class:"folder-draft-input",placeholder:"New folder",onKeydown:[Qs(Et(ys,["prevent"]),["enter"]),Qs(Et(ms,["prevent"]),["esc"])],onBlur:ys},null,40,$N),[[to,ht.value]])],4))]))),128))]),c("div",{class:"dashboard-resizer",role:"separator","aria-label":"Resize sidebar","aria-orientation":"vertical",onMousedown:Et(qn,["prevent"])},null,32),c("section",IN,[c("div",TN,[c("div",RN,[c("button",{type:"button",class:"toolbar-mode-toggle",onClick:b[1]||(b[1]=z=>se.value=se.value==="folder"?"all":"folder")},ge(se.value==="folder"?"All devices":"Folder view"),1),c("button",{type:"button",class:"toolbar-up-button",disabled:Kr.value,onClick:Yr},[c("img",{src:SD,alt:"","aria-hidden":"true"})],8,FN),c("div",ON,[(_(!0),E(je,null,Je(Wr.value,(z,le)=>(_(),E("button",{key:z.id,type:"button",class:"breadcrumb-item",onClick:be=>Ln(z.id)},[c("span",null,ge(z.name),1),le<Wr.value.length-1?(_(),E("span",MN,"")):ue("",!0)],8,LN))),128))]),c("label",NN,[b[16]||(b[16]=c("img",{class:"dashboard-search-icon",src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/magnify.svg",alt:"","aria-hidden":"true"},null,-1)),Fn(c("input",{id:"dashboardSearch",type:"search",placeholder:"Search files, folders",autocomplete:"off","onUpdate:modelValue":b[2]||(b[2]=z=>s.value=z)},null,512),[[to,s.value]])])])]),t.value?(_(),E("div",DN,"Loading projects...")):o.value?(_(),E("div",PN,ge(o.value),1)):i.value?(_(),E("div",jN,ge(i.value),1)):(_(),E(je,{key:3},[c("div",{class:"dashboard-content-actions"},[c("button",{type:"button",class:"btn-standard dashboard-new-device",onClick:qa}," New device ")]),c("section",{ref_key:"entriesPaneRef",ref:g,class:"entries-pane"},[se.value==="folder"&&fs.value.length?(_(),E("section",BN,[b[17]||(b[17]=c("h3",{class:"entries-title"},"Folders",-1)),c("div",UN,[(_(!0),E(je,null,Je(fs.value,z=>(_(),E("article",{key:z.key,class:"folder-tile",onDragover:Et(le=>qs(z.id),["prevent"]),onDragenter:Et(le=>qs(z.id),["prevent"]),onDragleave:le=>fl(z.id,le),onDrop:Et(le=>Zr(z.id),["prevent"]),onDblclick:le=>di(z.id)},[c("div",VN,[c("span",HN,[c("img",{src:z.icon,alt:"","aria-hidden":"true"},null,8,GN)]),c("h4",null,ge(z.title),1)]),c("p",WN,ge(z.folderCount)+" folders - "+ge(z.projectCount)+" projects",1)],40,zN))),128))])])):ue("",!0),Io.value.length?(_(),E("section",YN,[c("h3",KN,ge(se.value==="all"?"All devices":"Projects"),1),c("div",qN,[(_(!0),E(je,null,Je(Io.value,z=>(_(),zn(Vh,{key:z.key,class:"project-tile",active:z.name===v.value,online:z.online,interactive:!0,"show-menu":!0,title:z.title,"yaml-name":z.yamlName,"last-edited-label":z.lastEditedLabel,"tile-style":on(z.name),"icon-style":ln(z.name),draggable:!0,onClick:le=>Mn(z.name),onDblclick:le=>Br(z.name),onMenu:le=>Nr(z.name,le),onDragstart:le=>eu(z.name,le),onDragend:b[3]||(b[3]=le=>dl())},null,8,["active","online","title","yaml-name","last-edited-label","tile-style","icon-style","onClick","onDblclick","onMenu","onDragstart"]))),128))])])):ue("",!0),fs.value.length===0&&Io.value.length===0?(_(),E("article",ZN," No folders or projects match your search. ")):ue("",!0)],512)],64))])],4),(_(),zn(Cb,{to:"body"},[P.value?(_(),E("div",{key:0,ref:Oi,class:"project-menu project-menu--floating",style:rn(Di.value)},[c("button",{type:"button",onClick:Et(Hs,["stop"])},"Edit"),c("button",{type:"button",onClick:Et(Dr,["stop"])},"Install"),c("button",{type:"button",disabled:!zr.value,onClick:Et(Pr,["stop"])},"Logs",8,XN),c("button",{type:"button",onClick:Et(J,["stop"])},"Download YAML"),c("button",{type:"button",onClick:b[4]||(b[4]=Et(()=>{},["stop"]))},"Clead Build"),c("button",{type:"button",onClick:Et(Dc,["stop"])},"Customize"),c("button",{type:"button",onClick:Et(cl,["stop"])},"Delete Project")],4)):ue("",!0)])),Ke.value?(_(),E("div",{key:1,class:"customize-modal-overlay",onClick:Et(_n,["self"])},[c("div",JN,[c("div",QN,[c("div",null,[b[18]||(b[18]=c("h3",null,"Customize tile",-1)),c("p",null,ge(Ge.value),1)])]),c("div",eD,[_t(Vh,{class:"customize-preview-card",title:Ge.value,"yaml-name":Ve.value,"last-edited-label":bt.value,"tile-style":jt.value,"icon-style":lo.value},null,8,["title","yaml-name","last-edited-label","tile-style","icon-style"])]),c("div",tD,[c("div",nD,[b[19]||(b[19]=c("label",{for:"tileIconInput"},"Icon",-1)),c("div",oD,[Fn(c("input",{id:"tileIconInput",type:"text","onUpdate:modelValue":b[5]||(b[5]=z=>Lt.value=z),placeholder:"mdi:memory"},null,512),[[to,Lt.value]]),c("button",{type:"button",class:"btn-standard compact",onClick:hi},"Pick icon")])]),c("div",iD,[b[20]||(b[20]=c("label",{for:"tileIconColorInput"},"Icon color",-1)),c("div",sD,[Fn(c("input",{id:"tileIconColorInput",type:"text","onUpdate:modelValue":b[6]||(b[6]=z=>me.value.iconColor=z),placeholder:"#0F172A"},null,512),[[to,me.value.iconColor]]),c("button",{type:"button",class:"btn-standard compact",onClick:b[7]||(b[7]=z=>gi("icon"))},"Pick color")])]),c("div",rD,[b[21]||(b[21]=c("label",{for:"tileBackgroundInput"},"Tile background",-1)),c("div",aD,[Fn(c("input",{id:"tileBackgroundInput",type:"text","onUpdate:modelValue":b[8]||(b[8]=z=>me.value.backgroundColor=z),placeholder:"#FFFFFF"},null,512),[[to,me.value.backgroundColor]]),c("button",{type:"button",class:"btn-standard compact",onClick:b[9]||(b[9]=z=>gi("background"))}," Pick color ")])]),c("div",lD,[b[22]||(b[22]=c("label",{for:"tileTitleColorInput"},"Title color",-1)),c("div",cD,[Fn(c("input",{id:"tileTitleColorInput",type:"text","onUpdate:modelValue":b[10]||(b[10]=z=>me.value.titleColor=z),placeholder:"#1F3F6D"},null,512),[[to,me.value.titleColor]]),c("button",{type:"button",class:"btn-standard compact",onClick:b[11]||(b[11]=z=>gi("title"))}," Pick color ")])]),c("div",uD,[b[23]||(b[23]=c("label",{for:"tileMetaColorInput"},"Metadata color",-1)),c("div",dD,[Fn(c("input",{id:"tileMetaColorInput",type:"text","onUpdate:modelValue":b[12]||(b[12]=z=>me.value.metaColor=z),placeholder:"#7190B8"},null,512),[[to,me.value.metaColor]]),c("button",{type:"button",class:"btn-standard compact",onClick:b[13]||(b[13]=z=>gi("meta"))}," Pick color ")])])]),yt.value?(_(),E("div",fD,ge(yt.value),1)):ue("",!0),c("div",pD,[c("button",{type:"button",class:"btn-standard secondary",disabled:vt.value,onClick:_n},"Cancel",8,hD),c("button",{type:"button",class:"btn-standard secondary",disabled:vt.value,onClick:jc}," Reset to default ",8,gD),c("button",{type:"button",class:"btn-standard",disabled:vt.value,onClick:Pc},"Apply",8,vD)])])])):ue("",!0),_t(ef,{open:dt.value,selected:me.value.iconName,"initial-query":mt.value,onClose:jr,onSelect:Vs},null,8,["open","selected","initial-query"]),_t(ar,{open:Ct.value,selected:pi.value,onClose:b[14]||(b[14]=z=>Ct.value=!1),onSelect:Nn},null,8,["open","selected"])],64))}},kD=so(xD,[["__scopeId","data-v-168015e8"]]),CD=lw({history:U_("./"),routes:[{path:"/",name:"dashboard",component:kD},{path:"/dashboard",redirect:{name:"dashboard"}},{path:"/builder",name:"builder",component:sN}]});Q0($w).use(CD).mount("#app");
