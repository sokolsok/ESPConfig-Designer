const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./esp32-BPYaDt9v.js","./rom-Caghk6Eh.js","./esp32c2-CPrCFu7Z.js","./esp32c3-I3vXmsVg.js","./esp32c6-C93uIFil.js","./esp32c61-ktIkGZDk.js","./esp32c5-DNmA6eRA.js","./esp32h2-Cf8JbGZQ.js","./esp32s3-mu2zzjDN.js","./esp32s2-3nCAg6Ct.js","./esp8266-8VKmCx7J.js","./esp32p4-D9aWWE_i.js"])))=>i.map(i=>d[i]);
(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ec(e){const n=Object.create(null);for(const t of e.split(","))n[t]=1;return t=>t in n}const Dt={},fi=[],Io=()=>{},qf=()=>!1,xr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Sc=e=>e.startsWith("onUpdate:"),bn=Object.assign,xc=(e,n)=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)},fm=Object.prototype.hasOwnProperty,Ot=(e,n)=>fm.call(e,n),ht=Array.isArray,hi=e=>ka(e)==="[object Map]",kr=e=>ka(e)==="[object Set]",zu=e=>ka(e)==="[object Date]",vt=e=>typeof e=="function",nn=e=>typeof e=="string",Oo=e=>typeof e=="symbol",jt=e=>e!==null&&typeof e=="object",Yf=e=>(jt(e)||vt(e))&&vt(e.then)&&vt(e.catch),Xf=Object.prototype.toString,ka=e=>Xf.call(e),hm=e=>ka(e).slice(8,-1),Jf=e=>ka(e)==="[object Object]",kc=e=>nn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Yi=Ec(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Cr=e=>{const n=Object.create(null);return t=>n[t]||(n[t]=e(t))},pm=/-\w/g,so=Cr(e=>e.replace(pm,n=>n.slice(1).toUpperCase())),gm=/\B([A-Z])/g,xs=Cr(e=>e.replace(gm,"-$1").toLowerCase()),Ar=Cr(e=>e.charAt(0).toUpperCase()+e.slice(1)),gl=Cr(e=>e?`on${Ar(e)}`:""),ms=(e,n)=>!Object.is(e,n),or=(e,...n)=>{for(let t=0;t<e.length;t++)e[t](...n)},Qf=(e,n,t,o=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:o,value:t})},$r=e=>{const n=parseFloat(e);return isNaN(n)?e:n};let Wu;const Ir=()=>Wu||(Wu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function tn(e){if(ht(e)){const n={};for(let t=0;t<e.length;t++){const o=e[t],s=nn(o)?bm(o):tn(o);if(s)for(const i in s)n[i]=s[i]}return n}else if(nn(e)||jt(e))return e}const vm=/;(?![^(]*\))/g,mm=/:([^]+)/,ym=/\/\*[^]*?\*\//g;function bm(e){const n={};return e.replace(ym,"").split(vm).forEach(t=>{if(t){const o=t.split(mm);o.length>1&&(n[o[0].trim()]=o[1].trim())}}),n}function rt(e){let n="";if(nn(e))n=e;else if(ht(e))for(let t=0;t<e.length;t++){const o=rt(e[t]);o&&(n+=o+" ")}else if(jt(e))for(const t in e)e[t]&&(n+=t+" ");return n.trim()}const _m="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wm=Ec(_m);function eh(e){return!!e||e===""}function Em(e,n){if(e.length!==n.length)return!1;let t=!0;for(let o=0;t&&o<e.length;o++)t=Tr(e[o],n[o]);return t}function Tr(e,n){if(e===n)return!0;let t=zu(e),o=zu(n);if(t||o)return t&&o?e.getTime()===n.getTime():!1;if(t=Oo(e),o=Oo(n),t||o)return e===n;if(t=ht(e),o=ht(n),t||o)return t&&o?Em(e,n):!1;if(t=jt(e),o=jt(n),t||o){if(!t||!o)return!1;const s=Object.keys(e).length,i=Object.keys(n).length;if(s!==i)return!1;for(const a in e){const r=e.hasOwnProperty(a),d=n.hasOwnProperty(a);if(r&&!d||!r&&d||!Tr(e[a],n[a]))return!1}}return String(e)===String(n)}function Sm(e,n){return e.findIndex(t=>Tr(t,n))}const th=e=>!!(e&&e.__v_isRef===!0),ue=e=>nn(e)?e:e==null?"":ht(e)||jt(e)&&(e.toString===Xf||!vt(e.toString))?th(e)?ue(e.value):JSON.stringify(e,nh,2):String(e),nh=(e,n)=>th(n)?nh(e,n.value):hi(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((t,[o,s],i)=>(t[vl(o,i)+" =>"]=s,t),{})}:kr(n)?{[`Set(${n.size})`]:[...n.values()].map(t=>vl(t))}:Oo(n)?vl(n):jt(n)&&!ht(n)&&!Jf(n)?String(n):n,vl=(e,n="")=>{var t;return Oo(e)?`Symbol(${(t=e.description)!=null?t:n})`:e};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let On;class xm{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=On,!n&&On&&(this.index=(On.scopes||(On.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].pause();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].resume();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].resume()}}run(n){if(this._active){const t=On;try{return On=this,n()}finally{On=t}}}on(){++this._on===1&&(this.prevScope=On,On=this)}off(){this._on>0&&--this._on===0&&(On=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let t,o;for(t=0,o=this.effects.length;t<o;t++)this.effects[t].stop();for(this.effects.length=0,t=0,o=this.cleanups.length;t<o;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function km(){return On}let Ht;const ml=new WeakSet;class oh{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,On&&On.active&&On.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ml.has(this)&&(ml.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ih(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Gu(this),ah(this);const n=Ht,t=go;Ht=this,go=!0;try{return this.fn()}finally{rh(this),Ht=n,go=t,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)$c(n);this.deps=this.depsTail=void 0,Gu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ml.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Yl(this)&&this.run()}get dirty(){return Yl(this)}}let sh=0,Xi,Ji;function ih(e,n=!1){if(e.flags|=8,n){e.next=Ji,Ji=e;return}e.next=Xi,Xi=e}function Cc(){sh++}function Ac(){if(--sh>0)return;if(Ji){let n=Ji;for(Ji=void 0;n;){const t=n.next;n.next=void 0,n.flags&=-9,n=t}}let e;for(;Xi;){let n=Xi;for(Xi=void 0;n;){const t=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(o){e||(e=o)}n=t}}if(e)throw e}function ah(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function rh(e){let n,t=e.depsTail,o=t;for(;o;){const s=o.prevDep;o.version===-1?(o===t&&(t=s),$c(o),Cm(o)):n=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=s}e.deps=n,e.depsTail=t}function Yl(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(lh(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function lh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===la)||(e.globalVersion=la,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Yl(e))))return;e.flags|=2;const n=e.dep,t=Ht,o=go;Ht=e,go=!0;try{ah(e);const s=e.fn(e._value);(n.version===0||ms(s,e._value))&&(e.flags|=128,e._value=s,n.version++)}catch(s){throw n.version++,s}finally{Ht=t,go=o,rh(e),e.flags&=-3}}function $c(e,n=!1){const{dep:t,prevSub:o,nextSub:s}=e;if(o&&(o.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=o,e.nextSub=void 0),t.subs===e&&(t.subs=o,!o&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)$c(i,!0)}!n&&!--t.sc&&t.map&&t.map.delete(t.key)}function Cm(e){const{prevDep:n,nextDep:t}=e;n&&(n.nextDep=t,e.prevDep=void 0),t&&(t.prevDep=n,e.nextDep=void 0)}let go=!0;const ch=[];function Ko(){ch.push(go),go=!1}function Zo(){const e=ch.pop();go=e===void 0?!0:e}function Gu(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const t=Ht;Ht=void 0;try{n()}finally{Ht=t}}}let la=0;class Am{constructor(n,t){this.sub=n,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ic{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!Ht||!go||Ht===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ht)t=this.activeLink=new Am(Ht,this),Ht.deps?(t.prevDep=Ht.depsTail,Ht.depsTail.nextDep=t,Ht.depsTail=t):Ht.deps=Ht.depsTail=t,uh(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const o=t.nextDep;o.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=o),t.prevDep=Ht.depsTail,t.nextDep=void 0,Ht.depsTail.nextDep=t,Ht.depsTail=t,Ht.deps===t&&(Ht.deps=o)}return t}trigger(n){this.version++,la++,this.notify(n)}notify(n){Cc();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Ac()}}}function uh(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let o=n.deps;o;o=o.nextDep)uh(o)}const t=e.dep.subs;t!==e&&(e.prevSub=t,t&&(t.nextSub=e)),e.dep.subs=e}}const Xl=new WeakMap,Us=Symbol(""),Jl=Symbol(""),ca=Symbol("");function vn(e,n,t){if(go&&Ht){let o=Xl.get(e);o||Xl.set(e,o=new Map);let s=o.get(t);s||(o.set(t,s=new Ic),s.map=o,s.key=t),s.track()}}function Wo(e,n,t,o,s,i){const a=Xl.get(e);if(!a){la++;return}const r=d=>{d&&d.trigger()};if(Cc(),n==="clear")a.forEach(r);else{const d=ht(e),c=d&&kc(t);if(d&&t==="length"){const f=Number(o);a.forEach((v,m)=>{(m==="length"||m===ca||!Oo(m)&&m>=f)&&r(v)})}else switch((t!==void 0||a.has(void 0))&&r(a.get(t)),c&&r(a.get(ca)),n){case"add":d?c&&r(a.get("length")):(r(a.get(Us)),hi(e)&&r(a.get(Jl)));break;case"delete":d||(r(a.get(Us)),hi(e)&&r(a.get(Jl)));break;case"set":hi(e)&&r(a.get(Us));break}}Ac()}function ni(e){const n=Lt(e);return n===e?n:(vn(n,"iterate",ca),no(e)?n:n.map(mo))}function Rr(e){return vn(e=Lt(e),"iterate",ca),e}function cs(e,n){return qo(e)?Vs(e)?bi(mo(n)):bi(n):mo(n)}const $m={__proto__:null,[Symbol.iterator](){return yl(this,Symbol.iterator,e=>cs(this,e))},concat(...e){return ni(this).concat(...e.map(n=>ht(n)?ni(n):n))},entries(){return yl(this,"entries",e=>(e[1]=cs(this,e[1]),e))},every(e,n){return jo(this,"every",e,n,void 0,arguments)},filter(e,n){return jo(this,"filter",e,n,t=>t.map(o=>cs(this,o)),arguments)},find(e,n){return jo(this,"find",e,n,t=>cs(this,t),arguments)},findIndex(e,n){return jo(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return jo(this,"findLast",e,n,t=>cs(this,t),arguments)},findLastIndex(e,n){return jo(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return jo(this,"forEach",e,n,void 0,arguments)},includes(...e){return bl(this,"includes",e)},indexOf(...e){return bl(this,"indexOf",e)},join(e){return ni(this).join(e)},lastIndexOf(...e){return bl(this,"lastIndexOf",e)},map(e,n){return jo(this,"map",e,n,void 0,arguments)},pop(){return Vi(this,"pop")},push(...e){return Vi(this,"push",e)},reduce(e,...n){return Ku(this,"reduce",e,n)},reduceRight(e,...n){return Ku(this,"reduceRight",e,n)},shift(){return Vi(this,"shift")},some(e,n){return jo(this,"some",e,n,void 0,arguments)},splice(...e){return Vi(this,"splice",e)},toReversed(){return ni(this).toReversed()},toSorted(e){return ni(this).toSorted(e)},toSpliced(...e){return ni(this).toSpliced(...e)},unshift(...e){return Vi(this,"unshift",e)},values(){return yl(this,"values",e=>cs(this,e))}};function yl(e,n,t){const o=Rr(e),s=o[n]();return o!==e&&!no(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=t(i.value)),i}),s}const Im=Array.prototype;function jo(e,n,t,o,s,i){const a=Rr(e),r=a!==e&&!no(e),d=a[n];if(d!==Im[n]){const v=d.apply(e,i);return r?mo(v):v}let c=t;a!==e&&(r?c=function(v,m){return t.call(this,cs(e,v),m,e)}:t.length>2&&(c=function(v,m){return t.call(this,v,m,e)}));const f=d.call(a,c,o);return r&&s?s(f):f}function Ku(e,n,t,o){const s=Rr(e);let i=t;return s!==e&&(no(e)?t.length>3&&(i=function(a,r,d){return t.call(this,a,r,d,e)}):i=function(a,r,d){return t.call(this,a,cs(e,r),d,e)}),s[n](i,...o)}function bl(e,n,t){const o=Lt(e);vn(o,"iterate",ca);const s=o[n](...t);return(s===-1||s===!1)&&Fc(t[0])?(t[0]=Lt(t[0]),o[n](...t)):s}function Vi(e,n,t=[]){Ko(),Cc();const o=Lt(e)[n].apply(e,t);return Ac(),Zo(),o}const Tm=Ec("__proto__,__v_isRef,__isVue"),dh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Oo));function Rm(e){Oo(e)||(e=String(e));const n=Lt(this);return vn(n,"has",e),n.hasOwnProperty(e)}class fh{constructor(n=!1,t=!1){this._isReadonly=n,this._isShallow=t}get(n,t,o){if(t==="__v_skip")return n.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return o===(s?i?Um:vh:i?gh:ph).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(o)?n:void 0;const a=ht(n);if(!s){let d;if(a&&(d=$m[t]))return d;if(t==="hasOwnProperty")return Rm}const r=Reflect.get(n,t,yn(n)?n:o);if((Oo(t)?dh.has(t):Tm(t))||(s||vn(n,"get",t),i))return r;if(yn(r)){const d=a&&kc(t)?r:r.value;return s&&jt(d)?ec(d):d}return jt(r)?s?ec(r):Fr(r):r}}class hh extends fh{constructor(n=!1){super(!1,n)}set(n,t,o,s){let i=n[t];const a=ht(n)&&kc(t);if(!this._isShallow){const c=qo(i);if(!no(o)&&!qo(o)&&(i=Lt(i),o=Lt(o)),!a&&yn(i)&&!yn(o))return c||(i.value=o),!0}const r=a?Number(t)<n.length:Ot(n,t),d=Reflect.set(n,t,o,yn(n)?n:s);return n===Lt(s)&&(r?ms(o,i)&&Wo(n,"set",t,o):Wo(n,"add",t,o)),d}deleteProperty(n,t){const o=Ot(n,t);n[t];const s=Reflect.deleteProperty(n,t);return s&&o&&Wo(n,"delete",t,void 0),s}has(n,t){const o=Reflect.has(n,t);return(!Oo(t)||!dh.has(t))&&vn(n,"has",t),o}ownKeys(n){return vn(n,"iterate",ht(n)?"length":Us),Reflect.ownKeys(n)}}class Fm extends fh{constructor(n=!1){super(!0,n)}set(n,t){return!0}deleteProperty(n,t){return!0}}const Lm=new hh,Om=new Fm,Mm=new hh(!0);const Ql=e=>e,Ga=e=>Reflect.getPrototypeOf(e);function Pm(e,n,t){return function(...o){const s=this.__v_raw,i=Lt(s),a=hi(i),r=e==="entries"||e===Symbol.iterator&&a,d=e==="keys"&&a,c=s[e](...o),f=t?Ql:n?bi:mo;return!n&&vn(i,"iterate",d?Jl:Us),{next(){const{value:v,done:m}=c.next();return m?{value:v,done:m}:{value:r?[f(v[0]),f(v[1])]:f(v),done:m}},[Symbol.iterator](){return this}}}}function Ka(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function Nm(e,n){const t={get(s){const i=this.__v_raw,a=Lt(i),r=Lt(s);e||(ms(s,r)&&vn(a,"get",s),vn(a,"get",r));const{has:d}=Ga(a),c=n?Ql:e?bi:mo;if(d.call(a,s))return c(i.get(s));if(d.call(a,r))return c(i.get(r));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&vn(Lt(s),"iterate",Us),s.size},has(s){const i=this.__v_raw,a=Lt(i),r=Lt(s);return e||(ms(s,r)&&vn(a,"has",s),vn(a,"has",r)),s===r?i.has(s):i.has(s)||i.has(r)},forEach(s,i){const a=this,r=a.__v_raw,d=Lt(r),c=n?Ql:e?bi:mo;return!e&&vn(d,"iterate",Us),r.forEach((f,v)=>s.call(i,c(f),c(v),a))}};return bn(t,e?{add:Ka("add"),set:Ka("set"),delete:Ka("delete"),clear:Ka("clear")}:{add(s){!n&&!no(s)&&!qo(s)&&(s=Lt(s));const i=Lt(this);return Ga(i).has.call(i,s)||(i.add(s),Wo(i,"add",s,s)),this},set(s,i){!n&&!no(i)&&!qo(i)&&(i=Lt(i));const a=Lt(this),{has:r,get:d}=Ga(a);let c=r.call(a,s);c||(s=Lt(s),c=r.call(a,s));const f=d.call(a,s);return a.set(s,i),c?ms(i,f)&&Wo(a,"set",s,i):Wo(a,"add",s,i),this},delete(s){const i=Lt(this),{has:a,get:r}=Ga(i);let d=a.call(i,s);d||(s=Lt(s),d=a.call(i,s)),r&&r.call(i,s);const c=i.delete(s);return d&&Wo(i,"delete",s,void 0),c},clear(){const s=Lt(this),i=s.size!==0,a=s.clear();return i&&Wo(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Pm(s,e,n)}),t}function Tc(e,n){const t=Nm(e,n);return(o,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?o:Reflect.get(Ot(t,s)&&s in o?t:o,s,i)}const Dm={get:Tc(!1,!1)},jm={get:Tc(!1,!0)},Bm={get:Tc(!0,!1)};const ph=new WeakMap,gh=new WeakMap,vh=new WeakMap,Um=new WeakMap;function Vm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hm(e){return e.__v_skip||!Object.isExtensible(e)?0:Vm(hm(e))}function Fr(e){return qo(e)?e:Rc(e,!1,Lm,Dm,ph)}function mh(e){return Rc(e,!1,Mm,jm,gh)}function ec(e){return Rc(e,!0,Om,Bm,vh)}function Rc(e,n,t,o,s){if(!jt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const i=Hm(e);if(i===0)return e;const a=s.get(e);if(a)return a;const r=new Proxy(e,i===2?o:t);return s.set(e,r),r}function Vs(e){return qo(e)?Vs(e.__v_raw):!!(e&&e.__v_isReactive)}function qo(e){return!!(e&&e.__v_isReadonly)}function no(e){return!!(e&&e.__v_isShallow)}function Fc(e){return e?!!e.__v_raw:!1}function Lt(e){const n=e&&e.__v_raw;return n?Lt(n):e}function zm(e){return!Ot(e,"__v_skip")&&Object.isExtensible(e)&&Qf(e,"__v_skip",!0),e}const mo=e=>jt(e)?Fr(e):e,bi=e=>jt(e)?ec(e):e;function yn(e){return e?e.__v_isRef===!0:!1}function Y(e){return yh(e,!1)}function Wm(e){return yh(e,!0)}function yh(e,n){return yn(e)?e:new Gm(e,n)}class Gm{constructor(n,t){this.dep=new Ic,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?n:Lt(n),this._value=t?n:mo(n),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(n){const t=this._rawValue,o=this.__v_isShallow||no(n)||qo(n);n=o?n:Lt(n),ms(n,t)&&(this._rawValue=n,this._value=o?n:mo(n),this.dep.trigger())}}function ys(e){return yn(e)?e.value:e}const Km={get:(e,n,t)=>n==="__v_raw"?e:ys(Reflect.get(e,n,t)),set:(e,n,t,o)=>{const s=e[n];return yn(s)&&!yn(t)?(s.value=t,!0):Reflect.set(e,n,t,o)}};function bh(e){return Vs(e)?e:new Proxy(e,Km)}class Zm{constructor(n,t,o){this.fn=n,this.setter=t,this._value=void 0,this.dep=new Ic(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=la-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Ht!==this)return ih(this,!0),!0}get value(){const n=this.dep.track();return lh(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function qm(e,n,t=!1){let o,s;return vt(e)?o=e:(o=e.get,s=e.set),new Zm(o,s,t)}const Za={},cr=new WeakMap;let Os;function Ym(e,n=!1,t=Os){if(t){let o=cr.get(t);o||cr.set(t,o=[]),o.push(e)}}function Xm(e,n,t=Dt){const{immediate:o,deep:s,once:i,scheduler:a,augmentJob:r,call:d}=t,c=M=>s?M:no(M)||s===!1||s===0?Go(M,1):Go(M);let f,v,m,g,I=!1,U=!1;if(yn(e)?(v=()=>e.value,I=no(e)):Vs(e)?(v=()=>c(e),I=!0):ht(e)?(U=!0,I=e.some(M=>Vs(M)||no(M)),v=()=>e.map(M=>{if(yn(M))return M.value;if(Vs(M))return c(M);if(vt(M))return d?d(M,2):M()})):vt(e)?n?v=d?()=>d(e,2):e:v=()=>{if(m){Ko();try{m()}finally{Zo()}}const M=Os;Os=f;try{return d?d(e,3,[g]):e(g)}finally{Os=M}}:v=Io,n&&s){const M=v,te=s===!0?1/0:s;v=()=>Go(M(),te)}const x=km(),R=()=>{f.stop(),x&&x.active&&xc(x.effects,f)};if(i&&n){const M=n;n=(...te)=>{M(...te),R()}}let B=U?new Array(e.length).fill(Za):Za;const H=M=>{if(!(!(f.flags&1)||!f.dirty&&!M))if(n){const te=f.run();if(s||I||(U?te.some((we,de)=>ms(we,B[de])):ms(te,B))){m&&m();const we=Os;Os=f;try{const de=[te,B===Za?void 0:U&&B[0]===Za?[]:B,g];B=te,d?d(n,3,de):n(...de)}finally{Os=we}}}else f.run()};return r&&r(H),f=new oh(v),f.scheduler=a?()=>a(H,!1):H,g=M=>Ym(M,!1,f),m=f.onStop=()=>{const M=cr.get(f);if(M){if(d)d(M,4);else for(const te of M)te();cr.delete(f)}},n?o?H(!0):B=f.run():a?a(H.bind(null,!0),!0):f.run(),R.pause=f.pause.bind(f),R.resume=f.resume.bind(f),R.stop=R,R}function Go(e,n=1/0,t){if(n<=0||!jt(e)||e.__v_skip||(t=t||new Map,(t.get(e)||0)>=n))return e;if(t.set(e,n),n--,yn(e))Go(e.value,n,t);else if(ht(e))for(let o=0;o<e.length;o++)Go(e[o],n,t);else if(kr(e)||hi(e))e.forEach(o=>{Go(o,n,t)});else if(Jf(e)){for(const o in e)Go(e[o],n,t);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Go(e[o],n,t)}return e}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ca(e,n,t,o){try{return o?e(...o):e()}catch(s){Lr(s,n,t)}}function Mo(e,n,t,o){if(vt(e)){const s=Ca(e,n,t,o);return s&&Yf(s)&&s.catch(i=>{Lr(i,n,t)}),s}if(ht(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Mo(e[i],n,t,o));return s}}function Lr(e,n,t,o=!0){const s=n?n.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=n&&n.appContext.config||Dt;if(n){let r=n.parent;const d=n.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;r;){const f=r.ec;if(f){for(let v=0;v<f.length;v++)if(f[v](e,d,c)===!1)return}r=r.parent}if(i){Ko(),Ca(i,null,10,[e,d,c]),Zo();return}}Jm(e,t,s,o,a)}function Jm(e,n,t,o=!0,s=!1){if(s)throw e;console.error(e)}const kn=[];let Co=-1;const pi=[];let us=null,li=0;const _h=Promise.resolve();let ur=null;function oo(e){const n=ur||_h;return e?n.then(this?e.bind(this):e):n}function Qm(e){let n=Co+1,t=kn.length;for(;n<t;){const o=n+t>>>1,s=kn[o],i=ua(s);i<e||i===e&&s.flags&2?n=o+1:t=o}return n}function Lc(e){if(!(e.flags&1)){const n=ua(e),t=kn[kn.length-1];!t||!(e.flags&2)&&n>=ua(t)?kn.push(e):kn.splice(Qm(n),0,e),e.flags|=1,wh()}}function wh(){ur||(ur=_h.then(Sh))}function ey(e){ht(e)?pi.push(...e):us&&e.id===-1?us.splice(li+1,0,e):e.flags&1||(pi.push(e),e.flags|=1),wh()}function Zu(e,n,t=Co+1){for(;t<kn.length;t++){const o=kn[t];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;kn.splice(t,1),t--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Eh(e){if(pi.length){const n=[...new Set(pi)].sort((t,o)=>ua(t)-ua(o));if(pi.length=0,us){us.push(...n);return}for(us=n,li=0;li<us.length;li++){const t=us[li];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}us=null,li=0}}const ua=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Sh(e){try{for(Co=0;Co<kn.length;Co++){const n=kn[Co];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Ca(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Co<kn.length;Co++){const n=kn[Co];n&&(n.flags&=-2)}Co=-1,kn.length=0,Eh(),ur=null,(kn.length||pi.length)&&Sh()}}let Zn=null,xh=null;function dr(e){const n=Zn;return Zn=e,xh=e&&e.type.__scopeId||null,n}function kh(e,n=Zn,t){if(!n||e._n)return e;const o=(...s)=>{o._d&&pr(-1);const i=dr(n);let a;try{a=e(...s)}finally{dr(i),o._d&&pr(1)}return a};return o._n=!0,o._c=!0,o._d=!0,o}function To(e,n){if(Zn===null)return e;const t=Nr(Zn),o=e.dirs||(e.dirs=[]);for(let s=0;s<n.length;s++){let[i,a,r,d=Dt]=n[s];i&&(vt(i)&&(i={mounted:i,updated:i}),i.deep&&Go(a),o.push({dir:i,instance:t,value:a,oldValue:void 0,arg:r,modifiers:d}))}return e}function Fs(e,n,t,o){const s=e.dirs,i=n&&n.dirs;for(let a=0;a<s.length;a++){const r=s[a];i&&(r.oldValue=i[a].value);let d=r.dir[o];d&&(Ko(),Mo(d,t,8,[e.el,r,e,n]),Zo())}}function Qi(e,n){if(mn){let t=mn.provides;const o=mn.parent&&mn.parent.provides;o===t&&(t=mn.provides=Object.create(o)),t[e]=n}}function vo(e,n,t=!1){const o=Qy();if(o||gi){let s=gi?gi._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return t&&vt(n)?n.call(o&&o.proxy):n}}const ty=Symbol.for("v-scx"),ny=()=>vo(ty);function ot(e,n,t){return Ch(e,n,t)}function Ch(e,n,t=Dt){const{immediate:o,deep:s,flush:i,once:a}=t,r=bn({},t),d=n&&o||!n&&i!=="post";let c;if(fa){if(i==="sync"){const g=ny();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!d){const g=()=>{};return g.stop=Io,g.resume=Io,g.pause=Io,g}}const f=mn;r.call=(g,I,U)=>Mo(g,f,I,U);let v=!1;i==="post"?r.scheduler=g=>{Gn(g,f&&f.suspense)}:i!=="sync"&&(v=!0,r.scheduler=(g,I)=>{I?g():Lc(g)}),r.augmentJob=g=>{n&&(g.flags|=4),v&&(g.flags|=2,f&&(g.id=f.uid,g.i=f))};const m=Xm(e,n,r);return fa&&(c?c.push(m):d&&m()),m}function oy(e,n,t){const o=this.proxy,s=nn(e)?e.includes(".")?Ah(o,e):()=>o[e]:e.bind(o,o);let i;vt(n)?i=n:(i=n.handler,t=n);const a=Aa(this),r=Ch(s,i.bind(o),t);return a(),r}function Ah(e,n){const t=n.split(".");return()=>{let o=e;for(let s=0;s<t.length&&o;s++)o=o[t[s]];return o}}const sy=Symbol("_vte"),iy=e=>e.__isTeleport,ay=Symbol("_leaveCb");function Oc(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Oc(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function $h(e,n){return vt(e)?bn({name:e.name},n,{setup:e}):e}function Ih(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const fr=new WeakMap;function ea(e,n,t,o,s=!1){if(ht(e)){e.forEach((I,U)=>ea(I,n&&(ht(n)?n[U]:n),t,o,s));return}if(ta(o)&&!s){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&ea(e,n,t,o.component.subTree);return}const i=o.shapeFlag&4?Nr(o.component):o.el,a=s?null:i,{i:r,r:d}=e,c=n&&n.r,f=r.refs===Dt?r.refs={}:r.refs,v=r.setupState,m=Lt(v),g=v===Dt?qf:I=>Ot(m,I);if(c!=null&&c!==d){if(qu(n),nn(c))f[c]=null,g(c)&&(v[c]=null);else if(yn(c)){c.value=null;const I=n;I.k&&(f[I.k]=null)}}if(vt(d))Ca(d,r,12,[a,f]);else{const I=nn(d),U=yn(d);if(I||U){const x=()=>{if(e.f){const R=I?g(d)?v[d]:f[d]:d.value;if(s)ht(R)&&xc(R,i);else if(ht(R))R.includes(i)||R.push(i);else if(I)f[d]=[i],g(d)&&(v[d]=f[d]);else{const B=[i];d.value=B,e.k&&(f[e.k]=B)}}else I?(f[d]=a,g(d)&&(v[d]=a)):U&&(d.value=a,e.k&&(f[e.k]=a))};if(a){const R=()=>{x(),fr.delete(e)};R.id=-1,fr.set(e,R),Gn(R,t)}else qu(e),x()}}}function qu(e){const n=fr.get(e);n&&(n.flags|=8,fr.delete(e))}Ir().requestIdleCallback;Ir().cancelIdleCallback;const ta=e=>!!e.type.__asyncLoader,Th=e=>e.type.__isKeepAlive;function ry(e,n){Rh(e,"a",n)}function ly(e,n){Rh(e,"da",n)}function Rh(e,n,t=mn){const o=e.__wdc||(e.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Or(n,o,t),t){let s=t.parent;for(;s&&s.parent;)Th(s.parent.vnode)&&cy(o,n,t,s),s=s.parent}}function cy(e,n,t,o){const s=Or(n,e,o,!0);Lh(()=>{xc(o[n],s)},t)}function Or(e,n,t=mn,o=!1){if(t){const s=t[e]||(t[e]=[]),i=n.__weh||(n.__weh=(...a)=>{Ko();const r=Aa(t),d=Mo(n,t,e,a);return r(),Zo(),d});return o?s.unshift(i):s.push(i),i}}const Xo=e=>(n,t=mn)=>{(!fa||e==="sp")&&Or(e,(...o)=>n(...o),t)},uy=Xo("bm"),Yo=Xo("m"),Fh=Xo("bu"),dy=Xo("u"),io=Xo("bum"),Lh=Xo("um"),fy=Xo("sp"),hy=Xo("rtg"),py=Xo("rtc");function gy(e,n=mn){Or("ec",e,n)}const vy="components";function my(e,n){return by(vy,e,!0,n)||e}const yy=Symbol.for("v-ndc");function by(e,n,t=!0,o=!1){const s=Zn||mn;if(s){const i=s.type;{const r=sb(i,!1);if(r&&(r===n||r===so(n)||r===Ar(so(n))))return i}const a=Yu(s[e]||i[e],n)||Yu(s.appContext[e],n);return!a&&o?i:a}}function Yu(e,n){return e&&(e[n]||e[so(n)]||e[Ar(so(n))])}function Qe(e,n,t,o){let s;const i=t,a=ht(e);if(a||nn(e)){const r=a&&Vs(e);let d=!1,c=!1;r&&(d=!no(e),c=qo(e),e=Rr(e)),s=new Array(e.length);for(let f=0,v=e.length;f<v;f++)s[f]=n(d?c?bi(mo(e[f])):mo(e[f]):e[f],f,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let r=0;r<e;r++)s[r]=n(r+1,r,void 0,i)}else if(jt(e))if(e[Symbol.iterator])s=Array.from(e,(r,d)=>n(r,d,void 0,i));else{const r=Object.keys(e);s=new Array(r.length);for(let d=0,c=r.length;d<c;d++){const f=r[d];s[d]=n(e[f],f,d,i)}}else s=[];return s}const tc=e=>e?Qh(e)?Nr(e):tc(e.parent):null,na=bn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>tc(e.parent),$root:e=>tc(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Mh(e),$forceUpdate:e=>e.f||(e.f=()=>{Lc(e.update)}),$nextTick:e=>e.n||(e.n=oo.bind(e.proxy)),$watch:e=>oy.bind(e)}),_l=(e,n)=>e!==Dt&&!e.__isScriptSetup&&Ot(e,n),_y={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:t,setupState:o,data:s,props:i,accessCache:a,type:r,appContext:d}=e;if(n[0]!=="$"){const m=a[n];if(m!==void 0)switch(m){case 1:return o[n];case 2:return s[n];case 4:return t[n];case 3:return i[n]}else{if(_l(o,n))return a[n]=1,o[n];if(s!==Dt&&Ot(s,n))return a[n]=2,s[n];if(Ot(i,n))return a[n]=3,i[n];if(t!==Dt&&Ot(t,n))return a[n]=4,t[n];nc&&(a[n]=0)}}const c=na[n];let f,v;if(c)return n==="$attrs"&&vn(e.attrs,"get",""),c(e);if((f=r.__cssModules)&&(f=f[n]))return f;if(t!==Dt&&Ot(t,n))return a[n]=4,t[n];if(v=d.config.globalProperties,Ot(v,n))return v[n]},set({_:e},n,t){const{data:o,setupState:s,ctx:i}=e;return _l(s,n)?(s[n]=t,!0):o!==Dt&&Ot(o,n)?(o[n]=t,!0):Ot(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(i[n]=t,!0)},has({_:{data:e,setupState:n,accessCache:t,ctx:o,appContext:s,props:i,type:a}},r){let d;return!!(t[r]||e!==Dt&&r[0]!=="$"&&Ot(e,r)||_l(n,r)||Ot(i,r)||Ot(o,r)||Ot(na,r)||Ot(s.config.globalProperties,r)||(d=a.__cssModules)&&d[r])},defineProperty(e,n,t){return t.get!=null?e._.accessCache[n]=0:Ot(t,"value")&&this.set(e,n,t.value,null),Reflect.defineProperty(e,n,t)}};function Xu(e){return ht(e)?e.reduce((n,t)=>(n[t]=null,n),{}):e}let nc=!0;function wy(e){const n=Mh(e),t=e.proxy,o=e.ctx;nc=!1,n.beforeCreate&&Ju(n.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:r,provide:d,inject:c,created:f,beforeMount:v,mounted:m,beforeUpdate:g,updated:I,activated:U,deactivated:x,beforeDestroy:R,beforeUnmount:B,destroyed:H,unmounted:M,render:te,renderTracked:we,renderTriggered:de,errorCaptured:me,serverPrefetch:Ae,expose:xe,inheritAttrs:Me,components:Ke,directives:et,filters:je}=n;if(c&&Ey(c,o,null),a)for(const le in a){const Se=a[le];vt(Se)&&(o[le]=Se.bind(t))}if(s){const le=s.call(t,t);jt(le)&&(e.data=Fr(le))}if(nc=!0,i)for(const le in i){const Se=i[le],Xe=vt(Se)?Se.bind(t,t):vt(Se.get)?Se.get.bind(t,t):Io,st=!vt(Se)&&vt(Se.set)?Se.set.bind(t):Io,lt=F({get:Xe,set:st});Object.defineProperty(o,le,{enumerable:!0,configurable:!0,get:()=>lt.value,set:ut=>lt.value=ut})}if(r)for(const le in r)Oh(r[le],o,t,le);if(d){const le=vt(d)?d.call(t):d;Reflect.ownKeys(le).forEach(Se=>{Qi(Se,le[Se])})}f&&Ju(f,e,"c");function Q(le,Se){ht(Se)?Se.forEach(Xe=>le(Xe.bind(t))):Se&&le(Se.bind(t))}if(Q(uy,v),Q(Yo,m),Q(Fh,g),Q(dy,I),Q(ry,U),Q(ly,x),Q(gy,me),Q(py,we),Q(hy,de),Q(io,B),Q(Lh,M),Q(fy,Ae),ht(xe))if(xe.length){const le=e.exposed||(e.exposed={});xe.forEach(Se=>{Object.defineProperty(le,Se,{get:()=>t[Se],set:Xe=>t[Se]=Xe,enumerable:!0})})}else e.exposed||(e.exposed={});te&&e.render===Io&&(e.render=te),Me!=null&&(e.inheritAttrs=Me),Ke&&(e.components=Ke),et&&(e.directives=et),Ae&&Ih(e)}function Ey(e,n,t=Io){ht(e)&&(e=oc(e));for(const o in e){const s=e[o];let i;jt(s)?"default"in s?i=vo(s.from||o,s.default,!0):i=vo(s.from||o):i=vo(s),yn(i)?Object.defineProperty(n,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):n[o]=i}}function Ju(e,n,t){Mo(ht(e)?e.map(o=>o.bind(n.proxy)):e.bind(n.proxy),n,t)}function Oh(e,n,t,o){let s=o.includes(".")?Ah(t,o):()=>t[o];if(nn(e)){const i=n[e];vt(i)&&ot(s,i)}else if(vt(e))ot(s,e.bind(t));else if(jt(e))if(ht(e))e.forEach(i=>Oh(i,n,t,o));else{const i=vt(e.handler)?e.handler.bind(t):n[e.handler];vt(i)&&ot(s,i,e)}}function Mh(e){const n=e.type,{mixins:t,extends:o}=n,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,r=i.get(n);let d;return r?d=r:!s.length&&!t&&!o?d=n:(d={},s.length&&s.forEach(c=>hr(d,c,a,!0)),hr(d,n,a)),jt(n)&&i.set(n,d),d}function hr(e,n,t,o=!1){const{mixins:s,extends:i}=n;i&&hr(e,i,t,!0),s&&s.forEach(a=>hr(e,a,t,!0));for(const a in n)if(!(o&&a==="expose")){const r=Sy[a]||t&&t[a];e[a]=r?r(e[a],n[a]):n[a]}return e}const Sy={data:Qu,props:ed,emits:ed,methods:Ki,computed:Ki,beforeCreate:Sn,created:Sn,beforeMount:Sn,mounted:Sn,beforeUpdate:Sn,updated:Sn,beforeDestroy:Sn,beforeUnmount:Sn,destroyed:Sn,unmounted:Sn,activated:Sn,deactivated:Sn,errorCaptured:Sn,serverPrefetch:Sn,components:Ki,directives:Ki,watch:ky,provide:Qu,inject:xy};function Qu(e,n){return n?e?function(){return bn(vt(e)?e.call(this,this):e,vt(n)?n.call(this,this):n)}:n:e}function xy(e,n){return Ki(oc(e),oc(n))}function oc(e){if(ht(e)){const n={};for(let t=0;t<e.length;t++)n[e[t]]=e[t];return n}return e}function Sn(e,n){return e?[...new Set([].concat(e,n))]:n}function Ki(e,n){return e?bn(Object.create(null),e,n):n}function ed(e,n){return e?ht(e)&&ht(n)?[...new Set([...e,...n])]:bn(Object.create(null),Xu(e),Xu(n??{})):n}function ky(e,n){if(!e)return n;if(!n)return e;const t=bn(Object.create(null),e);for(const o in n)t[o]=Sn(e[o],n[o]);return t}function Ph(){return{app:null,config:{isNativeTag:qf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Cy=0;function Ay(e,n){return function(o,s=null){vt(o)||(o=bn({},o)),s!=null&&!jt(s)&&(s=null);const i=Ph(),a=new WeakSet,r=[];let d=!1;const c=i.app={_uid:Cy++,_component:o,_props:s,_container:null,_context:i,_instance:null,version:ab,get config(){return i.config},set config(f){},use(f,...v){return a.has(f)||(f&&vt(f.install)?(a.add(f),f.install(c,...v)):vt(f)&&(a.add(f),f(c,...v))),c},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),c},component(f,v){return v?(i.components[f]=v,c):i.components[f]},directive(f,v){return v?(i.directives[f]=v,c):i.directives[f]},mount(f,v,m){if(!d){const g=c._ceVNode||mt(o,s);return g.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),e(g,f,m),d=!0,c._container=f,f.__vue_app__=c,Nr(g.component)}},onUnmount(f){r.push(f)},unmount(){d&&(Mo(r,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(f,v){return i.provides[f]=v,c},runWithContext(f){const v=gi;gi=c;try{return f()}finally{gi=v}}};return c}}let gi=null;const $y=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${so(n)}Modifiers`]||e[`${xs(n)}Modifiers`];function Iy(e,n,...t){if(e.isUnmounted)return;const o=e.vnode.props||Dt;let s=t;const i=n.startsWith("update:"),a=i&&$y(o,n.slice(7));a&&(a.trim&&(s=t.map(f=>nn(f)?f.trim():f)),a.number&&(s=t.map($r)));let r,d=o[r=gl(n)]||o[r=gl(so(n))];!d&&i&&(d=o[r=gl(xs(n))]),d&&Mo(d,e,6,s);const c=o[r+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,Mo(c,e,6,s)}}const Ty=new WeakMap;function Nh(e,n,t=!1){const o=t?Ty:n.emitsCache,s=o.get(e);if(s!==void 0)return s;const i=e.emits;let a={},r=!1;if(!vt(e)){const d=c=>{const f=Nh(c,n,!0);f&&(r=!0,bn(a,f))};!t&&n.mixins.length&&n.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!i&&!r?(jt(e)&&o.set(e,null),null):(ht(i)?i.forEach(d=>a[d]=null):bn(a,i),jt(e)&&o.set(e,a),a)}function Mr(e,n){return!e||!xr(n)?!1:(n=n.slice(2).replace(/Once$/,""),Ot(e,n[0].toLowerCase()+n.slice(1))||Ot(e,xs(n))||Ot(e,n))}function td(e){const{type:n,vnode:t,proxy:o,withProxy:s,propsOptions:[i],slots:a,attrs:r,emit:d,render:c,renderCache:f,props:v,data:m,setupState:g,ctx:I,inheritAttrs:U}=e,x=dr(e);let R,B;try{if(t.shapeFlag&4){const M=s||o,te=M;R=Ao(c.call(te,M,f,v,g,m,I)),B=r}else{const M=n;R=Ao(M.length>1?M(v,{attrs:r,slots:a,emit:d}):M(v,null)),B=n.props?r:Ry(r)}}catch(M){oa.length=0,Lr(M,e,1),R=mt(Es)}let H=R;if(B&&U!==!1){const M=Object.keys(B),{shapeFlag:te}=H;M.length&&te&7&&(i&&M.some(Sc)&&(B=Fy(B,i)),H=_i(H,B,!1,!0))}return t.dirs&&(H=_i(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(t.dirs):t.dirs),t.transition&&Oc(H,t.transition),R=H,dr(x),R}const Ry=e=>{let n;for(const t in e)(t==="class"||t==="style"||xr(t))&&((n||(n={}))[t]=e[t]);return n},Fy=(e,n)=>{const t={};for(const o in e)(!Sc(o)||!(o.slice(9)in n))&&(t[o]=e[o]);return t};function Ly(e,n,t){const{props:o,children:s,component:i}=e,{props:a,children:r,patchFlag:d}=n,c=i.emitsOptions;if(n.dirs||n.transition)return!0;if(t&&d>=0){if(d&1024)return!0;if(d&16)return o?nd(o,a,c):!!a;if(d&8){const f=n.dynamicProps;for(let v=0;v<f.length;v++){const m=f[v];if(a[m]!==o[m]&&!Mr(c,m))return!0}}}else return(s||r)&&(!r||!r.$stable)?!0:o===a?!1:o?a?nd(o,a,c):!0:!!a;return!1}function nd(e,n,t){const o=Object.keys(n);if(o.length!==Object.keys(e).length)return!0;for(let s=0;s<o.length;s++){const i=o[s];if(n[i]!==e[i]&&!Mr(t,i))return!0}return!1}function Oy({vnode:e,parent:n},t){for(;n;){const o=n.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=n.vnode).el=t,n=n.parent;else break}}const Dh={},jh=()=>Object.create(Dh),Bh=e=>Object.getPrototypeOf(e)===Dh;function My(e,n,t,o=!1){const s={},i=jh();e.propsDefaults=Object.create(null),Uh(e,n,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);t?e.props=o?s:mh(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Py(e,n,t,o){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,r=Lt(s),[d]=e.propsOptions;let c=!1;if((o||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let v=0;v<f.length;v++){let m=f[v];if(Mr(e.emitsOptions,m))continue;const g=n[m];if(d)if(Ot(i,m))g!==i[m]&&(i[m]=g,c=!0);else{const I=so(m);s[I]=sc(d,r,I,g,e,!1)}else g!==i[m]&&(i[m]=g,c=!0)}}}else{Uh(e,n,s,i)&&(c=!0);let f;for(const v in r)(!n||!Ot(n,v)&&((f=xs(v))===v||!Ot(n,f)))&&(d?t&&(t[v]!==void 0||t[f]!==void 0)&&(s[v]=sc(d,r,v,void 0,e,!0)):delete s[v]);if(i!==r)for(const v in i)(!n||!Ot(n,v))&&(delete i[v],c=!0)}c&&Wo(e.attrs,"set","")}function Uh(e,n,t,o){const[s,i]=e.propsOptions;let a=!1,r;if(n)for(let d in n){if(Yi(d))continue;const c=n[d];let f;s&&Ot(s,f=so(d))?!i||!i.includes(f)?t[f]=c:(r||(r={}))[f]=c:Mr(e.emitsOptions,d)||(!(d in o)||c!==o[d])&&(o[d]=c,a=!0)}if(i){const d=Lt(t),c=r||Dt;for(let f=0;f<i.length;f++){const v=i[f];t[v]=sc(s,d,v,c[v],e,!Ot(c,v))}}return a}function sc(e,n,t,o,s,i){const a=e[t];if(a!=null){const r=Ot(a,"default");if(r&&o===void 0){const d=a.default;if(a.type!==Function&&!a.skipFactory&&vt(d)){const{propsDefaults:c}=s;if(t in c)o=c[t];else{const f=Aa(s);o=c[t]=d.call(null,n),f()}}else o=d;s.ce&&s.ce._setProp(t,o)}a[0]&&(i&&!r?o=!1:a[1]&&(o===""||o===xs(t))&&(o=!0))}return o}const Ny=new WeakMap;function Vh(e,n,t=!1){const o=t?Ny:n.propsCache,s=o.get(e);if(s)return s;const i=e.props,a={},r=[];let d=!1;if(!vt(e)){const f=v=>{d=!0;const[m,g]=Vh(v,n,!0);bn(a,m),g&&r.push(...g)};!t&&n.mixins.length&&n.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!i&&!d)return jt(e)&&o.set(e,fi),fi;if(ht(i))for(let f=0;f<i.length;f++){const v=so(i[f]);od(v)&&(a[v]=Dt)}else if(i)for(const f in i){const v=so(f);if(od(v)){const m=i[f],g=a[v]=ht(m)||vt(m)?{type:m}:bn({},m),I=g.type;let U=!1,x=!0;if(ht(I))for(let R=0;R<I.length;++R){const B=I[R],H=vt(B)&&B.name;if(H==="Boolean"){U=!0;break}else H==="String"&&(x=!1)}else U=vt(I)&&I.name==="Boolean";g[0]=U,g[1]=x,(U||Ot(g,"default"))&&r.push(v)}}const c=[a,r];return jt(e)&&o.set(e,c),c}function od(e){return e[0]!=="$"&&!Yi(e)}const Mc=e=>e==="_"||e==="_ctx"||e==="$stable",Pc=e=>ht(e)?e.map(Ao):[Ao(e)],Dy=(e,n,t)=>{if(n._n)return n;const o=kh((...s)=>Pc(n(...s)),t);return o._c=!1,o},Hh=(e,n,t)=>{const o=e._ctx;for(const s in e){if(Mc(s))continue;const i=e[s];if(vt(i))n[s]=Dy(s,i,o);else if(i!=null){const a=Pc(i);n[s]=()=>a}}},zh=(e,n)=>{const t=Pc(n);e.slots.default=()=>t},Wh=(e,n,t)=>{for(const o in n)(t||!Mc(o))&&(e[o]=n[o])},jy=(e,n,t)=>{const o=e.slots=jh();if(e.vnode.shapeFlag&32){const s=n._;s?(Wh(o,n,t),t&&Qf(o,"_",s,!0)):Hh(n,o)}else n&&zh(e,n)},By=(e,n,t)=>{const{vnode:o,slots:s}=e;let i=!0,a=Dt;if(o.shapeFlag&32){const r=n._;r?t&&r===1?i=!1:Wh(s,n,t):(i=!n.$stable,Hh(n,s)),a=n}else n&&(zh(e,n),a={default:1});if(i)for(const r in s)!Mc(r)&&a[r]==null&&delete s[r]},Gn=Wy;function Uy(e){return Vy(e)}function Vy(e,n){const t=Ir();t.__VUE__=!0;const{insert:o,remove:s,patchProp:i,createElement:a,createText:r,createComment:d,setText:c,setElementText:f,parentNode:v,nextSibling:m,setScopeId:g=Io,insertStaticContent:I}=e,U=($,O,W,y=null,k=null,_=null,T=void 0,Z=null,oe=!!O.dynamicChildren)=>{if($===O)return;$&&!Hi($,O)&&(y=ae($),ut($,k,_,!0),$=null),O.patchFlag===-2&&(oe=!1,O.dynamicChildren=null);const{type:X,ref:ge,shapeFlag:ce}=O;switch(X){case Pr:x($,O,W,y);break;case Es:R($,O,W,y);break;case sr:$==null&&B(O,W,y,T);break;case Oe:Ke($,O,W,y,k,_,T,Z,oe);break;default:ce&1?te($,O,W,y,k,_,T,Z,oe):ce&6?et($,O,W,y,k,_,T,Z,oe):(ce&64||ce&128)&&X.process($,O,W,y,k,_,T,Z,oe,He)}ge!=null&&k?ea(ge,$&&$.ref,_,O||$,!O):ge==null&&$&&$.ref!=null&&ea($.ref,null,_,$,!0)},x=($,O,W,y)=>{if($==null)o(O.el=r(O.children),W,y);else{const k=O.el=$.el;O.children!==$.children&&c(k,O.children)}},R=($,O,W,y)=>{$==null?o(O.el=d(O.children||""),W,y):O.el=$.el},B=($,O,W,y)=>{[$.el,$.anchor]=I($.children,O,W,y,$.el,$.anchor)},H=({el:$,anchor:O},W,y)=>{let k;for(;$&&$!==O;)k=m($),o($,W,y),$=k;o(O,W,y)},M=({el:$,anchor:O})=>{let W;for(;$&&$!==O;)W=m($),s($),$=W;s(O)},te=($,O,W,y,k,_,T,Z,oe)=>{if(O.type==="svg"?T="svg":O.type==="math"&&(T="mathml"),$==null)we(O,W,y,k,_,T,Z,oe);else{const X=$.el&&$.el._isVueCE?$.el:null;try{X&&X._beginPatch(),Ae($,O,k,_,T,Z,oe)}finally{X&&X._endPatch()}}},we=($,O,W,y,k,_,T,Z)=>{let oe,X;const{props:ge,shapeFlag:ce,transition:ve,dirs:Pe}=$;if(oe=$.el=a($.type,_,ge&&ge.is,ge),ce&8?f(oe,$.children):ce&16&&me($.children,oe,null,y,k,wl($,_),T,Z),Pe&&Fs($,null,y,"created"),de(oe,$,$.scopeId,T,y),ge){for(const fe in ge)fe!=="value"&&!Yi(fe)&&i(oe,fe,null,ge[fe],_,y);"value"in ge&&i(oe,"value",null,ge.value,_),(X=ge.onVnodeBeforeMount)&&xo(X,y,$)}Pe&&Fs($,null,y,"beforeMount");const ne=Hy(k,ve);ne&&ve.beforeEnter(oe),o(oe,O,W),((X=ge&&ge.onVnodeMounted)||ne||Pe)&&Gn(()=>{X&&xo(X,y,$),ne&&ve.enter(oe),Pe&&Fs($,null,y,"mounted")},k)},de=($,O,W,y,k)=>{if(W&&g($,W),y)for(let _=0;_<y.length;_++)g($,y[_]);if(k){let _=k.subTree;if(O===_||qh(_.type)&&(_.ssContent===O||_.ssFallback===O)){const T=k.vnode;de($,T,T.scopeId,T.slotScopeIds,k.parent)}}},me=($,O,W,y,k,_,T,Z,oe=0)=>{for(let X=oe;X<$.length;X++){const ge=$[X]=Z?ds($[X]):Ao($[X]);U(null,ge,O,W,y,k,_,T,Z)}},Ae=($,O,W,y,k,_,T)=>{const Z=O.el=$.el;let{patchFlag:oe,dynamicChildren:X,dirs:ge}=O;oe|=$.patchFlag&16;const ce=$.props||Dt,ve=O.props||Dt;let Pe;if(W&&Ls(W,!1),(Pe=ve.onVnodeBeforeUpdate)&&xo(Pe,W,O,$),ge&&Fs(O,$,W,"beforeUpdate"),W&&Ls(W,!0),(ce.innerHTML&&ve.innerHTML==null||ce.textContent&&ve.textContent==null)&&f(Z,""),X?xe($.dynamicChildren,X,Z,W,y,wl(O,k),_):T||Se($,O,Z,null,W,y,wl(O,k),_,!1),oe>0){if(oe&16)Me(Z,ce,ve,W,k);else if(oe&2&&ce.class!==ve.class&&i(Z,"class",null,ve.class,k),oe&4&&i(Z,"style",ce.style,ve.style,k),oe&8){const ne=O.dynamicProps;for(let fe=0;fe<ne.length;fe++){const _e=ne[fe],Be=ce[_e],Je=ve[_e];(Je!==Be||_e==="value")&&i(Z,_e,Be,Je,k,W)}}oe&1&&$.children!==O.children&&f(Z,O.children)}else!T&&X==null&&Me(Z,ce,ve,W,k);((Pe=ve.onVnodeUpdated)||ge)&&Gn(()=>{Pe&&xo(Pe,W,O,$),ge&&Fs(O,$,W,"updated")},y)},xe=($,O,W,y,k,_,T)=>{for(let Z=0;Z<O.length;Z++){const oe=$[Z],X=O[Z],ge=oe.el&&(oe.type===Oe||!Hi(oe,X)||oe.shapeFlag&198)?v(oe.el):W;U(oe,X,ge,null,y,k,_,T,!0)}},Me=($,O,W,y,k)=>{if(O!==W){if(O!==Dt)for(const _ in O)!Yi(_)&&!(_ in W)&&i($,_,O[_],null,k,y);for(const _ in W){if(Yi(_))continue;const T=W[_],Z=O[_];T!==Z&&_!=="value"&&i($,_,Z,T,k,y)}"value"in W&&i($,"value",O.value,W.value,k)}},Ke=($,O,W,y,k,_,T,Z,oe)=>{const X=O.el=$?$.el:r(""),ge=O.anchor=$?$.anchor:r("");let{patchFlag:ce,dynamicChildren:ve,slotScopeIds:Pe}=O;Pe&&(Z=Z?Z.concat(Pe):Pe),$==null?(o(X,W,y),o(ge,W,y),me(O.children||[],W,ge,k,_,T,Z,oe)):ce>0&&ce&64&&ve&&$.dynamicChildren&&$.dynamicChildren.length===ve.length?(xe($.dynamicChildren,ve,W,k,_,T,Z),(O.key!=null||k&&O===k.subTree)&&Gh($,O,!0)):Se($,O,W,ge,k,_,T,Z,oe)},et=($,O,W,y,k,_,T,Z,oe)=>{O.slotScopeIds=Z,$==null?O.shapeFlag&512?k.ctx.activate(O,W,y,T,oe):je(O,W,y,k,_,T,oe):De($,O,oe)},je=($,O,W,y,k,_,T)=>{const Z=$.component=Jy($,y,k);if(Th($)&&(Z.ctx.renderer=He),eb(Z,!1,T),Z.asyncDep){if(k&&k.registerDep(Z,Q,T),!$.el){const oe=Z.subTree=mt(Es);R(null,oe,O,W),$.placeholder=oe.el}}else Q(Z,$,O,W,k,_,T)},De=($,O,W)=>{const y=O.component=$.component;if(Ly($,O,W))if(y.asyncDep&&!y.asyncResolved){le(y,O,W);return}else y.next=O,y.update();else O.el=$.el,y.vnode=O},Q=($,O,W,y,k,_,T)=>{const Z=()=>{if($.isMounted){let{next:ce,bu:ve,u:Pe,parent:ne,vnode:fe}=$;{const it=Kh($);if(it){ce&&(ce.el=fe.el,le($,ce,T)),it.asyncDep.then(()=>{$.isUnmounted||Z()});return}}let _e=ce,Be;Ls($,!1),ce?(ce.el=fe.el,le($,ce,T)):ce=fe,ve&&or(ve),(Be=ce.props&&ce.props.onVnodeBeforeUpdate)&&xo(Be,ne,ce,fe),Ls($,!0);const Je=td($),Ge=$.subTree;$.subTree=Je,U(Ge,Je,v(Ge.el),ae(Ge),$,k,_),ce.el=Je.el,_e===null&&Oy($,Je.el),Pe&&Gn(Pe,k),(Be=ce.props&&ce.props.onVnodeUpdated)&&Gn(()=>xo(Be,ne,ce,fe),k)}else{let ce;const{el:ve,props:Pe}=O,{bm:ne,m:fe,parent:_e,root:Be,type:Je}=$,Ge=ta(O);Ls($,!1),ne&&or(ne),!Ge&&(ce=Pe&&Pe.onVnodeBeforeMount)&&xo(ce,_e,O),Ls($,!0);{Be.ce&&Be.ce._def.shadowRoot!==!1&&Be.ce._injectChildStyle(Je);const it=$.subTree=td($);U(null,it,W,y,$,k,_),O.el=it.el}if(fe&&Gn(fe,k),!Ge&&(ce=Pe&&Pe.onVnodeMounted)){const it=O;Gn(()=>xo(ce,_e,it),k)}(O.shapeFlag&256||_e&&ta(_e.vnode)&&_e.vnode.shapeFlag&256)&&$.a&&Gn($.a,k),$.isMounted=!0,O=W=y=null}};$.scope.on();const oe=$.effect=new oh(Z);$.scope.off();const X=$.update=oe.run.bind(oe),ge=$.job=oe.runIfDirty.bind(oe);ge.i=$,ge.id=$.uid,oe.scheduler=()=>Lc(ge),Ls($,!0),X()},le=($,O,W)=>{O.component=$;const y=$.vnode.props;$.vnode=O,$.next=null,Py($,O.props,y,W),By($,O.children,W),Ko(),Zu($),Zo()},Se=($,O,W,y,k,_,T,Z,oe=!1)=>{const X=$&&$.children,ge=$?$.shapeFlag:0,ce=O.children,{patchFlag:ve,shapeFlag:Pe}=O;if(ve>0){if(ve&128){st(X,ce,W,y,k,_,T,Z,oe);return}else if(ve&256){Xe(X,ce,W,y,k,_,T,Z,oe);return}}Pe&8?(ge&16&&kt(X,k,_),ce!==X&&f(W,ce)):ge&16?Pe&16?st(X,ce,W,y,k,_,T,Z,oe):kt(X,k,_,!0):(ge&8&&f(W,""),Pe&16&&me(ce,W,y,k,_,T,Z,oe))},Xe=($,O,W,y,k,_,T,Z,oe)=>{$=$||fi,O=O||fi;const X=$.length,ge=O.length,ce=Math.min(X,ge);let ve;for(ve=0;ve<ce;ve++){const Pe=O[ve]=oe?ds(O[ve]):Ao(O[ve]);U($[ve],Pe,W,null,k,_,T,Z,oe)}X>ge?kt($,k,_,!0,!1,ce):me(O,W,y,k,_,T,Z,oe,ce)},st=($,O,W,y,k,_,T,Z,oe)=>{let X=0;const ge=O.length;let ce=$.length-1,ve=ge-1;for(;X<=ce&&X<=ve;){const Pe=$[X],ne=O[X]=oe?ds(O[X]):Ao(O[X]);if(Hi(Pe,ne))U(Pe,ne,W,null,k,_,T,Z,oe);else break;X++}for(;X<=ce&&X<=ve;){const Pe=$[ce],ne=O[ve]=oe?ds(O[ve]):Ao(O[ve]);if(Hi(Pe,ne))U(Pe,ne,W,null,k,_,T,Z,oe);else break;ce--,ve--}if(X>ce){if(X<=ve){const Pe=ve+1,ne=Pe<ge?O[Pe].el:y;for(;X<=ve;)U(null,O[X]=oe?ds(O[X]):Ao(O[X]),W,ne,k,_,T,Z,oe),X++}}else if(X>ve)for(;X<=ce;)ut($[X],k,_,!0),X++;else{const Pe=X,ne=X,fe=new Map;for(X=ne;X<=ve;X++){const pt=O[X]=oe?ds(O[X]):Ao(O[X]);pt.key!=null&&fe.set(pt.key,X)}let _e,Be=0;const Je=ve-ne+1;let Ge=!1,it=0;const yt=new Array(Je);for(X=0;X<Je;X++)yt[X]=0;for(X=Pe;X<=ce;X++){const pt=$[X];if(Be>=Je){ut(pt,k,_,!0);continue}let _t;if(pt.key!=null)_t=fe.get(pt.key);else for(_e=ne;_e<=ve;_e++)if(yt[_e-ne]===0&&Hi(pt,O[_e])){_t=_e;break}_t===void 0?ut(pt,k,_,!0):(yt[_t-ne]=X+1,_t>=it?it=_t:Ge=!0,U(pt,O[_t],W,null,k,_,T,Z,oe),Be++)}const $t=Ge?zy(yt):fi;for(_e=$t.length-1,X=Je-1;X>=0;X--){const pt=ne+X,_t=O[pt],zt=O[pt+1],Zt=pt+1<ge?zt.el||Zh(zt):y;yt[X]===0?U(null,_t,W,Zt,k,_,T,Z,oe):Ge&&(_e<0||X!==$t[_e]?lt(_t,W,Zt,2):_e--)}}},lt=($,O,W,y,k=null)=>{const{el:_,type:T,transition:Z,children:oe,shapeFlag:X}=$;if(X&6){lt($.component.subTree,O,W,y);return}if(X&128){$.suspense.move(O,W,y);return}if(X&64){T.move($,O,W,He);return}if(T===Oe){o(_,O,W);for(let ce=0;ce<oe.length;ce++)lt(oe[ce],O,W,y);o($.anchor,O,W);return}if(T===sr){H($,O,W);return}if(y!==2&&X&1&&Z)if(y===0)Z.beforeEnter(_),o(_,O,W),Gn(()=>Z.enter(_),k);else{const{leave:ce,delayLeave:ve,afterLeave:Pe}=Z,ne=()=>{$.ctx.isUnmounted?s(_):o(_,O,W)},fe=()=>{_._isLeaving&&_[ay](!0),ce(_,()=>{ne(),Pe&&Pe()})};ve?ve(_,ne,fe):fe()}else o(_,O,W)},ut=($,O,W,y=!1,k=!1)=>{const{type:_,props:T,ref:Z,children:oe,dynamicChildren:X,shapeFlag:ge,patchFlag:ce,dirs:ve,cacheIndex:Pe}=$;if(ce===-2&&(k=!1),Z!=null&&(Ko(),ea(Z,null,W,$,!0),Zo()),Pe!=null&&(O.renderCache[Pe]=void 0),ge&256){O.ctx.deactivate($);return}const ne=ge&1&&ve,fe=!ta($);let _e;if(fe&&(_e=T&&T.onVnodeBeforeUnmount)&&xo(_e,O,$),ge&6)Ze($.component,W,y);else{if(ge&128){$.suspense.unmount(W,y);return}ne&&Fs($,null,O,"beforeUnmount"),ge&64?$.type.remove($,O,W,He,y):X&&!X.hasOnce&&(_!==Oe||ce>0&&ce&64)?kt(X,O,W,!1,!0):(_===Oe&&ce&384||!k&&ge&16)&&kt(oe,O,W),y&&Et($)}(fe&&(_e=T&&T.onVnodeUnmounted)||ne)&&Gn(()=>{_e&&xo(_e,O,$),ne&&Fs($,null,O,"unmounted")},W)},Et=$=>{const{type:O,el:W,anchor:y,transition:k}=$;if(O===Oe){Ye(W,y);return}if(O===sr){M($);return}const _=()=>{s(W),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if($.shapeFlag&1&&k&&!k.persisted){const{leave:T,delayLeave:Z}=k,oe=()=>T(W,_);Z?Z($.el,_,oe):oe()}else _()},Ye=($,O)=>{let W;for(;$!==O;)W=m($),s($),$=W;s(O)},Ze=($,O,W)=>{const{bum:y,scope:k,job:_,subTree:T,um:Z,m:oe,a:X}=$;sd(oe),sd(X),y&&or(y),k.stop(),_&&(_.flags|=8,ut(T,$,O,W)),Z&&Gn(Z,O),Gn(()=>{$.isUnmounted=!0},O)},kt=($,O,W,y=!1,k=!1,_=0)=>{for(let T=_;T<$.length;T++)ut($[T],O,W,y,k)},ae=$=>{if($.shapeFlag&6)return ae($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const O=m($.anchor||$.el),W=O&&O[sy];return W?m(W):O};let ke=!1;const Ce=($,O,W)=>{let y;$==null?O._vnode&&(ut(O._vnode,null,null,!0),y=O._vnode.component):U(O._vnode||null,$,O,null,null,null,W),O._vnode=$,ke||(ke=!0,Zu(y),Eh(),ke=!1)},He={p:U,um:ut,m:lt,r:Et,mt:je,mc:me,pc:Se,pbc:xe,n:ae,o:e};return{render:Ce,hydrate:void 0,createApp:Ay(Ce)}}function wl({type:e,props:n},t){return t==="svg"&&e==="foreignObject"||t==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:t}function Ls({effect:e,job:n},t){t?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function Hy(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Gh(e,n,t=!1){const o=e.children,s=n.children;if(ht(o)&&ht(s))for(let i=0;i<o.length;i++){const a=o[i];let r=s[i];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=s[i]=ds(s[i]),r.el=a.el),!t&&r.patchFlag!==-2&&Gh(a,r)),r.type===Pr&&(r.patchFlag!==-1?r.el=a.el:r.__elIndex=i+(e.type===Oe?1:0)),r.type===Es&&!r.el&&(r.el=a.el)}}function zy(e){const n=e.slice(),t=[0];let o,s,i,a,r;const d=e.length;for(o=0;o<d;o++){const c=e[o];if(c!==0){if(s=t[t.length-1],e[s]<c){n[o]=s,t.push(o);continue}for(i=0,a=t.length-1;i<a;)r=i+a>>1,e[t[r]]<c?i=r+1:a=r;c<e[t[i]]&&(i>0&&(n[o]=t[i-1]),t[i]=o)}}for(i=t.length,a=t[i-1];i-- >0;)t[i]=a,a=n[a];return t}function Kh(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Kh(n)}function sd(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}function Zh(e){if(e.placeholder)return e.placeholder;const n=e.component;return n?Zh(n.subTree):null}const qh=e=>e.__isSuspense;function Wy(e,n){n&&n.pendingBranch?ht(e)?n.effects.push(...e):n.effects.push(e):ey(e)}const Oe=Symbol.for("v-fgt"),Pr=Symbol.for("v-txt"),Es=Symbol.for("v-cmt"),sr=Symbol.for("v-stc"),oa=[];let qn=null;function w(e=!1){oa.push(qn=e?null:[])}function Gy(){oa.pop(),qn=oa[oa.length-1]||null}let da=1;function pr(e,n=!1){da+=e,e<0&&qn&&n&&(qn.hasOnce=!0)}function Yh(e){return e.dynamicChildren=da>0?qn||fi:null,Gy(),da>0&&qn&&qn.push(e),e}function E(e,n,t,o,s,i){return Yh(u(e,n,t,o,s,i,!0))}function Mn(e,n,t,o,s){return Yh(mt(e,n,t,o,s,!0))}function gr(e){return e?e.__v_isVNode===!0:!1}function Hi(e,n){return e.type===n.type&&e.key===n.key}const Xh=({key:e})=>e??null,ir=({ref:e,ref_key:n,ref_for:t})=>(typeof e=="number"&&(e=""+e),e!=null?nn(e)||yn(e)||vt(e)?{i:Zn,r:e,k:n,f:!!t}:e:null);function u(e,n=null,t=null,o=0,s=null,i=e===Oe?0:1,a=!1,r=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&Xh(n),ref:n&&ir(n),scopeId:xh,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Zn};return r?(Nc(d,t),i&128&&e.normalize(d)):t&&(d.shapeFlag|=nn(t)?8:16),da>0&&!a&&qn&&(d.patchFlag>0||i&6)&&d.patchFlag!==32&&qn.push(d),d}const mt=Ky;function Ky(e,n=null,t=null,o=0,s=null,i=!1){if((!e||e===yy)&&(e=Es),gr(e)){const r=_i(e,n,!0);return t&&Nc(r,t),da>0&&!i&&qn&&(r.shapeFlag&6?qn[qn.indexOf(e)]=r:qn.push(r)),r.patchFlag=-2,r}if(ib(e)&&(e=e.__vccOpts),n){n=Zy(n);let{class:r,style:d}=n;r&&!nn(r)&&(n.class=rt(r)),jt(d)&&(Fc(d)&&!ht(d)&&(d=bn({},d)),n.style=tn(d))}const a=nn(e)?1:qh(e)?128:iy(e)?64:jt(e)?4:vt(e)?2:0;return u(e,n,t,o,s,a,i,!0)}function Zy(e){return e?Fc(e)||Bh(e)?bn({},e):e:null}function _i(e,n,t=!1,o=!1){const{props:s,ref:i,patchFlag:a,children:r,transition:d}=e,c=n?qy(s||{},n):s,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Xh(c),ref:n&&n.ref?t&&i?ht(i)?i.concat(ir(n)):[i,ir(n)]:ir(n):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Oe?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&_i(e.ssContent),ssFallback:e.ssFallback&&_i(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&o&&Oc(f,d.clone(f)),f}function wi(e=" ",n=0){return mt(Pr,null,e,n)}function Jh(e,n){const t=mt(sr,null,e);return t.staticCount=n,t}function re(e="",n=!1){return n?(w(),Mn(Es,null,e)):mt(Es,null,e)}function Ao(e){return e==null||typeof e=="boolean"?mt(Es):ht(e)?mt(Oe,null,e.slice()):gr(e)?ds(e):mt(Pr,null,String(e))}function ds(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:_i(e)}function Nc(e,n){let t=0;const{shapeFlag:o}=e;if(n==null)n=null;else if(ht(n))t=16;else if(typeof n=="object")if(o&65){const s=n.default;s&&(s._c&&(s._d=!1),Nc(e,s()),s._c&&(s._d=!0));return}else{t=32;const s=n._;!s&&!Bh(n)?n._ctx=Zn:s===3&&Zn&&(Zn.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else vt(n)?(n={default:n,_ctx:Zn},t=32):(n=String(n),o&64?(t=16,n=[wi(n)]):t=8);e.children=n,e.shapeFlag|=t}function qy(...e){const n={};for(let t=0;t<e.length;t++){const o=e[t];for(const s in o)if(s==="class")n.class!==o.class&&(n.class=rt([n.class,o.class]));else if(s==="style")n.style=tn([n.style,o.style]);else if(xr(s)){const i=n[s],a=o[s];a&&i!==a&&!(ht(i)&&i.includes(a))&&(n[s]=i?[].concat(i,a):a)}else s!==""&&(n[s]=o[s])}return n}function xo(e,n,t,o=null){Mo(e,n,7,[t,o])}const Yy=Ph();let Xy=0;function Jy(e,n,t){const o=e.type,s=(n?n.appContext:e.appContext)||Yy,i={uid:Xy++,vnode:e,type:o,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new xm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vh(o,s),emitsOptions:Nh(o,s),emit:null,emitted:null,propsDefaults:Dt,inheritAttrs:o.inheritAttrs,ctx:Dt,data:Dt,props:Dt,attrs:Dt,slots:Dt,refs:Dt,setupState:Dt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=n?n.root:i,i.emit=Iy.bind(null,i),e.ce&&e.ce(i),i}let mn=null;const Qy=()=>mn||Zn;let vr,ic;{const e=Ir(),n=(t,o)=>{let s;return(s=e[t])||(s=e[t]=[]),s.push(o),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};vr=n("__VUE_INSTANCE_SETTERS__",t=>mn=t),ic=n("__VUE_SSR_SETTERS__",t=>fa=t)}const Aa=e=>{const n=mn;return vr(e),e.scope.on(),()=>{e.scope.off(),vr(n)}},id=()=>{mn&&mn.scope.off(),vr(null)};function Qh(e){return e.vnode.shapeFlag&4}let fa=!1;function eb(e,n=!1,t=!1){n&&ic(n);const{props:o,children:s}=e.vnode,i=Qh(e);My(e,o,i,n),jy(e,s,t||n);const a=i?tb(e,n):void 0;return n&&ic(!1),a}function tb(e,n){const t=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,_y);const{setup:o}=t;if(o){Ko();const s=e.setupContext=o.length>1?ob(e):null,i=Aa(e),a=Ca(o,e,0,[e.props,s]),r=Yf(a);if(Zo(),i(),(r||e.sp)&&!ta(e)&&Ih(e),r){if(a.then(id,id),n)return a.then(d=>{ad(e,d)}).catch(d=>{Lr(d,e,0)});e.asyncDep=a}else ad(e,a)}else ep(e)}function ad(e,n,t){vt(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:jt(n)&&(e.setupState=bh(n)),ep(e)}function ep(e,n,t){const o=e.type;e.render||(e.render=o.render||Io);{const s=Aa(e);Ko();try{wy(e)}finally{Zo(),s()}}}const nb={get(e,n){return vn(e,"get",""),e[n]}};function ob(e){const n=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,nb),slots:e.slots,emit:e.emit,expose:n}}function Nr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(bh(zm(e.exposed)),{get(n,t){if(t in n)return n[t];if(t in na)return na[t](e)},has(n,t){return t in n||t in na}})):e.proxy}function sb(e,n=!0){return vt(e)?e.displayName||e.name:e.name||n&&e.__name}function ib(e){return vt(e)&&"__vccOpts"in e}const F=(e,n)=>qm(e,n,fa);function tp(e,n,t){try{pr(-1);const o=arguments.length;return o===2?jt(n)&&!ht(n)?gr(n)?mt(e,null,[n]):mt(e,n):mt(e,null,n):(o>3?t=Array.prototype.slice.call(arguments,2):o===3&&gr(t)&&(t=[t]),mt(e,n,t))}finally{pr(1)}}const ab="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ac;const rd=typeof window<"u"&&window.trustedTypes;if(rd)try{ac=rd.createPolicy("vue",{createHTML:e=>e})}catch{}const np=ac?e=>ac.createHTML(e):e=>e,rb="http://www.w3.org/2000/svg",lb="http://www.w3.org/1998/Math/MathML",Vo=typeof document<"u"?document:null,ld=Vo&&Vo.createElement("template"),cb={insert:(e,n,t)=>{n.insertBefore(e,t||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,t,o)=>{const s=n==="svg"?Vo.createElementNS(rb,e):n==="mathml"?Vo.createElementNS(lb,e):t?Vo.createElement(e,{is:t}):Vo.createElement(e);return e==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:e=>Vo.createTextNode(e),createComment:e=>Vo.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Vo.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,t,o,s,i){const a=t?t.previousSibling:n.lastChild;if(s&&(s===i||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{ld.innerHTML=np(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const r=ld.content;if(o==="svg"||o==="mathml"){const d=r.firstChild;for(;d.firstChild;)r.appendChild(d.firstChild);r.removeChild(d)}n.insertBefore(r,t)}return[a?a.nextSibling:n.firstChild,t?t.previousSibling:n.lastChild]}},ub=Symbol("_vtc");function db(e,n,t){const o=e[ub];o&&(n=(n?[n,...o]:[...o]).join(" ")),n==null?e.removeAttribute("class"):t?e.setAttribute("class",n):e.className=n}const cd=Symbol("_vod"),fb=Symbol("_vsh"),hb=Symbol(""),pb=/(?:^|;)\s*display\s*:/;function gb(e,n,t){const o=e.style,s=nn(t);let i=!1;if(t&&!s){if(n)if(nn(n))for(const a of n.split(";")){const r=a.slice(0,a.indexOf(":")).trim();t[r]==null&&ar(o,r,"")}else for(const a in n)t[a]==null&&ar(o,a,"");for(const a in t)a==="display"&&(i=!0),ar(o,a,t[a])}else if(s){if(n!==t){const a=o[hb];a&&(t+=";"+a),o.cssText=t,i=pb.test(t)}}else n&&e.removeAttribute("style");cd in e&&(e[cd]=i?o.display:"",e[fb]&&(o.display="none"))}const ud=/\s*!important$/;function ar(e,n,t){if(ht(t))t.forEach(o=>ar(e,n,o));else if(t==null&&(t=""),n.startsWith("--"))e.setProperty(n,t);else{const o=vb(e,n);ud.test(t)?e.setProperty(xs(o),t.replace(ud,""),"important"):e[o]=t}}const dd=["Webkit","Moz","ms"],El={};function vb(e,n){const t=El[n];if(t)return t;let o=so(n);if(o!=="filter"&&o in e)return El[n]=o;o=Ar(o);for(let s=0;s<dd.length;s++){const i=dd[s]+o;if(i in e)return El[n]=i}return n}const fd="http://www.w3.org/1999/xlink";function hd(e,n,t,o,s,i=wm(n)){o&&n.startsWith("xlink:")?t==null?e.removeAttributeNS(fd,n.slice(6,n.length)):e.setAttributeNS(fd,n,t):t==null||i&&!eh(t)?e.removeAttribute(n):e.setAttribute(n,i?"":Oo(t)?String(t):t)}function pd(e,n,t,o,s){if(n==="innerHTML"||n==="textContent"){t!=null&&(e[n]=n==="innerHTML"?np(t):t);return}const i=e.tagName;if(n==="value"&&i!=="PROGRESS"&&!i.includes("-")){const r=i==="OPTION"?e.getAttribute("value")||"":e.value,d=t==null?e.type==="checkbox"?"on":"":String(t);(r!==d||!("_value"in e))&&(e.value=d),t==null&&e.removeAttribute(n),e._value=t;return}let a=!1;if(t===""||t==null){const r=typeof e[n];r==="boolean"?t=eh(t):t==null&&r==="string"?(t="",a=!0):r==="number"&&(t=0,a=!0)}try{e[n]=t}catch{}a&&e.removeAttribute(s||n)}function Ms(e,n,t,o){e.addEventListener(n,t,o)}function mb(e,n,t,o){e.removeEventListener(n,t,o)}const gd=Symbol("_vei");function yb(e,n,t,o,s=null){const i=e[gd]||(e[gd]={}),a=i[n];if(o&&a)a.value=o;else{const[r,d]=bb(n);if(o){const c=i[n]=Eb(o,s);Ms(e,r,c,d)}else a&&(mb(e,r,a,d),i[n]=void 0)}}const vd=/(?:Once|Passive|Capture)$/;function bb(e){let n;if(vd.test(e)){n={};let o;for(;o=e.match(vd);)e=e.slice(0,e.length-o[0].length),n[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xs(e.slice(2)),n]}let Sl=0;const _b=Promise.resolve(),wb=()=>Sl||(_b.then(()=>Sl=0),Sl=Date.now());function Eb(e,n){const t=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=t.attached)return;Mo(Sb(o,t.value),n,5,[o])};return t.value=e,t.attached=wb(),t}function Sb(e,n){if(ht(n)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},n.map(o=>s=>!s._stopped&&o&&o(s))}else return n}const md=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,xb=(e,n,t,o,s,i)=>{const a=s==="svg";n==="class"?db(e,o,a):n==="style"?gb(e,t,o):xr(n)?Sc(n)||yb(e,n,t,o,i):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):kb(e,n,o,a))?(pd(e,n,o),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&hd(e,n,o,a,i,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!nn(o))?pd(e,so(n),o,i,n):(n==="true-value"?e._trueValue=o:n==="false-value"&&(e._falseValue=o),hd(e,n,o,a))};function kb(e,n,t,o){if(o)return!!(n==="innerHTML"||n==="textContent"||n in e&&md(n)&&vt(t));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="sandbox"&&e.tagName==="IFRAME"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return md(n)&&nn(t)?!1:n in e}const mr=e=>{const n=e.props["onUpdate:modelValue"]||!1;return ht(n)?t=>or(n,t):n};function Cb(e){e.target.composing=!0}function yd(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const vi=Symbol("_assign");function bd(e,n,t){return n&&(e=e.trim()),t&&(e=$r(e)),e}const Ss={created(e,{modifiers:{lazy:n,trim:t,number:o}},s){e[vi]=mr(s);const i=o||s.props&&s.props.type==="number";Ms(e,n?"change":"input",a=>{a.target.composing||e[vi](bd(e.value,t,i))}),(t||i)&&Ms(e,"change",()=>{e.value=bd(e.value,t,i)}),n||(Ms(e,"compositionstart",Cb),Ms(e,"compositionend",yd),Ms(e,"change",yd))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:t,modifiers:{lazy:o,trim:s,number:i}},a){if(e[vi]=mr(a),e.composing)return;const r=(i||e.type==="number")&&!/^0\d/.test(e.value)?$r(e.value):e.value,d=n??"";r!==d&&(document.activeElement===e&&e.type!=="range"&&(o&&n===t||s&&e.value.trim()===d)||(e.value=d))}},_d={deep:!0,created(e,{value:n,modifiers:{number:t}},o){const s=kr(n);Ms(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>t?$r(yr(a)):yr(a));e[vi](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,oo(()=>{e._assigning=!1})}),e[vi]=mr(o)},mounted(e,{value:n}){wd(e,n)},beforeUpdate(e,n,t){e[vi]=mr(t)},updated(e,{value:n}){e._assigning||wd(e,n)}};function wd(e,n){const t=e.multiple,o=ht(n);if(!(t&&!o&&!kr(n))){for(let s=0,i=e.options.length;s<i;s++){const a=e.options[s],r=yr(a);if(t)if(o){const d=typeof r;d==="string"||d==="number"?a.selected=n.some(c=>String(c)===String(r)):a.selected=Sm(n,r)>-1}else a.selected=n.has(r);else if(Tr(yr(a),n)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!t&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function yr(e){return"_value"in e?e._value:e.value}const Ab=["ctrl","shift","alt","meta"],$b={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>Ab.some(t=>e[`${t}Key`]&&!n.includes(t))},wt=(e,n)=>{const t=e._withMods||(e._withMods={}),o=n.join(".");return t[o]||(t[o]=(s,...i)=>{for(let a=0;a<n.length;a++){const r=$b[n[a]];if(r&&r(s,n))return}return e(s,...i)})},Ib={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},oi=(e,n)=>{const t=e._withKeys||(e._withKeys={}),o=n.join(".");return t[o]||(t[o]=s=>{if(!("key"in s))return;const i=xs(s.key);if(n.some(a=>a===i||Ib[a]===i))return e(s)})},Tb=bn({patchProp:xb},cb);let Ed;function Rb(){return Ed||(Ed=Uy(Tb))}const Fb=(...e)=>{const n=Rb().createApp(...e),{mount:t}=n;return n.mount=o=>{const s=Ob(o);if(!s)return;const i=n._component;!vt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=t(s,!1,Lb(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},n};function Lb(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ob(e){return nn(e)?document.querySelector(e):e}const Mb=""+new URL("../ECD_logo.png",import.meta.url).href;/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ci=typeof document<"u";function op(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Pb(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&op(e.default)}const Ft=Object.assign;function xl(e,n){const t={};for(const o in n){const s=n[o];t[o]=yo(s)?s.map(e):e(s)}return t}const sa=()=>{},yo=Array.isArray;function Sd(e,n){const t={};for(const o in e)t[o]=o in n?n[o]:e[o];return t}const sp=/#/g,Nb=/&/g,Db=/\//g,jb=/=/g,Bb=/\?/g,ip=/\+/g,Ub=/%5B/g,Vb=/%5D/g,ap=/%5E/g,Hb=/%60/g,rp=/%7B/g,zb=/%7C/g,lp=/%7D/g,Wb=/%20/g;function Dc(e){return e==null?"":encodeURI(""+e).replace(zb,"|").replace(Ub,"[").replace(Vb,"]")}function Gb(e){return Dc(e).replace(rp,"{").replace(lp,"}").replace(ap,"^")}function rc(e){return Dc(e).replace(ip,"%2B").replace(Wb,"+").replace(sp,"%23").replace(Nb,"%26").replace(Hb,"`").replace(rp,"{").replace(lp,"}").replace(ap,"^")}function Kb(e){return rc(e).replace(jb,"%3D")}function Zb(e){return Dc(e).replace(sp,"%23").replace(Bb,"%3F")}function qb(e){return Zb(e).replace(Db,"%2F")}function ha(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Yb=/\/$/,Xb=e=>e.replace(Yb,"");function kl(e,n,t="/"){let o,s={},i="",a="";const r=n.indexOf("#");let d=n.indexOf("?");return d=r>=0&&d>r?-1:d,d>=0&&(o=n.slice(0,d),i=n.slice(d,r>0?r:n.length),s=e(i.slice(1))),r>=0&&(o=o||n.slice(0,r),a=n.slice(r,n.length)),o=t_(o??n,t),{fullPath:o+i+a,path:o,query:s,hash:ha(a)}}function Jb(e,n){const t=n.query?e(n.query):"";return n.path+(t&&"?")+t+(n.hash||"")}function xd(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function Qb(e,n,t){const o=n.matched.length-1,s=t.matched.length-1;return o>-1&&o===s&&Ei(n.matched[o],t.matched[s])&&cp(n.params,t.params)&&e(n.query)===e(t.query)&&n.hash===t.hash}function Ei(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function cp(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var t in e)if(!e_(e[t],n[t]))return!1;return!0}function e_(e,n){return yo(e)?kd(e,n):yo(n)?kd(n,e):(e==null?void 0:e.valueOf())===(n==null?void 0:n.valueOf())}function kd(e,n){return yo(n)?e.length===n.length&&e.every((t,o)=>t===n[o]):e.length===1&&e[0]===n}function t_(e,n){if(e.startsWith("/"))return e;if(!e)return n;const t=n.split("/"),o=e.split("/"),s=o[o.length-1];(s===".."||s===".")&&o.push("");let i=t.length-1,a,r;for(a=0;a<o.length;a++)if(r=o[a],r!==".")if(r==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+o.slice(a).join("/")}const as={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let lc=function(e){return e.pop="pop",e.push="push",e}({}),Cl=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function n_(e){if(!e)if(ci){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Xb(e)}const o_=/^[^#]+#/;function s_(e,n){return e.replace(o_,"#")+n}function i_(e,n){const t=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:n.behavior,left:o.left-t.left-(n.left||0),top:o.top-t.top-(n.top||0)}}const Dr=()=>({left:window.scrollX,top:window.scrollY});function a_(e){let n;if("el"in e){const t=e.el,o=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?o?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;n=i_(s,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function Cd(e,n){return(history.state?history.state.position-n:-1)+e}const cc=new Map;function r_(e,n){cc.set(e,n)}function l_(e){const n=cc.get(e);return cc.delete(e),n}function c_(e){return typeof e=="string"||e&&typeof e=="object"}function up(e){return typeof e=="string"||typeof e=="symbol"}let Jt=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const dp=Symbol("");Jt.MATCHER_NOT_FOUND+"",Jt.NAVIGATION_GUARD_REDIRECT+"",Jt.NAVIGATION_ABORTED+"",Jt.NAVIGATION_CANCELLED+"",Jt.NAVIGATION_DUPLICATED+"";function Si(e,n){return Ft(new Error,{type:e,[dp]:!0},n)}function Bo(e,n){return e instanceof Error&&dp in e&&(n==null||!!(e.type&n))}const u_=["params","query","hash"];function d_(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const n={};for(const t of u_)t in e&&(n[t]=e[t]);return JSON.stringify(n,null,2)}function f_(e){const n={};if(e===""||e==="?")return n;const t=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<t.length;++o){const s=t[o].replace(ip," "),i=s.indexOf("="),a=ha(i<0?s:s.slice(0,i)),r=i<0?null:ha(s.slice(i+1));if(a in n){let d=n[a];yo(d)||(d=n[a]=[d]),d.push(r)}else n[a]=r}return n}function Ad(e){let n="";for(let t in e){const o=e[t];if(t=Kb(t),o==null){o!==void 0&&(n+=(n.length?"&":"")+t);continue}(yo(o)?o.map(s=>s&&rc(s)):[o&&rc(o)]).forEach(s=>{s!==void 0&&(n+=(n.length?"&":"")+t,s!=null&&(n+="="+s))})}return n}function h_(e){const n={};for(const t in e){const o=e[t];o!==void 0&&(n[t]=yo(o)?o.map(s=>s==null?null:""+s):o==null?o:""+o)}return n}const p_=Symbol(""),$d=Symbol(""),jc=Symbol(""),Bc=Symbol(""),uc=Symbol("");function zi(){let e=[];function n(o){return e.push(o),()=>{const s=e.indexOf(o);s>-1&&e.splice(s,1)}}function t(){e=[]}return{add:n,list:()=>e.slice(),reset:t}}function fs(e,n,t,o,s,i=a=>a()){const a=o&&(o.enterCallbacks[s]=o.enterCallbacks[s]||[]);return()=>new Promise((r,d)=>{const c=m=>{m===!1?d(Si(Jt.NAVIGATION_ABORTED,{from:t,to:n})):m instanceof Error?d(m):c_(m)?d(Si(Jt.NAVIGATION_GUARD_REDIRECT,{from:n,to:m})):(a&&o.enterCallbacks[s]===a&&typeof m=="function"&&a.push(m),r())},f=i(()=>e.call(o&&o.instances[s],n,t,c));let v=Promise.resolve(f);e.length<3&&(v=v.then(c)),v.catch(m=>d(m))})}function Al(e,n,t,o,s=i=>i()){const i=[];for(const a of e)for(const r in a.components){let d=a.components[r];if(!(n!=="beforeRouteEnter"&&!a.instances[r]))if(op(d)){const c=(d.__vccOpts||d)[n];c&&i.push(fs(c,t,o,a,r,s))}else{let c=d();i.push(()=>c.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${r}" at "${a.path}"`);const v=Pb(f)?f.default:f;a.mods[r]=f,a.components[r]=v;const m=(v.__vccOpts||v)[n];return m&&fs(m,t,o,a,r,s)()}))}}return i}function g_(e,n){const t=[],o=[],s=[],i=Math.max(n.matched.length,e.matched.length);for(let a=0;a<i;a++){const r=n.matched[a];r&&(e.matched.find(c=>Ei(c,r))?o.push(r):t.push(r));const d=e.matched[a];d&&(n.matched.find(c=>Ei(c,d))||s.push(d))}return[t,o,s]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let v_=()=>location.protocol+"//"+location.host;function fp(e,n){const{pathname:t,search:o,hash:s}=n,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,r=s.slice(a);return r[0]!=="/"&&(r="/"+r),xd(r,"")}return xd(t,e)+o+s}function m_(e,n,t,o){let s=[],i=[],a=null;const r=({state:m})=>{const g=fp(e,location),I=t.value,U=n.value;let x=0;if(m){if(t.value=g,n.value=m,a&&a===I){a=null;return}x=U?m.position-U.position:0}else o(g);s.forEach(R=>{R(t.value,I,{delta:x,type:lc.pop,direction:x?x>0?Cl.forward:Cl.back:Cl.unknown})})};function d(){a=t.value}function c(m){s.push(m);const g=()=>{const I=s.indexOf(m);I>-1&&s.splice(I,1)};return i.push(g),g}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Ft({},m.state,{scroll:Dr()}),"")}}function v(){for(const m of i)m();i=[],window.removeEventListener("popstate",r),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",r),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:d,listen:c,destroy:v}}function Id(e,n,t,o=!1,s=!1){return{back:e,current:n,forward:t,replaced:o,position:window.history.length,scroll:s?Dr():null}}function y_(e){const{history:n,location:t}=window,o={value:fp(e,t)},s={value:n.state};s.value||i(o.value,{back:null,current:o.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function i(d,c,f){const v=e.indexOf("#"),m=v>-1?(t.host&&document.querySelector("base")?e:e.slice(v))+d:v_()+e+d;try{n[f?"replaceState":"pushState"](c,"",m),s.value=c}catch(g){console.error(g),t[f?"replace":"assign"](m)}}function a(d,c){i(d,Ft({},n.state,Id(s.value.back,d,s.value.forward,!0),c,{position:s.value.position}),!0),o.value=d}function r(d,c){const f=Ft({},s.value,n.state,{forward:d,scroll:Dr()});i(f.current,f,!0),i(d,Ft({},Id(o.value,d,null),{position:f.position+1},c),!1),o.value=d}return{location:o,state:s,push:r,replace:a}}function b_(e){e=n_(e);const n=y_(e),t=m_(e,n.state,n.location,n.replace);function o(i,a=!0){a||t.pauseListeners(),history.go(i)}const s=Ft({location:"",base:e,go:o,createHref:s_.bind(null,e)},n,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>n.state.value}),s}function __(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),b_(e)}let Ns=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var an=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(an||{});const w_={type:Ns.Static,value:""},E_=/[a-zA-Z0-9_]/;function S_(e){if(!e)return[[]];if(e==="/")return[[w_]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(g){throw new Error(`ERR (${t})/"${c}": ${g}`)}let t=an.Static,o=t;const s=[];let i;function a(){i&&s.push(i),i=[]}let r=0,d,c="",f="";function v(){c&&(t===an.Static?i.push({type:Ns.Static,value:c}):t===an.Param||t===an.ParamRegExp||t===an.ParamRegExpEnd?(i.length>1&&(d==="*"||d==="+")&&n(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Ns.Param,value:c,regexp:f,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):n("Invalid state to consume buffer"),c="")}function m(){c+=d}for(;r<e.length;){if(d=e[r++],d==="\\"&&t!==an.ParamRegExp){o=t,t=an.EscapeNext;continue}switch(t){case an.Static:d==="/"?(c&&v(),a()):d===":"?(v(),t=an.Param):m();break;case an.EscapeNext:m(),t=o;break;case an.Param:d==="("?t=an.ParamRegExp:E_.test(d)?m():(v(),t=an.Static,d!=="*"&&d!=="?"&&d!=="+"&&r--);break;case an.ParamRegExp:d===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+d:t=an.ParamRegExpEnd:f+=d;break;case an.ParamRegExpEnd:v(),t=an.Static,d!=="*"&&d!=="?"&&d!=="+"&&r--,f="";break;default:n("Unknown state");break}}return t===an.ParamRegExp&&n(`Unfinished custom RegExp for param "${c}"`),v(),a(),s}const Td="[^/]+?",x_={sensitive:!1,strict:!1,start:!0,end:!0};var xn=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(xn||{});const k_=/[.+*?^${}()[\]/\\]/g;function C_(e,n){const t=Ft({},x_,n),o=[];let s=t.start?"^":"";const i=[];for(const c of e){const f=c.length?[]:[xn.Root];t.strict&&!c.length&&(s+="/");for(let v=0;v<c.length;v++){const m=c[v];let g=xn.Segment+(t.sensitive?xn.BonusCaseSensitive:0);if(m.type===Ns.Static)v||(s+="/"),s+=m.value.replace(k_,"\\$&"),g+=xn.Static;else if(m.type===Ns.Param){const{value:I,repeatable:U,optional:x,regexp:R}=m;i.push({name:I,repeatable:U,optional:x});const B=R||Td;if(B!==Td){g+=xn.BonusCustomRegExp;try{`${B}`}catch(M){throw new Error(`Invalid custom RegExp for param "${I}" (${B}): `+M.message)}}let H=U?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;v||(H=x&&c.length<2?`(?:/${H})`:"/"+H),x&&(H+="?"),s+=H,g+=xn.Dynamic,x&&(g+=xn.BonusOptional),U&&(g+=xn.BonusRepeatable),B===".*"&&(g+=xn.BonusWildcard)}f.push(g)}o.push(f)}if(t.strict&&t.end){const c=o.length-1;o[c][o[c].length-1]+=xn.BonusStrict}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,t.sensitive?"":"i");function r(c){const f=c.match(a),v={};if(!f)return null;for(let m=1;m<f.length;m++){const g=f[m]||"",I=i[m-1];v[I.name]=g&&I.repeatable?g.split("/"):g}return v}function d(c){let f="",v=!1;for(const m of e){(!v||!f.endsWith("/"))&&(f+="/"),v=!1;for(const g of m)if(g.type===Ns.Static)f+=g.value;else if(g.type===Ns.Param){const{value:I,repeatable:U,optional:x}=g,R=I in c?c[I]:"";if(yo(R)&&!U)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const B=yo(R)?R.join("/"):R;if(!B)if(x)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):v=!0);else throw new Error(`Missing required param "${I}"`);f+=B}}return f||"/"}return{re:a,score:o,keys:i,parse:r,stringify:d}}function A_(e,n){let t=0;for(;t<e.length&&t<n.length;){const o=n[t]-e[t];if(o)return o;t++}return e.length<n.length?e.length===1&&e[0]===xn.Static+xn.Segment?-1:1:e.length>n.length?n.length===1&&n[0]===xn.Static+xn.Segment?1:-1:0}function hp(e,n){let t=0;const o=e.score,s=n.score;for(;t<o.length&&t<s.length;){const i=A_(o[t],s[t]);if(i)return i;t++}if(Math.abs(s.length-o.length)===1){if(Rd(o))return 1;if(Rd(s))return-1}return s.length-o.length}function Rd(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const $_={strict:!1,end:!0,sensitive:!1};function I_(e,n,t){const o=C_(S_(e.path),t),s=Ft(o,{record:e,parent:n,children:[],alias:[]});return n&&!s.record.aliasOf==!n.record.aliasOf&&n.children.push(s),s}function T_(e,n){const t=[],o=new Map;n=Sd($_,n);function s(v){return o.get(v)}function i(v,m,g){const I=!g,U=Ld(v);U.aliasOf=g&&g.record;const x=Sd(n,v),R=[U];if("alias"in v){const M=typeof v.alias=="string"?[v.alias]:v.alias;for(const te of M)R.push(Ld(Ft({},U,{components:g?g.record.components:U.components,path:te,aliasOf:g?g.record:U})))}let B,H;for(const M of R){const{path:te}=M;if(m&&te[0]!=="/"){const we=m.record.path,de=we[we.length-1]==="/"?"":"/";M.path=m.record.path+(te&&de+te)}if(B=I_(M,m,x),g?g.alias.push(B):(H=H||B,H!==B&&H.alias.push(B),I&&v.name&&!Od(B)&&a(v.name)),pp(B)&&d(B),U.children){const we=U.children;for(let de=0;de<we.length;de++)i(we[de],B,g&&g.children[de])}g=g||B}return H?()=>{a(H)}:sa}function a(v){if(up(v)){const m=o.get(v);m&&(o.delete(v),t.splice(t.indexOf(m),1),m.children.forEach(a),m.alias.forEach(a))}else{const m=t.indexOf(v);m>-1&&(t.splice(m,1),v.record.name&&o.delete(v.record.name),v.children.forEach(a),v.alias.forEach(a))}}function r(){return t}function d(v){const m=L_(v,t);t.splice(m,0,v),v.record.name&&!Od(v)&&o.set(v.record.name,v)}function c(v,m){let g,I={},U,x;if("name"in v&&v.name){if(g=o.get(v.name),!g)throw Si(Jt.MATCHER_NOT_FOUND,{location:v});x=g.record.name,I=Ft(Fd(m.params,g.keys.filter(H=>!H.optional).concat(g.parent?g.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),v.params&&Fd(v.params,g.keys.map(H=>H.name))),U=g.stringify(I)}else if(v.path!=null)U=v.path,g=t.find(H=>H.re.test(U)),g&&(I=g.parse(U),x=g.record.name);else{if(g=m.name?o.get(m.name):t.find(H=>H.re.test(m.path)),!g)throw Si(Jt.MATCHER_NOT_FOUND,{location:v,currentLocation:m});x=g.record.name,I=Ft({},m.params,v.params),U=g.stringify(I)}const R=[];let B=g;for(;B;)R.unshift(B.record),B=B.parent;return{name:x,path:U,params:I,matched:R,meta:F_(R)}}e.forEach(v=>i(v));function f(){t.length=0,o.clear()}return{addRoute:i,resolve:c,removeRoute:a,clearRoutes:f,getRoutes:r,getRecordMatcher:s}}function Fd(e,n){const t={};for(const o of n)o in e&&(t[o]=e[o]);return t}function Ld(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:R_(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function R_(e){const n={},t=e.props||!1;if("component"in e)n.default=t;else for(const o in e.components)n[o]=typeof t=="object"?t[o]:t;return n}function Od(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function F_(e){return e.reduce((n,t)=>Ft(n,t.meta),{})}function L_(e,n){let t=0,o=n.length;for(;t!==o;){const i=t+o>>1;hp(e,n[i])<0?o=i:t=i+1}const s=O_(e);return s&&(o=n.lastIndexOf(s,o-1)),o}function O_(e){let n=e;for(;n=n.parent;)if(pp(n)&&hp(e,n)===0)return n}function pp({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Md(e){const n=vo(jc),t=vo(Bc),o=F(()=>{const d=ys(e.to);return n.resolve(d)}),s=F(()=>{const{matched:d}=o.value,{length:c}=d,f=d[c-1],v=t.matched;if(!f||!v.length)return-1;const m=v.findIndex(Ei.bind(null,f));if(m>-1)return m;const g=Pd(d[c-2]);return c>1&&Pd(f)===g&&v[v.length-1].path!==g?v.findIndex(Ei.bind(null,d[c-2])):m}),i=F(()=>s.value>-1&&D_(t.params,o.value.params)),a=F(()=>s.value>-1&&s.value===t.matched.length-1&&cp(t.params,o.value.params));function r(d={}){if(N_(d)){const c=n[ys(e.replace)?"replace":"push"](ys(e.to)).catch(sa);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:o,href:F(()=>o.value.href),isActive:i,isExactActive:a,navigate:r}}function M_(e){return e.length===1?e[0]:e}const P_=$h({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Md,setup(e,{slots:n}){const t=Fr(Md(e)),{options:o}=vo(jc),s=F(()=>({[Nd(e.activeClass,o.linkActiveClass,"router-link-active")]:t.isActive,[Nd(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=n.default&&M_(n.default(t));return e.custom?i:tp("a",{"aria-current":t.isExactActive?e.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},i)}}}),gp=P_;function N_(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function D_(e,n){for(const t in n){const o=n[t],s=e[t];if(typeof o=="string"){if(o!==s)return!1}else if(!yo(s)||s.length!==o.length||o.some((i,a)=>i.valueOf()!==s[a].valueOf()))return!1}return!0}function Pd(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Nd=(e,n,t)=>e??n??t,j_=$h({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:t}){const o=vo(uc),s=F(()=>e.route||o.value),i=vo($d,0),a=F(()=>{let c=ys(i);const{matched:f}=s.value;let v;for(;(v=f[c])&&!v.components;)c++;return c}),r=F(()=>s.value.matched[a.value]);Qi($d,F(()=>a.value+1)),Qi(p_,r),Qi(uc,s);const d=Y();return ot(()=>[d.value,r.value,e.name],([c,f,v],[m,g,I])=>{f&&(f.instances[v]=c,g&&g!==f&&c&&c===m&&(f.leaveGuards.size||(f.leaveGuards=g.leaveGuards),f.updateGuards.size||(f.updateGuards=g.updateGuards))),c&&f&&(!g||!Ei(f,g)||!m)&&(f.enterCallbacks[v]||[]).forEach(U=>U(c))},{flush:"post"}),()=>{const c=s.value,f=e.name,v=r.value,m=v&&v.components[f];if(!m)return Dd(t.default,{Component:m,route:c});const g=v.props[f],I=g?g===!0?c.params:typeof g=="function"?g(c):g:null,x=tp(m,Ft({},I,n,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(v.instances[f]=null)},ref:d}));return Dd(t.default,{Component:x,route:c})||x}}});function Dd(e,n){if(!e)return null;const t=e(n);return t.length===1?t[0]:t}const vp=j_;function B_(e){const n=T_(e.routes,e),t=e.parseQuery||f_,o=e.stringifyQuery||Ad,s=e.history,i=zi(),a=zi(),r=zi(),d=Wm(as);let c=as;ci&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=xl.bind(null,ae=>""+ae),v=xl.bind(null,qb),m=xl.bind(null,ha);function g(ae,ke){let Ce,He;return up(ae)?(Ce=n.getRecordMatcher(ae),He=ke):He=ae,n.addRoute(He,Ce)}function I(ae){const ke=n.getRecordMatcher(ae);ke&&n.removeRoute(ke)}function U(){return n.getRoutes().map(ae=>ae.record)}function x(ae){return!!n.getRecordMatcher(ae)}function R(ae,ke){if(ke=Ft({},ke||d.value),typeof ae=="string"){const W=kl(t,ae,ke.path),y=n.resolve({path:W.path},ke),k=s.createHref(W.fullPath);return Ft(W,y,{params:m(y.params),hash:ha(W.hash),redirectedFrom:void 0,href:k})}let Ce;if(ae.path!=null)Ce=Ft({},ae,{path:kl(t,ae.path,ke.path).path});else{const W=Ft({},ae.params);for(const y in W)W[y]==null&&delete W[y];Ce=Ft({},ae,{params:v(W)}),ke.params=v(ke.params)}const He=n.resolve(Ce,ke),tt=ae.hash||"";He.params=f(m(He.params));const $=Jb(o,Ft({},ae,{hash:Gb(tt),path:He.path})),O=s.createHref($);return Ft({fullPath:$,hash:tt,query:o===Ad?h_(ae.query):ae.query||{}},He,{redirectedFrom:void 0,href:O})}function B(ae){return typeof ae=="string"?kl(t,ae,d.value.path):Ft({},ae)}function H(ae,ke){if(c!==ae)return Si(Jt.NAVIGATION_CANCELLED,{from:ke,to:ae})}function M(ae){return de(ae)}function te(ae){return M(Ft(B(ae),{replace:!0}))}function we(ae,ke){const Ce=ae.matched[ae.matched.length-1];if(Ce&&Ce.redirect){const{redirect:He}=Ce;let tt=typeof He=="function"?He(ae,ke):He;return typeof tt=="string"&&(tt=tt.includes("?")||tt.includes("#")?tt=B(tt):{path:tt},tt.params={}),Ft({query:ae.query,hash:ae.hash,params:tt.path!=null?{}:ae.params},tt)}}function de(ae,ke){const Ce=c=R(ae),He=d.value,tt=ae.state,$=ae.force,O=ae.replace===!0,W=we(Ce,He);if(W)return de(Ft(B(W),{state:typeof W=="object"?Ft({},tt,W.state):tt,force:$,replace:O}),ke||Ce);const y=Ce;y.redirectedFrom=ke;let k;return!$&&Qb(o,He,Ce)&&(k=Si(Jt.NAVIGATION_DUPLICATED,{to:y,from:He}),lt(He,He,!0,!1)),(k?Promise.resolve(k):xe(y,He)).catch(_=>Bo(_)?Bo(_,Jt.NAVIGATION_GUARD_REDIRECT)?_:st(_):Se(_,y,He)).then(_=>{if(_){if(Bo(_,Jt.NAVIGATION_GUARD_REDIRECT))return de(Ft({replace:O},B(_.to),{state:typeof _.to=="object"?Ft({},tt,_.to.state):tt,force:$}),ke||y)}else _=Ke(y,He,!0,O,tt);return Me(y,He,_),_})}function me(ae,ke){const Ce=H(ae,ke);return Ce?Promise.reject(Ce):Promise.resolve()}function Ae(ae){const ke=Ye.values().next().value;return ke&&typeof ke.runWithContext=="function"?ke.runWithContext(ae):ae()}function xe(ae,ke){let Ce;const[He,tt,$]=g_(ae,ke);Ce=Al(He.reverse(),"beforeRouteLeave",ae,ke);for(const W of He)W.leaveGuards.forEach(y=>{Ce.push(fs(y,ae,ke))});const O=me.bind(null,ae,ke);return Ce.push(O),kt(Ce).then(()=>{Ce=[];for(const W of i.list())Ce.push(fs(W,ae,ke));return Ce.push(O),kt(Ce)}).then(()=>{Ce=Al(tt,"beforeRouteUpdate",ae,ke);for(const W of tt)W.updateGuards.forEach(y=>{Ce.push(fs(y,ae,ke))});return Ce.push(O),kt(Ce)}).then(()=>{Ce=[];for(const W of $)if(W.beforeEnter)if(yo(W.beforeEnter))for(const y of W.beforeEnter)Ce.push(fs(y,ae,ke));else Ce.push(fs(W.beforeEnter,ae,ke));return Ce.push(O),kt(Ce)}).then(()=>(ae.matched.forEach(W=>W.enterCallbacks={}),Ce=Al($,"beforeRouteEnter",ae,ke,Ae),Ce.push(O),kt(Ce))).then(()=>{Ce=[];for(const W of a.list())Ce.push(fs(W,ae,ke));return Ce.push(O),kt(Ce)}).catch(W=>Bo(W,Jt.NAVIGATION_CANCELLED)?W:Promise.reject(W))}function Me(ae,ke,Ce){r.list().forEach(He=>Ae(()=>He(ae,ke,Ce)))}function Ke(ae,ke,Ce,He,tt){const $=H(ae,ke);if($)return $;const O=ke===as,W=ci?history.state:{};Ce&&(He||O?s.replace(ae.fullPath,Ft({scroll:O&&W&&W.scroll},tt)):s.push(ae.fullPath,tt)),d.value=ae,lt(ae,ke,Ce,O),st()}let et;function je(){et||(et=s.listen((ae,ke,Ce)=>{if(!Ze.listening)return;const He=R(ae),tt=we(He,Ze.currentRoute.value);if(tt){de(Ft(tt,{replace:!0,force:!0}),He).catch(sa);return}c=He;const $=d.value;ci&&r_(Cd($.fullPath,Ce.delta),Dr()),xe(He,$).catch(O=>Bo(O,Jt.NAVIGATION_ABORTED|Jt.NAVIGATION_CANCELLED)?O:Bo(O,Jt.NAVIGATION_GUARD_REDIRECT)?(de(Ft(B(O.to),{force:!0}),He).then(W=>{Bo(W,Jt.NAVIGATION_ABORTED|Jt.NAVIGATION_DUPLICATED)&&!Ce.delta&&Ce.type===lc.pop&&s.go(-1,!1)}).catch(sa),Promise.reject()):(Ce.delta&&s.go(-Ce.delta,!1),Se(O,He,$))).then(O=>{O=O||Ke(He,$,!1),O&&(Ce.delta&&!Bo(O,Jt.NAVIGATION_CANCELLED)?s.go(-Ce.delta,!1):Ce.type===lc.pop&&Bo(O,Jt.NAVIGATION_ABORTED|Jt.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),Me(He,$,O)}).catch(sa)}))}let De=zi(),Q=zi(),le;function Se(ae,ke,Ce){st(ae);const He=Q.list();return He.length?He.forEach(tt=>tt(ae,ke,Ce)):console.error(ae),Promise.reject(ae)}function Xe(){return le&&d.value!==as?Promise.resolve():new Promise((ae,ke)=>{De.add([ae,ke])})}function st(ae){return le||(le=!ae,je(),De.list().forEach(([ke,Ce])=>ae?Ce(ae):ke()),De.reset()),ae}function lt(ae,ke,Ce,He){const{scrollBehavior:tt}=e;if(!ci||!tt)return Promise.resolve();const $=!Ce&&l_(Cd(ae.fullPath,0))||(He||!Ce)&&history.state&&history.state.scroll||null;return oo().then(()=>tt(ae,ke,$)).then(O=>O&&a_(O)).catch(O=>Se(O,ae,ke))}const ut=ae=>s.go(ae);let Et;const Ye=new Set,Ze={currentRoute:d,listening:!0,addRoute:g,removeRoute:I,clearRoutes:n.clearRoutes,hasRoute:x,getRoutes:U,resolve:R,options:e,push:M,replace:te,go:ut,back:()=>ut(-1),forward:()=>ut(1),beforeEach:i.add,beforeResolve:a.add,afterEach:r.add,onError:Q.add,isReady:Xe,install(ae){ae.component("RouterLink",gp),ae.component("RouterView",vp),ae.config.globalProperties.$router=Ze,Object.defineProperty(ae.config.globalProperties,"$route",{enumerable:!0,get:()=>ys(d)}),ci&&!Et&&d.value===as&&(Et=!0,M(s.location).catch(He=>{}));const ke={};for(const He in as)Object.defineProperty(ke,He,{get:()=>d.value[He],enumerable:!0});ae.provide(jc,Ze),ae.provide(Bc,mh(ke)),ae.provide(uc,d);const Ce=ae.unmount;Ye.add(ae),ae.unmount=function(){Ye.delete(ae),Ye.size<1&&(c=as,et&&et(),et=null,d.value=as,Et=!1,le=!1),Ce()}}};function kt(ae){return ae.reduce((ke,Ce)=>ke.then(()=>Ae(Ce)),Promise.resolve())}return Ze}function U_(e){return vo(Bc)}const bo=(e,n)=>{const t=e.__vccOpts||e;for(const[o,s]of n)t[o]=s;return t},V_={class:"app-shell"},H_={class:"builder-hero app-topbar"},z_={class:"app-topbar-left"},W_={class:"app-topbar-actions"},G_=["disabled"],K_=["disabled"],Z_=["disabled"],q_={class:"app-main"},Y_={__name:"App",setup(e){const n=U_(),t=F(()=>n.name==="builder"),o=F(()=>t.value?"dashboard":"builder"),s=F(()=>t.value?"Dashboard":"Builder"),i=Y(!1),a=Y(!1),r=Y(!1),d=Y(!1),c=I=>{const U=I!=null&&I.detail&&typeof I.detail=="object"?I.detail:{};i.value=U.canCompile===!0,a.value=U.canInstall===!0,r.value=U.canLogs===!0,d.value=U.running===!0};Yo(()=>{window.addEventListener("app:builder-compile-state",c)}),io(()=>{window.removeEventListener("app:builder-compile-state",c)});const f=()=>{window.dispatchEvent(new CustomEvent("app:builder-export"))},v=()=>{window.dispatchEvent(new CustomEvent("app:builder-compile"))},m=()=>{window.dispatchEvent(new CustomEvent("app:builder-install"))},g=()=>{window.dispatchEvent(new CustomEvent("app:builder-logs"))};return(I,U)=>(w(),E("div",V_,[u("header",H_,[u("div",z_,[U[0]||(U[0]=u("div",{class:"builder-hero-brand"},[u("img",{src:Mb,alt:"ECD"}),u("span",{class:"builder-hero-meta"},"v 0.7.12")],-1)),mt(ys(gp),{to:{name:o.value},class:"app-switch-link btn-standard"},{default:kh(()=>[wi(ue(s.value),1)]),_:1},8,["to"])]),u("div",W_,[t.value?(w(),E("button",{key:0,class:"btn-standard action-install",disabled:!a.value||d.value,onClick:m}," Install ",8,G_)):re("",!0),t.value?(w(),E("button",{key:1,class:"btn-standard action-logs",disabled:!r.value||d.value,onClick:g}," Logs ",8,K_)):re("",!0),t.value?(w(),E("button",{key:2,class:"btn-standard action-compile",disabled:!i.value||d.value,onClick:v},ue(d.value?"Working...":"Compile"),9,Z_)):re("",!0),t.value?(w(),E("button",{key:3,class:"btn-standard action-export",onClick:f}," Export ")):re("",!0)])]),u("main",q_,[mt(ys(vp))])]))}},X_=bo(Y_,[["__scopeId","data-v-defaf21e"]]);function mp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yp(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(n=>{const t=e[n],o=typeof t;(o==="object"||o==="function")&&!Object.isFrozen(t)&&yp(t)}),e}class jd{constructor(n){n.data===void 0&&(n.data={}),this.data=n.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function bp(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function ps(e,...n){const t=Object.create(null);for(const o in e)t[o]=e[o];return n.forEach(function(o){for(const s in o)t[s]=o[s]}),t}const J_="</span>",Bd=e=>!!e.scope,Q_=(e,{prefix:n})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const t=e.split(".");return[`${n}${t.shift()}`,...t.map((o,s)=>`${o}${"_".repeat(s+1)}`)].join(" ")}return`${n}${e}`};class e0{constructor(n,t){this.buffer="",this.classPrefix=t.classPrefix,n.walk(this)}addText(n){this.buffer+=bp(n)}openNode(n){if(!Bd(n))return;const t=Q_(n.scope,{prefix:this.classPrefix});this.span(t)}closeNode(n){Bd(n)&&(this.buffer+=J_)}value(){return this.buffer}span(n){this.buffer+=`<span class="${n}">`}}const Ud=(e={})=>{const n={children:[]};return Object.assign(n,e),n};class Uc{constructor(){this.rootNode=Ud(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(n){this.top.children.push(n)}openNode(n){const t=Ud({scope:n});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(n){return this.constructor._walk(n,this.rootNode)}static _walk(n,t){return typeof t=="string"?n.addText(t):t.children&&(n.openNode(t),t.children.forEach(o=>this._walk(n,o)),n.closeNode(t)),n}static _collapse(n){typeof n!="string"&&n.children&&(n.children.every(t=>typeof t=="string")?n.children=[n.children.join("")]:n.children.forEach(t=>{Uc._collapse(t)}))}}class t0 extends Uc{constructor(n){super(),this.options=n}addText(n){n!==""&&this.add(n)}startScope(n){this.openNode(n)}endScope(){this.closeNode()}__addSublanguage(n,t){const o=n.root;t&&(o.scope=`language:${t}`),this.add(o)}toHTML(){return new e0(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function pa(e){return e?typeof e=="string"?e:e.source:null}function _p(e){return Zs("(?=",e,")")}function n0(e){return Zs("(?:",e,")*")}function o0(e){return Zs("(?:",e,")?")}function Zs(...e){return e.map(t=>pa(t)).join("")}function s0(e){const n=e[e.length-1];return typeof n=="object"&&n.constructor===Object?(e.splice(e.length-1,1),n):{}}function Vc(...e){return"("+(s0(e).capture?"":"?:")+e.map(o=>pa(o)).join("|")+")"}function wp(e){return new RegExp(e.toString()+"|").exec("").length-1}function i0(e,n){const t=e&&e.exec(n);return t&&t.index===0}const a0=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Hc(e,{joinWith:n}){let t=0;return e.map(o=>{t+=1;const s=t;let i=pa(o),a="";for(;i.length>0;){const r=a0.exec(i);if(!r){a+=i;break}a+=i.substring(0,r.index),i=i.substring(r.index+r[0].length),r[0][0]==="\\"&&r[1]?a+="\\"+String(Number(r[1])+s):(a+=r[0],r[0]==="("&&t++)}return a}).map(o=>`(${o})`).join(n)}const r0=/\b\B/,Ep="[a-zA-Z]\\w*",zc="[a-zA-Z_]\\w*",Sp="\\b\\d+(\\.\\d+)?",xp="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",kp="\\b(0b[01]+)",l0="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",c0=(e={})=>{const n=/^#![ ]*\//;return e.binary&&(e.begin=Zs(n,/.*\b/,e.binary,/\b.*/)),ps({scope:"meta",begin:n,end:/$/,relevance:0,"on:begin":(t,o)=>{t.index!==0&&o.ignoreMatch()}},e)},ga={begin:"\\\\[\\s\\S]",relevance:0},u0={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ga]},d0={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ga]},f0={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},jr=function(e,n,t={}){const o=ps({scope:"comment",begin:e,end:n,contains:[]},t);o.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=Vc("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return o.contains.push({begin:Zs(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),o},h0=jr("//","$"),p0=jr("/\\*","\\*/"),g0=jr("#","$"),v0={scope:"number",begin:Sp,relevance:0},m0={scope:"number",begin:xp,relevance:0},y0={scope:"number",begin:kp,relevance:0},b0={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ga,{begin:/\[/,end:/\]/,relevance:0,contains:[ga]}]},_0={scope:"title",begin:Ep,relevance:0},w0={scope:"title",begin:zc,relevance:0},E0={begin:"\\.\\s*"+zc,relevance:0},S0=function(e){return Object.assign(e,{"on:begin":(n,t)=>{t.data._beginMatch=n[1]},"on:end":(n,t)=>{t.data._beginMatch!==n[1]&&t.ignoreMatch()}})};var qa=Object.freeze({__proto__:null,APOS_STRING_MODE:u0,BACKSLASH_ESCAPE:ga,BINARY_NUMBER_MODE:y0,BINARY_NUMBER_RE:kp,COMMENT:jr,C_BLOCK_COMMENT_MODE:p0,C_LINE_COMMENT_MODE:h0,C_NUMBER_MODE:m0,C_NUMBER_RE:xp,END_SAME_AS_BEGIN:S0,HASH_COMMENT_MODE:g0,IDENT_RE:Ep,MATCH_NOTHING_RE:r0,METHOD_GUARD:E0,NUMBER_MODE:v0,NUMBER_RE:Sp,PHRASAL_WORDS_MODE:f0,QUOTE_STRING_MODE:d0,REGEXP_MODE:b0,RE_STARTERS_RE:l0,SHEBANG:c0,TITLE_MODE:_0,UNDERSCORE_IDENT_RE:zc,UNDERSCORE_TITLE_MODE:w0});function x0(e,n){e.input[e.index-1]==="."&&n.ignoreMatch()}function k0(e,n){e.className!==void 0&&(e.scope=e.className,delete e.className)}function C0(e,n){n&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=x0,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function A0(e,n){Array.isArray(e.illegal)&&(e.illegal=Vc(...e.illegal))}function $0(e,n){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function I0(e,n){e.relevance===void 0&&(e.relevance=1)}const T0=(e,n)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const t=Object.assign({},e);Object.keys(e).forEach(o=>{delete e[o]}),e.keywords=t.keywords,e.begin=Zs(t.beforeMatch,_p(t.begin)),e.starts={relevance:0,contains:[Object.assign(t,{endsParent:!0})]},e.relevance=0,delete t.beforeMatch},R0=["of","and","for","in","not","or","if","then","parent","list","value"],F0="keyword";function Cp(e,n,t=F0){const o=Object.create(null);return typeof e=="string"?s(t,e.split(" ")):Array.isArray(e)?s(t,e):Object.keys(e).forEach(function(i){Object.assign(o,Cp(e[i],n,i))}),o;function s(i,a){n&&(a=a.map(r=>r.toLowerCase())),a.forEach(function(r){const d=r.split("|");o[d[0]]=[i,L0(d[0],d[1])]})}}function L0(e,n){return n?Number(n):O0(e)?0:1}function O0(e){return R0.includes(e.toLowerCase())}const Vd={},Hs=e=>{console.error(e)},Hd=(e,...n)=>{console.log(`WARN: ${e}`,...n)},si=(e,n)=>{Vd[`${e}/${n}`]||(console.log(`Deprecated as of ${e}. ${n}`),Vd[`${e}/${n}`]=!0)},br=new Error;function Ap(e,n,{key:t}){let o=0;const s=e[t],i={},a={};for(let r=1;r<=n.length;r++)a[r+o]=s[r],i[r+o]=!0,o+=wp(n[r-1]);e[t]=a,e[t]._emit=i,e[t]._multi=!0}function M0(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Hs("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),br;if(typeof e.beginScope!="object"||e.beginScope===null)throw Hs("beginScope must be object"),br;Ap(e,e.begin,{key:"beginScope"}),e.begin=Hc(e.begin,{joinWith:""})}}function P0(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Hs("skip, excludeEnd, returnEnd not compatible with endScope: {}"),br;if(typeof e.endScope!="object"||e.endScope===null)throw Hs("endScope must be object"),br;Ap(e,e.end,{key:"endScope"}),e.end=Hc(e.end,{joinWith:""})}}function N0(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function D0(e){N0(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),M0(e),P0(e)}function j0(e){function n(a,r){return new RegExp(pa(a),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(r?"g":""))}class t{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(r,d){d.position=this.position++,this.matchIndexes[this.matchAt]=d,this.regexes.push([d,r]),this.matchAt+=wp(r)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const r=this.regexes.map(d=>d[1]);this.matcherRe=n(Hc(r,{joinWith:"|"}),!0),this.lastIndex=0}exec(r){this.matcherRe.lastIndex=this.lastIndex;const d=this.matcherRe.exec(r);if(!d)return null;const c=d.findIndex((v,m)=>m>0&&v!==void 0),f=this.matchIndexes[c];return d.splice(0,c),Object.assign(d,f)}}class o{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(r){if(this.multiRegexes[r])return this.multiRegexes[r];const d=new t;return this.rules.slice(r).forEach(([c,f])=>d.addRule(c,f)),d.compile(),this.multiRegexes[r]=d,d}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(r,d){this.rules.push([r,d]),d.type==="begin"&&this.count++}exec(r){const d=this.getMatcher(this.regexIndex);d.lastIndex=this.lastIndex;let c=d.exec(r);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const f=this.getMatcher(0);f.lastIndex=this.lastIndex+1,c=f.exec(r)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function s(a){const r=new o;return a.contains.forEach(d=>r.addRule(d.begin,{rule:d,type:"begin"})),a.terminatorEnd&&r.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&r.addRule(a.illegal,{type:"illegal"}),r}function i(a,r){const d=a;if(a.isCompiled)return d;[k0,$0,D0,T0].forEach(f=>f(a,r)),e.compilerExtensions.forEach(f=>f(a,r)),a.__beforeBegin=null,[C0,A0,I0].forEach(f=>f(a,r)),a.isCompiled=!0;let c=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),c=a.keywords.$pattern,delete a.keywords.$pattern),c=c||/\w+/,a.keywords&&(a.keywords=Cp(a.keywords,e.case_insensitive)),d.keywordPatternRe=n(c,!0),r&&(a.begin||(a.begin=/\B|\b/),d.beginRe=n(d.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(d.endRe=n(d.end)),d.terminatorEnd=pa(d.end)||"",a.endsWithParent&&r.terminatorEnd&&(d.terminatorEnd+=(a.end?"|":"")+r.terminatorEnd)),a.illegal&&(d.illegalRe=n(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(f){return B0(f==="self"?a:f)})),a.contains.forEach(function(f){i(f,d)}),a.starts&&i(a.starts,r),d.matcher=s(d),d}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=ps(e.classNameAliases||{}),i(e)}function $p(e){return e?e.endsWithParent||$p(e.starts):!1}function B0(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(n){return ps(e,{variants:null},n)})),e.cachedVariants?e.cachedVariants:$p(e)?ps(e,{starts:e.starts?ps(e.starts):null}):Object.isFrozen(e)?ps(e):e}var U0="11.11.1";class V0 extends Error{constructor(n,t){super(n),this.name="HTMLInjectionError",this.html=t}}const $l=bp,zd=ps,Wd=Symbol("nomatch"),H0=7,Ip=function(e){const n=Object.create(null),t=Object.create(null),o=[];let s=!0;const i="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let r={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:t0};function d(Q){return r.noHighlightRe.test(Q)}function c(Q){let le=Q.className+" ";le+=Q.parentNode?Q.parentNode.className:"";const Se=r.languageDetectRe.exec(le);if(Se){const Xe=me(Se[1]);return Xe||(Hd(i.replace("{}",Se[1])),Hd("Falling back to no-highlight mode for this block.",Q)),Xe?Se[1]:"no-highlight"}return le.split(/\s+/).find(Xe=>d(Xe)||me(Xe))}function f(Q,le,Se){let Xe="",st="";typeof le=="object"?(Xe=Q,Se=le.ignoreIllegals,st=le.language):(si("10.7.0","highlight(lang, code, ...args) has been deprecated."),si("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),st=Q,Xe=le),Se===void 0&&(Se=!0);const lt={code:Xe,language:st};je("before:highlight",lt);const ut=lt.result?lt.result:v(lt.language,lt.code,Se);return ut.code=lt.code,je("after:highlight",ut),ut}function v(Q,le,Se,Xe){const st=Object.create(null);function lt(ne,fe){return ne.keywords[fe]}function ut(){if(!T.keywords){oe.addText(X);return}let ne=0;T.keywordPatternRe.lastIndex=0;let fe=T.keywordPatternRe.exec(X),_e="";for(;fe;){_e+=X.substring(ne,fe.index);const Be=y.case_insensitive?fe[0].toLowerCase():fe[0],Je=lt(T,Be);if(Je){const[Ge,it]=Je;if(oe.addText(_e),_e="",st[Be]=(st[Be]||0)+1,st[Be]<=H0&&(ge+=it),Ge.startsWith("_"))_e+=fe[0];else{const yt=y.classNameAliases[Ge]||Ge;Ze(fe[0],yt)}}else _e+=fe[0];ne=T.keywordPatternRe.lastIndex,fe=T.keywordPatternRe.exec(X)}_e+=X.substring(ne),oe.addText(_e)}function Et(){if(X==="")return;let ne=null;if(typeof T.subLanguage=="string"){if(!n[T.subLanguage]){oe.addText(X);return}ne=v(T.subLanguage,X,!0,Z[T.subLanguage]),Z[T.subLanguage]=ne._top}else ne=g(X,T.subLanguage.length?T.subLanguage:null);T.relevance>0&&(ge+=ne.relevance),oe.__addSublanguage(ne._emitter,ne.language)}function Ye(){T.subLanguage!=null?Et():ut(),X=""}function Ze(ne,fe){ne!==""&&(oe.startScope(fe),oe.addText(ne),oe.endScope())}function kt(ne,fe){let _e=1;const Be=fe.length-1;for(;_e<=Be;){if(!ne._emit[_e]){_e++;continue}const Je=y.classNameAliases[ne[_e]]||ne[_e],Ge=fe[_e];Je?Ze(Ge,Je):(X=Ge,ut(),X=""),_e++}}function ae(ne,fe){return ne.scope&&typeof ne.scope=="string"&&oe.openNode(y.classNameAliases[ne.scope]||ne.scope),ne.beginScope&&(ne.beginScope._wrap?(Ze(X,y.classNameAliases[ne.beginScope._wrap]||ne.beginScope._wrap),X=""):ne.beginScope._multi&&(kt(ne.beginScope,fe),X="")),T=Object.create(ne,{parent:{value:T}}),T}function ke(ne,fe,_e){let Be=i0(ne.endRe,_e);if(Be){if(ne["on:end"]){const Je=new jd(ne);ne["on:end"](fe,Je),Je.isMatchIgnored&&(Be=!1)}if(Be){for(;ne.endsParent&&ne.parent;)ne=ne.parent;return ne}}if(ne.endsWithParent)return ke(ne.parent,fe,_e)}function Ce(ne){return T.matcher.regexIndex===0?(X+=ne[0],1):(Pe=!0,0)}function He(ne){const fe=ne[0],_e=ne.rule,Be=new jd(_e),Je=[_e.__beforeBegin,_e["on:begin"]];for(const Ge of Je)if(Ge&&(Ge(ne,Be),Be.isMatchIgnored))return Ce(fe);return _e.skip?X+=fe:(_e.excludeBegin&&(X+=fe),Ye(),!_e.returnBegin&&!_e.excludeBegin&&(X=fe)),ae(_e,ne),_e.returnBegin?0:fe.length}function tt(ne){const fe=ne[0],_e=le.substring(ne.index),Be=ke(T,ne,_e);if(!Be)return Wd;const Je=T;T.endScope&&T.endScope._wrap?(Ye(),Ze(fe,T.endScope._wrap)):T.endScope&&T.endScope._multi?(Ye(),kt(T.endScope,ne)):Je.skip?X+=fe:(Je.returnEnd||Je.excludeEnd||(X+=fe),Ye(),Je.excludeEnd&&(X=fe));do T.scope&&oe.closeNode(),!T.skip&&!T.subLanguage&&(ge+=T.relevance),T=T.parent;while(T!==Be.parent);return Be.starts&&ae(Be.starts,ne),Je.returnEnd?0:fe.length}function $(){const ne=[];for(let fe=T;fe!==y;fe=fe.parent)fe.scope&&ne.unshift(fe.scope);ne.forEach(fe=>oe.openNode(fe))}let O={};function W(ne,fe){const _e=fe&&fe[0];if(X+=ne,_e==null)return Ye(),0;if(O.type==="begin"&&fe.type==="end"&&O.index===fe.index&&_e===""){if(X+=le.slice(fe.index,fe.index+1),!s){const Be=new Error(`0 width match regex (${Q})`);throw Be.languageName=Q,Be.badRule=O.rule,Be}return 1}if(O=fe,fe.type==="begin")return He(fe);if(fe.type==="illegal"&&!Se){const Be=new Error('Illegal lexeme "'+_e+'" for mode "'+(T.scope||"<unnamed>")+'"');throw Be.mode=T,Be}else if(fe.type==="end"){const Be=tt(fe);if(Be!==Wd)return Be}if(fe.type==="illegal"&&_e==="")return X+=`
`,1;if(ve>1e5&&ve>fe.index*3)throw new Error("potential infinite loop, way more iterations than matches");return X+=_e,_e.length}const y=me(Q);if(!y)throw Hs(i.replace("{}",Q)),new Error('Unknown language: "'+Q+'"');const k=j0(y);let _="",T=Xe||k;const Z={},oe=new r.__emitter(r);$();let X="",ge=0,ce=0,ve=0,Pe=!1;try{if(y.__emitTokens)y.__emitTokens(le,oe);else{for(T.matcher.considerAll();;){ve++,Pe?Pe=!1:T.matcher.considerAll(),T.matcher.lastIndex=ce;const ne=T.matcher.exec(le);if(!ne)break;const fe=le.substring(ce,ne.index),_e=W(fe,ne);ce=ne.index+_e}W(le.substring(ce))}return oe.finalize(),_=oe.toHTML(),{language:Q,value:_,relevance:ge,illegal:!1,_emitter:oe,_top:T}}catch(ne){if(ne.message&&ne.message.includes("Illegal"))return{language:Q,value:$l(le),illegal:!0,relevance:0,_illegalBy:{message:ne.message,index:ce,context:le.slice(ce-100,ce+100),mode:ne.mode,resultSoFar:_},_emitter:oe};if(s)return{language:Q,value:$l(le),illegal:!1,relevance:0,errorRaised:ne,_emitter:oe,_top:T};throw ne}}function m(Q){const le={value:$l(Q),illegal:!1,relevance:0,_top:a,_emitter:new r.__emitter(r)};return le._emitter.addText(Q),le}function g(Q,le){le=le||r.languages||Object.keys(n);const Se=m(Q),Xe=le.filter(me).filter(xe).map(Ye=>v(Ye,Q,!1));Xe.unshift(Se);const st=Xe.sort((Ye,Ze)=>{if(Ye.relevance!==Ze.relevance)return Ze.relevance-Ye.relevance;if(Ye.language&&Ze.language){if(me(Ye.language).supersetOf===Ze.language)return 1;if(me(Ze.language).supersetOf===Ye.language)return-1}return 0}),[lt,ut]=st,Et=lt;return Et.secondBest=ut,Et}function I(Q,le,Se){const Xe=le&&t[le]||Se;Q.classList.add("hljs"),Q.classList.add(`language-${Xe}`)}function U(Q){let le=null;const Se=c(Q);if(d(Se))return;if(je("before:highlightElement",{el:Q,language:Se}),Q.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",Q);return}if(Q.children.length>0&&(r.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Q)),r.throwUnescapedHTML))throw new V0("One of your code blocks includes unescaped HTML.",Q.innerHTML);le=Q;const Xe=le.textContent,st=Se?f(Xe,{language:Se,ignoreIllegals:!0}):g(Xe);Q.innerHTML=st.value,Q.dataset.highlighted="yes",I(Q,Se,st.language),Q.result={language:st.language,re:st.relevance,relevance:st.relevance},st.secondBest&&(Q.secondBest={language:st.secondBest.language,relevance:st.secondBest.relevance}),je("after:highlightElement",{el:Q,result:st,text:Xe})}function x(Q){r=zd(r,Q)}const R=()=>{M(),si("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function B(){M(),si("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let H=!1;function M(){function Q(){M()}if(document.readyState==="loading"){H||window.addEventListener("DOMContentLoaded",Q,!1),H=!0;return}document.querySelectorAll(r.cssSelector).forEach(U)}function te(Q,le){let Se=null;try{Se=le(e)}catch(Xe){if(Hs("Language definition for '{}' could not be registered.".replace("{}",Q)),s)Hs(Xe);else throw Xe;Se=a}Se.name||(Se.name=Q),n[Q]=Se,Se.rawDefinition=le.bind(null,e),Se.aliases&&Ae(Se.aliases,{languageName:Q})}function we(Q){delete n[Q];for(const le of Object.keys(t))t[le]===Q&&delete t[le]}function de(){return Object.keys(n)}function me(Q){return Q=(Q||"").toLowerCase(),n[Q]||n[t[Q]]}function Ae(Q,{languageName:le}){typeof Q=="string"&&(Q=[Q]),Q.forEach(Se=>{t[Se.toLowerCase()]=le})}function xe(Q){const le=me(Q);return le&&!le.disableAutodetect}function Me(Q){Q["before:highlightBlock"]&&!Q["before:highlightElement"]&&(Q["before:highlightElement"]=le=>{Q["before:highlightBlock"](Object.assign({block:le.el},le))}),Q["after:highlightBlock"]&&!Q["after:highlightElement"]&&(Q["after:highlightElement"]=le=>{Q["after:highlightBlock"](Object.assign({block:le.el},le))})}function Ke(Q){Me(Q),o.push(Q)}function et(Q){const le=o.indexOf(Q);le!==-1&&o.splice(le,1)}function je(Q,le){const Se=Q;o.forEach(function(Xe){Xe[Se]&&Xe[Se](le)})}function De(Q){return si("10.7.0","highlightBlock will be removed entirely in v12.0"),si("10.7.0","Please use highlightElement now."),U(Q)}Object.assign(e,{highlight:f,highlightAuto:g,highlightAll:M,highlightElement:U,highlightBlock:De,configure:x,initHighlighting:R,initHighlightingOnLoad:B,registerLanguage:te,unregisterLanguage:we,listLanguages:de,getLanguage:me,registerAliases:Ae,autoDetection:xe,inherit:zd,addPlugin:Ke,removePlugin:et}),e.debugMode=function(){s=!1},e.safeMode=function(){s=!0},e.versionString=U0,e.regex={concat:Zs,lookahead:_p,either:Vc,optional:o0,anyNumberOfTimes:n0};for(const Q in qa)typeof qa[Q]=="object"&&yp(qa[Q]);return Object.assign(e,qa),e},xi=Ip({});xi.newInstance=()=>Ip({});var z0=xi;xi.HighlightJS=xi;xi.default=xi;const Gd=mp(z0);function W0(e){const n="true false yes no null",t="[\\w#;/?:@&=+$,.~*'()[\\]]+",o={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},s={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},a={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,s]},r=e.inherit(a,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),m={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},g={end:",",endsWithParent:!0,excludeEnd:!0,keywords:n,relevance:0},I={begin:/\{/,end:/\}/,contains:[g],illegal:"\\n",relevance:0},U={begin:"\\[",end:"\\]",contains:[g],illegal:"\\n",relevance:0},x=[o,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+t},{className:"type",begin:"!<"+t+">"},{className:"type",begin:"!"+t},{className:"type",begin:"!!"+t},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:n,keywords:{literal:n}},m,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},I,U,i,a],R=[...x];return R.pop(),R.push(r),g.contains=R,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:x}}const G0="modulepreload",K0=function(e,n){return new URL(e,n).href},Kd={},ho=function(n,t,o){let s=Promise.resolve();if(t&&t.length>0){const a=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),d=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=K0(c,o),c in Kd)return;Kd[c]=!0;const f=c.endsWith(".css"),v=f?'[rel="stylesheet"]':"";if(!!o)for(let I=a.length-1;I>=0;I--){const U=a[I];if(U.href===c&&(!f||U.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${v}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":G0,f||(g.as="script"),g.crossOrigin="",g.href=c,d&&g.setAttribute("nonce",d),document.head.appendChild(g),f)return new Promise((I,U)=>{g.addEventListener("load",I),g.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=a,window.dispatchEvent(r),!r.defaultPrevented)throw a}return s.then(a=>{for(const r of a||[])r.status==="rejected"&&i(r.reason);return n().catch(i)})};class En extends Error{}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z0=4,Zd=0,qd=1,q0=2;function $i(e){let n=e.length;for(;--n>=0;)e[n]=0}const Y0=0,Tp=1,X0=2,J0=3,Q0=258,Wc=29,$a=256,va=$a+1+Wc,mi=30,Gc=19,Rp=2*va+1,Ds=15,Il=16,e1=7,Kc=256,Fp=16,Lp=17,Op=18,dc=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),rr=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),t1=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Mp=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n1=512,Ho=new Array((va+2)*2);$i(Ho);const ia=new Array(mi*2);$i(ia);const ma=new Array(n1);$i(ma);const ya=new Array(Q0-J0+1);$i(ya);const Zc=new Array(Wc);$i(Zc);const _r=new Array(mi);$i(_r);function Tl(e,n,t,o,s){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=o,this.max_length=s,this.has_stree=e&&e.length}let Pp,Np,Dp;function Rl(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}const jp=e=>e<256?ma[e]:ma[256+(e>>>7)],ba=(e,n)=>{e.pending_buf[e.pending++]=n&255,e.pending_buf[e.pending++]=n>>>8&255},Pn=(e,n,t)=>{e.bi_valid>Il-t?(e.bi_buf|=n<<e.bi_valid&65535,ba(e,e.bi_buf),e.bi_buf=n>>Il-e.bi_valid,e.bi_valid+=t-Il):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},$o=(e,n,t)=>{Pn(e,t[n*2],t[n*2+1])},Bp=(e,n)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--n>0);return t>>>1},o1=e=>{e.bi_valid===16?(ba(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},s1=(e,n)=>{const t=n.dyn_tree,o=n.max_code,s=n.stat_desc.static_tree,i=n.stat_desc.has_stree,a=n.stat_desc.extra_bits,r=n.stat_desc.extra_base,d=n.stat_desc.max_length;let c,f,v,m,g,I,U=0;for(m=0;m<=Ds;m++)e.bl_count[m]=0;for(t[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<Rp;c++)f=e.heap[c],m=t[t[f*2+1]*2+1]+1,m>d&&(m=d,U++),t[f*2+1]=m,!(f>o)&&(e.bl_count[m]++,g=0,f>=r&&(g=a[f-r]),I=t[f*2],e.opt_len+=I*(m+g),i&&(e.static_len+=I*(s[f*2+1]+g)));if(U!==0){do{for(m=d-1;e.bl_count[m]===0;)m--;e.bl_count[m]--,e.bl_count[m+1]+=2,e.bl_count[d]--,U-=2}while(U>0);for(m=d;m!==0;m--)for(f=e.bl_count[m];f!==0;)v=e.heap[--c],!(v>o)&&(t[v*2+1]!==m&&(e.opt_len+=(m-t[v*2+1])*t[v*2],t[v*2+1]=m),f--)}},Up=(e,n,t)=>{const o=new Array(Ds+1);let s=0,i,a;for(i=1;i<=Ds;i++)s=s+t[i-1]<<1,o[i]=s;for(a=0;a<=n;a++){let r=e[a*2+1];r!==0&&(e[a*2]=Bp(o[r]++,r))}},i1=()=>{let e,n,t,o,s;const i=new Array(Ds+1);for(t=0,o=0;o<Wc-1;o++)for(Zc[o]=t,e=0;e<1<<dc[o];e++)ya[t++]=o;for(ya[t-1]=o,s=0,o=0;o<16;o++)for(_r[o]=s,e=0;e<1<<rr[o];e++)ma[s++]=o;for(s>>=7;o<mi;o++)for(_r[o]=s<<7,e=0;e<1<<rr[o]-7;e++)ma[256+s++]=o;for(n=0;n<=Ds;n++)i[n]=0;for(e=0;e<=143;)Ho[e*2+1]=8,e++,i[8]++;for(;e<=255;)Ho[e*2+1]=9,e++,i[9]++;for(;e<=279;)Ho[e*2+1]=7,e++,i[7]++;for(;e<=287;)Ho[e*2+1]=8,e++,i[8]++;for(Up(Ho,va+1,i),e=0;e<mi;e++)ia[e*2+1]=5,ia[e*2]=Bp(e,5);Pp=new Tl(Ho,dc,$a+1,va,Ds),Np=new Tl(ia,rr,0,mi,Ds),Dp=new Tl(new Array(0),t1,0,Gc,e1)},Vp=e=>{let n;for(n=0;n<va;n++)e.dyn_ltree[n*2]=0;for(n=0;n<mi;n++)e.dyn_dtree[n*2]=0;for(n=0;n<Gc;n++)e.bl_tree[n*2]=0;e.dyn_ltree[Kc*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Hp=e=>{e.bi_valid>8?ba(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Yd=(e,n,t,o)=>{const s=n*2,i=t*2;return e[s]<e[i]||e[s]===e[i]&&o[n]<=o[t]},Fl=(e,n,t)=>{const o=e.heap[t];let s=t<<1;for(;s<=e.heap_len&&(s<e.heap_len&&Yd(n,e.heap[s+1],e.heap[s],e.depth)&&s++,!Yd(n,o,e.heap[s],e.depth));)e.heap[t]=e.heap[s],t=s,s<<=1;e.heap[t]=o},Xd=(e,n,t)=>{let o,s,i=0,a,r;if(e.sym_next!==0)do o=e.pending_buf[e.sym_buf+i++]&255,o+=(e.pending_buf[e.sym_buf+i++]&255)<<8,s=e.pending_buf[e.sym_buf+i++],o===0?$o(e,s,n):(a=ya[s],$o(e,a+$a+1,n),r=dc[a],r!==0&&(s-=Zc[a],Pn(e,s,r)),o--,a=jp(o),$o(e,a,t),r=rr[a],r!==0&&(o-=_r[a],Pn(e,o,r)));while(i<e.sym_next);$o(e,Kc,n)},fc=(e,n)=>{const t=n.dyn_tree,o=n.stat_desc.static_tree,s=n.stat_desc.has_stree,i=n.stat_desc.elems;let a,r,d=-1,c;for(e.heap_len=0,e.heap_max=Rp,a=0;a<i;a++)t[a*2]!==0?(e.heap[++e.heap_len]=d=a,e.depth[a]=0):t[a*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=d<2?++d:0,t[c*2]=1,e.depth[c]=0,e.opt_len--,s&&(e.static_len-=o[c*2+1]);for(n.max_code=d,a=e.heap_len>>1;a>=1;a--)Fl(e,t,a);c=i;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Fl(e,t,1),r=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=r,t[c*2]=t[a*2]+t[r*2],e.depth[c]=(e.depth[a]>=e.depth[r]?e.depth[a]:e.depth[r])+1,t[a*2+1]=t[r*2+1]=c,e.heap[1]=c++,Fl(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],s1(e,n),Up(t,d,e.bl_count)},Jd=(e,n,t)=>{let o,s=-1,i,a=n[0*2+1],r=0,d=7,c=4;for(a===0&&(d=138,c=3),n[(t+1)*2+1]=65535,o=0;o<=t;o++)i=a,a=n[(o+1)*2+1],!(++r<d&&i===a)&&(r<c?e.bl_tree[i*2]+=r:i!==0?(i!==s&&e.bl_tree[i*2]++,e.bl_tree[Fp*2]++):r<=10?e.bl_tree[Lp*2]++:e.bl_tree[Op*2]++,r=0,s=i,a===0?(d=138,c=3):i===a?(d=6,c=3):(d=7,c=4))},Qd=(e,n,t)=>{let o,s=-1,i,a=n[0*2+1],r=0,d=7,c=4;for(a===0&&(d=138,c=3),o=0;o<=t;o++)if(i=a,a=n[(o+1)*2+1],!(++r<d&&i===a)){if(r<c)do $o(e,i,e.bl_tree);while(--r!==0);else i!==0?(i!==s&&($o(e,i,e.bl_tree),r--),$o(e,Fp,e.bl_tree),Pn(e,r-3,2)):r<=10?($o(e,Lp,e.bl_tree),Pn(e,r-3,3)):($o(e,Op,e.bl_tree),Pn(e,r-11,7));r=0,s=i,a===0?(d=138,c=3):i===a?(d=6,c=3):(d=7,c=4)}},a1=e=>{let n;for(Jd(e,e.dyn_ltree,e.l_desc.max_code),Jd(e,e.dyn_dtree,e.d_desc.max_code),fc(e,e.bl_desc),n=Gc-1;n>=3&&e.bl_tree[Mp[n]*2+1]===0;n--);return e.opt_len+=3*(n+1)+5+5+4,n},r1=(e,n,t,o)=>{let s;for(Pn(e,n-257,5),Pn(e,t-1,5),Pn(e,o-4,4),s=0;s<o;s++)Pn(e,e.bl_tree[Mp[s]*2+1],3);Qd(e,e.dyn_ltree,n-1),Qd(e,e.dyn_dtree,t-1)},l1=e=>{let n=4093624447,t;for(t=0;t<=31;t++,n>>>=1)if(n&1&&e.dyn_ltree[t*2]!==0)return Zd;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return qd;for(t=32;t<$a;t++)if(e.dyn_ltree[t*2]!==0)return qd;return Zd};let ef=!1;const c1=e=>{ef||(i1(),ef=!0),e.l_desc=new Rl(e.dyn_ltree,Pp),e.d_desc=new Rl(e.dyn_dtree,Np),e.bl_desc=new Rl(e.bl_tree,Dp),e.bi_buf=0,e.bi_valid=0,Vp(e)},zp=(e,n,t,o)=>{Pn(e,(Y0<<1)+(o?1:0),3),Hp(e),ba(e,t),ba(e,~t),t&&e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t},u1=e=>{Pn(e,Tp<<1,3),$o(e,Kc,Ho),o1(e)},d1=(e,n,t,o)=>{let s,i,a=0;e.level>0?(e.strm.data_type===q0&&(e.strm.data_type=l1(e)),fc(e,e.l_desc),fc(e,e.d_desc),a=a1(e),s=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=s&&(s=i)):s=i=t+5,t+4<=s&&n!==-1?zp(e,n,t,o):e.strategy===Z0||i===s?(Pn(e,(Tp<<1)+(o?1:0),3),Xd(e,Ho,ia)):(Pn(e,(X0<<1)+(o?1:0),3),r1(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),Xd(e,e.dyn_ltree,e.dyn_dtree)),Vp(e),o&&Hp(e)},f1=(e,n,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,n===0?e.dyn_ltree[t*2]++:(e.matches++,n--,e.dyn_ltree[(ya[t]+$a+1)*2]++,e.dyn_dtree[jp(n)*2]++),e.sym_next===e.sym_end);var h1=c1,p1=zp,g1=d1,v1=f1,m1=u1,y1={_tr_init:h1,_tr_stored_block:p1,_tr_flush_block:g1,_tr_tally:v1,_tr_align:m1};const b1=(e,n,t,o)=>{let s=e&65535|0,i=e>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do s=s+n[o++]|0,i=i+s|0;while(--a);s%=65521,i%=65521}return s|i<<16|0};var _a=b1;const _1=()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var o=0;o<8;o++)e=e&1?3988292384^e>>>1:e>>>1;n[t]=e}return n},w1=new Uint32Array(_1()),E1=(e,n,t,o)=>{const s=w1,i=o+t;e^=-1;for(let a=o;a<i;a++)e=e>>>8^s[(e^n[a])&255];return e^-1};var dn=E1,ki={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Br={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:S1,_tr_stored_block:hc,_tr_flush_block:x1,_tr_tally:bs,_tr_align:k1}=y1,{Z_NO_FLUSH:_s,Z_PARTIAL_FLUSH:C1,Z_FULL_FLUSH:A1,Z_FINISH:to,Z_BLOCK:tf,Z_OK:pn,Z_STREAM_END:nf,Z_STREAM_ERROR:Ro,Z_DATA_ERROR:$1,Z_BUF_ERROR:Ll,Z_DEFAULT_COMPRESSION:I1,Z_FILTERED:T1,Z_HUFFMAN_ONLY:Ya,Z_RLE:R1,Z_FIXED:F1,Z_DEFAULT_STRATEGY:L1,Z_UNKNOWN:O1,Z_DEFLATED:Ur}=Br,M1=9,P1=15,N1=8,D1=29,j1=256,pc=j1+1+D1,B1=30,U1=19,V1=2*pc+1,H1=15,xt=3,gs=258,Fo=gs+xt+1,z1=32,Ci=42,qc=57,gc=69,vc=73,mc=91,yc=103,js=113,Zi=666,Cn=1,Ii=2,Ws=3,Ti=4,W1=3,Bs=(e,n)=>(e.msg=ki[n],n),of=e=>e*2-(e>4?9:0),hs=e=>{let n=e.length;for(;--n>=0;)e[n]=0},G1=e=>{let n,t,o,s=e.w_size;n=e.hash_size,o=n;do t=e.head[--o],e.head[o]=t>=s?t-s:0;while(--n);n=s,o=n;do t=e.prev[--o],e.prev[o]=t>=s?t-s:0;while(--n)};let K1=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask,ws=K1;const Kn=e=>{const n=e.state;let t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))},Yn=(e,n)=>{x1(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,Kn(e.strm)},Rt=(e,n)=>{e.pending_buf[e.pending++]=n},Wi=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=n&255},bc=(e,n,t,o)=>{let s=e.avail_in;return s>o&&(s=o),s===0?0:(e.avail_in-=s,n.set(e.input.subarray(e.next_in,e.next_in+s),t),e.state.wrap===1?e.adler=_a(e.adler,n,s,t):e.state.wrap===2&&(e.adler=dn(e.adler,n,s,t)),e.next_in+=s,e.total_in+=s,s)},Wp=(e,n)=>{let t=e.max_chain_length,o=e.strstart,s,i,a=e.prev_length,r=e.nice_match;const d=e.strstart>e.w_size-Fo?e.strstart-(e.w_size-Fo):0,c=e.window,f=e.w_mask,v=e.prev,m=e.strstart+gs;let g=c[o+a-1],I=c[o+a];e.prev_length>=e.good_match&&(t>>=2),r>e.lookahead&&(r=e.lookahead);do if(s=n,!(c[s+a]!==I||c[s+a-1]!==g||c[s]!==c[o]||c[++s]!==c[o+1])){o+=2,s++;do;while(c[++o]===c[++s]&&c[++o]===c[++s]&&c[++o]===c[++s]&&c[++o]===c[++s]&&c[++o]===c[++s]&&c[++o]===c[++s]&&c[++o]===c[++s]&&c[++o]===c[++s]&&o<m);if(i=gs-(m-o),o=m-gs,i>a){if(e.match_start=n,a=i,i>=r)break;g=c[o+a-1],I=c[o+a]}}while((n=v[n&f])>d&&--t!==0);return a<=e.lookahead?a:e.lookahead},Ai=e=>{const n=e.w_size;let t,o,s;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-Fo)&&(e.window.set(e.window.subarray(n,n+n-o),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),G1(e),o+=n),e.strm.avail_in===0)break;if(t=bc(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=t,e.lookahead+e.insert>=xt)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=ws(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=ws(e,e.ins_h,e.window[s+xt-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<xt)););}while(e.lookahead<Fo&&e.strm.avail_in!==0)},Gp=(e,n)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o,s,i,a=0,r=e.strm.avail_in;do{if(o=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,s=e.strstart-e.block_start,o>s+e.strm.avail_in&&(o=s+e.strm.avail_in),o>i&&(o=i),o<t&&(o===0&&n!==to||n===_s||o!==s+e.strm.avail_in)))break;a=n===to&&o===s+e.strm.avail_in?1:0,hc(e,0,0,a),e.pending_buf[e.pending-4]=o,e.pending_buf[e.pending-3]=o>>8,e.pending_buf[e.pending-2]=~o,e.pending_buf[e.pending-1]=~o>>8,Kn(e.strm),s&&(s>o&&(s=o),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,o-=s),o&&(bc(e.strm,e.strm.output,e.strm.next_out,o),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o)}while(a===0);return r-=e.strm.avail_in,r&&(r>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=r&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-r,e.strm.next_in),e.strstart),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?Ti:n!==_s&&n!==to&&e.strm.avail_in===0&&e.strstart===e.block_start?Ii:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(bc(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,t=i>e.w_size?e.w_size:i,s=e.strstart-e.block_start,(s>=t||(s||n===to)&&n!==_s&&e.strm.avail_in===0&&s<=i)&&(o=s>i?i:s,a=n===to&&e.strm.avail_in===0&&o===s?1:0,hc(e,e.block_start,o,a),e.block_start+=o,Kn(e.strm)),a?Ws:Cn)},Ol=(e,n)=>{let t,o;for(;;){if(e.lookahead<Fo){if(Ai(e),e.lookahead<Fo&&n===_s)return Cn;if(e.lookahead===0)break}if(t=0,e.lookahead>=xt&&(e.ins_h=ws(e,e.ins_h,e.window[e.strstart+xt-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Fo&&(e.match_length=Wp(e,t)),e.match_length>=xt)if(o=bs(e,e.strstart-e.match_start,e.match_length-xt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=xt){e.match_length--;do e.strstart++,e.ins_h=ws(e,e.ins_h,e.window[e.strstart+xt-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ws(e,e.ins_h,e.window[e.strstart+1]);else o=bs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(Yn(e,!1),e.strm.avail_out===0))return Cn}return e.insert=e.strstart<xt-1?e.strstart:xt-1,n===to?(Yn(e,!0),e.strm.avail_out===0?Ws:Ti):e.sym_next&&(Yn(e,!1),e.strm.avail_out===0)?Cn:Ii},ii=(e,n)=>{let t,o,s;for(;;){if(e.lookahead<Fo){if(Ai(e),e.lookahead<Fo&&n===_s)return Cn;if(e.lookahead===0)break}if(t=0,e.lookahead>=xt&&(e.ins_h=ws(e,e.ins_h,e.window[e.strstart+xt-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=xt-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Fo&&(e.match_length=Wp(e,t),e.match_length<=5&&(e.strategy===T1||e.match_length===xt&&e.strstart-e.match_start>4096)&&(e.match_length=xt-1)),e.prev_length>=xt&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-xt,o=bs(e,e.strstart-1-e.prev_match,e.prev_length-xt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=ws(e,e.ins_h,e.window[e.strstart+xt-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=xt-1,e.strstart++,o&&(Yn(e,!1),e.strm.avail_out===0))return Cn}else if(e.match_available){if(o=bs(e,0,e.window[e.strstart-1]),o&&Yn(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Cn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=bs(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<xt-1?e.strstart:xt-1,n===to?(Yn(e,!0),e.strm.avail_out===0?Ws:Ti):e.sym_next&&(Yn(e,!1),e.strm.avail_out===0)?Cn:Ii},Z1=(e,n)=>{let t,o,s,i;const a=e.window;for(;;){if(e.lookahead<=gs){if(Ai(e),e.lookahead<=gs&&n===_s)return Cn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=xt&&e.strstart>0&&(s=e.strstart-1,o=a[s],o===a[++s]&&o===a[++s]&&o===a[++s])){i=e.strstart+gs;do;while(o===a[++s]&&o===a[++s]&&o===a[++s]&&o===a[++s]&&o===a[++s]&&o===a[++s]&&o===a[++s]&&o===a[++s]&&s<i);e.match_length=gs-(i-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=xt?(t=bs(e,1,e.match_length-xt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=bs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(Yn(e,!1),e.strm.avail_out===0))return Cn}return e.insert=0,n===to?(Yn(e,!0),e.strm.avail_out===0?Ws:Ti):e.sym_next&&(Yn(e,!1),e.strm.avail_out===0)?Cn:Ii},q1=(e,n)=>{let t;for(;;){if(e.lookahead===0&&(Ai(e),e.lookahead===0)){if(n===_s)return Cn;break}if(e.match_length=0,t=bs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(Yn(e,!1),e.strm.avail_out===0))return Cn}return e.insert=0,n===to?(Yn(e,!0),e.strm.avail_out===0?Ws:Ti):e.sym_next&&(Yn(e,!1),e.strm.avail_out===0)?Cn:Ii};function ko(e,n,t,o,s){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=o,this.func=s}const qi=[new ko(0,0,0,0,Gp),new ko(4,4,8,4,Ol),new ko(4,5,16,8,Ol),new ko(4,6,32,32,Ol),new ko(4,4,16,16,ii),new ko(8,16,32,32,ii),new ko(8,16,128,128,ii),new ko(8,32,128,256,ii),new ko(32,128,258,1024,ii),new ko(32,258,258,4096,ii)],Y1=e=>{e.window_size=2*e.w_size,hs(e.head),e.max_lazy_match=qi[e.level].max_lazy,e.good_match=qi[e.level].good_length,e.nice_match=qi[e.level].nice_length,e.max_chain_length=qi[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=xt-1,e.match_available=0,e.ins_h=0};function X1(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ur,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(V1*2),this.dyn_dtree=new Uint16Array((2*B1+1)*2),this.bl_tree=new Uint16Array((2*U1+1)*2),hs(this.dyn_ltree),hs(this.dyn_dtree),hs(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(H1+1),this.heap=new Uint16Array(2*pc+1),hs(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*pc+1),hs(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ia=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.status!==Ci&&n.status!==qc&&n.status!==gc&&n.status!==vc&&n.status!==mc&&n.status!==yc&&n.status!==js&&n.status!==Zi?1:0},Kp=e=>{if(Ia(e))return Bs(e,Ro);e.total_in=e.total_out=0,e.data_type=O1;const n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?qc:n.wrap?Ci:js,e.adler=n.wrap===2?0:1,n.last_flush=-2,S1(n),pn},Zp=e=>{const n=Kp(e);return n===pn&&Y1(e.state),n},J1=(e,n)=>Ia(e)||e.state.wrap!==2?Ro:(e.state.gzhead=n,pn),qp=(e,n,t,o,s,i)=>{if(!e)return Ro;let a=1;if(n===I1&&(n=6),o<0?(a=0,o=-o):o>15&&(a=2,o-=16),s<1||s>M1||t!==Ur||o<8||o>15||n<0||n>9||i<0||i>F1||o===8&&a!==1)return Bs(e,Ro);o===8&&(o=9);const r=new X1;return e.state=r,r.strm=e,r.status=Ci,r.wrap=a,r.gzhead=null,r.w_bits=o,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=s+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+xt-1)/xt),r.window=new Uint8Array(r.w_size*2),r.head=new Uint16Array(r.hash_size),r.prev=new Uint16Array(r.w_size),r.lit_bufsize=1<<s+6,r.pending_buf_size=r.lit_bufsize*4,r.pending_buf=new Uint8Array(r.pending_buf_size),r.sym_buf=r.lit_bufsize,r.sym_end=(r.lit_bufsize-1)*3,r.level=n,r.strategy=i,r.method=t,Zp(e)},Q1=(e,n)=>qp(e,n,Ur,P1,N1,L1),ew=(e,n)=>{if(Ia(e)||n>tf||n<0)return e?Bs(e,Ro):Ro;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Zi&&n!==to)return Bs(e,e.avail_out===0?Ll:Ro);const o=t.last_flush;if(t.last_flush=n,t.pending!==0){if(Kn(e),e.avail_out===0)return t.last_flush=-1,pn}else if(e.avail_in===0&&of(n)<=of(o)&&n!==to)return Bs(e,Ll);if(t.status===Zi&&e.avail_in!==0)return Bs(e,Ll);if(t.status===Ci&&t.wrap===0&&(t.status=js),t.status===Ci){let s=Ur+(t.w_bits-8<<4)<<8,i=-1;if(t.strategy>=Ya||t.level<2?i=0:t.level<6?i=1:t.level===6?i=2:i=3,s|=i<<6,t.strstart!==0&&(s|=z1),s+=31-s%31,Wi(t,s),t.strstart!==0&&(Wi(t,e.adler>>>16),Wi(t,e.adler&65535)),e.adler=1,t.status=js,Kn(e),t.pending!==0)return t.last_flush=-1,pn}if(t.status===qc){if(e.adler=0,Rt(t,31),Rt(t,139),Rt(t,8),t.gzhead)Rt(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Rt(t,t.gzhead.time&255),Rt(t,t.gzhead.time>>8&255),Rt(t,t.gzhead.time>>16&255),Rt(t,t.gzhead.time>>24&255),Rt(t,t.level===9?2:t.strategy>=Ya||t.level<2?4:0),Rt(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Rt(t,t.gzhead.extra.length&255),Rt(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=dn(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=gc;else if(Rt(t,0),Rt(t,0),Rt(t,0),Rt(t,0),Rt(t,0),Rt(t,t.level===9?2:t.strategy>=Ya||t.level<2?4:0),Rt(t,W1),t.status=js,Kn(e),t.pending!==0)return t.last_flush=-1,pn}if(t.status===gc){if(t.gzhead.extra){let s=t.pending,i=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+i>t.pending_buf_size;){let r=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+r),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>s&&(e.adler=dn(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex+=r,Kn(e),t.pending!==0)return t.last_flush=-1,pn;s=0,i-=r}let a=new Uint8Array(t.gzhead.extra);t.pending_buf.set(a.subarray(t.gzindex,t.gzindex+i),t.pending),t.pending+=i,t.gzhead.hcrc&&t.pending>s&&(e.adler=dn(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=vc}if(t.status===vc){if(t.gzhead.name){let s=t.pending,i;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(e.adler=dn(e.adler,t.pending_buf,t.pending-s,s)),Kn(e),t.pending!==0)return t.last_flush=-1,pn;s=0}t.gzindex<t.gzhead.name.length?i=t.gzhead.name.charCodeAt(t.gzindex++)&255:i=0,Rt(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>s&&(e.adler=dn(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=mc}if(t.status===mc){if(t.gzhead.comment){let s=t.pending,i;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(e.adler=dn(e.adler,t.pending_buf,t.pending-s,s)),Kn(e),t.pending!==0)return t.last_flush=-1,pn;s=0}t.gzindex<t.gzhead.comment.length?i=t.gzhead.comment.charCodeAt(t.gzindex++)&255:i=0,Rt(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>s&&(e.adler=dn(e.adler,t.pending_buf,t.pending-s,s))}t.status=yc}if(t.status===yc){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Kn(e),t.pending!==0))return t.last_flush=-1,pn;Rt(t,e.adler&255),Rt(t,e.adler>>8&255),e.adler=0}if(t.status=js,Kn(e),t.pending!==0)return t.last_flush=-1,pn}if(e.avail_in!==0||t.lookahead!==0||n!==_s&&t.status!==Zi){let s=t.level===0?Gp(t,n):t.strategy===Ya?q1(t,n):t.strategy===R1?Z1(t,n):qi[t.level].func(t,n);if((s===Ws||s===Ti)&&(t.status=Zi),s===Cn||s===Ws)return e.avail_out===0&&(t.last_flush=-1),pn;if(s===Ii&&(n===C1?k1(t):n!==tf&&(hc(t,0,0,!1),n===A1&&(hs(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Kn(e),e.avail_out===0))return t.last_flush=-1,pn}return n!==to?pn:t.wrap<=0?nf:(t.wrap===2?(Rt(t,e.adler&255),Rt(t,e.adler>>8&255),Rt(t,e.adler>>16&255),Rt(t,e.adler>>24&255),Rt(t,e.total_in&255),Rt(t,e.total_in>>8&255),Rt(t,e.total_in>>16&255),Rt(t,e.total_in>>24&255)):(Wi(t,e.adler>>>16),Wi(t,e.adler&65535)),Kn(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?pn:nf)},tw=e=>{if(Ia(e))return Ro;const n=e.state.status;return e.state=null,n===js?Bs(e,$1):pn},nw=(e,n)=>{let t=n.length;if(Ia(e))return Ro;const o=e.state,s=o.wrap;if(s===2||s===1&&o.status!==Ci||o.lookahead)return Ro;if(s===1&&(e.adler=_a(e.adler,n,t,0)),o.wrap=0,t>=o.w_size){s===0&&(hs(o.head),o.strstart=0,o.block_start=0,o.insert=0);let d=new Uint8Array(o.w_size);d.set(n.subarray(t-o.w_size,t),0),n=d,t=o.w_size}const i=e.avail_in,a=e.next_in,r=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,Ai(o);o.lookahead>=xt;){let d=o.strstart,c=o.lookahead-(xt-1);do o.ins_h=ws(o,o.ins_h,o.window[d+xt-1]),o.prev[d&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=d,d++;while(--c);o.strstart=d,o.lookahead=xt-1,Ai(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=xt-1,o.match_available=0,e.next_in=a,e.input=r,e.avail_in=i,o.wrap=s,pn};var ow=Q1,sw=qp,iw=Zp,aw=Kp,rw=J1,lw=ew,cw=tw,uw=nw,dw="pako deflate (from Nodeca project)",aa={deflateInit:ow,deflateInit2:sw,deflateReset:iw,deflateResetKeep:aw,deflateSetHeader:rw,deflate:lw,deflateEnd:cw,deflateSetDictionary:uw,deflateInfo:dw};const fw=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var hw=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const t=n.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const o in t)fw(t,o)&&(e[o]=t[o])}}return e},pw=e=>{let n=0;for(let o=0,s=e.length;o<s;o++)n+=e[o].length;const t=new Uint8Array(n);for(let o=0,s=0,i=e.length;o<i;o++){let a=e[o];t.set(a,s),s+=a.length}return t},Vr={assign:hw,flattenChunks:pw};let Yp=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Yp=!1}const wa=new Uint8Array(256);for(let e=0;e<256;e++)wa[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;wa[254]=wa[254]=1;var gw=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,t,o,s,i,a=e.length,r=0;for(s=0;s<a;s++)t=e.charCodeAt(s),(t&64512)===55296&&s+1<a&&(o=e.charCodeAt(s+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),s++)),r+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(r),i=0,s=0;i<r;s++)t=e.charCodeAt(s),(t&64512)===55296&&s+1<a&&(o=e.charCodeAt(s+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),s++)),t<128?n[i++]=t:t<2048?(n[i++]=192|t>>>6,n[i++]=128|t&63):t<65536?(n[i++]=224|t>>>12,n[i++]=128|t>>>6&63,n[i++]=128|t&63):(n[i++]=240|t>>>18,n[i++]=128|t>>>12&63,n[i++]=128|t>>>6&63,n[i++]=128|t&63);return n};const vw=(e,n)=>{if(n<65534&&e.subarray&&Yp)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let t="";for(let o=0;o<n;o++)t+=String.fromCharCode(e[o]);return t};var mw=(e,n)=>{const t=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let o,s;const i=new Array(t*2);for(s=0,o=0;o<t;){let a=e[o++];if(a<128){i[s++]=a;continue}let r=wa[a];if(r>4){i[s++]=65533,o+=r-1;continue}for(a&=r===2?31:r===3?15:7;r>1&&o<t;)a=a<<6|e[o++]&63,r--;if(r>1){i[s++]=65533;continue}a<65536?i[s++]=a:(a-=65536,i[s++]=55296|a>>10&1023,i[s++]=56320|a&1023)}return vw(i,s)},yw=(e,n)=>{n=n||e.length,n>e.length&&(n=e.length);let t=n-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?n:t+wa[e[t]]>n?t:n},Ea={string2buf:gw,buf2string:mw,utf8border:yw};function bw(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Xp=bw;const Jp=Object.prototype.toString,{Z_NO_FLUSH:_w,Z_SYNC_FLUSH:ww,Z_FULL_FLUSH:Ew,Z_FINISH:Sw,Z_OK:wr,Z_STREAM_END:xw,Z_DEFAULT_COMPRESSION:kw,Z_DEFAULT_STRATEGY:Cw,Z_DEFLATED:Aw}=Br;function Hr(e){this.options=Vr.assign({level:kw,method:Aw,chunkSize:16384,windowBits:15,memLevel:8,strategy:Cw},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xp,this.strm.avail_out=0;let t=aa.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==wr)throw new Error(ki[t]);if(n.header&&aa.deflateSetHeader(this.strm,n.header),n.dictionary){let o;if(typeof n.dictionary=="string"?o=Ea.string2buf(n.dictionary):Jp.call(n.dictionary)==="[object ArrayBuffer]"?o=new Uint8Array(n.dictionary):o=n.dictionary,t=aa.deflateSetDictionary(this.strm,o),t!==wr)throw new Error(ki[t]);this._dict_set=!0}}Hr.prototype.push=function(e,n){const t=this.strm,o=this.options.chunkSize;let s,i;if(this.ended)return!1;for(n===~~n?i=n:i=n===!0?Sw:_w,typeof e=="string"?t.input=Ea.string2buf(e):Jp.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(o),t.next_out=0,t.avail_out=o),(i===ww||i===Ew)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(s=aa.deflate(t,i),s===xw)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),s=aa.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===wr;if(t.avail_out===0){this.onData(t.output);continue}if(i>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Hr.prototype.onData=function(e){this.chunks.push(e)};Hr.prototype.onEnd=function(e){e===wr&&(this.result=Vr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function $w(e,n){const t=new Hr(n);if(t.push(e,!0),t.err)throw t.msg||ki[t.err];return t.result}var Iw=$w,Tw={deflate:Iw};const Xa=16209,Rw=16191;var Fw=function(n,t){let o,s,i,a,r,d,c,f,v,m,g,I,U,x,R,B,H,M,te,we,de,me,Ae,xe;const Me=n.state;o=n.next_in,Ae=n.input,s=o+(n.avail_in-5),i=n.next_out,xe=n.output,a=i-(t-n.avail_out),r=i+(n.avail_out-257),d=Me.dmax,c=Me.wsize,f=Me.whave,v=Me.wnext,m=Me.window,g=Me.hold,I=Me.bits,U=Me.lencode,x=Me.distcode,R=(1<<Me.lenbits)-1,B=(1<<Me.distbits)-1;e:do{I<15&&(g+=Ae[o++]<<I,I+=8,g+=Ae[o++]<<I,I+=8),H=U[g&R];t:for(;;){if(M=H>>>24,g>>>=M,I-=M,M=H>>>16&255,M===0)xe[i++]=H&65535;else if(M&16){te=H&65535,M&=15,M&&(I<M&&(g+=Ae[o++]<<I,I+=8),te+=g&(1<<M)-1,g>>>=M,I-=M),I<15&&(g+=Ae[o++]<<I,I+=8,g+=Ae[o++]<<I,I+=8),H=x[g&B];n:for(;;){if(M=H>>>24,g>>>=M,I-=M,M=H>>>16&255,M&16){if(we=H&65535,M&=15,I<M&&(g+=Ae[o++]<<I,I+=8,I<M&&(g+=Ae[o++]<<I,I+=8)),we+=g&(1<<M)-1,we>d){n.msg="invalid distance too far back",Me.mode=Xa;break e}if(g>>>=M,I-=M,M=i-a,we>M){if(M=we-M,M>f&&Me.sane){n.msg="invalid distance too far back",Me.mode=Xa;break e}if(de=0,me=m,v===0){if(de+=c-M,M<te){te-=M;do xe[i++]=m[de++];while(--M);de=i-we,me=xe}}else if(v<M){if(de+=c+v-M,M-=v,M<te){te-=M;do xe[i++]=m[de++];while(--M);if(de=0,v<te){M=v,te-=M;do xe[i++]=m[de++];while(--M);de=i-we,me=xe}}}else if(de+=v-M,M<te){te-=M;do xe[i++]=m[de++];while(--M);de=i-we,me=xe}for(;te>2;)xe[i++]=me[de++],xe[i++]=me[de++],xe[i++]=me[de++],te-=3;te&&(xe[i++]=me[de++],te>1&&(xe[i++]=me[de++]))}else{de=i-we;do xe[i++]=xe[de++],xe[i++]=xe[de++],xe[i++]=xe[de++],te-=3;while(te>2);te&&(xe[i++]=xe[de++],te>1&&(xe[i++]=xe[de++]))}}else if(M&64){n.msg="invalid distance code",Me.mode=Xa;break e}else{H=x[(H&65535)+(g&(1<<M)-1)];continue n}break}}else if(M&64)if(M&32){Me.mode=Rw;break e}else{n.msg="invalid literal/length code",Me.mode=Xa;break e}else{H=U[(H&65535)+(g&(1<<M)-1)];continue t}break}}while(o<s&&i<r);te=I>>3,o-=te,I-=te<<3,g&=(1<<I)-1,n.next_in=o,n.next_out=i,n.avail_in=o<s?5+(s-o):5-(o-s),n.avail_out=i<r?257+(r-i):257-(i-r),Me.hold=g,Me.bits=I};const ai=15,sf=852,af=592,rf=0,Ml=1,lf=2,Lw=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ow=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Mw=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Pw=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Nw=(e,n,t,o,s,i,a,r)=>{const d=r.bits;let c=0,f=0,v=0,m=0,g=0,I=0,U=0,x=0,R=0,B=0,H,M,te,we,de,me=null,Ae;const xe=new Uint16Array(ai+1),Me=new Uint16Array(ai+1);let Ke=null,et,je,De;for(c=0;c<=ai;c++)xe[c]=0;for(f=0;f<o;f++)xe[n[t+f]]++;for(g=d,m=ai;m>=1&&xe[m]===0;m--);if(g>m&&(g=m),m===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,r.bits=1,0;for(v=1;v<m&&xe[v]===0;v++);for(g<v&&(g=v),x=1,c=1;c<=ai;c++)if(x<<=1,x-=xe[c],x<0)return-1;if(x>0&&(e===rf||m!==1))return-1;for(Me[1]=0,c=1;c<ai;c++)Me[c+1]=Me[c]+xe[c];for(f=0;f<o;f++)n[t+f]!==0&&(a[Me[n[t+f]]++]=f);if(e===rf?(me=Ke=a,Ae=20):e===Ml?(me=Lw,Ke=Ow,Ae=257):(me=Mw,Ke=Pw,Ae=0),B=0,f=0,c=v,de=i,I=g,U=0,te=-1,R=1<<g,we=R-1,e===Ml&&R>sf||e===lf&&R>af)return 1;for(;;){et=c-U,a[f]+1<Ae?(je=0,De=a[f]):a[f]>=Ae?(je=Ke[a[f]-Ae],De=me[a[f]-Ae]):(je=96,De=0),H=1<<c-U,M=1<<I,v=M;do M-=H,s[de+(B>>U)+M]=et<<24|je<<16|De|0;while(M!==0);for(H=1<<c-1;B&H;)H>>=1;if(H!==0?(B&=H-1,B+=H):B=0,f++,--xe[c]===0){if(c===m)break;c=n[t+a[f]]}if(c>g&&(B&we)!==te){for(U===0&&(U=g),de+=v,I=c-U,x=1<<I;I+U<m&&(x-=xe[I+U],!(x<=0));)I++,x<<=1;if(R+=1<<I,e===Ml&&R>sf||e===lf&&R>af)return 1;te=B&we,s[te]=g<<24|I<<16|de-i|0}}return B!==0&&(s[de+B]=c-U<<24|64<<16|0),r.bits=g,0};var ra=Nw;const Dw=0,Qp=1,eg=2,{Z_FINISH:cf,Z_BLOCK:jw,Z_TREES:Ja,Z_OK:Gs,Z_STREAM_END:Bw,Z_NEED_DICT:Uw,Z_STREAM_ERROR:ao,Z_DATA_ERROR:tg,Z_MEM_ERROR:ng,Z_BUF_ERROR:Vw,Z_DEFLATED:uf}=Br,zr=16180,df=16181,ff=16182,hf=16183,pf=16184,gf=16185,vf=16186,mf=16187,yf=16188,bf=16189,Er=16190,Uo=16191,Pl=16192,_f=16193,Nl=16194,wf=16195,Ef=16196,Sf=16197,xf=16198,Qa=16199,er=16200,kf=16201,Cf=16202,Af=16203,$f=16204,If=16205,Dl=16206,Tf=16207,Rf=16208,Kt=16209,og=16210,sg=16211,Hw=852,zw=592,Ww=15,Gw=Ww,Ff=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Kw(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qs=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<zr||n.mode>sg?1:0},ig=e=>{if(qs(e))return ao;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=n.wrap&1),n.mode=zr,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(Hw),n.distcode=n.distdyn=new Int32Array(zw),n.sane=1,n.back=-1,Gs},ag=e=>{if(qs(e))return ao;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,ig(e)},rg=(e,n)=>{let t;if(qs(e))return ao;const o=e.state;return n<0?(t=0,n=-n):(t=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?ao:(o.window!==null&&o.wbits!==n&&(o.window=null),o.wrap=t,o.wbits=n,ag(e))},lg=(e,n)=>{if(!e)return ao;const t=new Kw;e.state=t,t.strm=e,t.window=null,t.mode=zr;const o=rg(e,n);return o!==Gs&&(e.state=null),o},Zw=e=>lg(e,Gw);let Lf=!0,jl,Bl;const qw=e=>{if(Lf){jl=new Int32Array(512),Bl=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(ra(Qp,e.lens,0,288,jl,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;ra(eg,e.lens,0,32,Bl,0,e.work,{bits:5}),Lf=!1}e.lencode=jl,e.lenbits=9,e.distcode=Bl,e.distbits=5},cg=(e,n,t,o)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),o>=i.wsize?(i.window.set(n.subarray(t-i.wsize,t),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>o&&(s=o),i.window.set(n.subarray(t-o,t-o+s),i.wnext),o-=s,o?(i.window.set(n.subarray(t-o,t),0),i.wnext=o,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},Yw=(e,n)=>{let t,o,s,i,a,r,d,c,f,v,m,g,I,U,x=0,R,B,H,M,te,we,de,me;const Ae=new Uint8Array(4);let xe,Me;const Ke=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qs(e)||!e.output||!e.input&&e.avail_in!==0)return ao;t=e.state,t.mode===Uo&&(t.mode=Pl),a=e.next_out,s=e.output,d=e.avail_out,i=e.next_in,o=e.input,r=e.avail_in,c=t.hold,f=t.bits,v=r,m=d,me=Gs;e:for(;;)switch(t.mode){case zr:if(t.wrap===0){t.mode=Pl;break}for(;f<16;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}if(t.wrap&2&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,Ae[0]=c&255,Ae[1]=c>>>8&255,t.check=dn(t.check,Ae,2,0),c=0,f=0,t.mode=df;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",t.mode=Kt;break}if((c&15)!==uf){e.msg="unknown compression method",t.mode=Kt;break}if(c>>>=4,f-=4,de=(c&15)+8,t.wbits===0&&(t.wbits=de),de>15||de>t.wbits){e.msg="invalid window size",t.mode=Kt;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=c&512?bf:Uo,c=0,f=0;break;case df:for(;f<16;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}if(t.flags=c,(t.flags&255)!==uf){e.msg="unknown compression method",t.mode=Kt;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=Kt;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&t.wrap&4&&(Ae[0]=c&255,Ae[1]=c>>>8&255,t.check=dn(t.check,Ae,2,0)),c=0,f=0,t.mode=ff;case ff:for(;f<32;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}t.head&&(t.head.time=c),t.flags&512&&t.wrap&4&&(Ae[0]=c&255,Ae[1]=c>>>8&255,Ae[2]=c>>>16&255,Ae[3]=c>>>24&255,t.check=dn(t.check,Ae,4,0)),c=0,f=0,t.mode=hf;case hf:for(;f<16;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&t.wrap&4&&(Ae[0]=c&255,Ae[1]=c>>>8&255,t.check=dn(t.check,Ae,2,0)),c=0,f=0,t.mode=pf;case pf:if(t.flags&1024){for(;f<16;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&t.wrap&4&&(Ae[0]=c&255,Ae[1]=c>>>8&255,t.check=dn(t.check,Ae,2,0)),c=0,f=0}else t.head&&(t.head.extra=null);t.mode=gf;case gf:if(t.flags&1024&&(g=t.length,g>r&&(g=r),g&&(t.head&&(de=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(o.subarray(i,i+g),de)),t.flags&512&&t.wrap&4&&(t.check=dn(t.check,o,g,i)),r-=g,i+=g,t.length-=g),t.length))break e;t.length=0,t.mode=vf;case vf:if(t.flags&2048){if(r===0)break e;g=0;do de=o[i+g++],t.head&&de&&t.length<65536&&(t.head.name+=String.fromCharCode(de));while(de&&g<r);if(t.flags&512&&t.wrap&4&&(t.check=dn(t.check,o,g,i)),r-=g,i+=g,de)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=mf;case mf:if(t.flags&4096){if(r===0)break e;g=0;do de=o[i+g++],t.head&&de&&t.length<65536&&(t.head.comment+=String.fromCharCode(de));while(de&&g<r);if(t.flags&512&&t.wrap&4&&(t.check=dn(t.check,o,g,i)),r-=g,i+=g,de)break e}else t.head&&(t.head.comment=null);t.mode=yf;case yf:if(t.flags&512){for(;f<16;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}if(t.wrap&4&&c!==(t.check&65535)){e.msg="header crc mismatch",t.mode=Kt;break}c=0,f=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Uo;break;case bf:for(;f<32;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}e.adler=t.check=Ff(c),c=0,f=0,t.mode=Er;case Er:if(t.havedict===0)return e.next_out=a,e.avail_out=d,e.next_in=i,e.avail_in=r,t.hold=c,t.bits=f,Uw;e.adler=t.check=1,t.mode=Uo;case Uo:if(n===jw||n===Ja)break e;case Pl:if(t.last){c>>>=f&7,f-=f&7,t.mode=Dl;break}for(;f<3;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}switch(t.last=c&1,c>>>=1,f-=1,c&3){case 0:t.mode=_f;break;case 1:if(qw(t),t.mode=Qa,n===Ja){c>>>=2,f-=2;break e}break;case 2:t.mode=Ef;break;case 3:e.msg="invalid block type",t.mode=Kt}c>>>=2,f-=2;break;case _f:for(c>>>=f&7,f-=f&7;f<32;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",t.mode=Kt;break}if(t.length=c&65535,c=0,f=0,t.mode=Nl,n===Ja)break e;case Nl:t.mode=wf;case wf:if(g=t.length,g){if(g>r&&(g=r),g>d&&(g=d),g===0)break e;s.set(o.subarray(i,i+g),a),r-=g,i+=g,d-=g,a+=g,t.length-=g;break}t.mode=Uo;break;case Ef:for(;f<14;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}if(t.nlen=(c&31)+257,c>>>=5,f-=5,t.ndist=(c&31)+1,c>>>=5,f-=5,t.ncode=(c&15)+4,c>>>=4,f-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=Kt;break}t.have=0,t.mode=Sf;case Sf:for(;t.have<t.ncode;){for(;f<3;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}t.lens[Ke[t.have++]]=c&7,c>>>=3,f-=3}for(;t.have<19;)t.lens[Ke[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,xe={bits:t.lenbits},me=ra(Dw,t.lens,0,19,t.lencode,0,t.work,xe),t.lenbits=xe.bits,me){e.msg="invalid code lengths set",t.mode=Kt;break}t.have=0,t.mode=xf;case xf:for(;t.have<t.nlen+t.ndist;){for(;x=t.lencode[c&(1<<t.lenbits)-1],R=x>>>24,B=x>>>16&255,H=x&65535,!(R<=f);){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}if(H<16)c>>>=R,f-=R,t.lens[t.have++]=H;else{if(H===16){for(Me=R+2;f<Me;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}if(c>>>=R,f-=R,t.have===0){e.msg="invalid bit length repeat",t.mode=Kt;break}de=t.lens[t.have-1],g=3+(c&3),c>>>=2,f-=2}else if(H===17){for(Me=R+3;f<Me;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}c>>>=R,f-=R,de=0,g=3+(c&7),c>>>=3,f-=3}else{for(Me=R+7;f<Me;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}c>>>=R,f-=R,de=0,g=11+(c&127),c>>>=7,f-=7}if(t.have+g>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=Kt;break}for(;g--;)t.lens[t.have++]=de}}if(t.mode===Kt)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=Kt;break}if(t.lenbits=9,xe={bits:t.lenbits},me=ra(Qp,t.lens,0,t.nlen,t.lencode,0,t.work,xe),t.lenbits=xe.bits,me){e.msg="invalid literal/lengths set",t.mode=Kt;break}if(t.distbits=6,t.distcode=t.distdyn,xe={bits:t.distbits},me=ra(eg,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,xe),t.distbits=xe.bits,me){e.msg="invalid distances set",t.mode=Kt;break}if(t.mode=Qa,n===Ja)break e;case Qa:t.mode=er;case er:if(r>=6&&d>=258){e.next_out=a,e.avail_out=d,e.next_in=i,e.avail_in=r,t.hold=c,t.bits=f,Fw(e,m),a=e.next_out,s=e.output,d=e.avail_out,i=e.next_in,o=e.input,r=e.avail_in,c=t.hold,f=t.bits,t.mode===Uo&&(t.back=-1);break}for(t.back=0;x=t.lencode[c&(1<<t.lenbits)-1],R=x>>>24,B=x>>>16&255,H=x&65535,!(R<=f);){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}if(B&&!(B&240)){for(M=R,te=B,we=H;x=t.lencode[we+((c&(1<<M+te)-1)>>M)],R=x>>>24,B=x>>>16&255,H=x&65535,!(M+R<=f);){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}c>>>=M,f-=M,t.back+=M}if(c>>>=R,f-=R,t.back+=R,t.length=H,B===0){t.mode=If;break}if(B&32){t.back=-1,t.mode=Uo;break}if(B&64){e.msg="invalid literal/length code",t.mode=Kt;break}t.extra=B&15,t.mode=kf;case kf:if(t.extra){for(Me=t.extra;f<Me;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,f-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Cf;case Cf:for(;x=t.distcode[c&(1<<t.distbits)-1],R=x>>>24,B=x>>>16&255,H=x&65535,!(R<=f);){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}if(!(B&240)){for(M=R,te=B,we=H;x=t.distcode[we+((c&(1<<M+te)-1)>>M)],R=x>>>24,B=x>>>16&255,H=x&65535,!(M+R<=f);){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}c>>>=M,f-=M,t.back+=M}if(c>>>=R,f-=R,t.back+=R,B&64){e.msg="invalid distance code",t.mode=Kt;break}t.offset=H,t.extra=B&15,t.mode=Af;case Af:if(t.extra){for(Me=t.extra;f<Me;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,f-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=Kt;break}t.mode=$f;case $f:if(d===0)break e;if(g=m-d,t.offset>g){if(g=t.offset-g,g>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=Kt;break}g>t.wnext?(g-=t.wnext,I=t.wsize-g):I=t.wnext-g,g>t.length&&(g=t.length),U=t.window}else U=s,I=a-t.offset,g=t.length;g>d&&(g=d),d-=g,t.length-=g;do s[a++]=U[I++];while(--g);t.length===0&&(t.mode=er);break;case If:if(d===0)break e;s[a++]=t.length,d--,t.mode=er;break;case Dl:if(t.wrap){for(;f<32;){if(r===0)break e;r--,c|=o[i++]<<f,f+=8}if(m-=d,e.total_out+=m,t.total+=m,t.wrap&4&&m&&(e.adler=t.check=t.flags?dn(t.check,s,m,a-m):_a(t.check,s,m,a-m)),m=d,t.wrap&4&&(t.flags?c:Ff(c))!==t.check){e.msg="incorrect data check",t.mode=Kt;break}c=0,f=0}t.mode=Tf;case Tf:if(t.wrap&&t.flags){for(;f<32;){if(r===0)break e;r--,c+=o[i++]<<f,f+=8}if(t.wrap&4&&c!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=Kt;break}c=0,f=0}t.mode=Rf;case Rf:me=Bw;break e;case Kt:me=tg;break e;case og:return ng;case sg:default:return ao}return e.next_out=a,e.avail_out=d,e.next_in=i,e.avail_in=r,t.hold=c,t.bits=f,(t.wsize||m!==e.avail_out&&t.mode<Kt&&(t.mode<Dl||n!==cf))&&cg(e,e.output,e.next_out,m-e.avail_out),v-=e.avail_in,m-=e.avail_out,e.total_in+=v,e.total_out+=m,t.total+=m,t.wrap&4&&m&&(e.adler=t.check=t.flags?dn(t.check,s,m,e.next_out-m):_a(t.check,s,m,e.next_out-m)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Uo?128:0)+(t.mode===Qa||t.mode===Nl?256:0),(v===0&&m===0||n===cf)&&me===Gs&&(me=Vw),me},Xw=e=>{if(qs(e))return ao;let n=e.state;return n.window&&(n.window=null),e.state=null,Gs},Jw=(e,n)=>{if(qs(e))return ao;const t=e.state;return t.wrap&2?(t.head=n,n.done=!1,Gs):ao},Qw=(e,n)=>{const t=n.length;let o,s,i;return qs(e)||(o=e.state,o.wrap!==0&&o.mode!==Er)?ao:o.mode===Er&&(s=1,s=_a(s,n,t,0),s!==o.check)?tg:(i=cg(e,n,t,t),i?(o.mode=og,ng):(o.havedict=1,Gs))};var eE=ag,tE=rg,nE=ig,oE=Zw,sE=lg,iE=Yw,aE=Xw,rE=Jw,lE=Qw,cE="pako inflate (from Nodeca project)",zo={inflateReset:eE,inflateReset2:tE,inflateResetKeep:nE,inflateInit:oE,inflateInit2:sE,inflate:iE,inflateEnd:aE,inflateGetHeader:rE,inflateSetDictionary:lE,inflateInfo:cE};function uE(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var dE=uE;const ug=Object.prototype.toString,{Z_NO_FLUSH:fE,Z_FINISH:hE,Z_OK:Sa,Z_STREAM_END:Ul,Z_NEED_DICT:Vl,Z_STREAM_ERROR:pE,Z_DATA_ERROR:Of,Z_MEM_ERROR:gE}=Br;function Wr(e){this.options=Vr.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xp,this.strm.avail_out=0;let t=zo.inflateInit2(this.strm,n.windowBits);if(t!==Sa)throw new Error(ki[t]);if(this.header=new dE,zo.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=Ea.string2buf(n.dictionary):ug.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=zo.inflateSetDictionary(this.strm,n.dictionary),t!==Sa)))throw new Error(ki[t])}Wr.prototype.push=function(e,n){const t=this.strm,o=this.options.chunkSize,s=this.options.dictionary;let i,a,r;if(this.ended)return!1;for(n===~~n?a=n:a=n===!0?hE:fE,ug.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(o),t.next_out=0,t.avail_out=o),i=zo.inflate(t,a),i===Vl&&s&&(i=zo.inflateSetDictionary(t,s),i===Sa?i=zo.inflate(t,a):i===Of&&(i=Vl));t.avail_in>0&&i===Ul&&t.state.wrap>0&&e[t.next_in]!==0;)zo.inflateReset(t),i=zo.inflate(t,a);switch(i){case pE:case Of:case Vl:case gE:return this.onEnd(i),this.ended=!0,!1}if(r=t.avail_out,t.next_out&&(t.avail_out===0||i===Ul))if(this.options.to==="string"){let d=Ea.utf8border(t.output,t.next_out),c=t.next_out-d,f=Ea.buf2string(t.output,d);t.next_out=c,t.avail_out=o-c,c&&t.output.set(t.output.subarray(d,d+c),0),this.onData(f)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(i===Sa&&r===0)){if(i===Ul)return i=zo.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Wr.prototype.onData=function(e){this.chunks.push(e)};Wr.prototype.onEnd=function(e){e===Sa&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Vr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var vE=Wr,mE={Inflate:vE};const{deflate:yE}=Tw,{Inflate:bE}=mE;var _E=yE,wE=bE;class dg{constructor(n,t=!1,o=!0){this.device=n,this.tracing=t,this.slipReaderEnabled=!1,this.leftOver=new Uint8Array(0),this.baudrate=0,this.traceLog="",this.lastTraceTime=Date.now(),this._DTR_state=!1,this.slipReaderEnabled=o}getInfo(){const n=this.device.getInfo();return n.usbVendorId&&n.usbProductId?`WebSerial VendorID 0x${n.usbVendorId.toString(16)} ProductID 0x${n.usbProductId.toString(16)}`:""}getPid(){return this.device.getInfo().usbProductId}trace(n){const s=`${`TRACE ${(Date.now()-this.lastTraceTime).toFixed(3)}`} ${n}`;console.log(s),this.traceLog+=s+`
`}async returnTrace(){try{await navigator.clipboard.writeText(this.traceLog),console.log("Text copied to clipboard!")}catch(n){console.error("Failed to copy text:",n)}}hexify(n){return Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join("").padEnd(16," ")}hexConvert(n,t=!0){if(t&&n.length>16){let o="",s=n;for(;s.length>0;){const i=s.slice(0,16),a=String.fromCharCode(...i).split("").map(r=>r===" "||r>=" "&&r<="~"&&r!=="  "?r:".").join("");s=s.slice(16),o+=`
    ${this.hexify(i.slice(0,8))} ${this.hexify(i.slice(8))} | ${a}`}return o}else return this.hexify(n)}slipWriter(n){const t=[];t.push(192);for(let o=0;o<n.length;o++)n[o]===219?t.push(219,221):n[o]===192?t.push(219,220):t.push(n[o]);return t.push(192),new Uint8Array(t)}async write(n){const t=this.slipWriter(n);if(this.device.writable){const o=this.device.writable.getWriter();this.tracing&&(console.log("Write bytes"),this.trace(`Write ${t.length} bytes: ${this.hexConvert(t)}`)),await o.write(t),o.releaseLock()}}_appendBuffer(n,t){const o=new Uint8Array(n.byteLength+t.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(t),n.byteLength),o.buffer}slipReader(n){let t=0,o=0,s=0,i="init";for(;t<n.length;){if(i==="init"&&n[t]==192){o=t+1,i="valid_data",t++;continue}if(i==="valid_data"&&n[t]==192){s=t-1,i="packet_complete";break}t++}if(i!=="packet_complete")return this.leftOver=n,new Uint8Array(0);this.leftOver=n.slice(s+2);const a=new Uint8Array(s-o+1);let r=0;for(t=o;t<=s;t++,r++){if(n[t]===219&&n[t+1]===220){a[r]=192,t++;continue}if(n[t]===219&&n[t+1]===221){a[r]=219,t++;continue}a[r]=n[t]}return a.slice(0,r)}async read(n=0,t=12){let o,s=this.leftOver;if(this.leftOver=new Uint8Array(0),this.slipReaderEnabled){const i=this.slipReader(s);if(i.length>0)return i;s=this.leftOver,this.leftOver=new Uint8Array(0)}if(this.device.readable==null)return this.leftOver;this.reader=this.device.readable.getReader();try{n>0&&(o=setTimeout(()=>{this.reader&&this.reader.cancel()},n));do{const{value:i,done:a}=await this.reader.read();if(a)throw this.leftOver=s,new Error("Timeout");s=new Uint8Array(this._appendBuffer(s.buffer,i.buffer))}while(s.length<t)}finally{n>0&&clearTimeout(o),this.reader.releaseLock()}if(this.tracing&&(console.log("Read bytes"),this.trace(`Read ${s.length} bytes: ${this.hexConvert(s)}`)),this.slipReaderEnabled){const i=this.slipReader(s);return this.tracing&&(console.log("Slip reader results"),this.trace(`Read ${i.length} bytes: ${this.hexConvert(i)}`)),i}return s}async rawRead(n=0){if(this.leftOver.length!=0){const o=this.leftOver;return this.leftOver=new Uint8Array(0),o}if(!this.device.readable)return this.leftOver;this.reader=this.device.readable.getReader();let t;try{n>0&&(t=setTimeout(()=>{this.reader&&this.reader.cancel()},n));const{value:o,done:s}=await this.reader.read();return s||this.tracing&&(console.log("Raw Read bytes"),this.trace(`Read ${o.length} bytes: ${this.hexConvert(o)}`)),o}finally{n>0&&clearTimeout(t),this.reader.releaseLock()}}async setRTS(n){await this.device.setSignals({requestToSend:n}),await this.setDTR(this._DTR_state)}async setDTR(n){this._DTR_state=n,await this.device.setSignals({dataTerminalReady:n})}async connect(n=115200,t={}){await this.device.open({baudRate:n,dataBits:t==null?void 0:t.dataBits,stopBits:t==null?void 0:t.stopBits,bufferSize:t==null?void 0:t.bufferSize,parity:t==null?void 0:t.parity,flowControl:t==null?void 0:t.flowControl}),this.baudrate=n,this.leftOver=new Uint8Array(0)}async sleep(n){return new Promise(t=>setTimeout(t,n))}async waitForUnlock(n){for(;this.device.readable&&this.device.readable.locked||this.device.writable&&this.device.writable.locked;)await this.sleep(n)}async disconnect(){var n,t;!((n=this.device.readable)===null||n===void 0)&&n.locked&&await((t=this.reader)===null||t===void 0?void 0:t.cancel()),await this.waitForUnlock(400),this.reader=void 0,await this.device.close()}}function lr(e){return new Promise(n=>setTimeout(n,e))}async function EE(e){await e.setRTS(!1),await e.setDTR(!1),await lr(100),await e.setDTR(!0),await e.setRTS(!1),await lr(100),await e.setRTS(!0),await e.setDTR(!1),await e.setRTS(!0),await lr(100),await e.setRTS(!1),await e.setDTR(!1)}function SE(e){const n=["D","R","W"],t=e.split("|");for(const o of t){const s=o[0],i=o.slice(1);if(!n.includes(s))return!1;if(s==="D"||s==="R"){if(i!=="0"&&i!=="1")return!1}else if(s==="W"){const a=parseInt(i);if(isNaN(a)||a<=0)return!1}}return!0}async function xE(e,n){const t={D:async o=>await e.setDTR(o),R:async o=>await e.setRTS(o),W:async o=>await lr(o)};try{if(!SE(n))return;const s=n.split("|");for(const i of s){const a=i[0],r=i.slice(1);a==="W"?await t.W(Number(r)):(a==="D"||a==="R")&&await t[a](r==="1")}}catch{throw new Error("Invalid custom reset sequence")}}var kE=function(n){return atob(n)};const Mf=mp(kE);async function CE(e){switch(e){case 15736195:{const{ESP32ROM:n}=await ho(async()=>{const{ESP32ROM:t}=await import("./esp32-BPYaDt9v.js");return{ESP32ROM:t}},__vite__mapDeps([0,1]),import.meta.url);return new n}case 1867591791:case 2084675695:{const{ESP32C2ROM:n}=await ho(async()=>{const{ESP32C2ROM:t}=await import("./esp32c2-CPrCFu7Z.js");return{ESP32C2ROM:t}},__vite__mapDeps([2,3,1]),import.meta.url);return new n}case 1763790959:case 456216687:case 1216438383:case 1130455151:{const{ESP32C3ROM:n}=await ho(async()=>{const{ESP32C3ROM:t}=await import("./esp32c3-I3vXmsVg.js");return{ESP32C3ROM:t}},__vite__mapDeps([3,1]),import.meta.url);return new n}case 752910447:{const{ESP32C6ROM:n}=await ho(async()=>{const{ESP32C6ROM:t}=await import("./esp32c6-C93uIFil.js");return{ESP32C6ROM:t}},__vite__mapDeps([4,1]),import.meta.url);return new n}case 871374959:case 606167151:{const{ESP32C61ROM:n}=await ho(async()=>{const{ESP32C61ROM:t}=await import("./esp32c61-ktIkGZDk.js");return{ESP32C61ROM:t}},__vite__mapDeps([5,4,1]),import.meta.url);return new n}case 285294703:case 1675706479:{const{ESP32C5ROM:n}=await ho(async()=>{const{ESP32C5ROM:t}=await import("./esp32c5-DNmA6eRA.js");return{ESP32C5ROM:t}},__vite__mapDeps([6,4,1]),import.meta.url);return new n}case 3619110528:{const{ESP32H2ROM:n}=await ho(async()=>{const{ESP32H2ROM:t}=await import("./esp32h2-Cf8JbGZQ.js");return{ESP32H2ROM:t}},__vite__mapDeps([7,1]),import.meta.url);return new n}case 9:{const{ESP32S3ROM:n}=await ho(async()=>{const{ESP32S3ROM:t}=await import("./esp32s3-mu2zzjDN.js");return{ESP32S3ROM:t}},__vite__mapDeps([8,1]),import.meta.url);return new n}case 1990:{const{ESP32S2ROM:n}=await ho(async()=>{const{ESP32S2ROM:t}=await import("./esp32s2-3nCAg6Ct.js");return{ESP32S2ROM:t}},__vite__mapDeps([9,1]),import.meta.url);return new n}case 4293968129:{const{ESP8266ROM:n}=await ho(async()=>{const{ESP8266ROM:t}=await import("./esp8266-8VKmCx7J.js");return{ESP8266ROM:t}},__vite__mapDeps([10,1]),import.meta.url);return new n}case 0:case 182303440:case 117676761:{const{ESP32P4ROM:n}=await ho(async()=>{const{ESP32P4ROM:t}=await import("./esp32p4-D9aWWE_i.js");return{ESP32P4ROM:t}},__vite__mapDeps([11,0,1]),import.meta.url);return new n}default:return null}}class AE{constructor(n){this.ESP_RAM_BLOCK=6144,this.ESP_FLASH_BEGIN=2,this.ESP_FLASH_DATA=3,this.ESP_FLASH_END=4,this.ESP_MEM_BEGIN=5,this.ESP_MEM_END=6,this.ESP_MEM_DATA=7,this.ESP_WRITE_REG=9,this.ESP_READ_REG=10,this.ESP_SPI_ATTACH=13,this.ESP_CHANGE_BAUDRATE=15,this.ESP_FLASH_DEFL_BEGIN=16,this.ESP_FLASH_DEFL_DATA=17,this.ESP_FLASH_DEFL_END=18,this.ESP_SPI_FLASH_MD5=19,this.ESP_ERASE_FLASH=208,this.ESP_ERASE_REGION=209,this.ESP_READ_FLASH=210,this.ESP_RUN_USER_CODE=211,this.ESP_IMAGE_MAGIC=233,this.ESP_CHECKSUM_MAGIC=239,this.ROM_INVALID_RECV_MSG=5,this.ERASE_REGION_TIMEOUT_PER_MB=3e4,this.ERASE_WRITE_TIMEOUT_PER_MB=4e4,this.MD5_TIMEOUT_PER_MB=8e3,this.CHIP_ERASE_TIMEOUT=12e4,this.FLASH_READ_TIMEOUT=1e5,this.MAX_TIMEOUT=this.CHIP_ERASE_TIMEOUT*2,this.CHIP_DETECT_MAGIC_REG_ADDR=1073745920,this.DETECTED_FLASH_SIZES={18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB"},this.DETECTED_FLASH_SIZES_NUM={18:256,19:512,20:1024,21:2048,22:4096,23:8192,24:16384},this.USB_JTAG_SERIAL_PID=4097,this.romBaudrate=115200,this.debugLogging=!1,this.syncStubDetected=!1,this.checksum=function(t){let o,s=239;for(o=0;o<t.length;o++)s^=t[o];return s},this.timeoutPerMb=function(t,o){const s=t*(o/1e6);return s<3e3?3e3:s},this.flashSizeBytes=function(t){let o=-1;return t.indexOf("KB")!==-1?o=parseInt(t.slice(0,t.indexOf("KB")))*1024:t.indexOf("MB")!==-1&&(o=parseInt(t.slice(0,t.indexOf("MB")))*1024*1024),o},this.IS_STUB=!1,this.FLASH_WRITE_SIZE=16384,this.transport=n.transport,this.baudrate=n.baudrate,n.serialOptions&&(this.serialOptions=n.serialOptions),n.romBaudrate&&(this.romBaudrate=n.romBaudrate),n.terminal&&(this.terminal=n.terminal,this.terminal.clean()),typeof n.debugLogging<"u"&&(this.debugLogging=n.debugLogging),n.port&&(this.transport=new dg(n.port)),typeof n.enableTracing<"u"&&(this.transport.tracing=n.enableTracing),this.info("esptool.js"),this.info("Serial port "+this.transport.getInfo())}_sleep(n){return new Promise(t=>setTimeout(t,n))}write(n,t=!0){this.terminal?t?this.terminal.writeLine(n):this.terminal.write(n):console.log(n)}error(n,t=!0){this.write(`Error: ${n}`,t)}info(n,t=!0){this.write(n,t)}debug(n,t=!0){this.debugLogging&&this.write(`Debug: ${n}`,t)}_shortToBytearray(n){return new Uint8Array([n&255,n>>8&255])}_intToByteArray(n){return new Uint8Array([n&255,n>>8&255,n>>16&255,n>>24&255])}_byteArrayToShort(n,t){return n|t>>8}_byteArrayToInt(n,t,o,s){return n|t<<8|o<<16|s<<24}_appendBuffer(n,t){const o=new Uint8Array(n.byteLength+t.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(t),n.byteLength),o.buffer}_appendArray(n,t){const o=new Uint8Array(n.length+t.length);return o.set(n,0),o.set(t,n.length),o}ui8ToBstr(n){let t="";for(let o=0;o<n.length;o++)t+=String.fromCharCode(n[o]);return t}bstrToUi8(n){const t=new Uint8Array(n.length);for(let o=0;o<n.length;o++)t[o]=n.charCodeAt(o);return t}async flushInput(){try{await this.transport.rawRead(200)}catch(n){this.error(n.message)}}async readPacket(n=null,t=3e3){for(let o=0;o<100;o++){const s=await this.transport.read(t),i=s[0],a=s[1],r=this._byteArrayToInt(s[4],s[5],s[6],s[7]),d=s.slice(8);if(i==1){if(n==null||a==n)return[r,d];if(d[0]!=0&&d[1]==this.ROM_INVALID_RECV_MSG)throw await this.flushInput(),new En("unsupported command error")}}throw new En("invalid response")}async command(n=null,t=new Uint8Array(0),o=0,s=!0,i=3e3){if(n!=null){this.transport.tracing&&this.transport.trace(`command op:0x${n.toString(16).padStart(2,"0")} data len=${t.length} wait_response=${s?1:0} timeout=${(i/1e3).toFixed(3)} data=${this.transport.hexConvert(t)}`);const a=new Uint8Array(8+t.length);a[0]=0,a[1]=n,a[2]=this._shortToBytearray(t.length)[0],a[3]=this._shortToBytearray(t.length)[1],a[4]=this._intToByteArray(o)[0],a[5]=this._intToByteArray(o)[1],a[6]=this._intToByteArray(o)[2],a[7]=this._intToByteArray(o)[3];let r;for(r=0;r<t.length;r++)a[8+r]=t[r];await this.transport.write(a)}return s?this.readPacket(n,i):[0,new Uint8Array(0)]}async readReg(n,t=3e3){const o=this._intToByteArray(n);return(await this.command(this.ESP_READ_REG,o,void 0,void 0,t))[0]}async writeReg(n,t,o=4294967295,s=0,i=0){let a=this._appendArray(this._intToByteArray(n),this._intToByteArray(t));a=this._appendArray(a,this._intToByteArray(o)),a=this._appendArray(a,this._intToByteArray(s)),i>0&&(a=this._appendArray(a,this._intToByteArray(this.chip.UART_DATE_REG_ADDR)),a=this._appendArray(a,this._intToByteArray(0)),a=this._appendArray(a,this._intToByteArray(0)),a=this._appendArray(a,this._intToByteArray(i))),await this.checkCommand("write target memory",this.ESP_WRITE_REG,a)}async sync(){this.debug("Sync");const n=new Uint8Array(36);let t;for(n[0]=7,n[1]=7,n[2]=18,n[3]=32,t=0;t<32;t++)n[4+t]=85;try{const o=await this.command(8,n,void 0,void 0,100);return this.syncStubDetected=this.syncStubDetected&&o[0]===0,o}catch(o){throw this.debug("Sync err "+o),o}}async _connectAttempt(n="default_reset",t=!1){if(this.debug("_connect_attempt "+n+" "+t),n!=="no_reset")if(this.transport.getPid()===this.USB_JTAG_SERIAL_PID)await EE(this.transport);else{const i=t?"D0|R1|W100|W2000|D1|R0|W50|D0":"D0|R1|W100|D1|R0|W50|D0";await xE(this.transport,i)}let o=0,s=!0;for(;s;){try{const i=await this.transport.read(1e3);o+=i.length}catch(i){if(this.debug(i.message),i instanceof Error){s=!1;break}}await this._sleep(50)}for(this.transport.slipReaderEnabled=!0,this.syncStubDetected=!0,o=7;o--;){try{const i=await this.sync();return this.debug(i[0].toString()),"success"}catch(i){i instanceof Error&&(t?this.info("_",!1):this.info(".",!1))}await this._sleep(50)}return"error"}async connect(n="default_reset",t=7,o=!1){let s,i;for(this.info("Connecting...",!1),await this.transport.connect(this.romBaudrate,this.serialOptions),s=0;s<t&&(i=await this._connectAttempt(n,!1),!(i==="success"||(i=await this._connectAttempt(n,!0),i==="success")));s++);if(i!=="success")throw new En("Failed to connect with the device");if(this.info(`
\r`,!1),!o){const a=await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR)>>>0;this.debug("Chip Magic "+a.toString(16));const r=await CE(a);if(this.chip===null)throw new En(`Unexpected CHIP magic value ${a}. Failed to autodetect chip type.`);this.chip=r}}async detectChip(n="default_reset"){await this.connect(n),this.info("Detecting chip type... ",!1),this.chip!=null?this.info(this.chip.CHIP_NAME):this.info("unknown!")}async checkCommand(n="",t=null,o=new Uint8Array(0),s=0,i=3e3){this.debug("check_command "+n);const a=await this.command(t,o,s,void 0,i);return a[1].length>4?a[1]:a[0]}async memBegin(n,t,o,s){this.debug("mem_begin "+n+" "+t+" "+o+" "+s.toString(16));let i=this._appendArray(this._intToByteArray(n),this._intToByteArray(t));i=this._appendArray(i,this._intToByteArray(o)),i=this._appendArray(i,this._intToByteArray(s)),await this.checkCommand("enter RAM download mode",this.ESP_MEM_BEGIN,i)}async memBlock(n,t){let o=this._appendArray(this._intToByteArray(n.length),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,n);const s=this.checksum(n);await this.checkCommand("write to target RAM",this.ESP_MEM_DATA,o,s)}async memFinish(n){const t=n===0?1:0,o=this._appendArray(this._intToByteArray(t),this._intToByteArray(n));await this.checkCommand("leave RAM download mode",this.ESP_MEM_END,o,void 0,50)}async flashSpiAttach(n){const t=this._intToByteArray(n);await this.checkCommand("configure SPI flash pins",this.ESP_SPI_ATTACH,t)}async flashBegin(n,t){const o=Math.floor((n+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),s=this.chip.getEraseSize(t,n),i=new Date,a=i.getTime();let r=3e3;this.IS_STUB==!1&&(r=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,n)),this.debug("flash begin "+s+" "+o+" "+this.FLASH_WRITE_SIZE+" "+t+" "+n);let d=this._appendArray(this._intToByteArray(s),this._intToByteArray(o));d=this._appendArray(d,this._intToByteArray(this.FLASH_WRITE_SIZE)),d=this._appendArray(d,this._intToByteArray(t)),this.IS_STUB==!1&&(d=this._appendArray(d,this._intToByteArray(0))),await this.checkCommand("enter Flash download mode",this.ESP_FLASH_BEGIN,d,void 0,r);const c=i.getTime();return n!=0&&this.IS_STUB==!1&&this.info("Took "+(c-a)/1e3+"."+(c-a)%1e3+"s to erase flash block"),o}async flashDeflBegin(n,t,o){const s=Math.floor((t+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),i=Math.floor((n+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),a=new Date,r=a.getTime();let d,c;this.IS_STUB?(d=n,c=3e3):(d=i*this.FLASH_WRITE_SIZE,c=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,d)),this.info("Compressed "+n+" bytes to "+t+"...");let f=this._appendArray(this._intToByteArray(d),this._intToByteArray(s));f=this._appendArray(f,this._intToByteArray(this.FLASH_WRITE_SIZE)),f=this._appendArray(f,this._intToByteArray(o)),(this.chip.CHIP_NAME==="ESP32-S2"||this.chip.CHIP_NAME==="ESP32-S3"||this.chip.CHIP_NAME==="ESP32-C3"||this.chip.CHIP_NAME==="ESP32-C2")&&this.IS_STUB===!1&&(f=this._appendArray(f,this._intToByteArray(0))),await this.checkCommand("enter compressed flash mode",this.ESP_FLASH_DEFL_BEGIN,f,void 0,c);const v=a.getTime();return n!=0&&this.IS_STUB===!1&&this.info("Took "+(v-r)/1e3+"."+(v-r)%1e3+"s to erase flash block"),s}async flashBlock(n,t,o){let s=this._appendArray(this._intToByteArray(n.length),this._intToByteArray(t));s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,n);const i=this.checksum(n);await this.checkCommand("write to target Flash after seq "+t,this.ESP_FLASH_DATA,s,i,o)}async flashDeflBlock(n,t,o){let s=this._appendArray(this._intToByteArray(n.length),this._intToByteArray(t));s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,n);const i=this.checksum(n);this.debug("flash_defl_block "+n[0].toString(16)+" "+n[1].toString(16)),await this.checkCommand("write compressed data to flash after seq "+t,this.ESP_FLASH_DEFL_DATA,s,i,o)}async flashFinish(n=!1){const t=n?0:1,o=this._intToByteArray(t);await this.checkCommand("leave Flash mode",this.ESP_FLASH_END,o)}async flashDeflFinish(n=!1){const t=n?0:1,o=this._intToByteArray(t);await this.checkCommand("leave compressed flash mode",this.ESP_FLASH_DEFL_END,o)}async runSpiflashCommand(n,t,o){const r=this.chip.SPI_REG_BASE,d=r+0,c=r+this.chip.SPI_USR_OFFS,f=r+this.chip.SPI_USR1_OFFS,v=r+this.chip.SPI_USR2_OFFS,m=r+this.chip.SPI_W0_OFFS;let g;this.chip.SPI_MOSI_DLEN_OFFS!=null?g=async(de,me)=>{const Ae=r+this.chip.SPI_MOSI_DLEN_OFFS,xe=r+this.chip.SPI_MISO_DLEN_OFFS;de>0&&await this.writeReg(Ae,de-1),me>0&&await this.writeReg(xe,me-1)}:g=async(de,me)=>{const Ae=f,xe=17,Me=8,Ke=de===0?0:de-1,je=(me===0?0:me-1)<<Me|Ke<<xe;await this.writeReg(Ae,je)};const I=1<<18,U=28;if(o>32)throw new En("Reading more than 32 bits back from a SPI flash operation is unsupported");if(t.length>64)throw new En("Writing more than 64 bytes of data with one SPI command is unsupported");const x=t.length*8,R=await this.readReg(c),B=await this.readReg(v);let H=-2147483648,M;o>0&&(H|=268435456),x>0&&(H|=134217728),await g(x,o),await this.writeReg(c,H);let te=7<<U|n;if(await this.writeReg(v,te),x==0)await this.writeReg(m,0);else{if(t.length%4!=0){const me=new Uint8Array(t.length%4);t=this._appendArray(t,me)}let de=m;for(M=0;M<t.length-4;M+=4)te=this._byteArrayToInt(t[M],t[M+1],t[M+2],t[M+3]),await this.writeReg(de,te),de+=4}for(await this.writeReg(d,I),M=0;M<10&&(te=await this.readReg(d)&I,te!=0);M++);if(M===10)throw new En("SPI command did not complete in time");const we=await this.readReg(m);return await this.writeReg(c,R),await this.writeReg(v,B),we}async readFlashId(){const t=new Uint8Array(0);return await this.runSpiflashCommand(159,t,24)}async eraseFlash(){this.info("Erasing flash (this may take a while)...");let n=new Date;const t=n.getTime(),o=await this.checkCommand("erase flash",this.ESP_ERASE_FLASH,void 0,void 0,this.CHIP_ERASE_TIMEOUT);n=new Date;const s=n.getTime();return this.info("Chip erase completed successfully in "+(s-t)/1e3+"s"),o}toHex(n){return Array.prototype.map.call(n,t=>("00"+t.toString(16)).slice(-2)).join("")}async flashMd5sum(n,t){const o=this.timeoutPerMb(this.MD5_TIMEOUT_PER_MB,t);let s=this._appendArray(this._intToByteArray(n),this._intToByteArray(t));s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,this._intToByteArray(0));let i=await this.checkCommand("calculate md5sum",this.ESP_SPI_FLASH_MD5,s,void 0,o);return i instanceof Uint8Array&&i.length>16&&(i=i.slice(0,16)),this.toHex(i)}async readFlash(n,t,o=null){let s=this._appendArray(this._intToByteArray(n),this._intToByteArray(t));s=this._appendArray(s,this._intToByteArray(4096)),s=this._appendArray(s,this._intToByteArray(1024));const i=await this.checkCommand("read flash",this.ESP_READ_FLASH,s);if(i!=0)throw new En("Failed to read memory: "+i);let a=new Uint8Array(0);for(;a.length<t;){const r=await this.transport.read(this.FLASH_READ_TIMEOUT);if(r instanceof Uint8Array)r.length>0&&(a=this._appendArray(a,r),await this.transport.write(this._intToByteArray(a.length)),o&&o(r,a.length,t));else throw new En("Failed to read memory: "+r)}return a}async runStub(){if(this.syncStubDetected)return this.info("Stub is already running. No upload is necessary."),this.chip;this.info("Uploading stub...");let n=Mf(this.chip.ROM_TEXT),t=n.split("").map(function(r){return r.charCodeAt(0)});const o=new Uint8Array(t);n=Mf(this.chip.ROM_DATA),t=n.split("").map(function(r){return r.charCodeAt(0)});const s=new Uint8Array(t);let i=Math.floor((o.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),a;for(await this.memBegin(o.length,i,this.ESP_RAM_BLOCK,this.chip.TEXT_START),a=0;a<i;a++){const r=a*this.ESP_RAM_BLOCK,d=r+this.ESP_RAM_BLOCK;await this.memBlock(o.slice(r,d),a)}for(i=Math.floor((s.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),await this.memBegin(s.length,i,this.ESP_RAM_BLOCK,this.chip.DATA_START),a=0;a<i;a++){const r=a*this.ESP_RAM_BLOCK,d=r+this.ESP_RAM_BLOCK;await this.memBlock(s.slice(r,d),a)}this.info("Running stub..."),await this.memFinish(this.chip.ENTRY);for(let r=0;r<100;r++){const d=await this.transport.read(1e3,6);if(d[0]===79&&d[1]===72&&d[2]===65&&d[3]===73)return this.info("Stub running..."),this.IS_STUB=!0,this.FLASH_WRITE_SIZE=16384,this.chip}throw new En("Failed to start stub. Unexpected response")}async changeBaud(){this.info("Changing baudrate to "+this.baudrate);const n=this.IS_STUB?this.transport.baudrate:0,t=this._appendArray(this._intToByteArray(this.baudrate),this._intToByteArray(n)),o=await this.command(this.ESP_CHANGE_BAUDRATE,t);this.debug(o[0].toString()),this.info("Changed"),await this.transport.disconnect(),await this._sleep(50),await this.transport.connect(this.baudrate,this.serialOptions);try{let s=64;for(;s--;){try{await this.sync();break}catch(i){this.debug(i.message)}await this._sleep(10)}}catch(s){this.debug(s.message)}}async main(n="default_reset"){await this.detectChip(n);const t=await this.chip.getChipDescription(this);return this.info("Chip is "+t),this.info("Features: "+await this.chip.getChipFeatures(this)),this.info("Crystal is "+await this.chip.getCrystalFreq(this)+"MHz"),this.info("MAC: "+await this.chip.readMac(this)),await this.chip.readMac(this),typeof this.chip.postConnect<"u"&&await this.chip.postConnect(this),await this.runStub(),this.romBaudrate!==this.baudrate&&await this.changeBaud(),t}parseFlashSizeArg(n){if(typeof this.chip.FLASH_SIZES[n]>"u")throw new En("Flash size "+n+" is not supported by this chip type. Supported sizes: "+this.chip.FLASH_SIZES);return this.chip.FLASH_SIZES[n]}_updateImageFlashParams(n,t,o,s,i){if(this.debug("_update_image_flash_params "+o+" "+s+" "+i),n.length<8||t!=this.chip.BOOTLOADER_FLASH_OFFSET)return n;if(o==="keep"&&s==="keep"&&i==="keep")return this.info("Not changing the image"),n;const a=parseInt(n[0]);let r=parseInt(n[2]);const d=parseInt(n[3]);if(a!==this.ESP_IMAGE_MAGIC)return this.info("Warning: Image file at 0x"+t.toString(16)+" doesn't look like an image file, so not changing any flash settings."),n;s!=="keep"&&(r={qio:0,qout:1,dio:2,dout:3}[s]);let c=d&15;i!=="keep"&&(c={"40m":0,"26m":1,"20m":2,"80m":15}[i]);let f=d&240;o!=="keep"&&(f=this.parseFlashSizeArg(o));const v=r<<8|c+f;return this.info("Flash params set to "+v.toString(16)),parseInt(n[2])!==r<<8&&(n=n.substring(0,2)+(r<<8).toString()+n.substring(3)),parseInt(n[3])!==c+f&&(n=n.substring(0,3)+(c+f).toString()+n.substring(4)),n}async writeFlash(n){if(this.debug("EspLoader program"),n.flashSize!=="keep"){const s=this.flashSizeBytes(n.flashSize);for(let i=0;i<n.fileArray.length;i++)if(n.fileArray[i].data.length+n.fileArray[i].address>s)throw new En(`File ${i+1} doesn't fit in the available flash`)}this.IS_STUB===!0&&n.eraseAll===!0&&await this.eraseFlash();let t,o;for(let s=0;s<n.fileArray.length;s++){this.debug("Data Length "+n.fileArray[s].data.length),t=n.fileArray[s].data;const i=n.fileArray[s].data.length%4;if(i>0&&(t+="".substring(4-i)),o=n.fileArray[s].address,this.debug("Image Length "+t.length),t.length===0){this.debug("Warning: File is empty");continue}t=this._updateImageFlashParams(t,o,n.flashSize,n.flashMode,n.flashFreq);let a=null;n.calculateMD5Hash&&(a=n.calculateMD5Hash(t),this.debug("Image MD5 "+a));const r=t.length;let d;if(n.compress){const B=this.bstrToUi8(t);t=this.ui8ToBstr(_E(B,{level:9})),d=await this.flashDeflBegin(r,t.length,o)}else d=await this.flashBegin(r,o);let c=0,f=0;const v=t.length;n.reportProgress&&n.reportProgress(s,0,v);let m=new Date;const g=m.getTime();let I=5e3;const U=new wE({chunkSize:1});let x=0;for(U.onData=function(B){x+=B.byteLength};t.length>0;){this.debug("Write loop "+o+" "+c+" "+d),this.info("Writing at 0x"+(o+x).toString(16)+"... ("+Math.floor(100*(c+1)/d)+"%)");const B=this.bstrToUi8(t.slice(0,this.FLASH_WRITE_SIZE));if(n.compress){const H=x;U.push(B,!1);const M=x-H;let te=3e3;this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,M)>3e3&&(te=this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,M)),this.IS_STUB===!1&&(I=te),await this.flashDeflBlock(B,c,I),this.IS_STUB&&(I=te)}else throw new En("Yet to handle Non Compressed writes");f+=B.length,t=t.slice(this.FLASH_WRITE_SIZE,t.length),c++,n.reportProgress&&n.reportProgress(s,f,v)}this.IS_STUB&&await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR,I),m=new Date;const R=m.getTime()-g;if(n.compress&&this.info("Wrote "+r+" bytes ("+f+" compressed) at 0x"+o.toString(16)+" in "+R/1e3+" seconds."),a){const B=await this.flashMd5sum(o,r);if(new String(B).valueOf()!=new String(a).valueOf())throw this.info("File  md5: "+a),this.info("Flash md5: "+B),new En("MD5 of file does not match data in flash!");this.info("Hash of data verified.")}}this.info("Leaving..."),this.IS_STUB&&(await this.flashBegin(0,0),n.compress?await this.flashDeflFinish():await this.flashFinish())}async flashId(){this.debug("flash_id");const n=await this.readFlashId();this.info("Manufacturer: "+(n&255).toString(16));const t=n>>16&255;this.info("Device: "+(n>>8&255).toString(16)+t.toString(16)),this.info("Detected flash size: "+this.DETECTED_FLASH_SIZES[t])}async getFlashSize(){this.debug("flash_id");const t=await this.readFlashId()>>16&255;return this.DETECTED_FLASH_SIZES_NUM[t]}async hardReset(){await this.transport.setRTS(!0),await this._sleep(100),await this.transport.setRTS(!1)}async softReset(){if(!this.IS_STUB)await this.flashBegin(0,0),await this.flashFinish(!1);else{if(this.chip.CHIP_NAME!="ESP8266")throw new En("Soft resetting is currently only supported on ESP8266");await this.command(this.ESP_RUN_USER_CODE,void 0,void 0,!1)}}}const $E={class:"modal-actions"},xa={__name:"ConfirmModal",props:{open:Boolean,title:{type:String,default:"Confirm"},message:{type:String,default:"Are you sure?"},confirmText:{type:String,default:"Yes"},cancelText:{type:String,default:"Cancel"}},emits:["confirm","cancel"],setup(e,{emit:n}){const t=e,o=n,s=a=>{a.key==="Escape"&&o("cancel")},i=a=>{document.body.style.overflow=a?"":"hidden"};return Yo(()=>{t.open&&i(!1),window.addEventListener("keydown",s)}),io(()=>{i(!0),window.removeEventListener("keydown",s)}),ot(()=>t.open,a=>{i(!a)}),(a,r)=>e.open?(w(),E("div",{key:0,class:"modal-backdrop",onClick:r[3]||(r[3]=d=>a.$emit("cancel"))},[u("div",{class:"modal-card",role:"dialog","aria-modal":"true",onClick:r[2]||(r[2]=wt(()=>{},["stop"]))},[u("h3",null,ue(e.title),1),u("p",null,ue(e.message),1),u("div",$E,[u("button",{class:"secondary",type:"button",onClick:r[0]||(r[0]=d=>a.$emit("cancel"))},ue(e.cancelText),1),u("button",{type:"button",onClick:r[1]||(r[1]=d=>a.$emit("confirm"))},ue(e.confirmText),1)])])])):re("",!0)}},IE={class:"gpio-guide-card"},TE={class:"gpio-guide-header"},RE={class:"gpio-guide-title-row"},FE={class:"gpio-guide-title"},LE={class:"gpio-guide-tabs"},OE={class:"gpio-guide-body"},ME={key:0,class:"gpio-guide-empty"},PE={key:0,class:"gpio-guide-table-wrap"},NE={class:"gpio-guide-table"},DE={key:1,class:"gpio-guide-notes"},jE={__name:"GpioGuideModal",props:{open:{type:Boolean,default:!1},guide:{type:Object,default:null},fallbackTitle:{type:String,default:""}},emits:["close"],setup(e,{emit:n}){const t=e,o=n,s=Y("table"),i=()=>{o("close")},a=c=>{c.key==="Escape"&&i()},r=F(()=>{var c;return((c=t.guide)==null?void 0:c.title)||t.fallbackTitle||""}),d=F(()=>{var c;return((c=t.guide)==null?void 0:c.notes)||[]});return ot(()=>t.open,c=>{c?(s.value="table",window.addEventListener("keydown",a)):window.removeEventListener("keydown",a)}),io(()=>{window.removeEventListener("keydown",a)}),(c,f)=>e.open?(w(),E("div",{key:0,class:"gpio-guide-backdrop",onClick:wt(i,["self"])},[u("div",IE,[u("header",TE,[u("div",null,[u("div",RE,[f[2]||(f[2]=u("h3",null,"GPIO Guide",-1)),u("span",FE,ue(r.value),1)]),f[3]||(f[3]=u("p",{class:"gpio-guide-sub"},"Quick reference for the selected microcontroller.",-1))]),u("button",{type:"button",class:"secondary compact",onClick:i},"Close")]),u("div",LE,[u("button",{type:"button",class:rt({active:s.value==="table"}),onClick:f[0]||(f[0]=v=>s.value="table")}," Table ",2),u("button",{type:"button",class:rt({active:s.value==="notes"}),onClick:f[1]||(f[1]=v=>s.value="notes")}," Notes ",2)]),u("div",OE,[e.guide?(w(),E(Oe,{key:1},[s.value==="table"?(w(),E("div",PE,[u("table",NE,[f[4]||(f[4]=u("thead",null,[u("tr",null,[u("th",null,"GPIO"),u("th",null,"Input"),u("th",null,"Output"),u("th",null,"Notes")])],-1)),u("tbody",null,[(w(!0),E(Oe,null,Qe(e.guide.rows,(v,m)=>(w(),E("tr",{key:`${v.id}-${m}`},[u("td",null,ue(v.id),1),u("td",null,ue(v.input),1),u("td",null,ue(v.output),1),u("td",null,ue(v.note),1)]))),128))])])])):(w(),E("div",DE,[(w(!0),E(Oe,null,Qe(d.value,(v,m)=>(w(),E("p",{key:`note-${m}`},ue(v),1))),128))]))],64)):(w(),E("div",ME," No GPIO data available for this variant. "))])])])):re("",!0)}},BE=bo(jE,[["__scopeId","data-v-aa32a730"]]),UE={class:"icon-picker-card"},VE={class:"icon-picker-search"},HE=["disabled"],zE={class:"icon-picker-meta"},WE={key:0},GE={key:1},KE={key:2},ZE={key:3},qE={key:0,class:"icon-grid"},YE=["onClick"],XE=["src","alt"],JE={key:1,class:"icon-empty"},QE="https://cdn.jsdelivr.net/npm/@mdi/svg/meta.json",eS={__name:"IconPicker",props:{open:{type:Boolean,default:!1},selected:{type:String,default:""},initialQuery:{type:String,default:""}},emits:["close","select"],setup(e,{emit:n}){const t=e,o=n,s=Y(""),i=Y(null),a=Y([]),r=Y(!1),d=Y(""),c=Y(!1),f=M=>`https://cdn.jsdelivr.net/npm/@mdi/svg/svg/${encodeURIComponent(M)}.svg`,v=F(()=>{const M=s.value.trim().toLowerCase();if(!M)return[];const te=[];return a.value.forEach(we=>{var de,me;if(!(te.length>=300)){if(we.name.toLowerCase().includes(M)){te.push(we);return}if((de=we.aliases)!=null&&de.some(Ae=>Ae.toLowerCase().includes(M))){te.push(we);return}(me=we.tags)!=null&&me.some(Ae=>Ae.toLowerCase().includes(M))&&te.push(we)}}),te}),m=F(()=>v.value.length),g=M=>{o("select",M)},I=()=>{o("close",{query:s.value.trim()})},U=Y(!1),x=()=>{U.value=!0},R=()=>{U.value&&(U.value=!1,I())},B=M=>{M.key==="Escape"&&I()},H=async()=>{if(!(c.value||r.value)){r.value=!0,d.value="";try{const M=await fetch(QE);if(!M.ok)throw new Error(`HTTP ${M.status}`);const te=await M.json();a.value=Array.isArray(te)?te.filter(we=>!we.deprecated):[],c.value=!0}catch{d.value="Failed to load icons"}finally{r.value=!1}}};return ot(()=>t.open,async M=>{var te;M&&(s.value=t.initialQuery||"",await H(),await oo(),(te=i.value)==null||te.focus())}),ot(()=>t.open,M=>{M?window.addEventListener("keydown",B):(window.removeEventListener("keydown",B),U.value=!1)}),io(()=>{window.removeEventListener("keydown",B)}),(M,te)=>e.open?(w(),E("div",{key:0,class:"icon-picker-backdrop",onPointerdown:wt(x,["self"]),onClick:wt(R,["self"])},[u("div",UE,[u("header",{class:"icon-picker-header"},[te[1]||(te[1]=u("div",null,[u("h3",null,"Choose icon"),u("p",{class:"icon-picker-sub"},"Search the Material Design Icons catalog.")],-1)),u("button",{type:"button",class:"secondary compact",onClick:I},"Close")]),u("div",VE,[To(u("input",{ref_key:"searchInput",ref:i,"onUpdate:modelValue":te[0]||(te[0]=we=>s.value=we),type:"text",placeholder:"Search icons",disabled:r.value},null,8,HE),[[Ss,s.value]]),u("div",zE,[r.value?(w(),E("span",WE,"Loading icons...")):d.value?(w(),E("span",GE,ue(d.value),1)):m.value?(w(),E("span",KE,"Results: "+ue(m.value),1)):(w(),E("span",ZE,"Type to search"))])]),v.value.length?(w(),E("div",qE,[(w(!0),E(Oe,null,Qe(v.value,we=>(w(),E("button",{key:we.name,type:"button",class:rt(["icon-button",{selected:we.name===e.selected}]),onClick:de=>g(we.name)},[u("img",{src:f(we.name),alt:we.name},null,8,XE),u("span",null,ue(we.name),1)],10,YE))),128))])):r.value?re("",!0):(w(),E("div",JE,"No icons to show."))])],32)):re("",!0)}},fg=bo(eS,[["__scopeId","data-v-47aaedd8"]]),tS={class:"icon-picker-card"},nS={class:"icon-picker-header"},oS={class:"filter-header-title"},sS=["href","aria-label"],iS={class:"icon-picker-search"},aS=["placeholder"],rS={key:0,class:"filter-grid"},lS=["title","onClick"],cS={class:"filter-title"},uS={key:1,class:"icon-empty"},dS={__name:"PickerModal",props:{open:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},title:{type:String,default:"Choose"},helpUrl:{type:String,default:""},helpLabel:{type:String,default:"Documentation"},searchPlaceholder:{type:String,default:"Search"},emptyLabel:{type:String,default:"No items to show."},initialQuery:{type:String,default:""}},emits:["close","select"],setup(e,{emit:n}){const t=e,o=n,s=Y(""),i=Y(null),a=F(()=>{const c=s.value.trim().toLowerCase();return c?t.items.filter(f=>{const v=String(f.id||"").toLowerCase(),m=String(f.label||"").toLowerCase();return v.includes(c)||m.includes(c)}):t.items}),r=c=>{o("select",c)},d=()=>{o("close")};return ot(()=>t.open,async c=>{var f;c&&(s.value=t.initialQuery||"",await oo(),(f=i.value)==null||f.focus())}),(c,f)=>e.open?(w(),E("div",{key:0,class:"icon-picker-backdrop",onClick:wt(d,["self"])},[u("div",tS,[u("header",nS,[u("div",null,[u("div",oS,[u("h3",null,ue(e.title),1),e.helpUrl?(w(),E("a",{key:0,class:"filter-help",href:e.helpUrl,target:"_blank",rel:"noopener noreferrer","aria-label":e.helpLabel}," ? ",8,sS)):re("",!0)]),f[1]||(f[1]=u("p",{class:"icon-picker-sub"},null,-1))]),u("button",{type:"button",class:"secondary compact",onClick:d},"Close")]),u("div",iS,[To(u("input",{ref_key:"searchInput",ref:i,"onUpdate:modelValue":f[0]||(f[0]=v=>s.value=v),type:"text",placeholder:e.searchPlaceholder},null,8,aS),[[Ss,s.value]]),f[2]||(f[2]=u("div",{class:"icon-picker-meta"},null,-1))]),a.value.length?(w(),E("div",rS,[(w(!0),E(Oe,null,Qe(a.value,v=>(w(),E("button",{key:v.id,type:"button",class:"filter-card",title:v.description||v.label||v.id,onClick:m=>r(v)},[u("span",cS,ue(v.label||v.id),1)],8,lS))),128))])):(w(),E("div",uS,ue(e.emptyLabel),1))])])):re("",!0)}},fS=bo(dS,[["__scopeId","data-v-169dedb3"]]),hS="./".endsWith("/")?"./".slice(0,-1):"./",Hl=new Map,zl=new Map,rs={data:null,promise:null},ls={data:null,promise:null},pS=e=>`components/${e.replace(/\./g,"/")}.json`,Ks=async e=>{if(zl.has(e))return zl.get(e);const n=`${hS}/schemas/${e}`,t=await fetch(n,{cache:"default"});if(!t.ok)throw new Error(`Schema HTTP ${t.status}`);if(!(t.headers.get("content-type")||"").includes("application/json"))throw new Error("Schema not found");const s=await t.json();return zl.set(e,s),s},_c=async e=>{let n=e;if(n.extends){const t=await Ks(`components/base_component/${n.extends}`),o=await Gr(t),s=Array.isArray(o.fields)?o.fields:[],i=Array.isArray(n.fields)?n.fields:[];n={...n,fields:[...s,...i]}}if(n.type==="object"&&Array.isArray(n.fields)){const t=await Promise.all(n.fields.map(o=>_c(o)));n={...n,fields:t}}if(n.type==="list"&&n.item){const t=await _c(n.item);n={...n,item:t}}if(n.optionsFrom){const t=await Ks(n.optionsFrom),o=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.options)?t.options:[];n={...n,options:o}}return n},Gr=async e=>{let n=[];if(e.extends){const s=await Ks(`components/base_component/${e.extends}`),i=await Gr(s);n=Array.isArray(i.fields)?i.fields:[]}const t=Array.isArray(e.fields)?e.fields:[],o=await Promise.all(t.map(s=>_c(s)));return{...e,fields:[...n,...o]}},hg=async e=>{if(!e)return null;if(Hl.has(e))return Hl.get(e);const n=await Ks(pS(e)),t=await Gr(n);return Hl.set(e,t),t},Wn=async e=>{const n=await Ks(e);return Gr(n)},gS=async()=>rs.data?rs.data:(rs.promise||(rs.promise=Ks("components/base_component/base_filters.json").then(e=>{const n=Array.isArray(e==null?void 0:e.filters)?e.filters:[];return rs.data=n,n}).finally(()=>{rs.promise=null})),rs.promise),vS=async()=>ls.data?ls.data:(ls.promise||(ls.promise=Ks("components/base_component/base_actions.json").then(e=>{const n=Array.isArray(e==null?void 0:e.actions)?e.actions:[];return ls.data=n,n}).finally(()=>{ls.promise=null})),ls.promise),mS={class:"schema-list-header"},yS={class:"schema-list-title"},bS={key:0,class:"schema-required"},_S={key:0,class:"note"},wS={class:"components-header"},ES={class:"filter-title-row"},SS={class:"filter-title"},xS=["href","aria-label"],kS={key:0,class:"schema-grid"},CS={key:1,class:"note"},AS={class:"schema-list-actions"},$S=["onClick"],IS={__name:"CatalogListField",props:{variant:{type:String,required:!0},field:{type:Object,required:!0},path:{type:Array,default:()=>[]},value:{type:Array,default:()=>[]},modeLevel:{type:String,default:"Simple"},idRegistry:{type:Object,default:()=>({})},nameRegistry:{type:Object,default:()=>({})},idIndex:{type:Array,default:()=>[]},gpioOptions:{type:Array,default:()=>[]},gpioUsage:{type:Object,default:()=>({})},gpioTitle:{type:String,default:""},contextComponentId:{type:String,default:""},globalStore:{type:Object,default:()=>({})}},emits:["update"],setup(e,{emit:n}){const t=e,o=n,s=Y(!1),i=Y([]),a=Y(!1),r=Y(null),d=F(()=>t.variant==="filters"),c=F(()=>Array.isArray(t.value)?t.value:[]),f=F(()=>{var De,Q;return`list-group list-${((Q=(De=t.field)==null?void 0:De.lvl)==null?void 0:Q.toLowerCase())||"simple"}`}),v=F(()=>{if(d.value)return null;const je=Array.isArray(t.field.actions)?t.field.actions:null;return je&&je.length?je:null}),m=F(()=>d.value||!v.value?i.value:i.value.filter(je=>v.value.includes(je.domain))),g=F(()=>d.value?"Choose filter":"Choose action"),I=F(()=>d.value?"https://esphome.io/components/sensor/#sensor-filters":"https://esphome.io/automations/actions/"),U=F(()=>d.value?"Filter documentation":"Action documentation"),x=F(()=>d.value?"Search filters":"Search actions"),R=F(()=>d.value?"No filters to show.":"No actions to show."),B=()=>{s.value=!0},H=()=>{s.value=!1},M=je=>{var Q,le;const De=c.value.slice();d.value?De.push({type:je.id,style:je.style,valueKey:je.valueKey||((le=(Q=je.fields)==null?void 0:Q[0])==null?void 0:le.key)||"value",valueType:je.valueType||"text",config:{}}):De.push({type:je.id,fields:je.fields||[],config:{}}),o("update",{path:t.path,value:De}),s.value=!1},te=je=>{const De=c.value.filter((Q,le)=>le!==je);o("update",{path:t.path,value:De})},we=je=>{r.value=je,a.value=!0},de=()=>{r.value!==null&&te(r.value),a.value=!1,r.value=null},me=()=>{a.value=!1,r.value=null},Ae=(je,{path:De,value:Q})=>{const le=c.value.map((Se,Xe)=>{if(Xe!==je)return Se;const st={...Se.config||{}};let lt=st;return De.slice(0,-1).forEach(ut=>{(!lt[ut]||typeof lt[ut]!="object")&&(lt[ut]={}),lt=lt[ut]}),lt[De[De.length-1]]=Q,{...Se,config:st}});o("update",{path:t.path,value:le})},xe=je=>i.value.find(De=>De.id===(je==null?void 0:je.type)),Me=je=>{const De=xe(je),Q=d.value?"Filter":"Action";return(De==null?void 0:De.label)||(je==null?void 0:je.type)||Q},Ke=je=>{const De=xe(je);return d.value?De?De.style==="scalar"?[{key:"value",type:De.valueType||"text",required:!0}]:De.style==="scalar_or_object"?De.fields||[]:De.fields||[]:[]:(De==null?void 0:De.fields)||(je==null?void 0:je.fields)||[]},et=je=>{if(!(je!=null&&je.type))return"";if(d.value)return`https://esphome.io/components/sensor/#${je.type}`;const Q={"logger.log":"loggerlog-action","switch.turn_on":"switchturn_on-action","switch.turn_off":"switchturn_off-action","switch.toggle":"switchtoggle-action","light.turn_on":"lightturn_on-action","light.turn_off":"lightturn_off-action",delay:"delay-action",lambda:"lambda-condition"}[je.type];return Q?`https://esphome.io/automations/actions/#${Q}`:""};return Yo(async()=>{i.value=d.value?await gS():await vS()}),(je,De)=>(w(),E("div",{class:rt(["schema-list",[f.value,{"is-empty":c.value.length===0}]])},[u("div",mS,[u("div",yS,[u("span",null,ue(e.field.key),1),e.field.required?(w(),E("span",bS,"*")):re("",!0),u("button",{type:"button",class:"secondary compact btn-add schema-list-add",onClick:B},"Add")])]),c.value.length===0?(w(),E("div",_S,"No items yet.")):re("",!0),(w(!0),E(Oe,null,Qe(c.value,(Q,le)=>(w(),E("div",{key:le,class:"schema-list-item"},[u("div",wS,[u("div",ES,[u("h3",SS,ue(Me(Q)),1),et(Q)?(w(),E("a",{key:0,class:"filter-help",href:et(Q),target:"_blank",rel:"noopener noreferrer","aria-label":U.value}," ? ",8,xS)):re("",!0)])]),Ke(Q).length?(w(),E("div",kS,[(w(!0),E(Oe,null,Qe(Ke(Q),Se=>(w(),Mn(vg,{key:Se.key,field:Se,path:[],value:Q.config||{},"mode-level":e.modeLevel,"id-registry":e.idRegistry,"name-registry":e.nameRegistry,"id-index":e.idIndex,"gpio-options":e.gpioOptions,"gpio-usage":e.gpioUsage,"gpio-title":e.gpioTitle,"context-component-id":e.contextComponentId,"global-store":e.globalStore,onUpdate:Xe=>Ae(le,Xe)},null,8,["field","value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store","onUpdate"]))),128))])):(w(),E("div",CS,"Brak pol konfiguracyjnych.")),u("div",AS,[u("button",{type:"button",class:"secondary compact btn-standard",onClick:Se=>we(le)}," Remove ",8,$S)])]))),128)),mt(fS,{open:s.value,items:m.value,title:g.value,"help-url":I.value,"help-label":U.value,"search-placeholder":x.value,"empty-label":R.value,onClose:H,onSelect:M},null,8,["open","items","title","help-url","help-label","search-placeholder","empty-label"]),mt(xa,{open:a.value,title:"Confirm",message:"Are you sure?","confirm-text":"Yes","cancel-text":"Cancel",onConfirm:de,onCancel:me},null,8,["open"])],2))}},TS={class:"gpio-picker-card"},RS={class:"gpio-picker-header"},FS={class:"gpio-picker-sub"},LS={class:"gpio-picker-search"},OS={class:"gpio-picker-body"},MS={key:0,class:"gpio-empty"},PS=["disabled","onClick"],NS={class:"gpio-id"},DS={key:0,class:"gpio-tag"},jS={class:"gpio-row-note"},BS={__name:"GpioPickerModal",props:{open:{type:Boolean,default:!1},title:{type:String,default:""},options:{type:Array,default:()=>[]},usage:{type:Object,default:()=>({})},selected:{type:String,default:""},initialQuery:{type:String,default:""}},emits:["close","select"],setup(e,{emit:n}){const t=e,o=n,s=Y("");Y(null);const i=F(()=>t.title||"Select GPIO"),a=R=>String(R||"").toLowerCase().replace(/\s+/g,""),r=F(()=>{const R=a((t.selected||"").replace(/^GPIO/i,""));return t.options.map(B=>{var me;const H=B.value||B.id,M=a(H),te=((me=t.usage)==null?void 0:me[M])||0,de=te>0&&(te>1||M!==R)?"used":B.status;return{...B,key:M,status:de}})}),d=F(()=>{const R=s.value.trim().toLowerCase();return R?r.value.filter(B=>{const H=B.error||B.warning||B.note||"";return B.id.toLowerCase().includes(R)||H.toLowerCase().includes(R)}):r.value}),c=F(()=>d.value),f=()=>{o("close")},v=Y(!1),m=()=>{v.value=!0},g=()=>{v.value&&(v.value=!1,f())},I=R=>{R.selectable!==!1&&o("select",R.value||R.id)},U=R=>{R.key==="Escape"&&f()};ot(()=>t.open,R=>{if(R){s.value="";const B=(t.selected||"").toLowerCase();r.value.find(H=>(H.value||H.id||"").toLowerCase()===B),window.addEventListener("keydown",U)}else window.removeEventListener("keydown",U),v.value=!1});const x=R=>R.error||R.warning||R.note||"General-purpose GPIO.";return io(()=>{window.removeEventListener("keydown",U)}),(R,B)=>e.open?(w(),E("div",{key:0,class:"gpio-picker-backdrop",onPointerdown:wt(m,["self"]),onClick:wt(g,["self"])},[u("div",TS,[u("header",RS,[u("div",null,[B[1]||(B[1]=u("h3",null,"GPIO Picker",-1)),u("p",FS,ue(i.value),1)]),u("button",{type:"button",class:"secondary compact",onClick:f},"Close")]),u("div",LS,[To(u("input",{"onUpdate:modelValue":B[0]||(B[0]=H=>s.value=H),type:"text",placeholder:"Search GPIO or note"},null,512),[[Ss,s.value]]),B[2]||(B[2]=Jh('<div class="gpio-picker-legend" data-v-cb539cc6><span class="legend-item safe" data-v-cb539cc6>Safe</span><span class="legend-item caution" data-v-cb539cc6>Caution</span><span class="legend-item avoid" data-v-cb539cc6>Avoid</span><span class="legend-item used" data-v-cb539cc6>In use</span></div>',1))]),u("div",OS,[c.value.length?re("",!0):(w(),E("div",MS,"No GPIO matches.")),(w(!0),E(Oe,null,Qe(c.value,H=>(w(),E("div",{key:H.key,class:"gpio-row"},[u("button",{type:"button",class:rt(["gpio-item",[H.status,{disabled:H.selectable===!1}]]),disabled:H.selectable===!1,onClick:M=>I(H)},[u("span",NS,ue(H.id),1),H.selectable===!1?(w(),E("span",DS,"Disabled")):re("",!0)],10,PS),u("div",jS,ue(x(H)),1)]))),128))])])],32)):re("",!0)}},Pf=bo(BS,[["__scopeId","data-v-cb539cc6"]]),US=(e,n,t)=>{if(n&&n[e]!==void 0)return n[e];const o=t==null?void 0:t.find(s=>s.key===e);if(o&&o.default!==void 0)return o.default},VS=(e,n)=>{if(!(!n||typeof n!="object"))return n[e]},Nf=(e,n)=>e?e.value!==void 0?n===e.value:Array.isArray(e.values)?e.values.includes(n):e.notValue!==void 0?n!==e.notValue:!!n:!0,Kr=(e,n,t,o)=>{const s=e==null?void 0:e.dependsOn,i=e==null?void 0:e.globalDependsOn,a=s?US(s.key,n,t):void 0,r=i?VS(i.key,o):void 0;return Nf(s,a)&&Nf(i,r)},HS=(e=[])=>{const n={},t=(s,i)=>{!s||i===void 0||(n[s]=i)},o=(s,i)=>{i!=null&&i.length&&i.forEach(a=>{var d,c;const r=s==null?void 0:s[a.key];if(a.set_global){let f=r;f===void 0&&a.default!==void 0&&(f=a.default),t(a.set_global,f)}a.type==="object"&&o(r||{},a.fields||[]),a.type==="list"&&Array.isArray(r)&&((d=a.item)==null?void 0:d.type)==="object"&&((c=a.item)!=null&&c.fields)&&r.forEach(f=>o(f||{},a.item.fields))})};return e.forEach(({config:s,fields:i})=>{o(s||{},i||[])}),n},Df=(e,n)=>{if(!n||typeof n!="string")return;const t=n.split(".").filter(Boolean);let o=e;for(const s of t){if(!o||typeof o!="object")return;o=o[s]}return o},zS=e=>e.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"e").replace(/[]/g,"l").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"s").replace(/[]/g,"z").replace(/[]/g,"z"),pg=(e,n=24)=>{const t=(e??"").toString(),o=Number(n)||24;return zS(t).toLowerCase().replace(/[^a-z0-9_\s-]/g,"").replace(/[\s_]+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"").slice(0,o)},Yc=(e,n,t)=>{var o,s;if((e==null?void 0:e.type)==="slug"&&((o=e==null?void 0:e.settings)!=null&&o.autoPath)){const i=Df(t||{},e.settings.autoPath),a=String(i??"").trim(),r=String(e.settings.fallbackText??"").trim(),d=a||r;return d?pg(d,Number(e.settings.maxLength)||24):void 0}if((e==null?void 0:e.type)==="ssid"){const i=typeof((s=e.settings)==null?void 0:s.autoPath)=="string"?e.settings.autoPath.trim():"";if(!i)return;const a=Df(t||{},i),r=String(a??"").trim(),d=String(e.settings.fallbackText??"").trim();let c="";r&&d?c=`${r} ${d}`:r?c=r:c=d;const f=Number(e.settings.maxLength)||0;return f>0?c.slice(0,f):c}},Sr=e=>{var o;if((e==null?void 0:e.type)!=="password")return{mode:"none",onEmpty:!1,minLength:0,length:12,charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",bytes:32};const n=((o=e.settings)==null?void 0:o.generator)||{};return{mode:n.mode||"none",onEmpty:!!n.onEmpty,minLength:Number(n.minLength)||0,length:Number(n.length)||12,charset:n.charset||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",bytes:Number(n.bytes)||32}},gg=e=>{var t;if(!((t=globalThis.crypto)!=null&&t.getRandomValues))return"";const n=Sr(e);if(!n||n.mode==="none")return"";if(n.mode==="password"){const o=new Uint8Array(n.length);return globalThis.crypto.getRandomValues(o),Array.from(o).map(s=>n.charset[s%n.charset.length]).join("")}if(n.mode==="base64"){if(typeof btoa!="function")return"";const o=new Uint8Array(n.bytes);globalThis.crypto.getRandomValues(o);let s="";return o.forEach(i=>{s+=String.fromCharCode(i)}),btoa(s)}return""},WS=(e,n,t,o=n)=>{const s=n==null?void 0:n[e];if(s!=null&&!(typeof s=="string"&&s.trim()===""))return s;const a=Array.isArray(t)?t.find(c=>(c==null?void 0:c.key)===e):null;if(!a)return s;const r=Yc(a,n,o);return r!=null&&!(typeof r=="string"&&r.trim()==="")?r:a.default!==void 0?a.default:s},GS={key:0,class:"schema-group schema-object-group"},KS={class:"schema-group-title"},ZS={class:"schema-levels"},qS=["for"],YS={key:0,class:"schema-required"},XS=["href"],JS=["id","value"],QS=["value"],ex={value:"__opt_true"},tx={value:"__opt_false"},nx={class:"schema-list-header"},ox={class:"schema-list-title"},sx=["href"],ix={key:1,class:"schema-required"},ax={key:0,class:"note"},rx={key:0,class:"schema-levels"},lx=["id","value","onChange"],cx=["value"],ux={value:"__opt_true"},dx={value:"__opt_false"},fx=["id","value","onChange"],hx=["value"],px={key:1,value:""},gx=["value"],vx={key:3,class:"schema-gpio-input"},mx=["id","value","onClick"],yx=["id","type","value","onInput"],bx={class:"schema-list-actions"},_x=["onClick"],wx={key:4,class:"schema-icon"},Ex={class:"schema-icon-row"},Sx=["id","value","placeholder"],xx=["src"],kx=["id","value","rows"],Cx=["id","value","rows"],Ax={key:7,class:"schema-search-select"},$x=["id","value","placeholder"],Ix={key:0,class:"schema-search-options"},Tx=["onMousedown"],Rx=["id","value"],Fx=["value"],Lx={key:1,value:"",disabled:""},Ox=["value"],Mx={key:9,class:"schema-id"},Px=["id","value","placeholder"],Nx={key:10,class:"schema-id"},Dx=["id","value","placeholder"],jx={key:0,class:"id-ref-list"},Bx=["onMousedown"],Ux={key:11,class:"schema-gpio"},Vx={class:"schema-gpio-input"},Hx=["id","value","placeholder"],zx={key:12,class:"inline"},Wx=["id","type","value","placeholder"],Gx=["id","type","value","placeholder"],Kx={key:14,class:"field-error"},Zx={key:16,class:"field-error"},tr="__opt_",vg=Object.assign({name:"SchemaField"},{__name:"SchemaField",props:{field:{type:Object,required:!0},path:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})},rootValue:{type:Object,default:null},modeLevel:{type:String,default:"Simple"},idRegistry:{type:Object,default:()=>({})},nameRegistry:{type:Object,default:()=>({})},idIndex:{type:Array,default:()=>[]},gpioOptions:{type:Array,default:()=>[]},gpioUsage:{type:Object,default:()=>({})},gpioTitle:{type:String,default:""},contextComponentId:{type:String,default:""},globalStore:{type:Object,default:()=>({})}},emits:["update"],setup(e,{emit:n}){const t=e,o=n,s=F(()=>{var z,pe,Ue;return(z=t.field)!=null&&z.error?{text:t.field.error,variant:"error"}:(pe=t.field)!=null&&pe.warning?{text:t.field.warning,variant:"warning"}:(Ue=t.field)!=null&&Ue.note?{text:t.field.note,variant:"note"}:null}),i=F(()=>!!(s.value||An.value)),a=F(()=>[...t.path,t.field.key]),r=(z,pe)=>pe.reduce((Ue,Le)=>Ue&&Ue[Le]!==void 0?Ue[Le]:void 0,z),d=F(()=>r(t.value,a.value)),c=F(()=>`schema-${a.value.join("-")}`),f=F(()=>t.field.type==="object"),v=F(()=>t.field.type==="boolean"),m=F(()=>t.field.type==="select"),g=F(()=>m.value&&!!t.field.searchable),I=F(()=>{if(!g.value)return!1;const z=String(_.value||"").trim();return!z||!U.value.length?!1:!U.value.includes(z)}),U=F(()=>{var z,pe;if(!m.value)return[];if(t.field.optionsBy&&t.field.optionsMap){const Ue=(z=t.value)==null?void 0:z[t.field.optionsBy],Le=(pe=t.field.optionsMap)==null?void 0:pe[Ue];if(Array.isArray(Le)&&Le.length)return Le}return t.field.options||[]}),x=F(()=>t.field.type==="list"),R=F(()=>t.field.type==="icon"),B=F(()=>t.field.type==="yaml"||t.field.type==="raw_yaml"),H=F(()=>t.field.type==="lambda"),M=F(()=>{const z=_.value;if(!z)return 1;const pe=z.toString().split(/\r?\n/).length;return Math.max(1,pe)}),te=F(()=>t.field.type==="id"),we=F(()=>t.field.type==="slug"),de=F(()=>t.field.key==="name"),me=F(()=>t.field.type==="id_ref"),Ae=F(()=>t.field.type==="gpio"),xe=F(()=>{var z,pe;return!!(t.field.type==="ssid"&&((z=t.field.settings)!=null&&z.autoPath)||t.field.type==="slug"&&((pe=t.field.settings)!=null&&pe.autoPath))}),Me=F(()=>Sr(t.field)),Ke=F(()=>Me.value.mode!=="none"),et=F(()=>{var z;return t.field.type==="list"&&((z=t.field.item)==null?void 0:z.extends)==="base_filters.json"}),je=F(()=>{var z;return t.field.type==="list"&&((z=t.field.item)==null?void 0:z.extends)==="base_actions.json"}),De=F(()=>et.value||je.value),Q=F(()=>et.value?"filters":"actions"),le=F(()=>Array.isArray(d.value)?d.value:Array.isArray(t.field.default)?t.field.default:[]),Se=F(()=>{var z;return((z=t.field.item)==null?void 0:z.type)||"text"}),Xe=F(()=>Se.value==="object"),st=F(()=>Se.value==="boolean"),lt=F(()=>Se.value==="select"),ut=F(()=>Se.value==="gpio"),Et=F(()=>Se.value==="number"?"number":"text"),Ye={simple:1,normal:2,advanced:3},Ze=z=>{var Ue;const pe=(Ue=z==null?void 0:z.lvl)==null?void 0:Ue.toLowerCase();return Ye[pe]?pe:"simple"},kt=F(()=>{var z;return Ye[(z=t.modeLevel)==null?void 0:z.toLowerCase()]??Ye.simple}),ae=F(()=>t.field.label||t.field.key),ke=(z=[],pe=null)=>z.filter(Ue=>{if(!Kr(Ue,pe,z,t.globalStore))return!1;const Le=Ze(Ue);return Ye[Le]<=kt.value}),Ce=F(()=>ke(t.field.fields||[],d.value||{})),He=F(()=>{var z;return ke(((z=t.field.item)==null?void 0:z.fields)||[])}),tt=F(()=>{var pe,Ue;return`list-group list-${((Ue=(pe=t.field)==null?void 0:pe.lvl)==null?void 0:Ue.toLowerCase())||"simple"}`}),$=Y(!1),O=F(()=>{const z=_.value||"";return z?z.startsWith("mdi:")?z.slice(4):z:""}),W=F(()=>O.value?`mdi:${O.value}`:""),y=F(()=>O.value?`https://cdn.jsdelivr.net/npm/@mdi/svg/svg/${O.value}.svg`:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/emoticon-plus-outline.svg"),k=F(()=>t.field.type==="number"?"number":"text"),_=F(()=>d.value!==void 0?d.value:t.field.default!==void 0?t.field.default:""),T=F(()=>_.value===!0?"true":_.value===!1?"false":t.field.default===!0?"true":(t.field.default===!1,"false")),Z=F(()=>Object.prototype.hasOwnProperty.call(t.field||{},"default")),oe=F(()=>Z.value&&t.field.default===!0?"TRUE (default)":"TRUE"),X=F(()=>Z.value&&t.field.default===!1?"FALSE (default)":"FALSE"),ge=F(()=>T.value==="true"?"TRUE":"FALSE"),ce=F(()=>!g.value&&_.value!==void 0&&_.value!==null&&String(_.value)!==""),ve=F(()=>String(_.value??"")),Pe=z=>Z.value&&z===t.field.default?`${z} (default)`:z,ne=z=>z===!0?"true":"false",fe=F(()=>Object.prototype.hasOwnProperty.call(t.field.item||{},"default")),_e=F(()=>{var z;return fe.value&&((z=t.field.item)==null?void 0:z.default)===!0?"TRUE (default)":"TRUE"}),Be=F(()=>{var z;return fe.value&&((z=t.field.item)==null?void 0:z.default)===!1?"FALSE (default)":"FALSE"}),Je=z=>ne(z)==="true"?"TRUE":"FALSE",Ge=z=>z!=null&&String(z)!=="",it=z=>String(z??""),yt=z=>{var pe;return fe.value&&z===((pe=t.field.item)==null?void 0:pe.default)?`${z} (default)`:z},$t=F(()=>{var gt;const z=((gt=t.field)==null?void 0:gt.domain)||"",pe=t.contextComponentId,Ue=new Set,Le=[];return(t.idIndex||[]).forEach(Nt=>{pe&&Nt.componentId===pe||z&&Nt.domain!==z||Ue.has(Nt.idLower)||(Ue.add(Nt.idLower),Le.push(Nt.id))}),Le.sort((Nt,Wt)=>Nt.localeCompare(Wt))}),pt=Y(!1),_t=Y(""),zt=Y(!1),Zt=F(()=>{const z=_t.value.trim().toLowerCase();return z?$t.value.filter(pe=>pe.toLowerCase().includes(z)):$t.value}),q=F(()=>{const z=String(_.value||"").trim().toLowerCase();return z?U.value.filter(pe=>pe.toLowerCase().includes(z)):U.value}),p=F(()=>g.value&&zt.value&&q.value.length),L=F(()=>{var z;return t.field.type==="password"&&((z=t.field.settings)==null?void 0:z.format)||"any"}),be=F(()=>{var Ue,Le;const z=_.value;if(L.value==="base64_44"){const gt=typeof z=="string"?z.trim():"";if(!/^[A-Za-z0-9+/]{43}=$/.test(gt))return"Key must be base64 (44 chars, ending with =)."}if(!z||typeof z!="string")return"";const pe=z.toLowerCase();return te.value?(((Ue=t.idRegistry)==null?void 0:Ue[pe])||0)>1?"ID already used":"":de.value&&(((Le=t.nameRegistry)==null?void 0:Le[pe])||0)>1?"Name already used":""}),Ie=F(()=>{if(!me.value)return"";if(!$t.value.length)return"No matching identifiers available";const z=_.value;return!z||typeof z!="string"||$t.value.some(Ue=>Ue.toLowerCase()===z.toLowerCase())?"":"No matching identifiers available"}),ze=Y(!1),C=z=>String(z||"").toLowerCase().replace(/\s+/g,"").replace(/^gpio/,""),ye=F(()=>{const z=C(_.value||"");return t.gpioOptions.find(pe=>{const Le=`GPIO${pe.value||pe.id}`;return C(Le)===z})||null}),Fe=F(()=>{var Ue;const z=C(_.value||"");if(!z)return 0;const pe=((Ue=t.gpioUsage)==null?void 0:Ue[z])||0;return _.value?Math.max(0,pe-1):pe}),at=F(()=>{var z;return Fe.value>0?"used":((z=ye.value)==null?void 0:z.status)||""}),Ct=F(()=>at.value?`gpio-${at.value}`:""),bt=z=>{var Wt;const pe=C(z||"");if(!pe)return"";const Ue=t.gpioOptions.find(gn=>{const Mi=`GPIO${gn.value||gn.id}`;return C(Mi)===pe}),Le=((Wt=t.gpioUsage)==null?void 0:Wt[pe])||0,Nt=(z?Le>1:Le>0)?"used":Ue==null?void 0:Ue.status;return Nt?`gpio-${Nt}`:""},An=F(()=>{if(at.value==="used")return{text:"This GPIO is already used elsewhere.",variant:"error"};const z=ye.value||{};return z.error?{text:z.error,variant:"error"}:z.warning?{text:z.warning,variant:"warning"}:z.note?at.value==="avoid"?{text:z.note,variant:"error"}:at.value==="caution"?{text:z.note,variant:"warning"}:{text:z.note,variant:"note"}:null}),$n=Y(!1),on=Y(!1),rn=Y(""),j=Y(!1),he=F(()=>Yc(t.field,t.value||{},t.rootValue||t.value||{})),Re=()=>gg(t.field);ot(()=>[d.value,t.field.default,t.field.required],([z,pe,Ue])=>{Ue&&($n.value||z!==void 0||pe===void 0||t.field.type!=="object"&&(t.field.type==="list"&&!Array.isArray(pe)||t.field.type!=="boolean"&&(o("update",{path:a.value,value:pe}),$n.value=!0)))},{immediate:!0}),ot(()=>[he.value,_.value],([z,pe])=>{if(!xe.value)return;const Ue=(z??"").toString(),Le=(pe||"").toString();(!on.value||Le===rn.value||!Le)&&(!Ue&&!Le||(o("update",{path:a.value,value:Ue}),rn.value=Ue))},{immediate:!0}),ot(()=>_.value,z=>{if(!Ke.value||!Me.value.onEmpty||j.value)return;const pe=Me.value.minLength;if(z&&(!pe||String(z).length>=pe))return;const Ue=Re();Ue&&o("update",{path:a.value,value:Ue})},{immediate:!0});const ct=({path:z,value:pe})=>{o("update",{path:z,value:pe})},$e=z=>z.replace(/[^a-z0-9_]/g,"").slice(0,24),Ne=z=>{var pe;return pg(z,Number((pe=t.field.settings)==null?void 0:pe.maxLength)||24)},P=z=>{const pe=z.target.value,Ue=te.value?$e(pe):we.value?Ne(pe):pe;if((te.value||we.value)&&pe!==Ue&&(z.target.value=Ue),xe.value){const Le=(he.value??"").toString();Ue?Ue!==Le?on.value=!0:(on.value=!1,rn.value=Le):on.value=!1}o("update",{path:a.value,value:Ue})},K=z=>{zt.value||(zt.value=!0),P(z)},J=()=>{zt.value=!0},se=()=>{window.setTimeout(()=>{zt.value=!1},120)},Ee=z=>{o("update",{path:a.value,value:z}),zt.value=!1},qe=()=>{const z=Re();z&&(j.value=!0,o("update",{path:a.value,value:z}))},It=z=>{const pe=z.target.value;_t.value=pe,o("update",{path:a.value,value:pe})},Bt=()=>{_t.value=_.value||"",pt.value=!0},sn=()=>{window.setTimeout(()=>{pt.value=!1},150)},fn=z=>{o("update",{path:a.value,value:z}),_t.value=z,pt.value=!1},qt=(z,pe=z==null?void 0:z.value)=>{if(!z)return;const Ue=String(pe??""),Le=Array.from(z.options||[]).findIndex(gt=>gt.hidden&&String(gt.value??"")===Ue);Le<0||(z.selectedIndex=Le)},ln=(z,pe)=>{const Ue=String(z??"");if(!Ue.startsWith(tr))return Ue;const Le=Number(Ue.slice(tr.length));return!Number.isInteger(Le)||Le<0?Ue:(pe==null?void 0:pe[Le])??Ue},Ri=z=>`${tr}${z}`,Yt=z=>`${tr}${z}`,Fi=z=>{const pe=ln(z.target.value,U.value);o("update",{path:a.value,value:pe}),qt(z.target,pe)},ks=z=>{const Ue=z.target.value==="__opt_true";o("update",{path:a.value,value:Ue}),qt(z.target,Ue?"true":"false")},_o=()=>{$.value=!0},ro=z=>{const pe=z.target.value;o("update",{path:a.value,value:pe})},Zr=z=>{const pe=z?`mdi:${z}`:"";o("update",{path:a.value,value:pe}),$.value=!1},Li=({query:z})=>{$.value=!1,z||o("update",{path:a.value,value:""})},qr=z=>{const pe=z?`GPIO${z}`:"";o("update",{path:a.value,value:pe}),ze.value=!1},Oi=()=>{ze.value=!0},Yr=F(()=>(_.value||"").replace(/^gpio\s*/i,"").trim()),Po=Y(!1),cn=Y(null),Ys=F(()=>cn.value===null?"":le.value[cn.value]||""),Xn=z=>{cn.value=z,Po.value=!0},Ta=z=>{if(cn.value===null)return;const pe=z?`GPIO${z}`:"";Xs(cn.value,pe),Po.value=!1},Jo=z=>`${c.value}-${z}`,Ra=(z,pe,Ue)=>{if(!pe.length)return Ue;const Le={...z||{}};let gt=Le;return pe.slice(0,-1).forEach(Nt=>{(!gt[Nt]||typeof gt[Nt]!="object")&&(gt[Nt]={}),gt=gt[Nt]}),gt[pe[pe.length-1]]=Ue,Le},Fa=(z,{path:pe,value:Ue})=>{const Le=le.value.map((gt,Nt)=>Nt!==z?gt:Ra(gt||{},pe,Ue));o("update",{path:a.value,value:Le})},Xs=(z,pe)=>{const Ue=le.value.map((Le,gt)=>gt===z?pe:Le);o("update",{path:a.value,value:Ue})},Xr=(z,pe)=>{const Le=pe.target.value==="__opt_true";Xs(z,Le),qt(pe.target,Le?"true":"false")},La=(z,pe)=>{var gt;const Ue=((gt=t.field.item)==null?void 0:gt.options)||[],Le=ln(pe.target.value,Ue);Xs(z,Le),qt(pe.target,Le)},Jr=()=>{const z=le.value.slice();z.push(Xe.value?{}:""),o("update",{path:a.value,value:z})},Qr=z=>{const pe=le.value.filter((Ue,Le)=>Le!==z);o("update",{path:a.value,value:pe})};return(z,pe)=>{const Ue=my("SchemaField",!0);return f.value?(w(),E("div",GS,[u("div",KS,[u("span",null,ue(ae.value),1)]),u("div",ZS,[(w(!0),E(Oe,null,Qe(Ce.value,Le=>(w(),Mn(Ue,{key:Le.key,field:Le,path:a.value,value:e.value,"root-value":e.rootValue||e.value,"mode-level":e.modeLevel,"id-registry":e.idRegistry,"name-registry":e.nameRegistry,"id-index":e.idIndex,"gpio-options":e.gpioOptions,"gpio-usage":e.gpioUsage,"gpio-title":e.gpioTitle,"context-component-id":e.contextComponentId,"global-store":e.globalStore,onUpdate:ct},null,8,["field","path","value","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"]))),128))])])):(w(),E("div",{key:1,class:rt(["schema-field",{"schema-field--stacked":i.value}])},[x.value?re("",!0):(w(),E("label",{key:0,for:c.value},[wi(ue(ae.value),1),e.field.required?(w(),E("span",YS,"*")):re("",!0),e.field.helpUrl?(w(),E("a",{key:1,class:"filter-help",href:e.field.helpUrl,target:"_blank",rel:"noopener noreferrer","aria-label":"Field help"}," ? ",8,XS)):re("",!0)],8,qS)),v.value?(w(),E("select",{key:1,id:c.value,value:T.value,onChange:ks},[u("option",{value:T.value,hidden:""},ue(ge.value),9,QS),u("option",ex,ue(oe.value),1),u("option",tx,ue(X.value),1)],40,JS)):De.value?(w(),Mn(IS,{key:2,variant:Q.value,field:e.field,path:a.value,value:le.value,"mode-level":e.modeLevel,"id-registry":e.idRegistry,"name-registry":e.nameRegistry,"id-index":e.idIndex,"gpio-options":e.gpioOptions,"gpio-usage":e.gpioUsage,"gpio-title":e.gpioTitle,"context-component-id":e.contextComponentId,"global-store":e.globalStore,onUpdate:ct},null,8,["variant","field","path","value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):x.value?(w(),E("div",{key:3,class:rt(["schema-list",[tt.value,{"is-empty":le.value.length===0}]])},[u("div",nx,[u("div",ox,[u("span",null,ue(ae.value),1),e.field.helpUrl?(w(),E("a",{key:0,class:"filter-help",href:e.field.helpUrl,target:"_blank",rel:"noopener noreferrer","aria-label":"Field help"}," ? ",8,sx)):re("",!0),e.field.required?(w(),E("span",ix,"*")):re("",!0)]),u("button",{type:"button",class:"secondary compact btn-add schema-list-add",onClick:Jr}," Add ")]),le.value.length===0?(w(),E("div",ax,"No items yet")):re("",!0),(w(!0),E(Oe,null,Qe(le.value,(Le,gt)=>{var Nt;return w(),E("div",{key:gt,class:"schema-list-item"},[Xe.value?(w(),E("div",rx,[(w(!0),E(Oe,null,Qe(He.value,Wt=>(w(),Mn(Ue,{key:`${gt}-${Wt.key}`,field:Wt,path:[],value:Le||{},"root-value":e.rootValue||e.value,"mode-level":e.modeLevel,"id-registry":e.idRegistry,"name-registry":e.nameRegistry,"id-index":e.idIndex,"gpio-options":e.gpioOptions,"gpio-usage":e.gpioUsage,"gpio-title":e.gpioTitle,"context-component-id":e.contextComponentId,"global-store":e.globalStore,onUpdate:gn=>Fa(gt,gn)},null,8,["field","value","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store","onUpdate"]))),128))])):st.value?(w(),E("select",{key:1,id:Jo(gt),value:ne(Le),onChange:Wt=>Xr(gt,Wt)},[u("option",{value:ne(Le),hidden:""},ue(Je(Le)),9,cx),u("option",ux,ue(_e.value),1),u("option",dx,ue(Be.value),1)],40,lx)):lt.value?(w(),E("select",{key:2,id:Jo(gt),value:Le??"",onChange:Wt=>La(gt,Wt)},[Ge(Le)?(w(),E("option",{key:0,value:Le,hidden:""},ue(it(Le)),9,hx)):re("",!0),e.field.required?re("",!0):(w(),E("option",px,"--")),(w(!0),E(Oe,null,Qe(((Nt=e.field.item)==null?void 0:Nt.options)||[],(Wt,gn)=>(w(),E("option",{key:Wt,value:Yt(gn)},ue(yt(Wt)),9,gx))),128))],40,fx)):ut.value?(w(),E("div",vx,[u("input",{id:Jo(gt),type:"text",readonly:"",value:Le??"",class:rt(bt(Le??"")),onClick:Wt=>Xn(gt)},null,10,mx)])):(w(),E("input",{key:4,id:Jo(gt),type:Et.value,value:Le??"",onInput:Wt=>Xs(gt,Wt.target.value)},null,40,yx)),u("div",bx,[u("button",{type:"button",class:"secondary compact btn-standard",onClick:Wt=>Qr(gt)}," Remove ",8,_x)])])}),128)),mt(Pf,{open:Po.value,options:e.gpioOptions,usage:e.gpioUsage,selected:Ys.value,"initial-query":Ys.value,title:e.gpioTitle,onClose:pe[0]||(pe[0]=Le=>Po.value=!1),onSelect:Ta},null,8,["open","options","usage","selected","initial-query","title"])],2)):R.value?(w(),E("div",wx,[u("div",Ex,[u("input",{id:c.value,type:"text",value:W.value,placeholder:e.field.placeholder,onInput:ro},null,40,Sx),u("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:_o},[u("img",{src:y.value,alt:"Add icon"},null,8,xx)])]),mt(fg,{open:$.value,selected:O.value,"initial-query":O.value,onClose:Li,onSelect:Zr},null,8,["open","selected","initial-query"])])):B.value?(w(),E("textarea",{key:5,id:c.value,value:_.value,rows:M.value,wrap:"off",class:"lambda-textarea",onInput:P},null,40,kx)):H.value?(w(),E("textarea",{key:6,id:c.value,value:_.value,rows:M.value,wrap:"off",class:"lambda-textarea",onInput:P},null,40,Cx)):g.value?(w(),E("div",Ax,[u("input",{id:c.value,type:"text",value:_.value,placeholder:e.field.placeholder,class:rt({"field-invalid":I.value}),onFocus:J,onBlur:se,onInput:K},null,42,$x),p.value?(w(),E("div",Ix,[(w(!0),E(Oe,null,Qe(q.value,Le=>(w(),E("button",{key:Le,type:"button",class:"schema-search-option",onMousedown:wt(gt=>Ee(Le),["prevent"])},ue(Le),41,Tx))),128))])):re("",!0)])):m.value?(w(),E("select",{key:8,id:c.value,value:_.value,onChange:Fi},[ce.value?(w(),E("option",{key:0,value:_.value,hidden:""},ue(ve.value),9,Fx)):re("",!0),e.field.placeholder?(w(),E("option",Lx,ue(e.field.placeholder),1)):re("",!0),(w(!0),E(Oe,null,Qe(U.value,(Le,gt)=>(w(),E("option",{key:Le,value:Ri(gt)},ue(Pe(Le)),9,Ox))),128))],40,Rx)):te.value?(w(),E("div",Mx,[u("input",{id:c.value,type:"text",value:_.value,maxlength:24,placeholder:e.field.placeholder,class:rt({"field-invalid":be.value}),onInput:P},null,42,Px)])):me.value?(w(),E("div",Nx,[u("input",{id:c.value,type:"text",value:_.value,placeholder:e.field.placeholder,class:rt({"field-invalid":Ie.value}),onFocus:Bt,onBlur:sn,onInput:It},null,42,Dx),pt.value&&Zt.value.length?(w(),E("div",jx,[(w(!0),E(Oe,null,Qe(Zt.value,Le=>(w(),E("button",{key:Le,type:"button",class:"id-ref-option",onMousedown:wt(gt=>fn(Le),["prevent"])},ue(Le),41,Bx))),128))])):re("",!0)])):Ae.value?(w(),E("div",Ux,[u("div",Vx,[u("input",{id:c.value,type:"text",value:_.value,placeholder:e.field.placeholder,class:rt(Ct.value),onInput:P},null,42,Hx),u("button",{type:"button",class:"secondary compact schema-icon-btn","aria-label":"Open GPIO picker",onClick:Oi},[...pe[2]||(pe[2]=[u("img",{src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/chip.svg",alt:""},null,-1)])])]),An.value?(w(),E("div",{key:0,class:rt(["field-note","notice",An.value.variant==="warning"?"notice--warning":"",An.value.variant==="error"?"notice--error":""])},ue(An.value.text),3)):re("",!0),mt(Pf,{open:ze.value,options:e.gpioOptions,usage:e.gpioUsage,selected:Yr.value,"initial-query":_.value,title:e.gpioTitle,onClose:pe[1]||(pe[1]=Le=>ze.value=!1),onSelect:qr},null,8,["open","options","usage","selected","initial-query","title"])])):Ke.value?(w(),E("div",zx,[u("input",{id:c.value,type:k.value,value:_.value,placeholder:e.field.placeholder,class:rt({"field-invalid":be.value}),onInput:P},null,42,Wx),u("button",{type:"button",class:"secondary icon-button","aria-label":"Generate",onClick:qe},[...pe[3]||(pe[3]=[u("img",{src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/lock-reset.svg",alt:"",class:"icon-button-img"},null,-1)])])])):(w(),E("input",{key:13,id:c.value,type:k.value,value:_.value,placeholder:e.field.placeholder,class:rt({"field-invalid":be.value}),onInput:P},null,42,Gx)),be.value?(w(),E("div",Kx,ue(be.value),1)):re("",!0),s.value?(w(),E("div",{key:15,class:rt(["field-note","notice",s.value.variant==="warning"?"notice--warning":"",s.value.variant==="error"?"notice--error":""])},ue(s.value.text),3)):re("",!0),Ie.value?(w(),E("div",Zx,ue(Ie.value),1)):re("",!0)],2))}}}),Ps=e=>{if(!e)return"";const n=String(e).trim();if(!n)return"";const t=n.startsWith("#")?n.slice(1):n;return/^[0-9a-fA-F]{6}$/.test(t)?`#${t.toUpperCase()}`:""},mg=e=>{if(!e)return null;const t=String(e).trim().match(/^(\d{1,3})\s*:\s*(\d{1,3})\s*:\s*(\d{1,3})$/);if(!t)return null;const o=s=>Math.max(0,Math.min(255,Number(s)));return{r:o(t[1]),g:o(t[2]),b:o(t[3])}},ui=(e,n="#cbd5f5")=>{if(!e)return n;const t=String(e).trim();if(!t)return n;const o=Ps(t);if(o)return o;const s=mg(t);return s?`rgb(${s.r}, ${s.g}, ${s.b})`:t.startsWith("#")||/^rgb\(/i.test(t)||/^[a-zA-Z]+$/.test(t)?t:n},qx=e=>{if(!e)return"";const n=String(e).trim();if(!n)return"";if(n.startsWith("Color(")||n.startsWith("id("))return n;const t=Ps(n);if(t)return`Color(0x${t.slice(1)})`;const o=mg(n);return o?`Color(${o.r}, ${o.g}, ${o.b})`:n},Yx={class:"display-canvas__shell"},Xx=["onPointerdown","onPointermove","onPointerleave"],Jx=["viewBox"],Qx=["x2","y2","stroke"],ek=["width","height","fill","stroke"],tk=["cx","cy","r","fill","stroke"],nk=["points","fill","stroke"],ok=["points","fill","stroke"],sk=["viewBox"],ik={key:0,class:"display-graph__border"},ak=["width","height"],rk={key:1,class:"display-graph__grid"},lk=["x1","y1","x2","y2"],ck=["x1","y1","x2","y2"],uk={class:"display-graph__traces"},dk=["d","stroke","stroke-width","stroke-dasharray"],fk=["cx","cy","r","fill"],hk={key:2,class:"display-graph__legend"},pk=["x","y","width","height"],gk=["x","y"],vk=["x","y"],mk=["src","alt"],yk=["src","alt"],bk={key:0,class:"display-canvas__hint"},_k=2,wk={__name:"DisplayCanvas",props:{screenW:{type:Number,required:!0},screenH:{type:Number,required:!0},zoom:{type:Number,default:2},gridSize:{type:Number,default:4},elements:{type:Array,default:()=>[]},isMonochrome:{type:Boolean,default:!0},selectedId:{type:String,default:null}},emits:["select","update-element"],setup(e,{emit:n}){const t=e,o=n,s=Y(null),i=Y(null),a=new Map,r=new Map,d=new Map,c=F(()=>{const y=t.gridSize*t.zoom;return{width:`${t.screenW*t.zoom}px`,height:`${t.screenH*t.zoom}px`,backgroundSize:`${y}px ${y}px`}}),f=y=>{const k=y.type==="shape"?Number(y.rotation||0):0,_={left:`${y.x*t.zoom}px`,top:`${y.y*t.zoom}px`,width:`${y.w*t.zoom}px`,height:`${y.h*t.zoom}px`,cursor:ae(y)};return k&&(_.transform=`rotate(${k}deg)`,_.transformOrigin="50% 50%"),_},v=y=>{const k=y.type==="text",_=k?Math.max(1,Math.round(y.h*t.zoom)):Math.max(8,Math.round(7*t.zoom)),T=y.rotation&&(y.type==="image"||y.type==="icon")?`rotate(${y.rotation}deg)`:"none",Z={fontSize:`${_}px`,transform:T};return k&&(Z.fontFamily=y.fontFamily?`"${y.fontFamily}"`:"inherit",Z.fontWeight=y.fontWeight||400,Z.fontStyle=y.fontStyle||"normal",Z.lineHeight=1,Z.position="absolute",Z.left="0px",Z.top="0px",Z.whiteSpace=y.wrap===!1?"nowrap":"pre-wrap",Z.wordBreak=y.wrap===!1?"normal":"break-word"),!t.isMonochrome&&y.color&&(Z.color=ui(y.color)),Z},m=y=>{if(y.type==="text"){if((y.textMode||"static")==="dynamic"){const _=y.prefix||"",T=y.suffix||"";return`${_}{{val}}${T}`}return y.text??""}return y.type==="image"?y.image||"image":y.type==="icon"?!y.icon||y.icon==="placeholder"?"icon":y.icon:y.type},g=y=>y.type==="shape",I=y=>["polygon5","polygon6","polygon7","polygon8"].includes(y),U=y=>{const k=Number(y.shapeType.replace("polygon",""));if(!k||k<3)return"";const _=y.w/2,T=y.h/2,Z=Math.max(1,Math.min(y.w,y.h)/2),oe=[],X=-Math.PI/2;for(let ge=0;ge<k;ge+=1){const ce=X+ge*2*Math.PI/k,ve=_+Z*Math.cos(ce),Pe=T+Z*Math.sin(ce);oe.push(`${ve} ${Pe}`)}return oe.join(" ")},x=y=>{if(!y)return"";const k=y.trim();return k==="placeholder"?"":k.startsWith("mdi:")?k.slice(4):k},R=y=>{const k=x(y.icon);return k?`https://cdn.jsdelivr.net/npm/@mdi/svg/svg/${encodeURIComponent(k)}.svg`:""},B=y=>{const k=R(y);return{backgroundColor:!t.isMonochrome&&y.color?ui(y.color):"#cbd5f5",maskImage:`url(${k})`,WebkitMaskImage:`url(${k})`,maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat",maskPosition:"center",WebkitMaskPosition:"center",maskSize:"100% 100%",WebkitMaskSize:"100% 100%"}},H=y=>t.isMonochrome?"#cbd5f5":ui(y.color),M=y=>t.isMonochrome?"#cbd5f5":ui(y.color),te=new Map,we=y=>{let k=0;const _=String(y);for(let T=0;T<_.length;T+=1)k=(k<<5)-k+_.charCodeAt(T),k|=0;return k>>>0},de=y=>()=>{let k=y+=1831565813;return k=Math.imul(k^k>>>15,k|1),k^=k+Math.imul(k^k>>>7,k|61),((k^k>>>14)>>>0)/4294967296},me=y=>{if(typeof y=="number")return y;const k=String(y||"").trim().toLowerCase();if(!k)return 0;const _=k.match(/^([0-9]+(?:\.[0-9]+)?)\s*(ms|s|min|h|d)?$/);if(!_)return 0;const T=Number(_[1]),Z=_[2]||"min";return Number.isNaN(T)?0:Z==="ms"?T/6e4:Z==="s"?T/60:Z==="h"?T*60:Z==="d"?T*1440:T},Ae=(y,k)=>{const _=me(y),T=me(k);if(!_||!T)return 0;const Z=Math.floor(_/T);return Math.max(0,Z)},xe=["#60a5fa","#f97316","#22c55e","#eab308","#a78bfa","#f43f5e"],Me=y=>[y.id,y.graphId,y.w,y.h,y.duration,y.border,y.xGrid,y.yGrid,y.useTraces,JSON.stringify(y.traces||[]),y.sensor].join("|"),Ke=y=>{const k=Me(y);if(te.has(k))return te.get(k);const _=Math.max(10,Math.round(y.w||10)),T=Math.max(10,Math.floor(_/4)),Z=we(y.graphId||y.id||"graph"),X=(y.useTraces?y.traces||[]:[{sensor:y.sensor||"",name:""}]).map((ce,ve)=>{const Pe=Z+ve*997,ne=de(Pe),fe=[];let _e=ne();for(let Be=0;Be<T;Be+=1){const Je=.35+ne()*.55;_e=_e*.75+Je*.25+(ne()-.5)*.08,_e=Math.min(1,Math.max(0,_e)),fe.push(_e)}return fe}),ge={pointsCount:T,series:X};return te.set(k,ge),ge},et=y=>{const k=Math.max(1,Math.round(y.w||1)),_=Math.max(1,Math.round(y.h||1)),T=2,Z=y.xGrid?Ae(y.duration||"",y.xGrid):0,oe=y.yGrid?Math.max(1,Math.floor(4)):0,X=[];if(Z>0)for(let ce=1;ce<Z;ce+=1){const ve=T+ce*(k-T*2)/Z;X.push({x1:ve,y1:T,x2:ve,y2:_-T})}const ge=[];if(oe>0)for(let ce=1;ce<oe;ce+=1){const ve=T+ce*(_-T*2)/oe;ge.push({x1:T,y1:ve,x2:k-T,y2:ve})}return{x:X,y:ge}},je=y=>{const k=Math.max(1,Math.round(y.w||1)),_=Math.max(1,Math.round(y.h||1)),T=2,{pointsCount:Z,series:oe}=Ke(y),X=y.useTraces?y.traces||[]:[{lineType:y.lineType||"SOLID",lineThickness:y.lineThickness||3,continuous:!!y.continuous,color:y.color||""}];return oe.map((ge,ce)=>{const ve=X[ce]||{},Pe=Math.max(1,Number(ve.lineThickness||2)),ne=t.isMonochrome?"#cbd5f5":ve.color||xe[ce%xe.length],fe=ve.lineType||"SOLID",_e=ve.continuous!==!1,Be=fe==="DOTTED"?"1 3":fe==="DASHED"?"5 4":"",Je=ge.map((it,yt)=>{const $t=T+yt*(k-T*2)/Math.max(1,Z-1),pt=T+(1-it)*(_-T*2);return{x:$t,y:pt}}),Ge=Je.reduce((it,yt,$t)=>it+`${$t===0?"M":"L"}${yt.x.toFixed(2)} ${yt.y.toFixed(2)} `,"");return{points:Je,path:Ge,thickness:Pe,color:ne,dash:Be,continuous:_e}})},De=y=>{if(!y.legendEnabled)return null;const k=Math.max(1,Math.round(y.w||1)),_=Math.max(1,Math.round(y.h||1)),T=Number(y.legendWidth||0)||Math.min(80,Math.max(48,k*.5)),Z=y.useTraces?y.traces||[]:[{name:""}],oe=y.legendShowValues||"AUTO",X=y.legendShowUnits!==!1,ge=Math.max(6,Number(y.legendNameFontSize||10)),ce=Math.max(6,Number(y.legendValueFontSize||8));let ve=0;const Pe=[],ne=(Ge,it,yt)=>{ve+=it+3,Pe.push({text:Ge,y:ve,type:yt,size:it})},fe=(Ge,it)=>{ve+=ge+3,Pe.push({nameText:Ge,valueText:it,nameSize:ge,valueSize:ce,y:ve})};Z.forEach((Ge,it)=>{const yt=(Ge==null?void 0:Ge.name)||(Ge==null?void 0:Ge.sensor)||`Trace ${it+1}`,$t=(Math.round((.2+it*.13)*100)/10).toFixed(1),pt=X?`${$t} u`:$t;if(oe==="NONE"){ne(yt,ge,"name");return}if(oe==="BELOW"){ne(yt,ge,"name"),ne(pt,ce,"value");return}fe(`${yt}:`,pt)});const _e=Number(y.legendHeight||0)||ve+4;return{x:Math.max(1,k-T-2),y:2,w:T,h:Math.min(_-4,_e),border:y.legendBorder!==!1,rows:Pe,nameFontFamily:y.legendNameFontFamily||"",valueFontFamily:y.legendValueFontFamily||"",nameFontSize:ge,valueFontSize:ce}},Q=y=>`${y.imageUrl||""}|${y.invert?"1":"0"}`,le=y=>{const k=Q(y);return r.get(k)||y.imageUrl},Se=y=>`${y.animationUrl||""}|${y.autoAnimate?"1":"0"}`,Xe=y=>{if(y.autoAnimate)return y.animationUrl;const k=Se(y);return d.get(k)||y.animationUrl},st=async(y,k)=>{const _=`${y}|${k?"1":"0"}`;if(!y||r.has(_))return;const T=new Image;T.src=y;try{await T.decode()}catch{return}const Z=document.createElement("canvas");Z.width=T.width,Z.height=T.height;const oe=Z.getContext("2d");if(!oe)return;oe.imageSmoothingEnabled=!1,oe.drawImage(T,0,0);const X=oe.getImageData(0,0,Z.width,Z.height),ge=X.data,ce=[203,213,245];for(let ve=0;ve<ge.length;ve+=4){const Pe=ge[ve],ne=ge[ve+1],fe=ge[ve+2];if(ge[ve+3]==0){ge[ve+3]=0;continue}const Be=.2126*Pe+.7152*ne+.0722*fe;(k?Be<128:Be>=128)?(ge[ve]=ce[0],ge[ve+1]=ce[1],ge[ve+2]=ce[2],ge[ve+3]=255):ge[ve+3]=0}oe.putImageData(X,0,0),r.set(_,Z.toDataURL("image/png"))},lt=async y=>{if(!y)return;const k=`${y}|0`;if(d.has(k))return;const _=new Image;_.src=y;try{await _.decode()}catch{return}const T=document.createElement("canvas");T.width=_.width,T.height=_.height;const Z=T.getContext("2d");Z&&(Z.imageSmoothingEnabled=!1,Z.drawImage(_,0,0),d.set(k,T.toDataURL("image/png")))},ut=y=>{if(!y)return!1;const k=y.toLowerCase();return k.endsWith(".ttf")||k.endsWith(".otf")||k.endsWith(".woff")||k.endsWith(".woff2")},Et=async y=>{if(!(y!=null&&y.fontFamily)||!(y!=null&&y.fontUrl)||!ut(y.fontUrl))return;const k=y.fontWeight||400,_=y.fontStyle||"normal",T=`${y.fontFamily}|${y.fontUrl}|${k}|${_}`;if(!a.has(T))try{const oe=await new FontFace(y.fontFamily,`url(${y.fontUrl})`,{weight:`${k}`,style:_}).load();document.fonts.add(oe),a.set(T,!0)}catch{a.set(T,!1)}},Ye=(y,k,_)=>Math.min(Math.max(y,k),_),Ze=y=>Math.round(y/t.gridSize)*t.gridSize,kt=(y,k)=>{var Z;const _=(Math.round(k/90)%4+4)%4;return _&&((Z={n:["n","e","s","w"],e:["e","s","w","n"],s:["s","w","n","e"],w:["w","n","e","s"],ne:["ne","se","sw","nw"],se:["se","sw","nw","ne"],sw:["sw","nw","ne","se"],nw:["nw","ne","se","sw"]}[y])==null?void 0:Z[_])||y},ae=y=>{var T;if(y.id!==((T=i.value)==null?void 0:T.id))return"grab";const k=y.type==="shape"?Number(y.rotation||0):0,_=kt(i.value.edge,k);return _==="n"||_==="s"?"ns-resize":_==="e"||_==="w"?"ew-resize":_==="ne"||_==="sw"?"nesw-resize":_==="nw"||_==="se"?"nwse-resize":"grab"},ke=(y,k)=>{const _=y.currentTarget.getBoundingClientRect(),T=_.left+_.width/2,Z=_.top+_.height/2,X=-(k.type==="shape"?Number(k.rotation||0):0)*Math.PI/180,ge=y.clientX-T,ce=y.clientY-Z,ve=Math.cos(X),Pe=Math.sin(X),ne=ge*ve-ce*Pe,fe=ge*Pe+ce*ve,_e=k.w*t.zoom,Be=k.h*t.zoom,Je=(ne+_e/2)/t.zoom,Ge=(fe+Be/2)/t.zoom,it=Math.min(_k,k.w/2,k.h/2),yt=Je<=it,$t=Je>=k.w-it,pt=Ge<=it,_t=Ge>=k.h-it;return pt&&yt?"nw":pt&&$t?"ne":_t&&yt?"sw":_t&&$t?"se":pt?"n":_t?"s":yt?"w":$t?"e":null},Ce=()=>{o("select",null)},He=(y,k)=>{if(y.button===1)return;y.preventDefault(),y.stopPropagation(),o("select",k.id);const _=ke(y,k),T=_?"resize":"move",Z=k.type==="shape"?Number(k.rotation||0):0,oe=k.x+k.w/2,X=k.y+k.h/2;s.value={id:k.id,mode:T,edge:_,rotation:Z,lockAspect:["image","icon","animation"].includes(k.type),aspectRatio:k.w&&k.h?k.w/k.h:1,startCenterX:oe,startCenterY:X,startClientX:y.clientX,startClientY:y.clientY,startX:k.x,startY:k.y,startW:k.w,startH:k.h},window.addEventListener("pointermove",tt),window.addEventListener("pointerup",W)},tt=y=>{if(s.value){const{id:k,mode:_,edge:T,rotation:Z,lockAspect:oe,aspectRatio:X,startClientX:ge,startClientY:ce,startX:ve,startY:Pe,startW:ne,startH:fe,startCenterX:_e,startCenterY:Be}=s.value,Je=(y.clientX-ge)/t.zoom,Ge=(y.clientY-ce)/t.zoom;if(_==="move"){const Ne=Math.max(0,t.screenW-ne),P=Math.max(0,t.screenH-fe),K=Ye(Ze(ve+Je),0,Ne),J=Ye(Ze(Pe+Ge),0,P);o("update-element",{id:k,patch:{x:K,y:J}});return}const it=t.gridSize,yt=-Z*Math.PI/180,$t=Math.cos(yt),pt=Math.sin(yt),_t=Je*$t+Ge*pt,zt=-Je*pt+Ge*$t,Zt=Ze(_t),q=Ze(zt),p=Math.abs(Math.round(Z/90))%2===1,L=p?-Zt:Zt,be=p?-q:q,Ie=ne/2,ze=fe/2;let C=Ie,ye=ze,Fe=0,at=0;T.includes("e")&&(C+=L/2,Fe+=L/2),T.includes("w")&&(C-=L/2,Fe+=L/2),T.includes("s")&&(ye+=be/2,at+=be/2),T.includes("n")&&(ye-=be/2,at+=be/2);const Ct=it/2;if(C=Math.max(Ct,C),ye=Math.max(Ct,ye),oe){const Ne=X||1,P=Math.max(it,Ze(C*2)),K=Math.max(it,Ze(ye*2)),J=T.includes("e")||T.includes("w"),se=T.includes("n")||T.includes("s");let Ee=P,qe=K;if(J&&!se)Ee=P,qe=Math.max(it,Ze(Ee/Ne));else if(!J&&se)qe=K,Ee=Math.max(it,Ze(qe*Ne));else{const sn=Math.abs(P-ne),fn=Math.abs(K-fe);sn>=fn?(Ee=P,qe=Math.max(it,Ze(Ee/Ne))):(qe=K,Ee=Math.max(it,Ze(qe*Ne)))}C=Ee/2,ye=qe/2;const It=C-Ie,Bt=ye-ze;Fe=0,at=0,T.includes("e")&&(Fe=It),T.includes("w")&&(Fe=-It),T.includes("s")&&(at=Bt),T.includes("n")&&(at=-Bt)}const bt=Fe*Math.cos(Z*Math.PI/180)-at*Math.sin(Z*Math.PI/180),An=Fe*Math.sin(Z*Math.PI/180)+at*Math.cos(Z*Math.PI/180),$n=Ze(C*2),on=Ze(ye*2),rn=_e+bt,j=Be+An;let he=rn-$n/2,Re=j-on/2;const ct=Math.max(0,t.screenW-$n),$e=Math.max(0,t.screenH-on);he=Ye(Math.round(he),0,ct),Re=Ye(Math.round(Re),0,$e),o("update-element",{id:k,patch:{x:he,y:Re,w:$n,h:on}});return}},$=(y,k)=>{var T;if(s.value)return;const _=ke(y,k);_?i.value={id:k.id,edge:_}:((T=i.value)==null?void 0:T.id)===k.id&&(i.value=null)},O=y=>{var k;((k=i.value)==null?void 0:k.id)===y.id&&(i.value=null)},W=()=>{s.value=null,window.removeEventListener("pointermove",tt),window.removeEventListener("pointerup",W)};return io(()=>{window.removeEventListener("pointermove",tt),window.removeEventListener("pointerup",W)}),ot(()=>t.elements,y=>{y.filter(k=>k.type==="text").forEach(k=>{Et(k)}),y.filter(k=>k.type==="graph"&&k.legendEnabled).forEach(k=>{k.legendNameFontUrl&&k.legendNameFontFamily&&Et({fontFamily:k.legendNameFontFamily,fontUrl:k.legendNameFontUrl,fontWeight:k.legendNameFontWeight||400,fontStyle:k.legendNameFontStyle||"normal"}),k.legendValueFontUrl&&k.legendValueFontFamily&&Et({fontFamily:k.legendValueFontFamily,fontUrl:k.legendValueFontUrl,fontWeight:k.legendValueFontWeight||400,fontStyle:k.legendValueFontStyle||"normal"})}),y.filter(k=>k.type==="image"&&k.imageUrl).forEach(k=>{st(k.imageUrl,!!k.invert)}),y.filter(k=>k.type==="animation"&&k.animationUrl).forEach(k=>{k.autoAnimate||lt(k.animationUrl)})},{deep:!0,immediate:!0}),(y,k)=>(w(),E("div",Yx,[u("div",{class:"display-canvas",style:tn(c.value),onPointerdown:Ce},[(w(!0),E(Oe,null,Qe(e.elements,_=>(w(),E("div",{key:_.id,class:rt(["display-element",{selected:_.id===e.selectedId}]),style:tn(f(_)),onPointerdown:T=>He(T,_),onPointermove:T=>$(T,_),onPointerleave:T=>O(_)},[g(_)?(w(),E("svg",{key:0,class:"display-element__shape",viewBox:`0 0 ${_.w} ${_.h}`,preserveAspectRatio:"none"},[_.shapeType==="line"?(w(),E("line",{key:0,x1:"0",y1:"0",x2:_.w,y2:_.h,stroke:H(_),"stroke-width":"1"},null,8,Qx)):_.shapeType==="rect"?(w(),E("rect",{key:1,x:"0",y:"0",width:_.w,height:_.h,fill:_.filled?M(_):"none",stroke:H(_),"stroke-width":"1"},null,8,ek)):_.shapeType==="circle"?(w(),E("circle",{key:2,cx:_.w/2,cy:_.h/2,r:Math.max(1,Math.min(_.w,_.h)/2),fill:_.filled?M(_):"none",stroke:H(_),"stroke-width":"1"},null,8,tk)):_.shapeType==="triangle"?(w(),E("polygon",{key:3,points:`0 ${_.h} ${_.w/2} 0 ${_.w} ${_.h}`,fill:_.filled?M(_):"none",stroke:H(_),"stroke-width":"1"},null,8,nk)):I(_.shapeType)?(w(),E("polygon",{key:4,points:U(_),fill:_.filled?M(_):"none",stroke:H(_),"stroke-width":"1"},null,8,ok)):re("",!0)],8,Jx)):_.type==="icon"&&R(_)?(w(),E("div",{key:1,class:"display-element__icon",style:tn(B(_))},null,4)):_.type==="graph"?(w(),E("svg",{key:2,class:"display-element__graph",viewBox:`0 0 ${_.w} ${_.h}`,preserveAspectRatio:"none"},[_.border!==!1?(w(),E("g",ik,[u("rect",{x:"0.5",y:"0.5",width:Math.max(0,_.w-1),height:Math.max(0,_.h-1)},null,8,ak)])):re("",!0),et(_).x.length||et(_).y.length?(w(),E("g",rk,[(w(!0),E(Oe,null,Qe(et(_).x,(T,Z)=>(w(),E("line",{key:`gx-${Z}`,x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2},null,8,lk))),128)),(w(!0),E(Oe,null,Qe(et(_).y,(T,Z)=>(w(),E("line",{key:`gy-${Z}`,x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2},null,8,ck))),128))])):re("",!0),u("g",uk,[(w(!0),E(Oe,null,Qe(je(_),(T,Z)=>(w(),E(Oe,{key:`trace-${Z}`},[T.path&&T.continuous?(w(),E("path",{key:0,d:T.path,stroke:T.color,"stroke-width":T.thickness,"stroke-dasharray":T.dash,fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},null,8,dk)):(w(!0),E(Oe,{key:1},Qe(T.points,(oe,X)=>(w(),E("circle",{key:`p-${Z}-${X}`,cx:oe.x,cy:oe.y,r:Math.max(1,T.thickness/2),fill:T.color},null,8,fk))),128))],64))),128))]),De(_)?(w(),E("g",hk,[u("rect",{x:De(_).x,y:De(_).y,width:De(_).w,height:De(_).h,class:rt({"display-graph__legend-border":De(_).border})},null,10,pk),(w(!0),E(Oe,null,Qe(De(_).rows,(T,Z)=>(w(),E(Oe,{key:`lr-${Z}`},[T.valueText?(w(),E("text",{key:0,x:De(_).x+4,y:De(_).y+T.y,class:"display-graph__legend-text"},[u("tspan",{style:tn({fontFamily:De(_).nameFontFamily||"inherit",fontSize:`${T.nameSize}px`})},ue(T.nameText),5),u("tspan",{dx:"4",style:tn({fontFamily:De(_).valueFontFamily||"inherit",fontSize:`${T.valueSize}px`})},ue(T.valueText),5)],8,gk)):(w(),E("text",{key:1,x:De(_).x+4,y:De(_).y+T.y,class:"display-graph__legend-text",style:tn({fontFamily:(T.type==="value"?De(_).valueFontFamily:De(_).nameFontFamily)||"inherit",fontSize:`${T.size}px`})},ue(T.text),13,vk))],64))),128))])):re("",!0)],8,sk)):_.type==="animation"&&_.animationUrl?(w(),E("img",{key:3,class:"display-element__image",src:Xe(_),alt:_.animationFile||"animation"},null,8,mk)):_.type==="image"&&_.imageUrl?(w(),E("img",{key:4,class:"display-element__image",src:le(_),alt:_.image||"image"},null,8,yk)):(w(),E("div",{key:5,class:rt(["display-element__label",{"display-element__label--text":_.type==="text"}]),style:tn(v(_))},[u("span",null,ue(m(_)),1)],6))],46,Xx))),128)),e.elements.length?re("",!0):(w(),E("div",bk,' Click "Add" to place an element. '))],36)]))}},Ek=bo(wk,[["__scopeId","data-v-1079c71f"]]),Sk={class:"display-toolbar__group"},xk={__name:"DisplayToolbar",props:{orientation:{type:String,default:"horizontal"},variant:{type:String,default:"card"}},emits:["add"],setup(e){return(n,t)=>(w(),E("div",{class:rt(["display-toolbar",{"display-toolbar--vertical":e.orientation==="vertical","display-toolbar--flat":e.variant==="flat"}])},[u("div",Sk,[u("button",{class:"compact",type:"button",onClick:t[0]||(t[0]=o=>n.$emit("add","text"))},"Add text"),u("button",{class:"compact",type:"button",onClick:t[1]||(t[1]=o=>n.$emit("add","image"))},"Add image"),u("button",{class:"compact",type:"button",onClick:t[2]||(t[2]=o=>n.$emit("add","icon"))},"Add icon"),u("button",{class:"compact",type:"button",onClick:t[3]||(t[3]=o=>n.$emit("add","graph"))},"Add graph"),u("button",{class:"compact",type:"button",onClick:t[4]||(t[4]=o=>n.$emit("add","animation"))},"Add animation"),u("button",{class:"compact",type:"button",onClick:t[5]||(t[5]=o=>n.$emit("add","shape"))},"Add shape")])],2))}},kk=bo(xk,[["__scopeId","data-v-e53ce3b0"]]),Ck={class:"color-picker-card",role:"dialog","aria-modal":"true"},Ak={class:"color-picker-body"},$k={class:"color-picker-row"},Ik={class:"color-picker-swatches"},Tk=["onClick","aria-label"],Rk={__name:"ColorPickerModal",props:{open:{type:Boolean,default:!1},selected:{type:String,default:""}},emits:["close","select"],setup(e,{emit:n}){const t=e,o=n,s=["#FFFFFF","#F97316","#FACC15","#4ADE80","#2DD4BF","#38BDF8","#818CF8","#A855F7","#F472B6","#EF4444","#0F172A","#94A3B8"],i=Y("#ffffff"),a=Y("#FFFFFF"),r=()=>{o("close")},d=m=>{i.value=m,a.value=m.toUpperCase()},c=()=>{const m=Ps(a.value)||Ps(i.value);o("select",m||"")},f=()=>{const m=Ps(t.selected)||"#FFFFFF";i.value=m,a.value=m};ot(()=>t.open,m=>{m&&f()});const v=m=>{m.key==="Escape"&&r()};return ot(()=>t.open,m=>{m?window.addEventListener("keydown",v):window.removeEventListener("keydown",v)}),io(()=>{window.removeEventListener("keydown",v)}),ot(()=>i.value,m=>{const g=Ps(m);g&&(a.value=g)}),ot(()=>a.value,m=>{const g=Ps(m);g&&(i.value=g)}),(m,g)=>e.open?(w(),E("div",{key:0,class:"color-picker-backdrop",onClick:wt(r,["self"])},[u("div",Ck,[g[2]||(g[2]=u("header",{class:"color-picker-header"},[u("div",null,[u("h3",null,"Color picker"),u("p",{class:"color-picker-sub"},"Select a color for the display element.")])],-1)),u("div",Ak,[u("div",$k,[To(u("input",{type:"color","onUpdate:modelValue":g[0]||(g[0]=I=>i.value=I),"aria-label":"Color picker"},null,512),[[Ss,i.value]]),To(u("input",{type:"text","onUpdate:modelValue":g[1]||(g[1]=I=>a.value=I),placeholder:"#RRGGBB","aria-label":"Hex color"},null,512),[[Ss,a.value]])]),u("div",Ik,[(w(),E(Oe,null,Qe(s,I=>u("button",{key:I,type:"button",class:"color-swatch",style:tn({backgroundColor:I}),onClick:U=>d(I),"aria-label":`Pick ${I}`},null,12,Tk)),64))])]),u("footer",{class:"color-picker-actions"},[u("button",{type:"button",class:"secondary compact",onClick:c},"Apply")])])])):re("",!0)}},Gi=bo(Rk,[["__scopeId","data-v-1bbf085b"]]),Fk={key:0,class:"display-inspector__header"},Lk={key:0,class:"display-inspector__type"},Ok={key:1,class:"note"},Mk={key:2,class:"display-inspector__form"},Pk=["value"],Nk=["value"],Dk=["value"],jk={key:0},Bk=["checked"],Uk={class:"display-inspector__row display-inspector__row--quad"},Vk={class:"display-inspector__field"},Hk=["value"],zk={class:"display-inspector__field"},Wk=["value"],Gk={class:"display-inspector__field"},Kk=["value"],Zk={class:"display-inspector__field"},qk=["value"],Yk={key:1,class:"display-icon-picker"},Xk={class:"schema-icon-row"},Jk=["value"],Qk={key:2,class:"note"},eC={class:"display-inspector__row display-inspector__row--quad"},tC={class:"display-inspector__field"},nC=["value"],oC={class:"display-inspector__field"},sC=["value"],iC={class:"display-inspector__field"},aC=["value"],rC={class:"display-inspector__field"},lC=["value"],cC={key:0},uC=["value"],dC=["value"],fC={key:0,class:"field-error-text"},hC={key:1},pC=["value"],gC=["value"],vC={key:2},mC=["value"],yC=["value"],bC={key:3},_C=["value"],wC={key:4},EC=["value"],SC=["value"],xC={key:0,class:"field-error-text"},kC={key:5,class:"display-inspector__row"},CC=["value"],AC=["value"],$C={key:6,class:"display-inspector__row"},IC={key:0},TC=["value"],RC={key:7,class:"display-inspector__row"},FC=["value"],LC=["value"],OC={key:8},MC=["value"],PC={key:9,class:"display-icon-picker"},NC={class:"schema-icon-row"},DC=["value"],jC={key:10},BC=["value"],UC={key:11},VC=["value"],HC=["value"],zC={key:12,class:"display-inspector__row"},WC=["value"],GC=["value"],KC=["value"],ZC=["value"],qC={key:13},YC=["value"],XC=["value"],JC={key:0,class:"field-error-text"},QC={key:14},eA=["value"],tA={key:15},nA=["value"],oA=["value"],sA={key:0,class:"field-error-text"},iA=["value"],aA=["value"],rA={key:0,class:"field-error-text"},lA=["value"],cA={key:0,value:"alpha_channel"},uA={class:"display-inspector__row"},dA=["value"],fA=["value"],hA={key:0},pA=["value"],gA={key:1,class:"display-inspector__row"},vA=["value"],mA=["value"],yA={key:2},bA=["value"],_A=["value"],wA={key:0,class:"field-error-text"},EA={class:"display-inspector__row"},SA=["value"],xA=["checked"],kA={class:"display-inspector__row"},CA=["value"],AA=["value"],$A={class:"display-inspector__row"},IA=["value"],TA=["value"],RA={class:"display-inspector__row"},FA=["value"],LA=["value"],OA=["checked"],MA={key:0,class:"display-inspector__row"},PA=["value"],NA=["value"],DA={key:1,class:"display-inspector__row"},jA={key:0,class:"display-icon-picker"},BA={class:"schema-icon-row"},UA=["value"],VA=["checked"],HA={key:2,class:"display-trace-list"},zA={key:0,class:"note"},WA={class:"display-inspector__row"},GA=["for"],KA=["id","value","onChange"],ZA=["value"],qA=["for"],YA=["id","value","onInput"],XA={class:"display-inspector__row"},JA=["for"],QA=["id","value","onChange"],e$=["for"],t$=["id","value","onInput"],n$={class:"display-inspector__row"},o$={key:0,class:"display-icon-picker"},s$=["for"],i$={class:"schema-icon-row"},a$=["id","value","onInput"],r$=["onClick"],l$=["for"],c$=["id","checked","onChange"],u$={class:"display-trace-actions"},d$=["onClick"],f$=["checked"],h$={key:3,class:"display-legend"},p$={class:"display-inspector__row"},g$=["value"],v$=["value"],m$={key:0,class:"display-inspector__row"},y$=["value"],b$=["value"],_$=["value"],w$={key:1,class:"display-inspector__row"},E$=["value"],S$=["value"],x$=["value"],k$=["value"],C$=["value"],A$={key:2,class:"display-inspector__row"},$$=["value"],I$=["value"],T$=["value"],R$={key:3,class:"display-inspector__row"},F$=["value"],L$=["value"],O$=["value"],M$=["value"],P$=["value"],N$={class:"display-inspector__row"},D$=["value"],j$=["value"],B$={class:"display-inspector__row"},U$=["checked"],V$=["checked"],H$={class:"display-inspector__row"},z$=["value"],W$=["value"],G$=["checked"],K$={key:18,class:"display-icon-picker"},Z$={class:"schema-icon-row"},q$=["value"],Y$=["src"],X$={key:0,class:"field-error-text"},J$={key:19,class:"display-icon-picker"},Q$={class:"schema-icon-row"},e2=["value"],t2={__name:"DisplayInspector",props:{selectedElement:{type:Object,default:null},screenW:{type:Number,default:0},screenH:{type:Number,default:0},isMonochrome:{type:Boolean,default:!0},images:{type:Array,default:()=>[]},localFonts:{type:Array,default:()=>[]},googleFonts:{type:Array,default:()=>[]},assetsBase:{type:String,default:"/"},dynamicIds:{type:Array,default:()=>[]},mdiIcons:{type:Array,default:()=>[]},variant:{type:String,default:"card"},showHeader:{type:Boolean,default:!0}},emits:["update"],setup(e,{emit:n}){const t=e,o=n,s=Y(!1),i=Y(!1),a=Y(!1),r=Y(null),d=[0,90,180,270],c=F(()=>{var q;return["shape"].includes((q=t.selectedElement)==null?void 0:q.type)}),f=F(()=>{var p;if(t.isMonochrome)return!1;const q=(p=t.selectedElement)==null?void 0:p.type;return["text","shape"].includes(q)}),v=F(()=>{var L,be;if(((L=t.selectedElement)==null?void 0:L.type)!=="shape")return"";const p=(be=t.selectedElement)==null?void 0:be.shapeType;return p==="line"?"Line uses X/Y and W/H as end point.":p==="rect"?"Rectangle uses X/Y and W/H.":p==="circle"?"Circle uses X/Y and W/H as bounds.":p==="triangle"?"Triangle uses X/Y and W/H as bounds.":p!=null&&p.startsWith("polygon")?"Polygon uses X/Y and W/H as bounds.":""}),m=(q,p)=>{var be,Ie,ze;const L=Number(p.target.value);if(!Number.isNaN(L)){if(["w","h"].includes(q)&&["image","icon","animation"].includes((be=t.selectedElement)==null?void 0:be.type)){const C=Number(((Ie=t.selectedElement)==null?void 0:Ie.w)||0),ye=Number(((ze=t.selectedElement)==null?void 0:ze.h)||0),Fe=ye?C/ye:1,at=Math.max(1,Math.round(L));if(q==="w"){const bt=Math.max(1,Math.round(at/(Fe||1)));o("update",{w:at,h:bt});return}const Ct=Math.max(1,Math.round(at*(Fe||1)));o("update",{w:Ct,h:at});return}o("update",{[q]:L})}},g=(q,p)=>{o("update",{[q]:p.target.value})},I=(q,p)=>{o("update",{[q]:p.target.checked})},U=(q,p)=>{o("update",{[q]:p.target.value==="true"})},x=()=>{var p;const q=[...((p=t.selectedElement)==null?void 0:p.traces)||[],{sensor:"",name:"",lineType:"SOLID",lineThickness:3,continuous:!1,color:""}];o("update",{traces:q})},R=(q,p,L)=>{var ze;const be=[...((ze=t.selectedElement)==null?void 0:ze.traces)||[]],Ie=be[q]||{};be[q]={...Ie,[p]:L},o("update",{traces:be})},B=q=>{var L;const p=[...((L=t.selectedElement)==null?void 0:L.traces)||[]];p.splice(q,1),o("update",{traces:p})},H=F(()=>{var p;const q=((p=t.selectedElement)==null?void 0:p.icon)||"";return!q||q==="placeholder"?"":q}),M=F(()=>{var p;const q=((p=t.selectedElement)==null?void 0:p.icon)||"";return!q||q==="placeholder"?"":q.startsWith("mdi:")?q.slice(4):q}),te=F(()=>M.value),we=F(()=>M.value?`https://cdn.jsdelivr.net/npm/@mdi/svg/svg/${M.value}.svg`:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/emoticon-plus-outline.svg"),de=F(()=>{var p,L;if(((p=t.selectedElement)==null?void 0:p.type)!=="icon")return!1;if(!((L=t.mdiIcons)!=null&&L.length))return!0;const q=M.value||"";return q.trim()?!t.mdiIcons.some(be=>be.toLowerCase()===q.toLowerCase()):!0}),me=F(()=>{var q;return(q=t.mdiIcons)!=null&&q.length?M.value?"Invalid MDI icon name.":"Please select an icon.":"No MDI icons available."}),Ae=F(()=>{var q;return((q=t.selectedElement)==null?void 0:q.color)||""}),xe=F(()=>Ae.value?ui(Ae.value,"#ffffff"):"#ffffff"),Me=q=>ui(q||"","#ffffff"),Ke=F(()=>{var L,be;const q=r.value;return q==null?"":((be=(((L=t.selectedElement)==null?void 0:L.traces)||[])[q])==null?void 0:be.color)||""}),et=F(()=>(t.dynamicIds||[]).filter(q=>q.domain==="sensor").map(q=>({id:q.id,label:q.label})).sort((q,p)=>q.label.localeCompare(p.label))),je=F(()=>{var L;const q=((L=t.selectedElement)==null?void 0:L.dynamicDomain)||"",p=t.dynamicIds||[];return q?p.filter(be=>be.domain===q):p}),De=F(()=>{var p,L,be;if(((p=t.selectedElement)==null?void 0:p.type)!=="text"||(((L=t.selectedElement)==null?void 0:L.textMode)||"static")!=="dynamic")return!1;if(!je.value.length)return!0;const q=((be=t.selectedElement)==null?void 0:be.dynamicId)||"";return q?!je.value.some(Ie=>Ie.id===q):!0}),Q=F(()=>je.value.length?"Please select a source ID.":"No source IDs available."),le=F(()=>{var q,p;return((q=t.selectedElement)==null?void 0:q.type)!=="graph"?!1:!String(((p=t.selectedElement)==null?void 0:p.graphId)||"").trim()}),Se=F(()=>{var q,p;return((q=t.selectedElement)==null?void 0:q.type)!=="graph"?!1:!String(((p=t.selectedElement)==null?void 0:p.duration)||"").trim()}),Xe=F(()=>{var p,L,be;if(((p=t.selectedElement)==null?void 0:p.type)!=="graph"||(L=t.selectedElement)!=null&&L.useTraces)return!1;if(!et.value.length)return!0;const q=((be=t.selectedElement)==null?void 0:be.sensor)||"";return q?!et.value.some(Ie=>Ie.id===q):!0}),st=F(()=>et.value.length?"Please select a sensor ID.":"No sensor IDs available."),lt=F(()=>(t.images||[]).map(q=>(q==null?void 0:q.file)||"").filter(q=>q.toLowerCase().endsWith(".gif")).sort((q,p)=>q.localeCompare(p))),ut=F(()=>(t.images||[]).map(q=>(q==null?void 0:q.file)||"").filter(q=>!!q).sort((q,p)=>q.localeCompare(p))),Et=F(()=>{var q,p;return((q=t.selectedElement)==null?void 0:q.type)!=="animation"?!1:!String(((p=t.selectedElement)==null?void 0:p.animationId)||"").trim()}),Ye=F(()=>{var p,L;if(((p=t.selectedElement)==null?void 0:p.type)!=="animation")return!1;if(!lt.value.length)return!0;const q=((L=t.selectedElement)==null?void 0:L.animationFile)||"";return q?!lt.value.includes(q):!0}),Ze=F(()=>lt.value.length?"Please select an animation file.":"No GIF animations available."),kt=F(()=>{var p,L;if(((p=t.selectedElement)==null?void 0:p.type)!=="image")return!1;if(!ut.value.length)return!0;const q=((L=t.selectedElement)==null?void 0:L.image)||"";return q?!ut.value.includes(q):!0}),ae=F(()=>ut.value.length?"Please select an image file.":"No image files available."),ke=()=>{s.value=!0},Ce=()=>{s.value=!1},He=q=>{o("update",{icon:q?`mdi:${q}`:""}),s.value=!1},tt=()=>{i.value=!0},$=()=>{i.value=!1},O=q=>{o("update",{color:q||""}),i.value=!1},W=q=>{r.value=q,a.value=!0},y=()=>{a.value=!1,r.value=null},k=q=>{const p=r.value;p!=null&&R(p,"color",q||""),a.value=!1,r.value=null},_=q=>{o("update",q)},T=q=>{const p=`${q||""}`.toLowerCase(),L=p.includes("italic")?"italic":"normal";return{weight:Number.parseInt(p,10)||400,style:L}},Z=(q,p)=>{const L=`${q||""} ${p||""}`.toLowerCase(),be=L.includes("italic")?"italic":"normal";let Ie=400;return L.includes("thin")?Ie=100:L.includes("extralight")||L.includes("extra light")?Ie=200:L.includes("light")?Ie=300:L.includes("medium")?Ie=500:L.includes("semibold")||L.includes("semi bold")?Ie=600:L.includes("bold")?Ie=700:L.includes("extrabold")||L.includes("extra bold")?Ie=800:L.includes("black")&&(Ie=900),{weight:Ie,style:be}},oe=q=>{var Ie,ze,C;if(q.target.value==="google"){const ye=t.googleFonts[0],Fe=(Ie=ye==null?void 0:ye.variants)!=null&&Ie.includes("regular")?"regular":(ze=ye==null?void 0:ye.variants)==null?void 0:ze[0],at=((C=ye==null?void 0:ye.files)==null?void 0:C[Fe])||"",{weight:Ct,style:bt}=T(Fe);_({fontSource:"google",fontFamily:(ye==null?void 0:ye.family)||"",fontVariant:Fe||"regular",fontUrl:at,fontFile:"",fontWeight:Ct,fontStyle:bt});return}const L=t.localFonts[0],be=Z(L==null?void 0:L.label,L==null?void 0:L.file);_({fontSource:"local",fontFamily:(L==null?void 0:L.label)||"",fontFile:(L==null?void 0:L.file)||"",fontVariant:"regular",fontUrl:L!=null&&L.file?`${t.assetsBase}fonts/${L.file}`:"",fontWeight:be.weight,fontStyle:be.style})},X=q=>{const p=q.target.value,L=t.localFonts.find(Ie=>Ie.file===p),be=Z(L==null?void 0:L.label,L==null?void 0:L.file);_({fontSource:"local",fontFamily:(L==null?void 0:L.label)||"",fontFile:(L==null?void 0:L.file)||"",fontVariant:"regular",fontUrl:L!=null&&L.file?`${t.assetsBase}fonts/${L.file}`:"",fontWeight:be.weight,fontStyle:be.style})},ge=q=>{var ye,Fe,at;const p=q.target.value,L=t.googleFonts.find(Ct=>Ct.family===p),be=(ye=L==null?void 0:L.variants)!=null&&ye.includes("regular")?"regular":(Fe=L==null?void 0:L.variants)==null?void 0:Fe[0],Ie=((at=L==null?void 0:L.files)==null?void 0:at[be])||"",{weight:ze,style:C}=T(be);_({fontSource:"google",fontFamily:(L==null?void 0:L.family)||"",fontVariant:be||"regular",fontUrl:Ie,fontFile:"",fontWeight:ze,fontStyle:C})},ce=q=>{var C;const p=q.target.value,L=t.googleFonts.find(ye=>{var Fe;return ye.family===((Fe=t.selectedElement)==null?void 0:Fe.fontFamily)}),be=((C=L==null?void 0:L.files)==null?void 0:C[p])||"",{weight:Ie,style:ze}=T(p);_({fontSource:"google",fontVariant:p,fontUrl:be,fontWeight:Ie,fontStyle:ze})},ve=q=>{var Ie,ze,C;if(q.target.value==="google"){const ye=t.googleFonts[0],Fe=(Ie=ye==null?void 0:ye.variants)!=null&&Ie.includes("regular")?"regular":(ze=ye==null?void 0:ye.variants)==null?void 0:ze[0],at=((C=ye==null?void 0:ye.files)==null?void 0:C[Fe])||"",{weight:Ct,style:bt}=T(Fe);_({legendNameFontSource:"google",legendNameFontFamily:(ye==null?void 0:ye.family)||"",legendNameFontVariant:Fe||"regular",legendNameFontFile:"",legendNameFontUrl:at,legendNameFontWeight:Ct,legendNameFontStyle:bt});return}const L=t.localFonts[0],be=Z(L==null?void 0:L.label,L==null?void 0:L.file);_({legendNameFontSource:"local",legendNameFontFamily:(L==null?void 0:L.label)||"",legendNameFontFile:(L==null?void 0:L.file)||"",legendNameFontVariant:"regular",legendNameFontUrl:L!=null&&L.file?`${t.assetsBase}fonts/${L.file}`:"",legendNameFontWeight:be.weight,legendNameFontStyle:be.style})},Pe=q=>{var Ie,ze,C;if(q.target.value==="google"){const ye=t.googleFonts[0],Fe=(Ie=ye==null?void 0:ye.variants)!=null&&Ie.includes("regular")?"regular":(ze=ye==null?void 0:ye.variants)==null?void 0:ze[0],at=((C=ye==null?void 0:ye.files)==null?void 0:C[Fe])||"",{weight:Ct,style:bt}=T(Fe);_({legendValueFontSource:"google",legendValueFontFamily:(ye==null?void 0:ye.family)||"",legendValueFontVariant:Fe||"regular",legendValueFontFile:"",legendValueFontUrl:at,legendValueFontWeight:Ct,legendValueFontStyle:bt});return}const L=t.localFonts[0],be=Z(L==null?void 0:L.label,L==null?void 0:L.file);_({legendValueFontSource:"local",legendValueFontFamily:(L==null?void 0:L.label)||"",legendValueFontFile:(L==null?void 0:L.file)||"",legendValueFontVariant:"regular",legendValueFontUrl:L!=null&&L.file?`${t.assetsBase}fonts/${L.file}`:"",legendValueFontWeight:be.weight,legendValueFontStyle:be.style})},ne=q=>{const p=q.target.value,L=t.localFonts.find(Ie=>Ie.file===p),be=Z(L==null?void 0:L.label,L==null?void 0:L.file);_({legendNameFontSource:"local",legendNameFontFamily:(L==null?void 0:L.label)||"",legendNameFontFile:(L==null?void 0:L.file)||"",legendNameFontVariant:"regular",legendNameFontUrl:L!=null&&L.file?`${t.assetsBase}fonts/${L.file}`:"",legendNameFontWeight:be.weight,legendNameFontStyle:be.style})},fe=q=>{const p=q.target.value,L=t.localFonts.find(Ie=>Ie.file===p),be=Z(L==null?void 0:L.label,L==null?void 0:L.file);_({legendValueFontSource:"local",legendValueFontFamily:(L==null?void 0:L.label)||"",legendValueFontFile:(L==null?void 0:L.file)||"",legendValueFontVariant:"regular",legendValueFontUrl:L!=null&&L.file?`${t.assetsBase}fonts/${L.file}`:"",legendValueFontWeight:be.weight,legendValueFontStyle:be.style})},_e=q=>{var ye,Fe,at;const p=q.target.value,L=t.googleFonts.find(Ct=>Ct.family===p),be=(ye=L==null?void 0:L.variants)!=null&&ye.includes("regular")?"regular":(Fe=L==null?void 0:L.variants)==null?void 0:Fe[0],Ie=((at=L==null?void 0:L.files)==null?void 0:at[be])||"",{weight:ze,style:C}=T(be);_({legendNameFontSource:"google",legendNameFontFamily:(L==null?void 0:L.family)||"",legendNameFontVariant:be||"regular",legendNameFontFile:"",legendNameFontUrl:Ie,legendNameFontWeight:ze,legendNameFontStyle:C})},Be=q=>{var ye,Fe,at;const p=q.target.value,L=t.googleFonts.find(Ct=>Ct.family===p),be=(ye=L==null?void 0:L.variants)!=null&&ye.includes("regular")?"regular":(Fe=L==null?void 0:L.variants)==null?void 0:Fe[0],Ie=((at=L==null?void 0:L.files)==null?void 0:at[be])||"",{weight:ze,style:C}=T(be);_({legendValueFontSource:"google",legendValueFontFamily:(L==null?void 0:L.family)||"",legendValueFontVariant:be||"regular",legendValueFontFile:"",legendValueFontUrl:Ie,legendValueFontWeight:ze,legendValueFontStyle:C})},Je=q=>{var C;const p=q.target.value,L=t.googleFonts.find(ye=>{var Fe;return ye.family===((Fe=t.selectedElement)==null?void 0:Fe.legendNameFontFamily)}),be=((C=L==null?void 0:L.files)==null?void 0:C[p])||"",{weight:Ie,style:ze}=T(p);_({legendNameFontSource:"google",legendNameFontVariant:p,legendNameFontUrl:be,legendNameFontWeight:Ie,legendNameFontStyle:ze})},Ge=q=>{var C;const p=q.target.value,L=t.googleFonts.find(ye=>{var Fe;return ye.family===((Fe=t.selectedElement)==null?void 0:Fe.legendValueFontFamily)}),be=((C=L==null?void 0:L.files)==null?void 0:C[p])||"",{weight:Ie,style:ze}=T(p);_({legendValueFontSource:"google",legendValueFontVariant:p,legendValueFontUrl:be,legendValueFontWeight:Ie,legendValueFontStyle:ze})},it=q=>{const p=q.target.value,L=p?`${t.assetsBase}images/${p}`:"";if(_({animationFile:p,animationUrl:L}),!L)return;const be=new Image;be.src=L,be.onload=()=>{const Ie=be.naturalWidth||be.width||0,ze=be.naturalHeight||be.height||0;if(!Ie||!ze)return;let C=Ie,ye=ze;const Fe=Number(t.screenW||0),at=Number(t.screenH||0);if(Fe>0&&at>0&&(Ie>Fe||ze>at)){const Ct=Math.min(Fe/Ie,at/ze,1);C=Math.max(1,Math.round(Ie*Ct)),ye=Math.max(1,Math.round(ze*Ct))}_({w:C,h:ye})}},yt=q=>{var be,Ie,ze;const p=t.localFonts[0];if(p){const C=Z(p==null?void 0:p.label,p==null?void 0:p.file);return{source:"local",family:(p==null?void 0:p.label)||"",file:(p==null?void 0:p.file)||"",variant:"regular",url:p!=null&&p.file?`${t.assetsBase}fonts/${p.file}`:"",weight:C.weight,style:C.style,size:q}}const L=t.googleFonts[0];if(L){const C=(be=L.variants)!=null&&be.includes("regular")?"regular":(Ie=L.variants)==null?void 0:Ie[0],ye=((ze=L.files)==null?void 0:ze[C])||"",{weight:Fe,style:at}=T(C);return{source:"google",family:L.family,file:"",variant:C||"regular",url:ye,weight:Fe,style:at,size:q}}return null},$t=q=>{var ze,C,ye,Fe,at,Ct;if(!q.target.checked){_({legendEnabled:!1});return}const L={legendEnabled:!0},be=((ze=t.selectedElement)==null?void 0:ze.legendNameFontFile)||((C=t.selectedElement)==null?void 0:C.legendNameFontFamily),Ie=((ye=t.selectedElement)==null?void 0:ye.legendValueFontFile)||((Fe=t.selectedElement)==null?void 0:Fe.legendValueFontFamily);if(!be){const bt=yt(((at=t.selectedElement)==null?void 0:at.legendNameFontSize)||10);bt&&(L.legendNameFontSource=bt.source,L.legendNameFontFamily=bt.family,L.legendNameFontFile=bt.file,L.legendNameFontVariant=bt.variant,L.legendNameFontUrl=bt.url,L.legendNameFontWeight=bt.weight,L.legendNameFontStyle=bt.style)}if(!Ie){const bt=yt(((Ct=t.selectedElement)==null?void 0:Ct.legendValueFontSize)||8);bt&&(L.legendValueFontSource=bt.source,L.legendValueFontFamily=bt.family,L.legendValueFontFile=bt.file,L.legendValueFontVariant=bt.variant,L.legendValueFontUrl=bt.url,L.legendValueFontWeight=bt.weight,L.legendValueFontStyle=bt.style)}_(L)},pt=q=>{const p=q.target.value,L=t.images.find(ze=>ze.file===p),be=L!=null&&L.file?`${t.assetsBase}images/${L.file}`:"";if(_({image:(L==null?void 0:L.file)||"",imageUrl:be}),!be)return;const Ie=new Image;Ie.src=be,Ie.onload=()=>{const ze=Ie.naturalWidth||Ie.width||0,C=Ie.naturalHeight||Ie.height||0;if(!ze||!C)return;let ye=ze,Fe=C;const at=Number(t.screenW||0),Ct=Number(t.screenH||0);if(at>0&&Ct>0&&(ze>at||C>Ct)){const bt=Math.min(at/ze,Ct/C,1);ye=Math.max(1,Math.round(ze*bt)),Fe=Math.max(1,Math.round(C*bt))}_({w:ye,h:Fe})}},_t=[{value:"static",label:"Static text"},{value:"dynamic",label:"Dynamic value"}],zt=q=>["sensor","number"].includes(q),Zt=q=>["binary_sensor","switch"].includes(q);return(q,p)=>{var L,be,Ie,ze;return w(),E("aside",{class:rt(["display-inspector",{"display-inspector--flat":e.variant==="flat"}])},[e.showHeader?(w(),E("div",Fk,[p[61]||(p[61]=u("h4",null,"Inspector",-1)),e.selectedElement?(w(),E("span",Lk,ue(e.selectedElement.type),1)):re("",!0)])):re("",!0),e.selectedElement?(w(),E("div",Mk,[e.selectedElement.type==="shape"?(w(),E(Oe,{key:0},[u("div",null,[p[63]||(p[63]=u("label",{for:"shapeType"},"Shape",-1)),u("select",{id:"shapeType",value:e.selectedElement.shapeType,onChange:p[0]||(p[0]=C=>g("shapeType",C))},[...p[62]||(p[62]=[Jh('<option value="line" data-v-e8b58e9d>Line</option><option value="rect" data-v-e8b58e9d>Rectangle</option><option value="circle" data-v-e8b58e9d>Circle</option><option value="triangle" data-v-e8b58e9d>Triangle</option><option value="polygon5" data-v-e8b58e9d>Pentagon</option><option value="polygon6" data-v-e8b58e9d>Hexagon</option><option value="polygon7" data-v-e8b58e9d>Heptagon</option><option value="polygon8" data-v-e8b58e9d>Octagon</option>',8)])],40,Pk)]),u("div",null,[p[64]||(p[64]=u("label",{for:"rotation"},"Rotation",-1)),u("select",{id:"rotation",value:e.selectedElement.rotation,onChange:p[1]||(p[1]=C=>m("rotation",C))},[(w(),E(Oe,null,Qe(d,C=>u("option",{key:C,value:C},ue(C),9,Dk)),64))],40,Nk)]),e.selectedElement.shapeType!=="line"?(w(),E("div",jk,[p[65]||(p[65]=u("label",{for:"filled"},"Filled",-1)),u("input",{id:"filled",type:"checkbox",class:"schema-checkbox",checked:e.selectedElement.filled,onChange:p[2]||(p[2]=C=>I("filled",C))},null,40,Bk)])):re("",!0),u("div",Uk,[u("div",Vk,[p[66]||(p[66]=u("label",{for:"posX"},"X",-1)),u("input",{id:"posX",type:"number",value:e.selectedElement.x,onInput:p[3]||(p[3]=C=>m("x",C))},null,40,Hk)]),u("div",zk,[p[67]||(p[67]=u("label",{for:"posY"},"Y",-1)),u("input",{id:"posY",type:"number",value:e.selectedElement.y,onInput:p[4]||(p[4]=C=>m("y",C))},null,40,Wk)]),p[70]||(p[70]=u("span",{class:"display-inspector__group-divider"},null,-1)),u("div",Gk,[p[68]||(p[68]=u("label",{for:"sizeW"},"W",-1)),u("input",{id:"sizeW",type:"number",value:e.selectedElement.w,onInput:p[5]||(p[5]=C=>m("w",C))},null,40,Kk)]),u("div",Zk,[p[69]||(p[69]=u("label",{for:"sizeH"},"H",-1)),u("input",{id:"sizeH",type:"number",value:e.selectedElement.h,onInput:p[6]||(p[6]=C=>m("h",C))},null,40,qk)])]),f.value?(w(),E("div",Yk,[p[71]||(p[71]=u("label",{for:"shapeColor"},"Color",-1)),u("div",Xk,[u("input",{id:"shapeColor",type:"text",value:Ae.value,placeholder:"#RRGGBB",onInput:p[7]||(p[7]=C=>g("color",C))},null,40,Jk),u("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:tt},[u("span",{class:"schema-color-icon",style:tn({backgroundColor:xe.value})},null,4)])]),mt(Gi,{open:i.value,selected:Ae.value,onClose:$,onSelect:O},null,8,["open","selected"])])):re("",!0),v.value?(w(),E("div",Qk,ue(v.value),1)):re("",!0)],64)):(w(),E(Oe,{key:1},[u("div",eC,[u("div",tC,[p[72]||(p[72]=u("label",{for:"posX"},"X",-1)),u("input",{id:"posX",type:"number",value:e.selectedElement.x,onInput:p[8]||(p[8]=C=>m("x",C))},null,40,nC)]),u("div",oC,[p[73]||(p[73]=u("label",{for:"posY"},"Y",-1)),u("input",{id:"posY",type:"number",value:e.selectedElement.y,onInput:p[9]||(p[9]=C=>m("y",C))},null,40,sC)]),p[76]||(p[76]=u("span",{class:"display-inspector__group-divider"},null,-1)),u("div",iC,[p[74]||(p[74]=u("label",{for:"sizeW"},"W",-1)),u("input",{id:"sizeW",type:"number",value:e.selectedElement.w,onInput:p[10]||(p[10]=C=>m("w",C))},null,40,aC)]),u("div",rC,[p[75]||(p[75]=u("label",{for:"sizeH"},"H",-1)),u("input",{id:"sizeH",type:"number",value:e.selectedElement.h,onInput:p[11]||(p[11]=C=>m("h",C))},null,40,lC)])]),e.selectedElement.type==="graph"&&!e.selectedElement.useTraces?(w(),E("div",cC,[p[78]||(p[78]=u("label",{for:"graphSensor"},"Sensor ID *",-1)),u("select",{id:"graphSensor",value:e.selectedElement.sensor,class:rt({"field-error":Xe.value}),onChange:p[12]||(p[12]=C=>g("sensor",C))},[p[77]||(p[77]=u("option",{value:""},"Select sensor",-1)),(w(!0),E(Oe,null,Qe(et.value,C=>(w(),E("option",{key:C.id,value:C.id},ue(C.label),9,dC))),128))],42,uC),Xe.value?(w(),E("div",fC,ue(st.value),1)):re("",!0)])):re("",!0),c.value?(w(),E("div",hC,[p[79]||(p[79]=u("label",{for:"rotation"},"Rotation",-1)),u("select",{id:"rotation",value:e.selectedElement.rotation,onChange:p[13]||(p[13]=C=>m("rotation",C))},[(w(),E(Oe,null,Qe(d,C=>u("option",{key:C,value:C},ue(C),9,gC)),64))],40,pC)])):re("",!0),e.selectedElement.type==="text"?(w(),E("div",vC,[p[80]||(p[80]=u("label",{for:"textMode"},"Mode",-1)),u("select",{id:"textMode",value:e.selectedElement.textMode||"static",onChange:p[14]||(p[14]=C=>g("textMode",C))},[(w(),E(Oe,null,Qe(_t,C=>u("option",{key:C.value,value:C.value},ue(C.label),9,yC)),64))],40,mC)])):re("",!0),e.selectedElement.type==="text"&&(e.selectedElement.textMode||"static")==="static"?(w(),E("div",bC,[p[81]||(p[81]=u("label",{for:"textValue"},"Text",-1)),u("input",{id:"textValue",type:"text",value:e.selectedElement.text,onInput:p[15]||(p[15]=C=>g("text",C))},null,40,_C)])):re("",!0),e.selectedElement.type==="text"&&(e.selectedElement.textMode||"static")==="dynamic"?(w(),E("div",wC,[p[83]||(p[83]=u("label",{for:"dynamicId"},"Source ID",-1)),u("select",{id:"dynamicId",value:e.selectedElement.dynamicId,class:rt({"field-error":De.value}),onChange:p[16]||(p[16]=C=>g("dynamicId",C))},[p[82]||(p[82]=u("option",{value:""},"Select ID",-1)),(w(!0),E(Oe,null,Qe(je.value,C=>(w(),E("option",{key:C.id,value:C.id},ue(C.label),9,SC))),128))],42,EC),De.value?(w(),E("div",xC,ue(Q.value),1)):re("",!0)])):re("",!0),e.selectedElement.type==="text"&&(e.selectedElement.textMode||"static")==="dynamic"?(w(),E("div",kC,[u("div",null,[p[84]||(p[84]=u("label",{for:"prefix"},"Prefix",-1)),u("input",{id:"prefix",type:"text",value:e.selectedElement.prefix,onInput:p[17]||(p[17]=C=>g("prefix",C))},null,40,CC)]),u("div",null,[p[85]||(p[85]=u("label",{for:"suffix"},"Suffix",-1)),u("input",{id:"suffix",type:"text",value:e.selectedElement.suffix,onInput:p[18]||(p[18]=C=>g("suffix",C))},null,40,AC)])])):re("",!0),e.selectedElement.type==="text"&&(e.selectedElement.textMode||"static")==="dynamic"?(w(),E("div",$C,[zt(e.selectedElement.dynamicDomain)?(w(),E("div",IC,[p[86]||(p[86]=u("label",{for:"format"},"Format",-1)),u("input",{id:"format",type:"text",value:e.selectedElement.format,onInput:p[19]||(p[19]=C=>g("format",C))},null,40,TC)])):re("",!0)])):re("",!0),e.selectedElement.type==="text"&&(e.selectedElement.textMode||"static")==="dynamic"&&Zt(e.selectedElement.dynamicDomain)?(w(),E("div",RC,[u("div",null,[p[87]||(p[87]=u("label",{for:"onLabel"},"On label",-1)),u("input",{id:"onLabel",type:"text",value:e.selectedElement.onLabel,onInput:p[20]||(p[20]=C=>g("onLabel",C))},null,40,FC)]),u("div",null,[p[88]||(p[88]=u("label",{for:"offLabel"},"Off label",-1)),u("input",{id:"offLabel",type:"text",value:e.selectedElement.offLabel,onInput:p[21]||(p[21]=C=>g("offLabel",C))},null,40,LC)])])):re("",!0),e.selectedElement.type==="text"?(w(),E("div",OC,[p[90]||(p[90]=u("label",{for:"wrap"},"Wrap text",-1)),u("select",{id:"wrap",value:(e.selectedElement.wrap!==!1).toString(),onChange:p[22]||(p[22]=C=>U("wrap",C))},[...p[89]||(p[89]=[u("option",{value:"true"},"TRUE",-1),u("option",{value:"false"},"FALSE",-1)])],40,MC)])):re("",!0),f.value?(w(),E("div",PC,[p[91]||(p[91]=u("label",{for:"elementColor"},"Color",-1)),u("div",NC,[u("input",{id:"elementColor",type:"text",value:Ae.value,placeholder:"#RRGGBB",onInput:p[23]||(p[23]=C=>g("color",C))},null,40,DC),u("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:tt},[u("span",{class:"schema-color-icon",style:tn({backgroundColor:xe.value})},null,4)])]),mt(Gi,{open:i.value,selected:Ae.value,onClose:$,onSelect:O},null,8,["open","selected"])])):re("",!0),e.selectedElement.type==="text"?(w(),E("div",jC,[p[93]||(p[93]=u("label",{for:"fontSource"},"Font source",-1)),u("select",{id:"fontSource",value:e.selectedElement.fontSource||"local",onChange:oe},[...p[92]||(p[92]=[u("option",{value:"local"},"Local",-1),u("option",{value:"google"},"Google Fonts",-1)])],40,BC)])):re("",!0),e.selectedElement.type==="text"&&(e.selectedElement.fontSource||"local")==="local"?(w(),E("div",UC,[p[94]||(p[94]=u("label",{for:"fontLocal"},"Font",-1)),u("select",{id:"fontLocal",value:e.selectedElement.fontFile,onChange:X},[(w(!0),E(Oe,null,Qe(e.localFonts,C=>(w(),E("option",{key:C.file,value:C.file},ue(C.label),9,HC))),128))],40,VC)])):re("",!0),e.selectedElement.type==="text"&&e.selectedElement.fontSource==="google"?(w(),E("div",zC,[u("div",null,[p[95]||(p[95]=u("label",{for:"fontFamily"},"Font family",-1)),u("select",{id:"fontFamily",value:e.selectedElement.fontFamily,onChange:ge},[(w(!0),E(Oe,null,Qe(e.googleFonts,C=>(w(),E("option",{key:C.family,value:C.family},ue(C.family),9,GC))),128))],40,WC)]),u("div",null,[p[96]||(p[96]=u("label",{for:"fontVariant"},"Variant",-1)),u("select",{id:"fontVariant",value:e.selectedElement.fontVariant,onChange:ce},[(w(!0),E(Oe,null,Qe(((L=e.googleFonts.find(C=>C.family===e.selectedElement.fontFamily))==null?void 0:L.variants)||[],C=>(w(),E("option",{key:C,value:C},ue(C),9,ZC))),128))],40,KC)])])):re("",!0),e.selectedElement.type==="image"?(w(),E("div",qC,[p[98]||(p[98]=u("label",{for:"imageValue"},"Image",-1)),u("select",{id:"imageValue",value:e.selectedElement.image,class:rt({"field-error":kt.value}),onChange:pt},[p[97]||(p[97]=u("option",{value:""},"Select image",-1)),(w(!0),E(Oe,null,Qe(e.images,C=>(w(),E("option",{key:C.file,value:C.file},ue(C.label),9,XC))),128))],42,YC),kt.value?(w(),E("div",JC,ue(ae.value),1)):re("",!0)])):re("",!0),e.selectedElement.type==="image"?(w(),E("div",QC,[p[100]||(p[100]=u("label",{for:"imageType"},"Image type",-1)),u("select",{id:"imageType",value:e.selectedElement.imageType||"BINARY",onChange:p[24]||(p[24]=C=>g("imageType",C))},[...p[99]||(p[99]=[u("option",{value:"BINARY"},"BINARY",-1),u("option",{value:"TRANSPARENT_BINARY"},"TRANSPARENT_BINARY",-1)])],40,eA)])):re("",!0),e.selectedElement.type==="image"?(w(),E("div",tA,[p[102]||(p[102]=u("label",{for:"imageInvert"},"Invert",-1)),u("select",{id:"imageInvert",value:(!!e.selectedElement.invert).toString(),onChange:p[25]||(p[25]=C=>U("invert",C))},[...p[101]||(p[101]=[u("option",{value:"true"},"TRUE",-1),u("option",{value:"false"},"FALSE",-1)])],40,nA)])):re("",!0),e.selectedElement.type==="animation"?(w(),E(Oe,{key:16},[u("div",null,[p[103]||(p[103]=u("label",{for:"animationId"},"Animation ID *",-1)),u("input",{id:"animationId",type:"text",value:e.selectedElement.animationId,placeholder:"animation_id",class:rt({"field-error":Et.value}),onInput:p[26]||(p[26]=C=>g("animationId",C))},null,42,oA),Et.value?(w(),E("div",sA," Please provide an animation ID. ")):re("",!0)]),u("div",null,[p[105]||(p[105]=u("label",{for:"animationFile"},"Animation file *",-1)),u("select",{id:"animationFile",value:e.selectedElement.animationFile,class:rt({"field-error":Ye.value}),onChange:it},[p[104]||(p[104]=u("option",{value:""},"Select animation",-1)),(w(!0),E(Oe,null,Qe(lt.value,C=>(w(),E("option",{key:C,value:C},ue(C),9,aA))),128))],42,iA),Ye.value?(w(),E("div",rA,ue(Ze.value),1)):re("",!0)]),u("div",null,[p[108]||(p[108]=u("label",{for:"animationTransparency"},"Transparency",-1)),u("select",{id:"animationTransparency",value:e.selectedElement.animationTransparency||"opaque",onChange:p[27]||(p[27]=C=>g("animationTransparency",C))},[p[106]||(p[106]=u("option",{value:"opaque"},"opaque",-1)),p[107]||(p[107]=u("option",{value:"chroma_key"},"chroma_key",-1)),e.isMonochrome?re("",!0):(w(),E("option",cA,"alpha_channel"))],40,lA)]),u("div",uA,[u("div",null,[p[110]||(p[110]=u("label",{for:"animationLoop"},"Loop",-1)),u("select",{id:"animationLoop",value:(!!e.selectedElement.loopEnabled).toString(),onChange:p[28]||(p[28]=C=>U("loopEnabled",C))},[...p[109]||(p[109]=[u("option",{value:"true"},"TRUE",-1),u("option",{value:"false"},"FALSE",-1)])],40,dA)]),u("div",null,[p[112]||(p[112]=u("label",{for:"animationAuto"},"Auto animate",-1)),u("select",{id:"animationAuto",value:(!!e.selectedElement.autoAnimate).toString(),onChange:p[29]||(p[29]=C=>U("autoAnimate",C))},[...p[111]||(p[111]=[u("option",{value:"true"},"TRUE",-1),u("option",{value:"false"},"FALSE",-1)])],40,fA)])]),e.selectedElement.autoAnimate?(w(),E("div",hA,[p[113]||(p[113]=u("label",{for:"animationInterval"},"Interval (ms)",-1)),u("input",{id:"animationInterval",type:"number",value:e.selectedElement.intervalMs,placeholder:"200",onInput:p[30]||(p[30]=C=>m("intervalMs",C))},null,40,pA)])):re("",!0),e.selectedElement.loopEnabled?(w(),E("div",gA,[u("div",null,[p[114]||(p[114]=u("label",{for:"animationLoopStart"},"Start frame",-1)),u("input",{id:"animationLoopStart",type:"number",value:e.selectedElement.loopStart,placeholder:"0",onInput:p[31]||(p[31]=C=>m("loopStart",C))},null,40,vA)]),u("div",null,[p[115]||(p[115]=u("label",{for:"animationLoopEnd"},"End frame",-1)),u("input",{id:"animationLoopEnd",type:"number",value:e.selectedElement.loopEnd,placeholder:"10",onInput:p[32]||(p[32]=C=>m("loopEnd",C))},null,40,mA)])])):re("",!0),e.selectedElement.loopEnabled?(w(),E("div",yA,[p[116]||(p[116]=u("label",{for:"animationLoopRepeat"},"Repeat",-1)),u("input",{id:"animationLoopRepeat",type:"number",value:e.selectedElement.loopRepeat,placeholder:"0",onInput:p[33]||(p[33]=C=>m("loopRepeat",C))},null,40,bA)])):re("",!0)],64)):re("",!0),e.selectedElement.type==="graph"?(w(),E(Oe,{key:17},[u("div",null,[p[117]||(p[117]=u("label",{for:"graphId"},"Graph ID *",-1)),u("input",{id:"graphId",type:"text",value:e.selectedElement.graphId,placeholder:"graph_id",class:rt({"field-error":le.value}),onInput:p[34]||(p[34]=C=>g("graphId",C))},null,42,_A),le.value?(w(),E("div",wA," Please provide a graph ID. ")):re("",!0)]),u("div",EA,[u("div",null,[p[118]||(p[118]=u("label",{for:"graphDuration"},"Duration *",-1)),u("input",{id:"graphDuration",type:"text",value:e.selectedElement.duration,placeholder:"24h",class:rt({"field-error":Se.value}),onInput:p[35]||(p[35]=C=>g("duration",C))},null,42,SA)]),u("div",null,[p[119]||(p[119]=u("label",{for:"graphBorder"},"Border",-1)),u("input",{id:"graphBorder",type:"checkbox",class:"schema-checkbox",checked:e.selectedElement.border!==!1,onChange:p[36]||(p[36]=C=>I("border",C))},null,40,xA)])]),u("div",kA,[u("div",null,[p[120]||(p[120]=u("label",{for:"graphXGrid"},"X grid",-1)),u("input",{id:"graphXGrid",type:"text",value:e.selectedElement.xGrid,placeholder:"10min",onInput:p[37]||(p[37]=C=>g("xGrid",C))},null,40,CA)]),u("div",null,[p[121]||(p[121]=u("label",{for:"graphYGrid"},"Y grid",-1)),u("input",{id:"graphYGrid",type:"text",value:e.selectedElement.yGrid,placeholder:"1.0",onInput:p[38]||(p[38]=C=>g("yGrid",C))},null,40,AA)])]),u("div",$A,[u("div",null,[p[122]||(p[122]=u("label",{for:"graphMinRange"},"Min range",-1)),u("input",{id:"graphMinRange",type:"number",value:e.selectedElement.minRange,placeholder:"0",onInput:p[39]||(p[39]=C=>m("minRange",C))},null,40,IA)]),u("div",null,[p[123]||(p[123]=u("label",{for:"graphMaxRange"},"Max range",-1)),u("input",{id:"graphMaxRange",type:"number",value:e.selectedElement.maxRange,placeholder:"100",onInput:p[40]||(p[40]=C=>m("maxRange",C))},null,40,TA)])]),u("div",RA,[u("div",null,[p[124]||(p[124]=u("label",{for:"graphMinValue"},"Min value",-1)),u("input",{id:"graphMinValue",type:"number",value:e.selectedElement.minValue,placeholder:"0",onInput:p[41]||(p[41]=C=>m("minValue",C))},null,40,FA)]),u("div",null,[p[125]||(p[125]=u("label",{for:"graphMaxValue"},"Max value",-1)),u("input",{id:"graphMaxValue",type:"number",value:e.selectedElement.maxValue,placeholder:"100",onInput:p[42]||(p[42]=C=>m("maxValue",C))},null,40,LA)])]),u("div",null,[p[126]||(p[126]=u("label",{for:"graphUseTraces"},"Use multiple traces",-1)),u("input",{id:"graphUseTraces",type:"checkbox",class:"schema-checkbox",checked:!!e.selectedElement.useTraces,onChange:p[43]||(p[43]=C=>I("useTraces",C))},null,40,OA)]),e.selectedElement.useTraces?re("",!0):(w(),E("div",MA,[u("div",null,[p[128]||(p[128]=u("label",{for:"graphLineType"},"Line type",-1)),u("select",{id:"graphLineType",value:e.selectedElement.lineType||"SOLID",onChange:p[44]||(p[44]=C=>g("lineType",C))},[...p[127]||(p[127]=[u("option",{value:"SOLID"},"SOLID",-1),u("option",{value:"DOTTED"},"DOTTED",-1),u("option",{value:"DASHED"},"DASHED",-1)])],40,PA)]),u("div",null,[p[129]||(p[129]=u("label",{for:"graphLineThickness"},"Thickness",-1)),u("input",{id:"graphLineThickness",type:"number",value:e.selectedElement.lineThickness||3,onInput:p[45]||(p[45]=C=>m("lineThickness",C))},null,40,NA)])])),e.selectedElement.useTraces?(w(),E("div",HA,[u("div",{class:"display-trace-header"},[p[132]||(p[132]=u("strong",null,"Traces",-1)),u("button",{type:"button",class:"secondary compact",onClick:x},"Add trace")]),(be=e.selectedElement.traces)!=null&&be.length?re("",!0):(w(),E("div",zA,"No traces added.")),(w(!0),E(Oe,null,Qe(e.selectedElement.traces,(C,ye)=>(w(),E("div",{key:ye,class:"display-trace-card"},[u("div",WA,[u("div",null,[u("label",{for:`traceSensor_${ye}`},"Sensor",8,GA),u("select",{id:`traceSensor_${ye}`,value:C.sensor||"",onChange:Fe=>R(ye,"sensor",Fe.target.value)},[p[133]||(p[133]=u("option",{value:""},"Select sensor",-1)),(w(!0),E(Oe,null,Qe(et.value,Fe=>(w(),E("option",{key:Fe.id,value:Fe.id},ue(Fe.label),9,ZA))),128))],40,KA)]),u("div",null,[u("label",{for:`traceName_${ye}`},"Name",8,qA),u("input",{id:`traceName_${ye}`,type:"text",value:C.name||"",onInput:Fe=>R(ye,"name",Fe.target.value)},null,40,YA)])]),u("div",XA,[u("div",null,[u("label",{for:`traceLineType_${ye}`},"Line type",8,JA),u("select",{id:`traceLineType_${ye}`,value:C.lineType||"SOLID",onChange:Fe=>R(ye,"lineType",Fe.target.value)},[...p[134]||(p[134]=[u("option",{value:"SOLID"},"SOLID",-1),u("option",{value:"DOTTED"},"DOTTED",-1),u("option",{value:"DASHED"},"DASHED",-1)])],40,QA)]),u("div",null,[u("label",{for:`traceThickness_${ye}`},"Thickness",8,e$),u("input",{id:`traceThickness_${ye}`,type:"number",value:C.lineThickness??3,onInput:Fe=>R(ye,"lineThickness",Number(Fe.target.value))},null,40,t$)])]),u("div",n$,[e.isMonochrome?re("",!0):(w(),E("div",o$,[u("label",{for:`traceColor_${ye}`},"Color",8,s$),u("div",i$,[u("input",{id:`traceColor_${ye}`,type:"text",value:C.color||"",placeholder:"#RRGGBB",onInput:Fe=>R(ye,"color",Fe.target.value)},null,40,a$),u("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:Fe=>W(ye)},[u("span",{class:"schema-color-icon",style:tn({backgroundColor:Me(C.color)})},null,4)],8,r$)])])),u("div",null,[u("label",{for:`traceContinuous_${ye}`},"Continuous",8,l$),u("input",{id:`traceContinuous_${ye}`,type:"checkbox",class:"schema-checkbox",checked:!!C.continuous,onChange:Fe=>R(ye,"continuous",Fe.target.checked)},null,40,c$)])]),u("div",u$,[u("button",{type:"button",class:"secondary compact",onClick:Fe=>B(ye)},"Remove",8,d$)])]))),128)),mt(Gi,{open:a.value,selected:Ke.value,onClose:y,onSelect:k},null,8,["open","selected"])])):(w(),E("div",DA,[e.isMonochrome?re("",!0):(w(),E("div",jA,[p[130]||(p[130]=u("label",{for:"graphColor"},"Color",-1)),u("div",BA,[u("input",{id:"graphColor",type:"text",value:e.selectedElement.color,placeholder:"#RRGGBB",onInput:p[46]||(p[46]=C=>g("color",C))},null,40,UA),u("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:tt},[u("span",{class:"schema-color-icon",style:tn({backgroundColor:xe.value})},null,4)])]),mt(Gi,{open:i.value,selected:Ae.value,onClose:$,onSelect:O},null,8,["open","selected"])])),u("div",null,[p[131]||(p[131]=u("label",{for:"graphContinuous"},"Continuous",-1)),u("input",{id:"graphContinuous",type:"checkbox",class:"schema-checkbox",checked:!!e.selectedElement.continuous,onChange:p[47]||(p[47]=C=>I("continuous",C))},null,40,VA)])])),u("div",null,[p[135]||(p[135]=u("label",{for:"graphLegend"},"Legend",-1)),u("input",{id:"graphLegend",type:"checkbox",class:"schema-checkbox",checked:!!e.selectedElement.legendEnabled,onChange:$t},null,40,f$)]),e.selectedElement.legendEnabled?(w(),E("div",h$,[u("div",p$,[u("div",null,[p[137]||(p[137]=u("label",{for:"legendNameFontSource"},"Name font source",-1)),u("select",{id:"legendNameFontSource",value:e.selectedElement.legendNameFontSource||"local",onChange:ve},[...p[136]||(p[136]=[u("option",{value:"local"},"Local",-1),u("option",{value:"google"},"Google Fonts",-1)])],40,g$)]),u("div",null,[p[139]||(p[139]=u("label",{for:"legendValueFontSource"},"Value font source",-1)),u("select",{id:"legendValueFontSource",value:e.selectedElement.legendValueFontSource||"local",onChange:Pe},[...p[138]||(p[138]=[u("option",{value:"local"},"Local",-1),u("option",{value:"google"},"Google Fonts",-1)])],40,v$)])]),(e.selectedElement.legendNameFontSource||"local")==="local"?(w(),E("div",m$,[u("div",null,[p[141]||(p[141]=u("label",{for:"legendNameFontFile"},"Name font",-1)),u("select",{id:"legendNameFontFile",value:e.selectedElement.legendNameFontFile,onChange:ne},[p[140]||(p[140]=u("option",{value:""},"Select font",-1)),(w(!0),E(Oe,null,Qe(e.localFonts,C=>(w(),E("option",{key:C.file,value:C.file},ue(C.label),9,b$))),128))],40,y$)]),u("div",null,[p[142]||(p[142]=u("label",{for:"legendNameFontSize"},"Name size",-1)),u("input",{id:"legendNameFontSize",type:"number",value:e.selectedElement.legendNameFontSize||10,onInput:p[48]||(p[48]=C=>m("legendNameFontSize",C))},null,40,_$)])])):(w(),E("div",w$,[u("div",null,[p[144]||(p[144]=u("label",{for:"legendNameFontFamily"},"Name family",-1)),u("select",{id:"legendNameFontFamily",value:e.selectedElement.legendNameFontFamily,onChange:_e},[p[143]||(p[143]=u("option",{value:""},"Select family",-1)),(w(!0),E(Oe,null,Qe(e.googleFonts,C=>(w(),E("option",{key:C.family,value:C.family},ue(C.family),9,S$))),128))],40,E$)]),u("div",null,[p[145]||(p[145]=u("label",{for:"legendNameFontVariant"},"Variant",-1)),u("select",{id:"legendNameFontVariant",value:e.selectedElement.legendNameFontVariant||"regular",onChange:Je},[(w(!0),E(Oe,null,Qe(((Ie=e.googleFonts.find(C=>C.family===e.selectedElement.legendNameFontFamily))==null?void 0:Ie.variants)||[],C=>(w(),E("option",{key:C,value:C},ue(C),9,k$))),128))],40,x$)]),u("div",null,[p[146]||(p[146]=u("label",{for:"legendNameFontSizeGoogle"},"Name size",-1)),u("input",{id:"legendNameFontSizeGoogle",type:"number",value:e.selectedElement.legendNameFontSize||10,onInput:p[49]||(p[49]=C=>m("legendNameFontSize",C))},null,40,C$)])])),(e.selectedElement.legendValueFontSource||"local")==="local"?(w(),E("div",A$,[u("div",null,[p[148]||(p[148]=u("label",{for:"legendValueFontFile"},"Value font",-1)),u("select",{id:"legendValueFontFile",value:e.selectedElement.legendValueFontFile,onChange:fe},[p[147]||(p[147]=u("option",{value:""},"Select font",-1)),(w(!0),E(Oe,null,Qe(e.localFonts,C=>(w(),E("option",{key:C.file,value:C.file},ue(C.label),9,I$))),128))],40,$$)]),u("div",null,[p[149]||(p[149]=u("label",{for:"legendValueFontSize"},"Value size",-1)),u("input",{id:"legendValueFontSize",type:"number",value:e.selectedElement.legendValueFontSize||8,onInput:p[50]||(p[50]=C=>m("legendValueFontSize",C))},null,40,T$)])])):(w(),E("div",R$,[u("div",null,[p[151]||(p[151]=u("label",{for:"legendValueFontFamily"},"Value family",-1)),u("select",{id:"legendValueFontFamily",value:e.selectedElement.legendValueFontFamily,onChange:Be},[p[150]||(p[150]=u("option",{value:""},"Select family",-1)),(w(!0),E(Oe,null,Qe(e.googleFonts,C=>(w(),E("option",{key:C.family,value:C.family},ue(C.family),9,L$))),128))],40,F$)]),u("div",null,[p[152]||(p[152]=u("label",{for:"legendValueFontVariant"},"Variant",-1)),u("select",{id:"legendValueFontVariant",value:e.selectedElement.legendValueFontVariant||"regular",onChange:Ge},[(w(!0),E(Oe,null,Qe(((ze=e.googleFonts.find(C=>C.family===e.selectedElement.legendValueFontFamily))==null?void 0:ze.variants)||[],C=>(w(),E("option",{key:C,value:C},ue(C),9,M$))),128))],40,O$)]),u("div",null,[p[153]||(p[153]=u("label",{for:"legendValueFontSizeGoogle"},"Value size",-1)),u("input",{id:"legendValueFontSizeGoogle",type:"number",value:e.selectedElement.legendValueFontSize||8,onInput:p[51]||(p[51]=C=>m("legendValueFontSize",C))},null,40,P$)])])),u("div",N$,[u("div",null,[p[154]||(p[154]=u("label",{for:"legendWidth"},"Legend width",-1)),u("input",{id:"legendWidth",type:"number",value:e.selectedElement.legendWidth,placeholder:"80",onInput:p[52]||(p[52]=C=>m("legendWidth",C))},null,40,D$)]),u("div",null,[p[155]||(p[155]=u("label",{for:"legendHeight"},"Legend height",-1)),u("input",{id:"legendHeight",type:"number",value:e.selectedElement.legendHeight,placeholder:"32",onInput:p[53]||(p[53]=C=>m("legendHeight",C))},null,40,j$)])]),u("div",B$,[u("div",null,[p[156]||(p[156]=u("label",{for:"legendBorder"},"Legend border",-1)),u("input",{id:"legendBorder",type:"checkbox",class:"schema-checkbox",checked:e.selectedElement.legendBorder!==!1,onChange:p[54]||(p[54]=C=>I("legendBorder",C))},null,40,U$)]),u("div",null,[p[157]||(p[157]=u("label",{for:"legendShowLines"},"Show lines",-1)),u("input",{id:"legendShowLines",type:"checkbox",class:"schema-checkbox",checked:e.selectedElement.legendShowLines!==!1,onChange:p[55]||(p[55]=C=>I("legendShowLines",C))},null,40,V$)])]),u("div",H$,[u("div",null,[p[159]||(p[159]=u("label",{for:"legendShowValues"},"Show values",-1)),u("select",{id:"legendShowValues",value:e.selectedElement.legendShowValues||"AUTO",onChange:p[56]||(p[56]=C=>g("legendShowValues",C))},[...p[158]||(p[158]=[u("option",{value:"NONE"},"NONE",-1),u("option",{value:"AUTO"},"AUTO",-1),u("option",{value:"BESIDE"},"BESIDE",-1),u("option",{value:"BELOW"},"BELOW",-1)])],40,z$)]),u("div",null,[p[161]||(p[161]=u("label",{for:"legendDirection"},"Direction",-1)),u("select",{id:"legendDirection",value:e.selectedElement.legendDirection||"AUTO",onChange:p[57]||(p[57]=C=>g("legendDirection",C))},[...p[160]||(p[160]=[u("option",{value:"AUTO"},"AUTO",-1),u("option",{value:"HORIZONTAL"},"HORIZONTAL",-1),u("option",{value:"VERTICAL"},"VERTICAL",-1)])],40,W$)])]),u("div",null,[p[162]||(p[162]=u("label",{for:"legendShowUnits"},"Show units",-1)),u("input",{id:"legendShowUnits",type:"checkbox",class:"schema-checkbox",checked:e.selectedElement.legendShowUnits!==!1,onChange:p[58]||(p[58]=C=>I("legendShowUnits",C))},null,40,G$)])])):re("",!0)],64)):re("",!0),e.selectedElement.type==="icon"?(w(),E("div",K$,[p[163]||(p[163]=u("label",{for:"iconValue"},"Icon",-1)),u("div",Z$,[u("input",{id:"iconValue",type:"text",value:H.value,class:rt({"field-error":de.value}),placeholder:"mdi:home-thermometer",onInput:p[59]||(p[59]=C=>g("icon",C))},null,42,q$),u("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:ke},[u("img",{src:we.value,alt:"Add icon"},null,8,Y$)])]),de.value?(w(),E("div",X$,ue(me.value),1)):re("",!0),mt(fg,{open:s.value,selected:M.value,"initial-query":te.value,onClose:Ce,onSelect:He},null,8,["open","selected","initial-query"])])):re("",!0),e.selectedElement.type==="icon"&&!e.isMonochrome?(w(),E("div",J$,[p[164]||(p[164]=u("label",{for:"iconColor"},"Color",-1)),u("div",Q$,[u("input",{id:"iconColor",type:"text",value:Ae.value,placeholder:"#RRGGBB",onInput:p[60]||(p[60]=C=>g("color",C))},null,40,e2),u("button",{type:"button",class:"secondary compact schema-icon-btn",onClick:tt},[u("span",{class:"schema-color-icon",style:tn({backgroundColor:xe.value})},null,4)])]),mt(Gi,{open:i.value,selected:Ae.value,onClose:$,onSelect:O},null,8,["open","selected"])])):re("",!0)],64))])):(w(),E("div",Ok,"Select an element on the canvas."))],2)}}},n2=bo(t2,[["__scopeId","data-v-e8b58e9d"]]),o2={class:"display-builder"},s2={class:"display-builder__trigger"},i2=["disabled"],a2={class:"display-config-card",role:"dialog","aria-modal":"true"},r2={class:"display-config-header"},l2={class:"display-config-meta"},c2={key:0},u2={class:"display-config-actions"},d2={class:"display-config-body"},f2={class:"display-config-column"},h2={class:"display-config-panel display-config-panel--toolbox"},p2={class:"display-config-panel display-config-panel--layers"},g2={class:"display-element-list"},v2=["onClick","onDragstart","onDragover","onDrop"],m2={class:"display-element-type"},y2={class:"display-element-name"},b2={key:0,class:"note"},_2={class:"display-config-panel display-config-panel--canvas"},w2={class:"display-config-panel__header"},E2={class:"display-zoom"},S2=["disabled"],x2=["disabled"],k2={key:1,class:"note"},C2={class:"display-config-panel display-config-panel--inspector"},A2={class:"display-config-panel__header"},$2={key:0,class:"display-element-badge"},I2={class:"display-inspector-body"},T2={class:"display-inspector-actions"},R2=["disabled"],F2=["disabled"],L2=2,jf="_display_builder",O2={__name:"DisplayBuilder",props:{schema:{type:Object,default:()=>({})},componentConfig:{type:Object,default:()=>({})},idIndex:{type:Array,default:()=>[]},mdiIcons:{type:Array,default:()=>[]}},setup(e){const n=e,t=Y(1),o=Y(!1),s=Y(null),i=Y({w:0,h:0}),a=Y(0),r=Y(0),d=Y(!1),c=Y({x:0,y:0,panX:0,panY:0}),f=Y(!1),v="./",g=`${v.endsWith("/")?v:`${v}/`}runtime/esp_assets/`,I=Y([]),U=Y([]),x=Y([]),R=Y([]),B=Y(null),H=Y(null),M=Y(null),te=Y(null),we=Y(!1);let de=1;const me=F(()=>[...R.value].reverse()),Ae=F(()=>{var j;return((j=n.schema)==null?void 0:j.model_meta)||{}}),xe=F(()=>Object.keys(Ae.value||{})),Me=F(()=>{var j;return((j=n.componentConfig)==null?void 0:j.model)||xe.value[0]||""}),Ke=F(()=>Ae.value[Me.value]||null),et=F(()=>Me.value||"n/a"),je=F(()=>et.value.split(" ")[0]||"n/a"),De=F(()=>{var j;return(((j=n.schema)==null?void 0:j.displayType)||"monochrome")==="monochrome"}),Q=F(()=>{if(!Ke.value)return 1;const{w:j,h:he}=i.value;return!j||!he?1:j/Ke.value.w}),le=F(()=>{if(!Ke.value)return!1;const{w:j,h:he}=i.value;return!j||!he?!1:Ke.value.w*t.value>j||Ke.value.h*t.value>he}),Se=F(()=>le.value?1:L2),Xe=F(()=>Math.max(.2,Q.value*.4)),st=F(()=>Math.max(Xe.value,Q.value*2)),lt=F(()=>Math.max(.02,(st.value-Xe.value)/30)),ut=F(()=>t.value<st.value-.001),Et=F(()=>t.value>Xe.value+.001),Ye=F(()=>({transform:`translate(${a.value}px, ${r.value}px)`})),Ze=F(()=>R.value.find(j=>j.id===B.value)),kt=["sensor","text_sensor","binary_sensor","number","switch","select","datetime","time"],ae=F(()=>(n.idIndex||[]).filter(j=>kt.includes(j.domain)).map(j=>({id:j.id,domain:j.domain,label:`${j.id} (${j.domain})`})).sort((j,he)=>j.label.localeCompare(he.label))),ke=(j,he,Re)=>Math.min(Math.max(j,he),Re),Ce=()=>{var Re,ct,$e;const j=x.value[0];if(j){const Ne=(Re=j.variants)!=null&&Re.includes("regular")?"regular":(ct=j.variants)==null?void 0:ct[0],P=($e=j.files)==null?void 0:$e[Ne];return{fontSource:"google",fontFamily:j.family,fontVariant:Ne||"regular",fontUrl:P||"",fontStyle:Ne!=null&&Ne.includes("italic")?"italic":"normal",fontWeight:Number.parseInt(Ne,10)||400}}const he=U.value[0];if(he){const Ne=Fe(he.label,he.file);return{fontSource:"local",fontFamily:he.label,fontFile:he.file,fontUrl:`${g}fonts/${he.file}`,fontVariant:"regular",fontStyle:Ne.style,fontWeight:Ne.weight}}return{}},He=()=>({}),tt=()=>({}),$=j=>{var ct,$e,Ne;const he=U.value[0];if(he){const P=Fe(he.label,he.file);return{source:"local",family:he.label,file:he.file,variant:"regular",url:`${g}fonts/${he.file}`,weight:P.weight,style:P.style,size:j}}const Re=x.value[0];if(Re){const P=(ct=Re.variants)!=null&&ct.includes("regular")?"regular":($e=Re.variants)==null?void 0:$e[0],K=((Ne=Re.files)==null?void 0:Ne[P])||"",J=P!=null&&P.includes("italic")?"italic":"normal",se=Number.parseInt(P,10)||400;return{source:"google",family:Re.family,file:"",variant:P||"regular",url:K,weight:se,style:J,size:j}}return null},O=j=>{if((j==null?void 0:j.type)!=="graph")return j;const he=j.legendNameFontFile||j.legendNameFontFamily,Re=j.legendValueFontFile||j.legendValueFontFamily;if(he&&Re)return j;const ct=he?null:$(10),$e=Re?null:$(8),Ne={};return ct&&(Ne.legendNameFontSource=ct.source,Ne.legendNameFontFamily=ct.family,Ne.legendNameFontFile=ct.file,Ne.legendNameFontVariant=ct.variant,Ne.legendNameFontUrl=ct.url,Ne.legendNameFontWeight=ct.weight,Ne.legendNameFontStyle=ct.style,Ne.legendNameFontSize=ct.size),$e&&(Ne.legendValueFontSource=$e.source,Ne.legendValueFontFamily=$e.family,Ne.legendValueFontFile=$e.file,Ne.legendValueFontVariant=$e.variant,Ne.legendValueFontUrl=$e.url,Ne.legendValueFontWeight=$e.weight,Ne.legendValueFontStyle=$e.style,Ne.legendValueFontSize=$e.size),Object.keys(Ne).length?{...j,...Ne}:j},W=j=>{const he={text:{w:60,h:10,text:"New text",textMode:"static",dynamicId:"",dynamicDomain:"",format:"%.1f",prefix:"",suffix:"",onLabel:"ON",offLabel:"OFF",wrap:!0},image:{w:24,h:24,image:"",imageUrl:"",invert:!1,imageType:"BINARY"},icon:{w:20,h:20,icon:""},graph:{w:80,h:32,graphId:"",duration:"1h",border:!0,xGrid:"",yGrid:"",minRange:"",maxRange:"",minValue:"",maxValue:"",sensor:"",lineType:"",lineThickness:"",continuous:!1,color:"",useTraces:!1,traces:[],legendEnabled:!1,legendNameFontSource:"local",legendNameFontFile:"",legendNameFontFamily:"",legendNameFontVariant:"regular",legendNameFontSize:10,legendNameFontUrl:"",legendNameFontWeight:400,legendNameFontStyle:"normal",legendValueFontSource:"local",legendValueFontFile:"",legendValueFontFamily:"",legendValueFontVariant:"regular",legendValueFontSize:8,legendValueFontUrl:"",legendValueFontWeight:400,legendValueFontStyle:"normal",legendWidth:"",legendHeight:"",legendBorder:!0,legendShowLines:!0,legendShowValues:"AUTO",legendShowUnits:!0,legendDirection:"AUTO"},animation:{w:48,h:48,animationId:"",animationFile:"",animationTransparency:"opaque",autoAnimate:!1,intervalMs:"",loopEnabled:!1,loopStart:"",loopEnd:"",loopRepeat:""},shape:{w:40,h:24,shapeType:"rect",filled:!1,rotation:0}},Re=he[j]||he.text,ct=R.value.length*4,$e=Ke.value||{w:128,h:64},Ne=ke(4+ct,0,Math.max(0,$e.w-Re.w)),P=ke(4+ct,0,Math.max(0,$e.h-Re.h)),K={id:`el-${de++}`,type:j,x:Ne,y:P,rotation:0,...Re};if(j==="graph"){const J=R.value.filter(se=>se.type==="graph").length+1;K.graphId=K.graphId||`graph_${J}_id`}if(j==="animation"){const J=R.value.filter(se=>se.type==="animation").length+1;K.animationId=K.animationId||`animation_${J}_id`}return j==="text"?{...K,...Ce()}:j==="image"?{...K,...He()}:j==="animation"?{...K,...tt()}:K},y=()=>{var ct;const j=(ct=n.componentConfig)==null?void 0:ct[jf];if(!(j!=null&&j.elements)||R.value.length)return;R.value=Array.isArray(j.elements)?j.elements:[];const he=R.value.map($e=>($e==null?void 0:$e.id)||"").filter(Boolean).map($e=>Number($e.replace(/\D+/g,""))||0),Re=he.length?Math.max(...he):0;de=Math.max(de,Re+1)},k=j=>ae.value.find(he=>he.id===j)||null,_=j=>{const he=W(j),Re=j==="graph"?O(he):he;R.value=[Re,...R.value],B.value=Re.id},T=()=>{B.value&&(R.value=R.value.filter(j=>j.id!==B.value),B.value=null)},Z=(j,he=8,Re=8)=>{if(!j)return null;const ct=Ke.value||{w:0,h:0},$e=Number(j.w||0),Ne=Number(j.h||0),P=Math.max(0,ct.w-$e),K=Math.max(0,ct.h-Ne),J=ke(Number(j.x||0)+he,0,P),se=ke(Number(j.y||0)+Re,0,K);return{...j,id:`el-${de++}`,x:J,y:se}},oe=()=>{const j=Z(Ze.value);j&&(R.value=[...R.value,j],B.value=j.id)},X=j=>{if(!j||!(j instanceof HTMLElement))return!1;const he=j.tagName;return j.isContentEditable?!0:he==="INPUT"||he==="TEXTAREA"||he==="SELECT"},ge=j=>{if(!o.value)return;if(j.key==="Escape"){j.preventDefault(),ze();return}if(X(j.target))return;const he=j.ctrlKey||j.metaKey;if(j.key==="Delete"){if(!B.value)return;j.preventDefault(),T();return}if(he&&j.key.toLowerCase()==="c"){if(!Ze.value)return;j.preventDefault(),H.value=JSON.parse(JSON.stringify(Ze.value));return}if(he&&j.key.toLowerCase()==="v"){if(!H.value)return;j.preventDefault();const Re=Z(H.value);if(!Re)return;R.value=[...R.value,Re],B.value=Re.id}},ce=j=>{B.value=j},ve=(j,he)=>{M.value=he,te.value=he,j!=null&&j.dataTransfer&&(j.dataTransfer.effectAllowed="move",j.dataTransfer.setData("text/plain",he))},Pe=j=>{!M.value||M.value===j||(te.value=j)},ne=j=>{const he=M.value;if(!he||he===j){te.value=null;return}const Re=R.value.findIndex(P=>P.id===he),ct=R.value.findIndex(P=>P.id===j);if(Re<0||ct<0){te.value=null,M.value=null;return}const $e=[...R.value],[Ne]=$e.splice(Re,1);$e.splice(ct,0,Ne),R.value=$e,te.value=null,M.value=null},fe=()=>{te.value=null,M.value=null},_e=({id:j,patch:he})=>{R.value=R.value.map(Re=>Re.id===j?{...Re,...he}:Re)},Be=j=>{if(!B.value)return;let he={...j};if(Object.prototype.hasOwnProperty.call(he,"dynamicId")){const Re=k(he.dynamicId);he.dynamicDomain=(Re==null?void 0:Re.domain)||""}_e({id:B.value,patch:he})},Je=()=>{R.value=[],B.value=null},Ge=()=>{we.value=!1,Je()},it=j=>j.type==="text"&&j.textMode==="dynamic"?j.dynamicId||"Value":j.type==="text"?j.text||"Text":j.type==="image"?j.image||"Image":j.type==="icon"?!j.icon||j.icon==="placeholder"?"Icon":j.icon:j.type==="graph"?j.graphId||"Graph":j.type==="animation"?j.animationId||"Animation":j.type==="shape"?j.shapeType==="line"?"Line":j.shapeType==="rect"?j.filled?"Filled rectangle":"Rectangle":j.shapeType==="circle"?j.filled?"Filled circle":"Circle":j.shapeType==="triangle"?"Triangle":j.shapeType==="polygon5"?"Pentagon":j.shapeType==="polygon6"?"Hexagon":j.shapeType==="polygon7"?"Heptagon":j.shapeType==="polygon8"?"Octagon":"Shape":j.id,yt=j=>j.type==="text"?j.textMode==="dynamic"?"value":"text":j.type==="graph"?j.graphId||"graph":j.type==="animation"?j.animationId||"animation":j.type==="shape"?j.shapeType||"shape":j.type,$t=j=>j.type==="text"?j.textMode==="dynamic"?"value":"text":j.type==="graph"?"graph":j.type==="animation"?"animation":j.type,pt=j=>Math.min(Math.max(j,Xe.value),st.value),_t=j=>{t.value=pt(j)},zt=()=>{_t(t.value+lt.value)},Zt=()=>{_t(t.value-lt.value)},q=()=>{t.value=pt(Q.value),a.value=0,r.value=0},p=j=>{if(!s.value)return;const he=s.value.getBoundingClientRect(),Re=he.width/2,ct=he.height/2,$e=j.clientX-he.left,Ne=j.clientY-he.top,P=($e-Re-a.value)/t.value,K=(Ne-ct-r.value)/t.value,J=j.deltaY>0?-1:1,se=pt(t.value+J*lt.value);t.value=se,a.value=$e-Re-P*se,r.value=Ne-ct-K*se},L=j=>{j.button===1&&(j.preventDefault(),d.value=!0,c.value={x:j.clientX,y:j.clientY,panX:a.value,panY:r.value},window.addEventListener("pointermove",be),window.addEventListener("pointerup",Ie))},be=j=>{if(!d.value)return;const he=j.clientX-c.value.x,Re=j.clientY-c.value.y;a.value=c.value.panX+he,r.value=c.value.panY+Re},Ie=()=>{d.value&&(d.value=!1,window.removeEventListener("pointermove",be),window.removeEventListener("pointerup",Ie))},ze=()=>{o.value=!1},C=()=>{f.value=!0},ye=()=>{f.value&&(f.value=!1,ze())},Fe=(j,he)=>{const Re=`${j||""} ${he||""}`.toLowerCase(),ct=Re.includes("italic")?"italic":"normal";let $e=400;return Re.includes("thin")?$e=100:Re.includes("extralight")||Re.includes("extra light")?$e=200:Re.includes("light")?$e=300:Re.includes("medium")?$e=500:Re.includes("semibold")||Re.includes("semi bold")?$e=600:Re.includes("bold")?$e=700:Re.includes("extrabold")||Re.includes("extra bold")?$e=800:Re.includes("black")&&($e=900),{weight:$e,style:ct}},at=()=>{const j=U.value[0],he=x.value[0];!j&&!he||(R.value=R.value.map(Re=>{var ct,$e,Ne;if(Re.type!=="text"||Re.fontSource)return Re;if(he){const P=(ct=he.variants)!=null&&ct.includes("regular")?"regular":($e=he.variants)==null?void 0:$e[0],K=(Ne=he.files)==null?void 0:Ne[P];return{...Re,fontSource:"google",fontFamily:he.family,fontVariant:P,fontUrl:K||"",fontStyle:P!=null&&P.includes("italic")?"italic":"normal",fontWeight:Number.parseInt(P,10)||400}}if(j){const P=Fe(j.label,j.file);return{...Re,fontSource:"local",fontFamily:j.label,fontFile:j.file,fontUrl:`${g}fonts/${j.file}`,fontVariant:"regular",fontStyle:P.style,fontWeight:P.weight}}}))},Ct=()=>{R.value.length&&(R.value=R.value.map(j=>O(j)))},bt=()=>{R.value.length&&(R.value=R.value.map(j=>j.type!=="animation"||!j.animationFile||j.animationUrl?j:{...j,animationUrl:`${g}images/${j.animationFile}`}))},An=j=>{document.body.style.overflow=j?"":"hidden"};ot(()=>o.value,j=>{An(!j),j||(f.value=!1),j&&oo(()=>{on(),q()})});const $n=async(j,he)=>{try{const Re=await fetch(j);return Re.ok?await Re.json():he}catch{return he}};Yo(async()=>{const j=await $n(`${g}fonts.json`,{fonts:[]}),he=await $n(`${g}gfonts.json`,{families:[]}),Re=await $n(`${g}images.json`,{images:[]});U.value=j.fonts||[],x.value=he.families||[],I.value=Re.images||[],y(),at(),Ct(),bt(),window.addEventListener("keydown",ge)}),ot(()=>R.value,j=>{n.componentConfig&&(n.componentConfig[jf]={elements:j})},{deep:!0});const on=()=>{if(!s.value)return;const j=s.value.getBoundingClientRect();i.value={w:j.width,h:j.height}};let rn=null;return Yo(()=>{rn=new ResizeObserver(()=>{on(),o.value&&(t.value=pt(t.value),!d.value&&!M.value&&(a.value=0,r.value=0))}),s.value&&rn.observe(s.value)}),ot(()=>s.value,(j,he)=>{rn&&(he&&rn.unobserve(he),j&&rn.observe(j))}),ot(()=>Ke.value,()=>{o.value&&oo(()=>{on(),t.value=pt(t.value)})}),io(()=>{An(!0),rn&&rn.disconnect(),window.removeEventListener("keydown",ge),window.removeEventListener("pointermove",be),window.removeEventListener("pointerup",Ie)}),(j,he)=>{var Re,ct;return w(),E("section",o2,[u("div",s2,[u("button",{type:"button",class:"secondary",disabled:!Ke.value,onClick:he[0]||(he[0]=$e=>o.value=!0)}," Display configurator ",8,i2)]),o.value?(w(),E("div",{key:0,class:"display-config-backdrop",onPointerdown:wt(C,["self"]),onClick:wt(ye,["self"])},[u("div",a2,[u("header",r2,[u("div",null,[he[4]||(he[4]=u("h3",null,"Display configurator",-1)),u("p",l2,[he[3]||(he[3]=wi(" Model: ",-1)),u("strong",null,ue(je.value),1),Ke.value?(w(),E("span",c2," | Resolution: "+ue(Ke.value.w)+"x"+ue(Ke.value.h)+" px",1)):re("",!0)])]),u("div",u2,[u("button",{type:"button",class:"secondary compact",onClick:he[1]||(he[1]=$e=>we.value=!0)},"Reset"),u("button",{type:"button",class:"secondary compact",onClick:ze},"Close")])]),mt(xa,{open:we.value,title:"Confirm",message:"Reset all display elements?","confirm-text":"Yes","cancel-text":"Cancel",onConfirm:Ge,onCancel:he[2]||(he[2]=$e=>we.value=!1)},null,8,["open"]),u("div",d2,[u("div",f2,[u("section",h2,[he[5]||(he[5]=u("div",{class:"display-config-panel__header"},[u("h4",null,"Toolbox")],-1)),mt(kk,{orientation:"vertical",variant:"flat",onAdd:_})]),u("section",p2,[he[6]||(he[6]=u("div",{class:"display-config-panel__header"},[u("h4",null,"Elements")],-1)),u("div",g2,[(w(!0),E(Oe,null,Qe(R.value,$e=>(w(),E("button",{key:$e.id,type:"button",class:rt(["display-element-item",{active:$e.id===B.value,"display-element-item--dragging":$e.id===M.value,"display-element-item--over":$e.id===te.value}]),onClick:Ne=>ce($e.id),draggable:"true",onDragstart:Ne=>ve(Ne,$e.id),onDragover:wt(Ne=>Pe($e.id),["prevent"]),onDrop:wt(Ne=>ne($e.id),["prevent"]),onDragend:fe},[u("span",m2,ue($t($e)),1),u("span",y2,ue(it($e)),1)],42,v2))),128)),R.value.length?re("",!0):(w(),E("div",b2,"No elements added yet."))])])]),u("section",_2,[u("div",w2,[he[8]||(he[8]=u("h4",null,"Screen",-1)),u("div",E2,[u("button",{type:"button",class:"secondary compact display-zoom__btn",disabled:!Et.value,onClick:Zt,"aria-label":"Zoom out"}," - ",8,S2),u("button",{type:"button",class:"secondary compact display-zoom__btn",onClick:q,"aria-label":"Restore view"},[...he[7]||(he[7]=[u("img",{src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/restore.svg",alt:""},null,-1)])]),u("button",{type:"button",class:"secondary compact display-zoom__btn",disabled:!ut.value,onClick:zt,"aria-label":"Zoom in"}," + ",8,x2)])]),u("div",{class:rt(["display-config-canvas-wrap",{"display-config-canvas-wrap--panning":d.value}]),ref_key:"canvasWrap",ref:s,onWheel:wt(p,["prevent"]),onPointerdown:L},[u("div",{class:"display-canvas-viewport",style:tn(Ye.value)},[Ke.value?(w(),Mn(Ek,{key:0,"screen-w":Ke.value.w,"screen-h":Ke.value.h,zoom:t.value,"grid-size":Se.value,elements:me.value,"is-monochrome":De.value,"selected-id":B.value,onSelect:ce,onUpdateElement:_e},null,8,["screen-w","screen-h","zoom","grid-size","elements","is-monochrome","selected-id"])):(w(),E("p",k2,"Select a display model in the form to enable the configurator."))],4)],34)]),u("section",C2,[u("div",A2,[he[9]||(he[9]=u("h4",null,"Inspector",-1)),Ze.value?(w(),E("span",$2,ue(yt(Ze.value)),1)):re("",!0)]),u("div",I2,[mt(n2,{variant:"flat","show-header":!1,"selected-element":Ze.value,"screen-w":((Re=Ke.value)==null?void 0:Re.w)||0,"screen-h":((ct=Ke.value)==null?void 0:ct.h)||0,"is-monochrome":De.value,images:I.value,"local-fonts":U.value,"google-fonts":x.value,"assets-base":g,"dynamic-ids":ae.value,"mdi-icons":e.mdiIcons,onUpdate:Be},null,8,["selected-element","screen-w","screen-h","is-monochrome","images","local-fonts","google-fonts","dynamic-ids","mdi-icons"])]),u("div",T2,[u("button",{type:"button",class:"secondary compact",disabled:!Ze.value,onClick:oe}," Duplicate ",8,R2),u("button",{type:"button",class:"secondary compact display-inspector-actions__delete",disabled:!Ze.value,onClick:T}," Delete ",8,F2)])])])])],32)):re("",!0)])}}},M2=bo(O2,[["__scopeId","data-v-788c77ed"]]),P2={class:"schema-renderer"},N2={key:0,class:"note"},D2={key:1,class:"schema-levels"},j2={key:2,class:"missing-schema"},B2={key:3,class:"schema-field missing-schema-field"},U2=["value"],zn={__name:"SchemaRenderer",props:{componentId:{type:String,default:""},componentConfig:{type:Object,default:()=>({})},rootValue:{type:Object,default:null},customConfig:{type:String,default:""},modeLevel:{type:String,default:"Simple"},idRegistry:{type:Object,default:()=>({})},nameRegistry:{type:Object,default:()=>({})},idIndex:{type:Array,default:()=>[]},mdiIcons:{type:Array,default:()=>[]},gpioOptions:{type:Array,default:()=>[]},gpioUsage:{type:Object,default:()=>({})},gpioTitle:{type:String,default:""},contextComponentId:{type:String,default:""},globalStore:{type:Object,default:()=>({})},fieldFilter:{type:Array,default:()=>[]}},emits:["update","update-custom"],setup(e,{emit:n}){const t=e,o=n,s=vo("mdiIcons",Y([])),i=F(()=>{var x;return(x=t.mdiIcons)!=null&&x.length?t.mdiIcons:(s==null?void 0:s.value)||[]}),a=Y(null),r=Y(!1),d=Y(!1),c={simple:1,normal:2,advanced:3},f=x=>{var B;const R=(B=x==null?void 0:x.lvl)==null?void 0:B.toLowerCase();return c[R]?R:"simple"},v=F(()=>{var x;return c[(x=t.modeLevel)==null?void 0:x.toLowerCase()]??c.simple}),m=F(()=>{var B;const x=((B=a.value)==null?void 0:B.fields)||[];if(!t.fieldFilter.length)return x;const R=new Set(t.fieldFilter);return x.filter(H=>R.has(H.key))}),g=F(()=>{var B;const x=(B=t.componentConfig)==null?void 0:B.bus,R=m.value;return R.filter(H=>{if(!Kr(H,t.componentConfig,R,t.globalStore)||H.uiHidden||H.key==="cs_pin"&&x&&x!=="spi"||H.key==="address"&&x&&x!=="i2c")return!1;const M=f(H);return c[M]<=v.value})}),I=({path:x,value:R})=>{o("update",{path:x,value:R})},U=x=>{o("update-custom",x.target.value)};return ot(()=>t.componentId,async x=>{if(!x){a.value=null,d.value=!1;return}r.value=!0,d.value=!1;try{const R=x.startsWith("general/")?await Wn(`${x}.json`):await hg(x);a.value=R}catch(R){(R==null?void 0:R.message)!=="Schema not found"&&console.error("Schema load failed",x,R),a.value=null}finally{r.value=!1,d.value=!0}},{immediate:!0}),(x,R)=>{var B;return w(),E("div",P2,[e.componentId?a.value?(w(),E("div",D2,[(w(!0),E(Oe,null,Qe(g.value,H=>(w(),Mn(vg,{key:H.key,field:H,path:[],value:e.componentConfig,"root-value":e.rootValue||e.componentConfig,"mode-level":e.modeLevel,"id-registry":e.idRegistry,"name-registry":e.nameRegistry,"id-index":e.idIndex,"gpio-options":e.gpioOptions,"gpio-usage":e.gpioUsage,"gpio-title":e.gpioTitle,"context-component-id":e.contextComponentId,"global-store":e.globalStore,onUpdate:I},null,8,["field","value","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"]))),128)),(B=a.value)!=null&&B.display_builder?(w(),Mn(M2,{key:0,schema:a.value,"component-config":e.componentConfig,"id-index":e.idIndex,"mdi-icons":i.value},null,8,["schema","component-config","id-index","mdi-icons"])):re("",!0)])):d.value&&!r.value?(w(),E("div",j2," Schema missing for this component! ")):re("",!0):(w(),E("div",N2,"Wybierz komponent z listy, aby go skonfigurowac.")),!a.value&&e.componentId&&d.value&&!r.value?(w(),E("div",B2,[R[0]||(R[0]=u("label",{for:"customConfigInput"},"custom config",-1)),u("textarea",{id:"customConfigInput",value:e.customConfig,rows:"4",wrap:"off",onInput:U},null,40,U2)])):re("",!0)])}}},V2=async()=>{const n=await fetch("./gpio/gpio-map.json");if(!n.ok)throw new Error(`GPIO map load failed: ${n.status}`);return n.json()},H2=(e,n)=>e==="esp8266"?"esp8266":e!=="esp32"?"":{esp32:"esp32",esp32s2:"esp32-s2",esp32s3:"esp32-s3",esp32c2:"esp32-c2",esp32c3:"esp32-c3",esp32c5:"esp32-c5",esp32c6:"esp32-c6",esp32c61:"esp32-c6",esp32h2:"esp32-h2",esp32p4:"esp32-p4"}[n]||"",yg=e=>typeof e=="string"?e:(e==null?void 0:e.id)||"",yi=e=>e===null||["string","number","boolean"].includes(typeof e),z2=e=>e?typeof e=="string"?{type:e}:e:{type:""},bg=e=>!!(e!=null&&e.dependsOn||e!=null&&e.globalDependsOn),_g=e=>{const n=e==null?void 0:e.emitYAML;return n==="never"||n==="always"||n==="visible"||n==="dependsOn"?n:bg(e)?"dependsOn":"visible"},wc=(e,n)=>{if(e===n)return!0;if(Array.isArray(e)&&Array.isArray(n))return e.length!==n.length?!1:e.every((t,o)=>wc(t,n[o]));if(e&&n&&typeof e=="object"&&typeof n=="object"&&!Array.isArray(e)&&!Array.isArray(n)){const t=Object.keys(e),o=Object.keys(n);return t.length!==o.length?!1:t.every(s=>wc(e[s],n[s]))}return!1},W2=e=>{if((e==null?void 0:e.default)!==void 0)return e.default;if((e==null?void 0:e.type)==="boolean")return!1},G2=(e,n)=>{if(!e||_g(e)==="always"||e.required||e.type!=="boolean"&&e.type!=="select")return!1;const t=W2(e);return t===void 0?!1:wc(n,t)},Lo=(e,n)=>{const t=z2(n),o=t.type||n;return e===null?"null":typeof e=="boolean"?e?"true":"false":typeof e=="number"?String(e):typeof e=="string"?e.startsWith("!secret")||t.suppressQuotes||o==="lambda"||o==="id"||o==="id_ref"||o==="slug"?e:o==="text"||o==="icon"||o==="ssid"||o==="password"?`"${e.replace(/"/g,'\\"')}"`:e:String(e)},K2=e=>{if(typeof e=="number")return String(e);if(typeof e=="boolean")return e?"true":"false";if(typeof e!="string")return Lo(e);const n=e.trim();return n?/^-?\d+(?:\.\d+)?$/.test(n)?n:`"${n.replace(/"/g,'\\"')}"`:'""'},Z2=(e,n,t)=>{e.forEach(o=>{if(!o||typeof o!="object")return;const s=o.key;if(!s||typeof s!="string")return;const i=o.value;if(i===void 0||i===""){t.push(`${" ".repeat(n)}${s}:`);return}t.push(`${" ".repeat(n)}${s}: ${K2(i)}`)})},Bf=(e,n,t)=>{e.forEach(o=>{o==null||o===""||t.push(`${" ".repeat(n)}- ${o}`)})},q2=(e,n,t)=>{e.forEach(o=>{if(!(o!=null&&o.type))return;const s=o.style||"object",i=o.config||{};if(s==="scalar"){const a=i.value;if(a===void 0||a===""){t.push(`${" ".repeat(n)}- ${o.type}:`);return}if(o.valueType==="lambda"&&typeof a=="string"&&a.includes(`
`)){t.push(`${" ".repeat(n)}- ${o.type}: |-`),a.split(`
`).forEach(r=>{t.push(`${" ".repeat(n+4)}${r}`)});return}t.push(`${" ".repeat(n)}- ${o.type}: ${Lo(a,o.valueType)}`);return}if(s==="scalar_or_object"){const{value:a,...r}=i;if(!(Object.keys(r).length>0)&&a!==void 0){t.push(`${" ".repeat(n)}- ${o.type}: ${Lo(a,o.valueType)}`);return}}if(s==="list"){const a=o.valueKey||"values",r=i[a]||[];t.push(`${" ".repeat(n)}- ${o.type}:`),zs(r,{type:"text"},n+4,t,i);return}t.push(`${" ".repeat(n)}- ${o.type}:`),vs(i,null,n+4,t,i)})},wg=(e,n,t,o,s)=>{e.forEach(i=>{if(!(i!=null&&i.type))return;const a=i.config||{},r=Array.isArray(i.fields)?i.fields:[],d=r.filter(c=>a[c.key]!==void 0);if(d.length===1&&yi(a[d[0].key])){const c=d[0],f=a[c.key];if(c.type==="lambda"&&typeof f=="string"&&/[\r\n]/.test(f)){t.push(`${" ".repeat(n)}- ${i.type}: |-`),f.split(/\r?\n/).forEach(v=>{t.push(`${" ".repeat(n+4)}${v}`)});return}t.push(`${" ".repeat(n)}- ${i.type}: ${Lo(f,c.type)}`);return}t.push(`${" ".repeat(n)}- ${i.type}:`),r.forEach(c=>{let f=a[c.key];if(f===""&&(f=void 0),f===void 0){c.required&&t.push(`${" ".repeat(n+2)}${c.key}:`);return}if(c.type==="lambda"&&typeof f=="string"&&/[\r\n]/.test(f)){t.push(`${" ".repeat(n+2)}${c.key}: |-`),f.split(/\r?\n/).forEach(v=>{t.push(`${" ".repeat(n+4)}${v}`)});return}if(yi(f)){t.push(`${" ".repeat(n+2)}${c.key}: ${Lo(f,c.type)}`);return}if(Array.isArray(f)){if(!f.length)return;t.push(`${" ".repeat(n+2)}${c.key}:`),zs(f,c.item,n+4,t,f,s);return}t.push(`${" ".repeat(n+2)}${c.key}:`),vs(f,c.fields,n+4,t,o,s)})})},Y2=(e,n,t,o,s)=>{(e||[]).forEach((i,a)=>{if(!i||typeof i!="object")return;const r=i.priority!==void 0&&i.priority!=="",d=Array.isArray(i.then)&&i.then.length>0;a===0&&r?t.push(`${" ".repeat(n)}- priority: ${Lo(i.priority)}`):t.push(`${" ".repeat(n)}-`),d&&(t.push(`${" ".repeat(n+2)}then:`),wg(i.then,n+4,t,o,s))})},vs=(e,n,t,o,s,i)=>{const a=e||{},r=Array.isArray(n)?n:[],d=new Set;r.forEach(c=>{var x,R;const f=c.key;if(!f)return;const v=_g(c),m=v==="always";if(v==="never"){d.add(f);return}const g=Kr(c,a,r,i);if(v==="dependsOn"&&bg(c)&&!g){d.add(f);return}if(!m&&v==="visible"&&!g){d.add(f);return}d.add(f);let I=a[f];if(I===""&&(I=void 0),I===void 0){const B=Yc(c,a,s);B!==void 0&&B!==""&&(I=B)}if(I===void 0){if(!c.required&&!m)return;if(c.type==="yaml"){o.push(`${" ".repeat(t)}${f}:`);return}if(c.default!==void 0){if(yi(c.default)){o.push(`${" ".repeat(t)}${f}: ${Lo(c.default,c)}`);return}if(Array.isArray(c.default)){o.push(`${" ".repeat(t)}${f}:`),zs(c.default,c.item,t+2,o,s,i);return}if(c.type==="object"){o.push(`${" ".repeat(t)}${f}:`),vs(c.default,c.fields,t+2,o,s,i);return}}if(c.type==="object"){o.push(`${" ".repeat(t)}${f}:`),vs({},c.fields,t+2,o,s,i);return}if(c.type==="list"){o.push(`${" ".repeat(t)}${f}:`);return}o.push(`${" ".repeat(t)}${f}:`);return}if(c.type==="raw_yaml"){const B=typeof I=="string"?I.trimEnd():"";if(!B){(c.required||m)&&o.push(`${" ".repeat(t)}${f}:`);return}B.split(/\r?\n/).forEach(H=>{o.push(`${" ".repeat(t)}${H}`)});return}if(c.type==="yaml"){const B=typeof I=="string"?I.trimEnd():"";if(!B){(c.required||m)&&o.push(`${" ".repeat(t)}${f}:`);return}o.push(`${" ".repeat(t)}${f}:`),B.split(/\r?\n/).forEach(H=>{o.push(`${" ".repeat(t+2)}${H}`)});return}if(G2(c,I))return;if(yi(I)){if(c.suppressDefault&&c.default!==void 0&&I===c.default)return;if(c.type==="lambda"&&typeof I=="string"&&/[\r\n]/.test(I)){o.push(`${" ".repeat(t)}${f}: |-`),I.split(/\r?\n/).forEach(B=>{o.push(`${" ".repeat(t+2)}${B}`)});return}o.push(`${" ".repeat(t)}${f}: ${Lo(I,c)}`);return}if(f==="filters"&&Array.isArray(I)&&I.some(B=>B==null?void 0:B.type)){o.push(`${" ".repeat(t)}${f}:`),q2(I,t+2,o);return}if(((x=c.item)==null?void 0:x.extends)==="base_actions.json"&&Array.isArray(I)){o.push(`${" ".repeat(t)}${f}:`),wg(I,t+2,o,s,i);return}if(Array.isArray(I)){if(I.length===0){(c.required||m)&&o.push(`${" ".repeat(t)}${f}:`);return}if(c.rawList){o.push(`${" ".repeat(t)}${f}:`),Bf(I,t+2,o);return}if(["on_boot","on_shutdown","on_loop"].includes(f)){o.push(`${" ".repeat(t)}${f}:`),Y2(I,t+2,o,s,i);return}if(f==="includes"||f==="includes_c"||f==="libraries"){o.push(`${" ".repeat(t)}${f}:`),Bf(I,t+2,o);return}if(((R=c.item)==null?void 0:R.type)==="object"&&Array.isArray(c.item.fields)&&c.item.fields.some(B=>B.key==="key")&&c.item.fields.some(B=>B.key==="value")){o.push(`${" ".repeat(t)}${f}:`),Z2(I,t+2,o);return}o.push(`${" ".repeat(t)}${f}:`),zs(I,c.item,t+2,o,s,i);return}const U=[];if(vs(I,c.fields,t+2,U,s,i),!U.length){(c.required||m)&&o.push(`${" ".repeat(t)}${f}:`);return}o.push(`${" ".repeat(t)}${f}:`),o.push(...U)}),Object.entries(a).forEach(([c,f])=>{if(!c.startsWith("_")&&!d.has(c)&&f!==void 0){if(yi(f)){o.push(`${" ".repeat(t)}${c}: ${Lo(f)}`);return}if(Array.isArray(f)){if(f.length===0)return;o.push(`${" ".repeat(t)}${c}:`),zs(f,null,t+2,o,s,i);return}o.push(`${" ".repeat(t)}${c}:`),vs(f,null,t+2,o,s,i)}})},po=(e,n,t=0,o=e,s=null)=>{const i=[];return vs(e,n,t,i,o,s),i},zs=(e,n,t,o,s,i)=>{e.forEach(a=>{if(a===void 0)return;if(yi(a)){o.push(`${" ".repeat(t)}- ${Lo(a,n||(n==null?void 0:n.type))}`);return}if(Array.isArray(a)){if(a.length===0)return;o.push(`${" ".repeat(t)}-`),zs(a,n==null?void 0:n.item,t+2,o,s,i);return}const r=[];if(vs(a||{},n==null?void 0:n.fields,t+2,r,s,i),r.length===0){o.push(`${" ".repeat(t)}- {}`);return}const d=`${" ".repeat(t)}- `,c=r[0];o.push(`${d}${c.slice(t+2)}`),r.slice(1).forEach(f=>o.push(f))})},Eg=e=>{if(!e||typeof e!="string")return"";const n=e.trim(),t=n.startsWith("mdi:")?n.slice(4):n;return t?`mdi_${t.replace(/[^a-z0-9]/gi,"_")}`:""},Xc=e=>String(e??"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),nr=e=>Xc(e).replace(/%/g,"%%"),Sg=({source:e,file:n,family:t,variant:o,size:s})=>{const i=Math.max(1,Math.round(s||12));return e==="google"?t?`google|${t}|${o||"regular"}|${i}`:"":n?`local|${n}|${i}`:""},xg=e=>!e||e.type!=="text"?"":Sg({source:e.fontSource||"local",file:e.fontFile||"",family:e.fontFamily||"",variant:e.fontVariant||"regular",size:e.h||12}),di=(e,n)=>{if(!e||e.type!=="graph")return"";const t=n==="value"?"legendValue":"legendName",o=e[`${t}FontSource`]||"local",s=e[`${t}FontFile`]||"",i=e[`${t}FontFamily`]||"",a=e[`${t}FontVariant`]||"regular",r=e[`${t}FontSize`]||(n==="value"?8:10);return Sg({source:o,file:s,family:i,variant:a,size:r})},kg=e=>{if(!e||e.type!=="image")return"";const n=e.image||"";if(!n)return"";const t=Math.max(1,Math.round(e.w||1)),o=Math.max(1,Math.round(e.h||1)),s=e.imageType||"BINARY";return`${n}|${t}|${o}|${s}`},Cg=e=>{if(!e||e.type!=="animation")return"";const n=e.animationFile||"";if(!n)return"";const t=Math.max(1,Math.round(e.w||1)),o=Math.max(1,Math.round(e.h||1)),s=e.animationTransparency||"opaque",i=e.autoAnimate?"1":"0",a=e.intervalMs??"",r=e.loopEnabled?"1":"0",d=e.loopStart??"",c=e.loopEnd??"",f=e.loopRepeat??"";return[n,t,o,s,i,a,r,d,c,f].join("|")},Ag=e=>{if(!e||e.type!=="graph")return"";const n=e.graphId||"",t=Math.max(1,Math.round(e.w||1)),o=Math.max(1,Math.round(e.h||1)),s=e.duration||"1h",i=e.xGrid||"",a=e.yGrid??"",r=e.minRange??"",d=e.maxRange??"",c=e.minValue??"",f=e.maxValue??"",v=e.border===!1?"0":"1",m=e.useTraces?"1":"0",g=e.sensor||"",I=e.lineType||"",U=e.lineThickness??"",x=e.continuous?"1":"0",R=e.color||"",B=(e.traces||[]).map(et=>et?[et.sensor||"",et.name||"",et.lineType||"",et.lineThickness??"",et.continuous?"1":"0",et.color||""].join("|"):"").join(";"),H=e.legendEnabled?"1":"0",M=di(e,"name"),te=di(e,"value"),we=e.legendWidth??"",de=e.legendHeight??"",me=e.legendBorder===!1?"0":"1",Ae=e.legendShowLines===!1?"0":"1",xe=e.legendShowValues||"AUTO",Me=e.legendShowUnits===!1?"0":"1",Ke=e.legendDirection||"AUTO";return[n,t,o,s,v,i,a,r,d,c,f,m,g,I,U,x,R,B,H,M,te,we,de,me,Ae,xe,Me,Ke].join("~")},$g=(e,n,t)=>{const o=new Map,s=new Map,i=new Map,a=new Map,r=new Map,d=new Map,c=new Map;return(e||[]).forEach(f=>{var U;const v=yg(f);if(!v)return;const m=n[v];if(!m||m.domain!=="display")return;const g=(U=f==null?void 0:f.config)==null?void 0:U._display_builder,I=Array.isArray(g==null?void 0:g.elements)?g.elements:[];I.length&&(s.set(f,I),I.filter(x=>(x==null?void 0:x.type)==="icon"&&(x==null?void 0:x.icon)).forEach(x=>{const R=Eg(x.icon);if(!R)return;const B=t==null?void 0:t[R];if(!B)return;const H=typeof x.icon=="string"?x.icon.trim():"",M=H?H.startsWith("mdi:")?H:`mdi:${H}`:"";M&&!i.has(B)&&i.set(B,M);const te=Math.max(1,Math.round(x.h||16));o.has(te)||o.set(te,new Set),o.get(te).add(B)}),I.filter(x=>(x==null?void 0:x.type)==="text").forEach(x=>{const R=xg(x);if(!R||a.has(R))return;const B=Math.max(1,Math.round(x.h||12));if(x.fontSource==="google"){const M=x.fontFamily||"",te=x.fontVariant||"regular";if(!M)return;a.set(R,{source:"google",family:M,variant:te,size:B});return}const H=x.fontFile||"";H&&a.set(R,{source:"local",file:H,size:B})}),I.filter(x=>(x==null?void 0:x.type)==="graph"&&(x==null?void 0:x.legendEnabled)).forEach(x=>{const R=di(x,"name");if(R&&!a.has(R)){const H=x.legendNameFontSource||"local",M=Math.max(1,Math.round(x.legendNameFontSize||10));if(H==="google"){const te=x.legendNameFontFamily||"",we=x.legendNameFontVariant||"regular";te&&a.set(R,{source:"google",family:te,variant:we,size:M})}else{const te=x.legendNameFontFile||"";te&&a.set(R,{source:"local",file:te,size:M})}}const B=di(x,"value");if(B&&!a.has(B)){const H=x.legendValueFontSource||"local",M=Math.max(1,Math.round(x.legendValueFontSize||8));if(H==="google"){const te=x.legendValueFontFamily||"",we=x.legendValueFontVariant||"regular";te&&a.set(B,{source:"google",family:te,variant:we,size:M})}else{const te=x.legendValueFontFile||"";te&&a.set(B,{source:"local",file:te,size:M})}}}),I.filter(x=>(x==null?void 0:x.type)==="image").forEach(x=>{const R=kg(x);if(!R||r.has(R))return;const B=Math.max(1,Math.round(x.w||1)),H=Math.max(1,Math.round(x.h||1)),M=x.imageType||"BINARY";r.set(R,{file:x.image,w:B,h:H,type:M})}),I.filter(x=>(x==null?void 0:x.type)==="animation").forEach(x=>{const R=Cg(x);if(!R||c.has(R))return;const B=Math.max(1,Math.round(x.w||1)),H=Math.max(1,Math.round(x.h||1));c.set(R,{file:x.animationFile,id:x.animationId||"",resizeW:B,resizeH:H,transparency:x.animationTransparency||"opaque",autoAnimate:!!x.autoAnimate,intervalMs:x.intervalMs??"",loopEnabled:!!x.loopEnabled,loopStart:x.loopStart??"",loopEnd:x.loopEnd??"",loopRepeat:x.loopRepeat??""})}),I.filter(x=>(x==null?void 0:x.type)==="graph").forEach(x=>{const R=Ag(x);!R||d.has(R)||d.set(R,{graphId:x.graphId||"",displayType:m.displayType||"monochrome",width:Math.max(1,Math.round(x.w||1)),height:Math.max(1,Math.round(x.h||1)),duration:x.duration||"1h",border:x.border!==!1,xGrid:x.xGrid||"",yGrid:x.yGrid??"",minRange:x.minRange??"",maxRange:x.maxRange??"",minValue:x.minValue??"",maxValue:x.maxValue??"",useTraces:!!x.useTraces,sensor:x.sensor||"",lineType:x.lineType||"",lineThickness:x.lineThickness??"",continuous:!!x.continuous,color:x.color||"",traces:x.traces||[],legendEnabled:!!x.legendEnabled,legendNameFontKey:di(x,"name"),legendValueFontKey:di(x,"value"),legendWidth:x.legendWidth??"",legendHeight:x.legendHeight??"",legendBorder:x.legendBorder!==!1,legendShowLines:x.legendShowLines!==!1,legendShowValues:x.legendShowValues||"AUTO",legendShowUnits:x.legendShowUnits!==!1,legendDirection:x.legendDirection||"AUTO"})}))}),{glyphsBySize:o,elementsByEntry:s,labelsByUnicode:i,textFontsByKey:a,imagesByKey:r,graphsByKey:d,animationsByKey:c}},X2=(e,n)=>{if(!e)return[];const{glyphsBySize:t,labelsByUnicode:o,textFontsByKey:s}=e,i=t.size>0,a=s.size>0;if(!i&&!a)return[];const r=[];return r.push("font:"),[...t.entries()].sort(([d],[c])=>d-c).forEach(([d,c])=>{r.push('  - file: "../esphome_assets/fonts/materialdesignicons-webfont.ttf"'),r.push(`    id: mdi_font_${d}`),r.push(`    size: ${d}`),r.push("    bpp: 1"),r.push("    glyphs:"),[...c].sort().forEach(f=>{const v=o==null?void 0:o.get(f),m=v?` #${v}`:"";r.push(`      - "${f}"${m}`)})}),[...s.entries()].sort(([d],[c])=>d.localeCompare(c)).forEach(([d,c])=>{const f=n==null?void 0:n.get(d);if(f){if(c.source==="google"){const v=c.variant||"regular";r.push(`  - file: "gfonts://${c.family}@${v}"`)}else r.push(`  - file: "../esphome_assets/fonts/${c.file}"`);r.push(`    id: ${f}`),r.push(`    size: ${c.size}`),r.push("    bpp: 1")}}),r.push(""),r},J2=(e,n)=>{if(!e)return[];const{imagesByKey:t}=e;if(!t.size)return[];const o=[];return o.push("image:"),[...t.entries()].sort(([s],[i])=>s.localeCompare(i)).forEach(([s,i])=>{const a=n==null?void 0:n.get(s);a&&(o.push(`  - file: "../esphome_assets/images/${i.file}"`),o.push(`    id: ${a}`),o.push(`    resize: ${i.w}x${i.h}`),o.push(`    type: ${i.type||"BINARY"}`))}),o.push(""),o},Q2=(e,n)=>{if(!e)return[];const{animationsByKey:t}=e;if(!t.size)return[];const o=[];return o.push("animation:"),[...t.entries()].sort(([s],[i])=>s.localeCompare(i)).forEach(([s,i])=>{const a=n==null?void 0:n.get(s);a&&(o.push(`  - file: "../esphome_assets/images/${i.file}"`),o.push(`    id: ${a}`),o.push(`    resize: ${i.resizeW}x${i.resizeH}`),o.push("    type: BINARY"),i.transparency&&i.transparency!=="opaque"&&o.push(`    transparency: ${i.transparency}`),i.loopEnabled&&(o.push("    loop:"),i.loopStart!==""&&i.loopStart!==null&&i.loopStart!==void 0&&o.push(`      start_frame: ${i.loopStart}`),i.loopEnd!==""&&i.loopEnd!==null&&i.loopEnd!==void 0&&o.push(`      end_frame: ${i.loopEnd}`),i.loopRepeat!==""&&i.loopRepeat!==null&&i.loopRepeat!==void 0&&o.push(`      repeat: ${i.loopRepeat}`)))}),o.push(""),o},eI=(e,n={},t={})=>{var a;const o=$g(e,n,t),s=Ig((o==null?void 0:o.animationsByKey)||new Map),i=[];return(a=o==null?void 0:o.animationsByKey)!=null&&a.size&&[...o.animationsByKey.entries()].sort(([r],[d])=>r.localeCompare(d)).forEach(([r,d])=>{if(!d.autoAnimate)return;const c=s==null?void 0:s.get(r);if(!c)return;const f=Number(d.intervalMs||0)||200;i.push({interval:`${f}ms`,then:[{type:"animation.next_frame",fields:[{key:"id",type:"id_ref",domain:"animation"}],config:{id:c}}]})}),i},Jc=(e,n)=>n==="monochrome"?"":qx(e),tI=(e,n,t)=>{const o=[];return(e||[]).filter(s=>(s==null?void 0:s.type)==="icon"&&(s==null?void 0:s.icon)).forEach(s=>{const i=Eg(s.icon);if(!i||!(n!=null&&n[i]))return;const a=Math.max(1,Math.round(s.h||16)),r=Math.round(s.x||0),d=Math.round(s.y||0),c=n[i],f=Jc(s.color,t);if(f){o.push(`it.printf(${r}, ${d}, id(mdi_font_${a}), ${f}, "%s", "${c}");`);return}o.push(`it.printf(${r}, ${d}, id(mdi_font_${a}), "%s", "${c}");`)}),o},nI=(e,n,t)=>{const o=[];return(e||[]).filter(s=>(s==null?void 0:s.type)==="text").forEach(s=>{const i=xg(s);if(!i)return;const a=n==null?void 0:n.get(i);if(!a)return;const r=Math.round(s.x||0),d=Math.round(s.y||0),c=s.textMode||"static",f=Jc(s.color,t);if(c!=="dynamic"){const U=Xc(s.text??"");if(f){o.push(`it.print(${r}, ${d}, id(${a}), ${f}, "${U}");`);return}o.push(`it.print(${r}, ${d}, id(${a}), "${U}");`);return}const v=s.dynamicId||"";if(!v)return;const m=s.dynamicDomain||"",g=nr(s.prefix||""),I=nr(s.suffix||"");if(["sensor","number"].includes(m)){const U=s.format||"%.1f",x=`${g}${U}${I}`;if(f){o.push(`it.printf(${r}, ${d}, id(${a}), ${f}, "${x}", id(${v}).state);`);return}o.push(`it.printf(${r}, ${d}, id(${a}), "${x}", id(${v}).state);`);return}if(["binary_sensor","switch"].includes(m)){const U=nr(s.onLabel||"ON"),x=nr(s.offLabel||"OFF");if(f){o.push(`it.printf(${r}, ${d}, id(${a}), ${f}, "%s%s%s", "${g}", id(${v}).state ? "${U}" : "${x}", "${I}");`);return}o.push(`it.printf(${r}, ${d}, id(${a}), "%s%s%s", "${g}", id(${v}).state ? "${U}" : "${x}", "${I}");`);return}if(["text_sensor","select"].includes(m)){if(f){o.push(`it.printf(${r}, ${d}, id(${a}), ${f}, "%s%s%s", "${g}", id(${v}).state.c_str(), "${I}");`);return}o.push(`it.printf(${r}, ${d}, id(${a}), "%s%s%s", "${g}", id(${v}).state.c_str(), "${I}");`);return}if(["time","datetime"].includes(m)){const U=m==="time"?"%H:%M":"%d-%m-%Y %H:%M";if(f){o.push(`it.printf(${r}, ${d}, id(${a}), ${f}, "%s%s%s", "${g}", id(${v}).now().strftime("${U}").c_str(), "${I}");`);return}o.push(`it.printf(${r}, ${d}, id(${a}), "%s%s%s", "${g}", id(${v}).now().strftime("${U}").c_str(), "${I}");`);return}if(f){o.push(`it.printf(${r}, ${d}, id(${a}), ${f}, "%s%s%s", "${g}", id(${v}).state.c_str(), "${I}");`);return}o.push(`it.printf(${r}, ${d}, id(${a}), "%s%s%s", "${g}", id(${v}).state.c_str(), "${I}");`)}),o},oI=(e,n)=>{const t=[];return(e||[]).filter(o=>(o==null?void 0:o.type)==="image"&&(o==null?void 0:o.image)).forEach(o=>{const s=kg(o);if(!s)return;const i=n==null?void 0:n.get(s);if(!i)return;const a=Math.round(o.x||0),r=Math.round(o.y||0);if(o.invert){t.push(`it.image(${a}, ${r}, id(${i}), COLOR_OFF, COLOR_ON);`);return}t.push(`it.image(${a}, ${r}, id(${i}));`)}),t},sI=(e,n)=>{const t=[];return(e||[]).filter(o=>(o==null?void 0:o.type)==="animation"&&(o==null?void 0:o.animationFile)).forEach(o=>{const s=Cg(o);if(!s)return;const i=n==null?void 0:n.get(s);if(!i)return;const a=Math.round(o.x||0),r=Math.round(o.y||0);t.push(`it.image(${a}, ${r}, id(${i}));`)}),t},iI=(e,n,t,o)=>{if(!o)return e;const s=o*Math.PI/180,i=Math.cos(s),a=Math.sin(s),r=e.x-n,d=e.y-t;return{x:n+r*i-d*a,y:t+r*a+d*i}},aI=e=>({x:Math.round(e.x),y:Math.round(e.y)}),rI=e=>{const n=Number(e.x||0),t=Number(e.y||0),o=Number(e.w||0),s=Number(e.h||0),i=e.shapeType||"rect";if(i==="line")return[{x:n,y:t},{x:n+o,y:t+s}];if(i==="rect")return[{x:n,y:t},{x:n+o,y:t},{x:n+o,y:t+s},{x:n,y:t+s}];if(i==="triangle")return[{x:n,y:t+s},{x:n+o/2,y:t},{x:n+o,y:t+s}];if(i.startsWith("polygon")){const a=Number(i.replace("polygon",""));if(!a||a<3)return[];const r=n+o/2,d=t+s/2,c=Math.max(1,Math.min(o,s)/2),f=[],v=-Math.PI/2;for(let m=0;m<a;m+=1){const g=v+m*2*Math.PI/a;f.push({x:r+c*Math.cos(g),y:d+c*Math.sin(g)})}return f}return[]},lI=(e,n)=>{const t=[];return(e||[]).filter(o=>(o==null?void 0:o.type)==="shape").forEach(o=>{const s=o.shapeType||"rect",i=Number(o.rotation||0),a=Number(o.x||0),r=Number(o.y||0),d=Number(o.w||0),c=Number(o.h||0),f=a+d/2,v=r+c/2,m=Jc(o.color,n);if(s==="circle"){const I=Math.max(1,Math.min(d,c)/2),U=Math.round(f),x=Math.round(v),R=Math.round(I);if(o.filled){if(m){t.push(`it.filled_circle(${U}, ${x}, ${R}, ${m});`);return}t.push(`it.filled_circle(${U}, ${x}, ${R});`)}else{if(m){t.push(`it.circle(${U}, ${x}, ${R}, ${m});`);return}t.push(`it.circle(${U}, ${x}, ${R});`)}return}let g=rI(o);if(g.length){if(i&&(g=g.map(I=>iI(I,f,v,i))),g=g.map(aI),s==="line"){const[I,U]=g;if(!I||!U)return;if(m){t.push(`it.line(${I.x}, ${I.y}, ${U.x}, ${U.y}, ${m});`);return}t.push(`it.line(${I.x}, ${I.y}, ${U.x}, ${U.y});`);return}if(o.filled){if(g.length===3){const[I,U,x]=g;if(m){t.push(`it.filled_triangle(${I.x}, ${I.y}, ${U.x}, ${U.y}, ${x.x}, ${x.y}, ${m});`);return}t.push(`it.filled_triangle(${I.x}, ${I.y}, ${U.x}, ${U.y}, ${x.x}, ${x.y});`);return}for(let I=1;I<g.length-1;I+=1){const U=g[0],x=g[I],R=g[I+1];if(m){t.push(`it.filled_triangle(${U.x}, ${U.y}, ${x.x}, ${x.y}, ${R.x}, ${R.y}, ${m});`);continue}t.push(`it.filled_triangle(${U.x}, ${U.y}, ${x.x}, ${x.y}, ${R.x}, ${R.y});`)}return}for(let I=0;I<g.length;I+=1){const U=g[I],x=g[(I+1)%g.length];if(m){t.push(`it.line(${U.x}, ${U.y}, ${x.x}, ${x.y}, ${m});`);continue}t.push(`it.line(${U.x}, ${U.y}, ${x.x}, ${x.y});`)}}}),t},cI=(e,n,t)=>{if(!e)return[];const{graphsByKey:o}=e;if(!(o!=null&&o.size))return[];const s=[];return s.push("graph:"),[...o.entries()].sort(([i],[a])=>i.localeCompare(a)).forEach(([i,a])=>{var d;const r=n==null?void 0:n.get(i);if(r){if(s.push(`  - id: ${r}`),!a.useTraces&&a.sensor&&s.push(`    sensor: ${a.sensor}`),s.push(`    duration: ${a.duration}`),s.push(`    width: ${a.width}`),s.push(`    height: ${a.height}`),a.border===!1&&s.push("    border: false"),a.xGrid&&s.push(`    x_grid: ${a.xGrid}`),a.yGrid!==""&&a.yGrid!==null&&a.yGrid!==void 0&&s.push(`    y_grid: ${a.yGrid}`),a.minRange!==""&&a.minRange!==null&&a.minRange!==void 0&&s.push(`    min_range: ${a.minRange}`),a.maxRange!==""&&a.maxRange!==null&&a.maxRange!==void 0&&s.push(`    max_range: ${a.maxRange}`),a.minValue!==""&&a.minValue!==null&&a.minValue!==void 0&&s.push(`    min_value: ${a.minValue}`),a.maxValue!==""&&a.maxValue!==null&&a.maxValue!==void 0&&s.push(`    max_value: ${a.maxValue}`),a.useTraces&&((d=a.traces)!=null&&d.length))s.push("    traces:"),a.traces.forEach(c=>{const f=String((c==null?void 0:c.sensor)||"").trim();if(!f)return;s.push(`      - sensor: ${f}`),c.name&&s.push(`        name: "${Xc(c.name)}"`),c.lineType&&s.push(`        line_type: ${c.lineType}`),c.lineThickness!==""&&c.lineThickness!==null&&c.lineThickness!==void 0&&s.push(`        line_thickness: ${c.lineThickness}`),c.continuous&&s.push("        continuous: true");const v=String(c.color||"").trim();v&&a.displayType!=="monochrome"&&s.push(`        color: ${v}`)});else{const c=String(a.color||"").trim();c&&a.displayType!=="monochrome"&&s.push(`    color: ${c}`)}if(a.legendEnabled){if(s.push("    legend:"),a.legendNameFontKey){const c=t==null?void 0:t.get(a.legendNameFontKey);c&&s.push(`      name_font: ${c}`)}if(a.legendValueFontKey){const c=t==null?void 0:t.get(a.legendValueFontKey);c&&s.push(`      value_font: ${c}`)}a.legendWidth!==""&&a.legendWidth!==null&&a.legendWidth!==void 0&&s.push(`      width: ${a.legendWidth}`),a.legendHeight!==""&&a.legendHeight!==null&&a.legendHeight!==void 0&&s.push(`      height: ${a.legendHeight}`),a.legendBorder===!1&&s.push("      border: false"),a.legendShowLines===!1&&s.push("      show_lines: false"),a.legendShowValues&&a.legendShowValues!=="AUTO"&&s.push(`      show_values: ${a.legendShowValues}`),a.legendShowUnits===!1&&s.push("      show_units: false"),a.legendDirection&&a.legendDirection!=="AUTO"&&s.push(`      direction: ${a.legendDirection}`)}}}),s.push(""),s},uI=(e,n)=>{const t=[];return(e||[]).filter(o=>(o==null?void 0:o.type)==="graph").forEach(o=>{const s=Ag(o);if(!s)return;const i=n==null?void 0:n.get(s);if(!i)return;const a=Math.round(o.x||0),r=Math.round(o.y||0);if(t.push(`it.graph(${a}, ${r}, id(${i}));`),o.legendEnabled){const d=Math.round((o.legendX??o.x+o.w+8)||0),c=Math.round((o.legendY??o.y)||0);t.push(`it.legend(${d}, ${c}, id(${i}));`)}}),t},dI=(e,n,t,o,s,i,a)=>{const r=[];return(e||[]).forEach(d=>{if((d==null?void 0:d.type)==="icon"){const c=tI([d],n,a);r.push(...c);return}if((d==null?void 0:d.type)==="text"){const c=nI([d],t,a);r.push(...c);return}if((d==null?void 0:d.type)==="image"){const c=oI([d],o);r.push(...c);return}if((d==null?void 0:d.type)==="animation"){const c=sI([d],i);r.push(...c);return}if((d==null?void 0:d.type)==="shape"){const c=lI([d],a);r.push(...c);return}if((d==null?void 0:d.type)==="graph"){const c=uI([d],s);r.push(...c)}}),r},fI=e=>{const n=new Map;return!e||!e.size||[...e.keys()].sort((t,o)=>t.localeCompare(o)).forEach((t,o)=>{n.set(t,`text_font_${o+1}`)}),n},hI=e=>{const n=new Map;return!e||!e.size||[...e.keys()].sort((t,o)=>t.localeCompare(o)).forEach((t,o)=>{n.set(t,`image_${o+1}`)}),n},Ig=e=>{const n=new Map;if(!e||!e.size)return n;const t=new Set;return[...e.entries()].sort(([o],[s])=>o.localeCompare(s)).forEach(([o,s],i)=>{let a=(s==null?void 0:s.id)||"";a||(a=`animation_${i+1}`);let r=a,d=2;for(;t.has(r);)r=`${a}_${d}`,d+=1;t.add(r),n.set(o,r)}),n},pI=e=>{const n=new Map;if(!e||!e.size)return n;const t=new Set;return[...e.entries()].sort(([o],[s])=>o.localeCompare(s)).forEach(([o,s],i)=>{let a=(s==null?void 0:s.graphId)||"";a||(a=`graph_${i+1}`);let r=a,d=2;for(;t.has(r);)r=`${a}_${d}`,d+=1;t.add(r),n.set(o,r)}),n},gI=(e,n={},t=null,o={})=>{const s=$g(e,n,o),i=fI((s==null?void 0:s.textFontsByKey)||new Map),a=hI((s==null?void 0:s.imagesByKey)||new Map),r=pI((s==null?void 0:s.graphsByKey)||new Map),d=Ig((s==null?void 0:s.animationsByKey)||new Map),c=new Map;(e||[]).forEach(U=>{var de,me;const x=yg(U);if(!x)return;const R=n[x];if(!R){const Ae=(U==null?void 0:U.customConfig)||"",xe=x.includes(".")?".":"/",[Me,Ke]=x.split(xe);if(!Me||!Ke)return;c.has(Me)||c.set(Me,[]),c.get(Me).push({type:"custom",platform:Ke,config:Ae});return}const B=R.domain||"component",H={...(U==null?void 0:U.config)||{}},M=H.bus;M!==void 0&&delete H.bus;let we={platform:((de=R.platformByBus)==null?void 0:de[M])||R.platform,...H};if(R.domain==="display"&&we._display_builder&&delete we._display_builder,R.domain==="display"){const Ae=((me=s.elementsByEntry)==null?void 0:me.get(U))||[],xe=dI(Ae,o,i,a,r,d,R.displayType||"monochrome");if(xe.length){const Ke=[typeof we.lambda=="string"?we.lambda.trim():"",...xe].filter(Boolean).join(`
`);we={...we,lambda:Ke}}}c.has(B)||c.set(B,[]),c.get(B).push({type:"schema",payload:we,schema:R})});const f=[],v=X2(s,i);v.length&&f.push(...v);const m=J2(s,a);m.length&&f.push(...m);const g=Q2(s,d);g.length&&f.push(...g);const I=cI(s,r,i);return I.length&&f.push(...I),c.forEach((U,x)=>{f.push(`${x}:`),U.forEach(R=>{var H;if(R.type==="custom"){f.push(`  - platform: ${R.platform}`),R.config.split(/\r?\n/).forEach(M=>{f.push(`    ${M}`)});return}const B=[{key:"platform",type:"select"},...((H=R.schema)==null?void 0:H.fields)||[]].filter(M=>{var te;return!((te=R.schema)!=null&&te.platformByBus&&M.key==="bus")});zs([R.payload],{type:"object",fields:B},2,f,R.payload,t)}),f.push("")}),f.length&&f[f.length-1]===""&&f.pop(),f},vI=e=>!e||typeof e!="string"?"":e.trim()||"",Uf=(e,n,t)=>{if(e&&e[n]!==void 0)return e[n];const o=t==null?void 0:t.find(s=>s.key===n);if(o&&o.default!==void 0)return o.default},Wl=(e,n,t)=>{Array.isArray(e)&&e.forEach(o=>{const s=vI(o);s&&(t&&!t.has(s)||n.add(s))})},Gl=(e,n,t,o)=>{if(e){if(Wl(e.requires,t,o),e.requiresByBus){const s=Uf(n,"bus",e.fields||[]);s&&Wl(e.requiresByBus[s],t,o)}if(e.requiresByType){const s=Uf(n,"type",e.fields||[]);s&&Wl(e.requiresByType[s],t,o)}}},Kl=({components:e=[],componentSchemas:n={},networkConfig:t={},networkSchema:o=null,protocolsConfig:s={},enabledProtocols:i=[],protocolsSchemas:a={},supported:r=null})=>{const d=new Set;return e.forEach(c=>{const f=typeof c=="string"?c:(c==null?void 0:c.id)||"";if(!f)return;const v=n==null?void 0:n[f];v&&Gl(v,(c==null?void 0:c.config)||{},d,r)}),Gl(o,t,d,r),i.forEach(c=>{const f=a==null?void 0:a[c];if(!f)return;const v=(s==null?void 0:s[c])||{};Gl(f,v,d,r)}),d},mI={class:"builder-layout"},yI={key:0,class:"notice notice--error notice--block"},bI={key:1,class:"notice notice--error notice--block"},_I={key:2,class:"notice notice--warning notice--block"},wI={class:"install-modal",role:"dialog","aria-modal":"true","aria-label":"Install options"},EI={class:"install-modal-header"},SI={key:4,class:"compile-modal-overlay"},xI=["aria-label"],kI={class:"compile-modal-header"},CI={class:"compile-meta"},AI={class:"compile-title"},$I={class:"compile-actions"},II={key:0,class:"compile-reconnect"},TI=["innerHTML"],RI={class:"compile-modal-footer"},FI={key:0,class:"compile-error"},LI={class:"compile-footer-actions"},OI=["disabled"],MI=["disabled"],PI={class:"builder-shell"},NI={class:"builder-sidebar"},DI={class:"sidebar-top"},jI={class:"project-filename"},BI={key:0,class:"project-menu"},UI=["disabled"],VI={class:"sidebar-middle"},HI={class:"sidebar-panel sidebar-panel--components"},zI={class:"sidebar-panel__body"},WI={class:"sidebar-components"},GI={class:"components-toolbar"},KI=["onClick"],ZI=["onClick"],qI={class:"builder-content"},YI={class:"builder-grid"},XI={class:"builder-panel"},JI={class:"config-title"},QI={key:0,class:"preview-tabs"},eT=["disabled"],tT=["onClick"],nT=["disabled"],oT={key:1,class:"preview-tab-measure"},sT={class:"yaml-scroll"},iT={class:"preview-card"},aT={key:0,class:"preview-callout hljs"},rT={class:"hljs-comment"},lT=["innerHTML"],cT={class:"builder-panel"},uT={class:"config-title"},dT={class:"config-scroll"},fT={key:0,class:"module-card"},hT={class:"components-header"},pT={class:"components-title"},gT=["href"],vT={class:"module-card__body"},mT={key:1,class:"module-card"},yT={class:"components-header"},bT={class:"components-title"},_T=["href"],wT={class:"module-card__body"},ET={key:2,class:"module-card"},ST={class:"components-header"},xT={class:"components-title"},kT=["href"],CT={class:"module-card__body"},AT={key:3,class:"module-card"},$T={class:"components-header"},IT={class:"components-title"},TT=["href"],RT={class:"module-card__body"},FT={class:"module-tabs"},LT=["onClick"],OT={key:4,class:"module-card"},MT={class:"components-header"},PT={class:"components-title"},NT=["href"],DT={class:"module-card__body"},jT={class:"module-tabs"},BT=["onClick"],UT={key:5,class:"module-card"},VT={class:"components-header"},HT={class:"components-title"},zT=["href"],WT={class:"module-card__body"},GT={class:"module-tabs"},KT=["onClick"],ZT={key:6,class:"module-card"},qT={class:"components-header"},YT={class:"components-title"},XT=["href"],JT={class:"module-card__body"},QT={class:"module-tabs"},eR=["onClick"],tR={key:1,class:"schema-group"},nR={class:"schema-list-item"},oR={key:7,class:"module-card"},sR={class:"components-header"},iR={class:"components-title"},aR=["href"],rR={key:0,class:"components-actions"},lR={key:0,class:"components-picker-shell"},cR={class:"components-picker"},uR={key:0,class:"notice notice--error components-error"},dR={class:"components-list"},fR=["open"],hR={key:0,class:"components-items"},pR=["onClick"],gR={class:"component-id"},vR={class:"components-items"},mR=["onClick"],yR={class:"component-id"},bR={key:1,class:"component-form"},_R={key:0,class:"notice notice--warning component-bus-note"},Vf="general/core/core",Hf="general/core/substitutions",zf="general/platform/platform",ri="general/network/network",Wf=4,eo="root",Zl="Projects",wR="vebProjectsUpdatedSignal",ER="ecd-projects",Gf=5e3,SR=200,xR=6,kR={__name:"BuilderView",setup(e){var Ou,Mu,Pu,Nu;Gd.registerLanguage("yaml",W0);const n=["Core","Platform","Network","Protocols","Busses","System","Automation"],t=Y(n[0]),o=Y(!1),s=Y("core"),i=Y(null),a=Y([]),r=Y(0),d=Y([]),c=Y(0),f=Y([]),v=Y(null),m=Y(!1),g=Y(""),I=Y(!1);let U=null;const x=new Set,R=Y(!1);let B=null;const H=Y(null),M=Y(!1),te=Y(!1),we=Y(null),de=Y(!1),me=Y({}),Ae=Y({categories:[]}),xe=Y(!0),Me=Y(null),Ke=["Simple","Normal","Advanced"],et=Y(!1),je=Y(null),De=Y(!1),Q=Y(""),le=Y(""),Se=Y(""),Xe=Y(""),st=Y(!1),lt=Y(null),ut=Y(!0),Et=Y(""),Ye=Y(""),Ze=Y(""),kt=Y([]),ae=Y(0),ke=Y(""),Ce=Y(!1),He=Y(!1),tt=Y(0),$=Y(!1),O=Y(0),W=Y(""),y=Y(""),k=Y(null),_=Y(!1),T=Y(!1),Z=Y("unknown"),oe=Y(""),X=Y("");let ge=null,ce=null,ve=!1,Pe=null,ne=null,fe=null,_e=null,Be=null;const Je=[],Ge=Y(Ke[0]),it=l=>{if(typeof l!="string")return Ke[0];const h=l.trim();if(Ke.includes(h))return h;const b=h.replace(/\s*mode$/i,"");return Ke.includes(b)?b:Ke[0]},yt=Y(!1),$t=Y(!1),pt=Y({sections:{}}),_t=Y(null),zt=Y(null),Zt=Y(null),q=Y(null),p=Y(null),L=Y(null),be=Y({}),Ie=Y({}),ze=Y({}),C=Y({}),ye=(l,h,b)=>{const S={},V=D=>{if(!D)return;const G=D.toLowerCase();S[G]=(S[G]||0)+1},A=(D,G)=>{G!=null&&G.length&&G.forEach(ie=>{var Te,Ve;const ee=D==null?void 0:D[ie.key];b(ie,ee)&&V(ee),ie.type==="object"&&A(ee||{},ie.fields||[]),ie.type==="list"&&Array.isArray(ee)&&((Te=ie.item)==null?void 0:Te.type)==="object"&&((Ve=ie.item)!=null&&Ve.fields)&&ee.forEach(We=>A(We||{},ie.item.fields))})};return l.forEach(D=>{const G=Ne(D);if(!G)return;const ie=h[G];ie!=null&&ie.fields&&A((D==null?void 0:D.config)||{},ie.fields)}),S},Fe=(l,h,b)=>{const S=new Set,V=[];return(l||[]).forEach(A=>{b&&A.componentId===b||h&&A.domain!==h||S.has(A.idLower)||(S.add(A.idLower),V.push(A.id))}),V},at=(l,h,b)=>{const S=[],V=(G,ie,ee)=>{const Te=G?G.split(/[./]/).pop():"component",Ve=ie.length?`${Te}.${ie.join(".")}`:Te;S.push({path:Ve,message:ee})},A=(G,ie,ee,Te)=>{const Ve=Fe(b,ie.domain,ee);if(!Ve.length){V(ee,Te,"No matching identifiers available");return}if(!G||typeof G!="string")return;Ve.some(dt=>dt.toLowerCase()===G.toLowerCase())||V(ee,Te,"No matching identifiers available")},D=(G,ie,ee,Te=[])=>{ie!=null&&ie.length&&ie.forEach(Ve=>{var ft,Tt,Mt;const We=G==null?void 0:G[Ve.key],dt=[...Te,Ve.key];Ve.type==="id_ref"&&A(We,Ve,ee,dt),Ve.type==="object"&&D(We||{},Ve.fields||[],ee,dt),Ve.type==="list"&&Array.isArray(We)&&((ft=Ve.item)==null?void 0:ft.type)==="object"&&((Tt=Ve.item)!=null&&Tt.fields)&&We.forEach((Gt,Ln)=>{D(Gt||{},Ve.item.fields,ee,[...dt,String(Ln)])}),((Mt=Ve.item)==null?void 0:Mt.extends)==="base_actions.json"&&Array.isArray(We)&&We.forEach((Gt,Ln)=>{const nt=Array.isArray(Gt==null?void 0:Gt.fields)?Gt.fields:[],os=(Gt==null?void 0:Gt.config)||{};nt.forEach(un=>{if(un.type!=="id_ref")return;const Eo=[...dt,String(Ln),un.key],lo=os[un.key];A(lo,un,ee,Eo)})})})};return l.forEach(G=>{const ie=Ne(G);if(!ie)return;const ee=h[ie];ee!=null&&ee.fields&&D((G==null?void 0:G.config)||{},ee.fields,ie,[])}),S},Ct=(l,h,b,S,V,A)=>{const D=[],G=(We,dt,ft)=>{const Tt=We?We.split(/[./]/).pop():"component",Mt=dt.length?`${Tt}.${dt.join(".")}`:Tt;D.push({path:Mt,message:ft})},ie=(We,dt)=>dt.some(ft=>ft.toLowerCase()===String(We||"").toLowerCase()),ee=(We,dt,ft,Tt,Mt)=>{if(!dt.length){G(ft,Tt,"No matching identifiers available");return}if(!We||!String(We).trim()){G(ft,Tt,Mt||"Please select an ID");return}ie(We,dt)||G(ft,Tt,"No matching identifiers available")},Te=(We,dt,ft,Tt,Mt,Gt)=>{if(!dt.length){G(ft,Tt,Mt);return}if(!We||!String(We).trim()){G(ft,Tt,Gt);return}dt.includes(We)||G(ft,Tt,Mt)},Ve=(We,dt,ft,Tt)=>{if(!dt.length){G(ft,Tt,"No MDI icons available");return}const Mt=String(We||"").trim(),Gt=Mt.startsWith("mdi:")?Mt.slice(4):Mt;if(!Gt){G(ft,Tt,"Please select an icon");return}dt.some(Ln=>Ln.toLowerCase()===Gt.toLowerCase())||G(ft,Tt,"Invalid MDI icon name")};return l.forEach((We,dt)=>{var Ln;const ft=Ne(We);if(!ft)return;const Tt=h==null?void 0:h[ft];if((Tt==null?void 0:Tt.domain)!=="display")return;const Mt=(Ln=We==null?void 0:We.config)==null?void 0:Ln._display_builder,Gt=Array.isArray(Mt==null?void 0:Mt.elements)?Mt.elements:[];Gt.length&&Gt.forEach((nt,os)=>{const un=["_display_builder","elements",String(os)];if((nt==null?void 0:nt.type)==="text"&&(nt==null?void 0:nt.textMode)==="dynamic"){const Eo=Fe(b,(nt==null?void 0:nt.dynamicDomain)||"",ft);ee(nt==null?void 0:nt.dynamicId,Eo,ft,[...un,"dynamicId"],"Please select a source ID")}if((nt==null?void 0:nt.type)==="graph")if(String((nt==null?void 0:nt.graphId)||"").trim()||G(ft,[...un,"graphId"],"Please provide a graph ID"),nt!=null&&nt.useTraces)(Array.isArray(nt==null?void 0:nt.traces)?nt.traces:[]).forEach((lo,co)=>{const uo=Fe(b,"sensor",ft);ee(lo==null?void 0:lo.sensor,uo,ft,[...un,"traces",String(co),"sensor"],"Please select a sensor ID")});else{const Eo=Fe(b,"sensor",ft);ee(nt==null?void 0:nt.sensor,Eo,ft,[...un,"sensor"],"Please select a sensor ID")}(nt==null?void 0:nt.type)==="animation"&&(String((nt==null?void 0:nt.animationId)||"").trim()||G(ft,[...un,"animationId"],"Please provide an animation ID"),Te(nt==null?void 0:nt.animationFile,V||[],ft,[...un,"animationFile"],"No GIF animations available","Please select an animation file")),(nt==null?void 0:nt.type)==="image"&&Te(nt==null?void 0:nt.image,S||[],ft,[...un,"image"],"No image files available","Please select an image file"),(nt==null?void 0:nt.type)==="icon"&&Ve(nt==null?void 0:nt.icon,A||[],ft,[...un,"icon"])})}),D},bt=(l,h,b)=>{if(h&&h[l]!==void 0)return h[l];const S=b==null?void 0:b.find(V=>V.key===l);if(S&&S.default!==void 0)return S.default},An=(l,h,b)=>{const S=l==null?void 0:l.dependsOn;if(!S)return!0;const V=bt(S.key,h,b);return S.value!==void 0?V===S.value:Array.isArray(S.values)?S.values.includes(V):S.notValue!==void 0?V!==S.notValue:!!V},$n=l=>{const h=[],b=(A,D,G)=>{const ie=D.length?`${A}.${D.join(".")}`:A;h.push({path:ie,message:G})},S=(A,D,G,ie)=>{var ee;if((D==null?void 0:D.type)==="password"&&((ee=D==null?void 0:D.settings)==null?void 0:ee.format)==="base64_44"){const Te=typeof A=="string"?A.trim():"";/^[A-Za-z0-9+/]{43}=$/.test(Te)||b(G,ie,"Key must be base64 (44 chars, ending with =).")}},V=(A,D,G,ie=[])=>{D!=null&&D.length&&D.forEach(ee=>{var We,dt;if(!(ee!=null&&ee.key))return;const Te=A==null?void 0:A[ee.key],Ve=[...ie,ee.key];An(ee,A,D)&&(S(Te,ee,G,Ve),ee.type==="object"&&V(Te||{},ee.fields||[],G,Ve),ee.type==="list"&&Array.isArray(Te)&&((We=ee.item)==null?void 0:We.type)==="object"&&((dt=ee.item)!=null&&dt.fields)&&Te.forEach((ft,Tt)=>{V(ft||{},ee.item.fields,G,[...Ve,String(Tt)])}))})};return l.forEach(A=>{var D;(D=A==null?void 0:A.schema)!=null&&D.fields&&V(A.config||{},A.schema.fields,A.label,[])}),h},on=(l,h,b=[])=>{const S={},V=G=>G.toLowerCase().replace(/\s+/g,"").replace(/^gpio/,""),A=G=>{if(!G||typeof G!="string")return;const ie=V(G);S[ie]=(S[ie]||0)+1},D=(G,ie)=>{ie!=null&&ie.length&&ie.forEach(ee=>{var Ve,We,dt;const Te=G==null?void 0:G[ee.key];ee.type==="gpio"&&A(Te),ee.type==="object"&&D(Te||{},ee.fields||[]),ee.type==="list"&&Array.isArray(Te)&&(((Ve=ee.item)==null?void 0:Ve.type)==="gpio"?Te.forEach(ft=>A(ft)):((We=ee.item)==null?void 0:We.type)==="object"&&((dt=ee.item)!=null&&dt.fields)&&Te.forEach(ft=>D(ft||{},ee.item.fields)))})};return l.forEach(G=>{const ie=Ne(G);if(!ie)return;const ee=h[ie];ee!=null&&ee.fields&&D((G==null?void 0:G.config)||{},ee.fields)}),b.forEach(G=>{G!=null&&G.fields&&D(G.config||{},G.fields)}),S},rn=(l,h)=>{const b=[],S=(A,D,G)=>{A&&b.push({id:A,idLower:A.toLowerCase(),domain:(D==null?void 0:D.domain)||G.split(/[./]/)[0]||"",componentId:G})},V=(A,D,G,ie)=>{D!=null&&D.length&&D.forEach(ee=>{var Ve,We;const Te=A==null?void 0:A[ee.key];ee.type==="id"&&typeof Te=="string"&&Te.trim()&&S(Te,G,ie),ee.type==="object"&&V(Te||{},ee.fields||[],G,ie),ee.type==="list"&&Array.isArray(Te)&&((Ve=ee.item)==null?void 0:Ve.type)==="object"&&((We=ee.item)!=null&&We.fields)&&Te.forEach(dt=>V(dt||{},ee.item.fields,G,ie))})};return l.forEach(A=>{const D=Ne(A);if(!D)return;const G=h[D];G!=null&&G.fields&&V((A==null?void 0:A.config)||{},G.fields,G,D)}),b},j=(l,h,b,S)=>{const V=[],A=(G,ie,ee)=>{const Te=G?G.split(/[./]/).pop():"component",Ve=ie.length?`${Te}.${ie.join(".")}`:Te;V.push({path:Ve,message:ee})},D=(G,ie,ee,Te=[])=>{ie!=null&&ie.length&&ie.forEach(Ve=>{var ft,Tt;const We=G==null?void 0:G[Ve.key],dt=[...Te,Ve.key];if(Ve.type==="id"&&typeof We=="string"&&We.trim()){const Mt=We.toLowerCase();(b[Mt]||0)>1&&A(ee,dt,"ID already used")}if(Ve.key==="name"&&typeof We=="string"&&We.trim()){const Mt=We.toLowerCase();(S[Mt]||0)>1&&A(ee,dt,"Name already used")}Ve.type==="object"&&D(We||{},Ve.fields||[],ee,dt),Ve.type==="list"&&Array.isArray(We)&&((ft=Ve.item)==null?void 0:ft.type)==="object"&&((Tt=Ve.item)!=null&&Tt.fields)&&We.forEach((Mt,Gt)=>{D(Mt||{},Ve.item.fields,ee,[...dt,String(Gt)])})})};return l.forEach(G=>{const ie=Ne(G);if(!ie)return;const ee=h[ie];ee!=null&&ee.fields&&D((G==null?void 0:G.config)||{},ee.fields,ie,[])}),V},he=(l,h)=>{if(!h)return!0;const b=h.toLowerCase();return l.name.toLowerCase().includes(b)||l.id.toLowerCase().includes(b)},Re=F(()=>{var h,b;const l=new Map;return(b=(h=Ae.value)==null?void 0:h.categories)==null||b.forEach(S=>{S.items.forEach(V=>l.set(V.id,V.name)),S.subcategories.forEach(V=>{V.items.forEach(A=>l.set(A.id,A.name))})}),l}),ct=l=>l?Re.value.get(l)??l:"",$e=F(()=>{var V;const l=N.value.esphomeCore||{},h=((V=_t.value)==null?void 0:V.fields)||[],b=WS("name",l,h,N.value),S=String(b||"").trim();return S?S.toLowerCase().endsWith(".yaml")?S:`${S}.yaml`:"new_file.yaml"}),Ne=l=>typeof l=="string"?l:(l==null?void 0:l.id)||"",P=l=>{if(!l)return{domain:"",platform:""};const h=l.includes(".")?".":"/",[b,S]=l.split(h);return{domain:b||"",platform:S||""}},K=F(()=>new Set(N.value.components.map(l=>Ne(l)).filter(Boolean))),J=F(()=>{if(H.value===null)return"Components";const l=Ne(N.value.components[H.value]);return l?ct(l):"Add"}),se=l=>{const h=l==null?void 0:l.helpUrl;return typeof h=="string"?h.trim():""},Ee=F(()=>{var l,h,b,S,V;if(t.value==="Core")return se(_t.value)||se(zt.value);if(t.value==="Platform")return se(q.value)||se(Zt.value);if(t.value==="Network")return se(p.value)||se(L.value);if(t.value==="Protocols")return se((l=be.value)==null?void 0:l[ro.value]);if(t.value==="Busses")return se((h=Ie.value)==null?void 0:h[Xn.value]);if(t.value==="System")return se((b=ze.value)==null?void 0:b[gn.value]);if(t.value==="Automation")return se((S=C.value)==null?void 0:S[Nn.value]);if(t.value==="Components"){if(H.value===null)return"";const A=Ne(N.value.components[H.value]);return A?se((V=me.value)==null?void 0:V[A]):""}return""}),qe=F(()=>H.value===null?null:N.value.components[H.value]||null),It=F(()=>Ne(qe.value)),Bt=F(()=>{var l;return((l=qe.value)==null?void 0:l.config)||{}}),sn=F(()=>{var l;return((l=qe.value)==null?void 0:l.customConfig)||""}),fn=F(()=>N.value.esphomeCore||{}),qt=F(()=>N.value.substitutions||{}),ln=F(()=>N.value.platformCore||{}),Ri=F(()=>{var h;const l=(h=ln.value)==null?void 0:h.platform;return l?`general/platform/${l}`:""}),Yt=F(()=>N.value.networkCore||{}),Fi=F(()=>{var h;const l=(h=Yt.value)==null?void 0:h.transport;return l?`general/network/${l}`:""}),ks=F(()=>N.value.protocolsCore||{}),_o=[{key:"api",label:"API",schemaId:"general/protocols/api"},{key:"mqtt",label:"MQTT",schemaId:"general/protocols/mqtt"},{key:"espnow",label:"ESP-NOW",schemaId:"general/protocols/esp-now"}],ro=Y(((Ou=_o[0])==null?void 0:Ou.key)||""),Zr=l=>{var V,A,D;const h=((V=ks.value)==null?void 0:V[l])||{};if(h.enabled!==void 0)return!!h.enabled;const b=(A=be.value)==null?void 0:A[l],S=(D=b==null?void 0:b.fields)==null?void 0:D.find(G=>G.key==="enabled");return(S==null?void 0:S.default)!==void 0?!!S.default:!1},Li=F(()=>_o.filter(l=>Zr(l.key)).map(l=>l.key)),qr=F(()=>_o.map(l=>({key:l.key,label:l.label}))),Oi=F(()=>{const l=_o.find(h=>h.key===ro.value);return(l==null?void 0:l.schemaId)||""}),Yr=F(()=>{var l;return ro.value?((l=ks.value)==null?void 0:l[ro.value])||{}:{}}),Po=F(()=>N.value.bussesCore||{}),cn=[{key:"i2c",label:"I2C",schemaId:"general/busses/i2c"},{key:"spi",label:"SPI",schemaId:"general/busses/spi"},{key:"uart",label:"UART",schemaId:"general/busses/uart"},{key:"one_wire",label:"1-Wire",schemaId:"general/busses/one_wire"},{key:"i2s",label:"I2S",schemaId:"general/busses/i2s"},{key:"canbus",label:"CAN Bus",schemaId:"general/busses/canbus"}],Ys=new Set(cn.map(l=>l.key)),Xn=Y(((Mu=cn[0])==null?void 0:Mu.key)||""),Ta=l=>{var V,A,D;const h=((V=Po.value)==null?void 0:V[l])||{};if(h.enabled!==void 0)return!!h.enabled;const b=(A=Ie.value)==null?void 0:A[l],S=(D=b==null?void 0:b.fields)==null?void 0:D.find(G=>G.key==="enabled");return(S==null?void 0:S.default)!==void 0?!!S.default:!1},Jo=F(()=>{var h;if(!qe.value)return[];const l=It.value;return!l||!((h=me.value)!=null&&h[l])?[]:Array.from(Kl({components:[qe.value],componentSchemas:me.value,supported:Ys}))}),Ra=F(()=>Jo.value.length?Jo.value.map(h=>{var b;return((b=cn.find(S=>S.key===h))==null?void 0:b.label)||h}).join("/"):""),Fa=F(()=>Jo.value[0]||""),Xs=()=>{t.value="Busses",Fa.value&&(Xn.value=Fa.value)},Xr=F(()=>(N.value.components||[]).map(l=>Ne(l)).filter(Boolean)),La=l=>{var V;if(!l)return;const h=(N.value.components||[]).find(A=>Ne(A)===l);if(!h||!((V=me.value)==null?void 0:V[l]))return;Kl({components:[h],componentSchemas:me.value,supported:Ys}).size&&Jr()},Jr=()=>{U&&(clearTimeout(U),U=null),I.value=!1,requestAnimationFrame(()=>{I.value=!0,U=setTimeout(()=>{I.value=!1,U=null},3e3)})},Qr=F(()=>{const l=N.value.components.map(h=>Ne(h)).filter(Boolean);return l.length?l.every(h=>me.value[h]):!0}),z=F(()=>Kl({components:N.value.components,componentSchemas:me.value,networkConfig:Yt.value,networkSchema:p.value,protocolsConfig:ks.value,enabledProtocols:Li.value,protocolsSchemas:be.value,supported:Ys})),pe=F(()=>Array.from(z.value).sort()),Ue=F(()=>cn.map(l=>({key:l.key,label:l.label}))),Le=F(()=>{const l=cn.find(h=>h.key===Xn.value);return(l==null?void 0:l.schemaId)||""}),gt=F(()=>{var l;return Xn.value?((l=Po.value)==null?void 0:l[Xn.value])||{}:{}}),Nt=[{key:"logger",label:"Logger",schemaId:"general/system/logger"},{key:"status_led",label:"Status LED",schemaId:"general/system/status_led"},{key:"debug",label:"Debug",schemaId:"general/system/debug"}],Wt=F(()=>N.value.system||{}),gn=Y(((Pu=Nt[0])==null?void 0:Pu.key)||""),Qc=F(()=>Nt.map(l=>({key:l.key,label:l.label}))),Mi=F(()=>{const l=Nt.find(h=>h.key===gn.value);return(l==null?void 0:l.schemaId)||""}),Tg=F(()=>{var h;return gn.value?((h=Wt.value)==null?void 0:h[gn.value])||{}:{}}),Cs=F(()=>N.value.automation||{}),Qo=[{key:"time",label:"Time",schemaId:"general/automation/time"},{key:"deep_sleep",label:"Deep Sleep",schemaId:"general/automation/deep_sleep"},{key:"script",label:"Script",schemaId:"general/automation/script"},{key:"globals",label:"Globals",schemaId:"general/automation/globals"},{key:"interval",label:"Interval",schemaId:"general/automation/interval"}],Nn=Y(((Nu=Qo[0])==null?void 0:Nu.key)||""),Rg=F(()=>Qo.map(l=>({key:l.key,label:l.label}))),el=F(()=>{const l=Qo.find(h=>h.key===Nn.value);return(l==null?void 0:l.schemaId)||""}),Fg=F(()=>{var l;return Nn.value&&((l=C.value)==null?void 0:l[Nn.value])||null}),Lg=F(()=>Cs.value||{}),Og=F(()=>{var S,V;const l=Nn.value;if(!l)return[];const b=(((S=Fg.value)==null?void 0:S.fields)||[]).find(A=>A.key===l);return((V=b==null?void 0:b.item)==null?void 0:V.fields)||[]}),Oa=F(()=>({time:[],deep_sleep:[],script:[],globals:[],interval:eI(N.value.components,me.value,nl.value)})),Mg=F(()=>{var l;return o.value&&s.value==="display"&&(((l=Oa.value)==null?void 0:l.interval)||[]).length>0}),Pg=(l,h)=>{var S;if(!(h!=null&&h.key))return"";const b=l==null?void 0:l[h.key];if(b==null||b==="")return"";if(h.key==="then"&&Array.isArray(b)){if(!b.length)return"";const V=b[0]||{},A=V.type||"",D=(S=V==null?void 0:V.config)!=null&&S.id?`: ${V.config.id}`:"";return A&&b.length===1?`then: ${A}${D}`:`then: ${b.length} actions`}return Array.isArray(b)?b.length?`${h.key}: ${b.length} items`:"":typeof b=="object"?`${h.key}: ${JSON.stringify(b)}`:`${h.key}: ${b}`},Ng=l=>Og.value.map(h=>Pg(l,h)).filter(Boolean),tl=F(()=>{var l;return((l=ln.value)==null?void 0:l.platform)||N.value.device.platform}),eu=F(()=>{var l;return((l=ln.value)==null?void 0:l.variant)||N.value.device.variant}),tu=F(()=>H2(tl.value,eu.value)),Pi=F(()=>{var l;return tu.value&&((l=pt.value.sections)==null?void 0:l[tu.value])||null}),Dn=F(()=>{var l;return((l=Pi.value)==null?void 0:l.rows)||[]}),jn=F(()=>{var l;return((l=Pi.value)==null?void 0:l.title)||"GPIO Guide"}),nl=Y({}),Ma=Y([]),Pa=Y([]);Qi("mdiIcons",Pa);const In=F(()=>ye(N.value.components,me.value,(l,h)=>l.type==="id"&&typeof h=="string"&&h.trim())),_n=F(()=>rn(N.value.components,me.value)),nu=F(()=>Ma.value.map(l=>(l==null?void 0:l.file)||"").filter(l=>!!l)),Dg=F(()=>nu.value.filter(l=>l.toLowerCase().endsWith(".gif"))),Tn=F(()=>ye(N.value.components,me.value,(l,h)=>l.key==="name"&&typeof h=="string"&&h.trim())),jg=F(()=>j(N.value.components,me.value,In.value,Tn.value)),Bg=F(()=>at(N.value.components,me.value,_n.value)),Ug=F(()=>Ct(N.value.components,me.value,_n.value,nu.value,Dg.value,Pa.value)),Bn=F(()=>{var A,D;const l=(A=Yt.value)==null?void 0:A.transport,h=((D=p.value)==null?void 0:D.fields)||[],b=l?N.value.networkCore||{}:null,S=b?[{config:b,fields:h}]:[],V=[];return cn.forEach(G=>{var ee,Te;if(!Ta(G.key))return;const ie=(ee=Ie.value)==null?void 0:ee[G.key];ie!=null&&ie.fields&&V.push({config:((Te=Po.value)==null?void 0:Te[G.key])||{},fields:ie.fields})}),on(N.value.components,me.value,[...S,...V])}),Ut=F(()=>{var b,S,V,A,D,G,ie,ee,Te,Ve,We,dt,ft,Tt,Mt,Gt,Ln,nt,os,un,Eo,lo;const l=[],h=(co,uo)=>{Array.isArray(uo)&&uo.length&&l.push({config:co,fields:uo})};return h(fn.value,(b=_t.value)==null?void 0:b.fields),h(qt.value,(S=zt.value)==null?void 0:S.fields),h(ln.value,(V=Zt.value)==null?void 0:V.fields),h(ln.value,(A=q.value)==null?void 0:A.fields),h(Yt.value,(D=L.value)==null?void 0:D.fields),h(Yt.value,(G=p.value)==null?void 0:G.fields),h(Wt.value||{},(ee=(ie=ze.value)==null?void 0:ie.logger)==null?void 0:ee.fields),h(Wt.value||{},(Ve=(Te=ze.value)==null?void 0:Te.status_led)==null?void 0:Ve.fields),h(Wt.value||{},(dt=(We=ze.value)==null?void 0:We.debug)==null?void 0:dt.fields),h(Cs.value||{},(Tt=(ft=C.value)==null?void 0:ft.time)==null?void 0:Tt.fields),h(Cs.value||{},(Gt=(Mt=C.value)==null?void 0:Mt.deep_sleep)==null?void 0:Gt.fields),h(Cs.value||{},(nt=(Ln=C.value)==null?void 0:Ln.script)==null?void 0:nt.fields),h(Cs.value||{},(un=(os=C.value)==null?void 0:os.globals)==null?void 0:un.fields),h(Cs.value||{},(lo=(Eo=C.value)==null?void 0:Eo.interval)==null?void 0:lo.fields),(N.value.components||[]).forEach(co=>{var ji;const uo=Ne(co);if(!uo)return;const Is=(ji=me.value)==null?void 0:ji[uo];Is!=null&&Is.fields&&h((co==null?void 0:co.config)||{},Is.fields)}),HS(l)}),Vg=F(()=>{var b,S;const l=[],h=((b=be.value)==null?void 0:b.api)||null;return Li.value.includes("api")&&(h!=null&&h.fields)&&l.push({label:"protocols.api",config:((S=ks.value)==null?void 0:S.api)||{},schema:h}),$n(l)}),Na=F(()=>[...jg.value,...Bg.value,...Ug.value,...Vg.value]),ou=F({get:()=>o.value?"tabs":"single",set:l=>{o.value=l==="tabs"}});ot(()=>o.value,l=>{(!N.value.ui||typeof N.value.ui!="object")&&(N.value.ui={}),N.value.ui.splitPreview=!!l;try{localStorage.setItem("vebBuilderSplitPreview",l?"1":"0")}catch(h){console.error("Failed to store preview mode",h)}Rn()}),ot(()=>Ge.value,l=>{(!N.value.ui||typeof N.value.ui!="object")&&(N.value.ui={}),N.value.ui.modeLevel=it(l),Rn()});const Hg=l=>{H.value=l,t.value="Components",M.value=!1},su=()=>{H.value=N.value.components.length,t.value="Components",M.value=!0,g.value=""},iu=l=>{if(!(l<0&&!fu.value)&&!(l>0&&!hu.value)){if(l>0){r.value=Math.min(r.value+1,Math.max(0,Jn.value.length-1));return}r.value=Math.max(0,r.value-1)}},au=l=>{var h,b;(b=(h=l==null?void 0:l.target)==null?void 0:h.blur)==null||b.call(h)},zg=()=>{et.value=!et.value},Wg=()=>{et.value=!1,de.value=!0},ru=l=>{if(!et.value)return;const h=l.target;je.value&&je.value.contains(h)||(et.value=!1)},Gg=()=>{var l,h;de.value=!1,et.value=!1,No.value=!0,N.value=sl(),t.value=n[0],H.value=null,M.value=!1,g.value="",o.value=!!((l=N.value.ui)!=null&&l.splitPreview),Ge.value=it((h=N.value.ui)==null?void 0:h.modeLevel),No.value=!1;try{localStorage.removeItem("vebBuilderDeviceConfig")}catch(b){console.error("Failed to clear stored config",b)}Se.value="",Xe.value=""},lu=l=>{if(H.value===null)return;const h=H.value,b=N.value.components[h],S=Ne(b),V={id:l.id,config:S===l.id?(b==null?void 0:b.config)||{}:{},customConfig:S===l.id&&(b==null?void 0:b.customConfig)||""};h>=N.value.components.length?N.value.components.push(V):N.value.components.splice(h,1,V),ol(l.id),M.value=!1},Kg=l=>{we.value=l,te.value=!0},Zg=()=>{we.value!==null&&(N.value.components.splice(we.value,1),H.value=null,we.value=null,te.value=!1,su(),Rn())},qg=()=>{we.value=null,te.value=!1};ot(()=>t.value,l=>{l!=="Components"&&(M.value=!1,g.value="")});const Yg=F(()=>{var h;const l=g.value.trim().toLowerCase();return(((h=Ae.value)==null?void 0:h.categories)||[]).map(b=>{const S=b.items.filter(A=>he(A,l)),V=b.subcategories.map(A=>({...A,items:A.items.filter(D=>he(D,l))})).filter(A=>A.items.length>0);return{...b,items:S,subcategories:V}}).filter(b=>b.items.length>0||b.subcategories.length>0)}),ol=l=>{!l||me.value[l]||hg(l).then(h=>{me.value={...me.value,[l]:h}}).catch(()=>{me.value={...me.value,[l]:null}})},sl=()=>({schemaVersion:1,esphomeCore:{},substitutions:{},automation:{},system:{logger:{enabled:!0,level:"DEBUG"}},platformCore:{platform:"esp32",variant:"esp32",framework:"esp-idf"},networkCore:{transport:"wifi"},protocolsCore:{},bussesCore:{},device:{friendlyName:"Kitchen Sensor",platform:"esp32",variant:"esp32",framework:"arduino"},components:[],ui:{splitPreview:!1,modeLevel:"Simple",deviceHost:""}}),Xg=l=>{const h=l==null?void 0:l.emitYAML;return h==="never"||h==="always"||h==="visible"||h==="dependsOn"?h:l!=null&&l.dependsOn||l!=null&&l.globalDependsOn?"dependsOn":"visible"},Jg=(l,h,b,S)=>Kr(l,h,b,S),cu=(l,h,b,S)=>{const V=Xg(l);if(V==="never")return!1;if(V==="always")return!0;const A=Jg(l,h,b,S);return V==="dependsOn"&&(l!=null&&l.dependsOn||l!=null&&l.globalDependsOn),A},Qg=(l,h)=>{if(l==null)return!1;const b=String(l);if(!b.trim())return!1;const S=Number(h==null?void 0:h.minLength)||0;return S?b.length>=S:!0},Da=(l,h,b)=>!Array.isArray(l)||!l.length?!1:l.some(S=>{var D,G;const V=S==null?void 0:S.key;if(!V||!cu(S,h,l,b))return!1;if(S.type==="password"){const ie=Sr(S);return ie.mode!=="none"&&ie.onEmpty}const A=h==null?void 0:h[V];if(S.type==="object"){const ie=A&&typeof A=="object"&&!Array.isArray(A)?A:{};return Da(S.fields||[],ie,b)}return S.type==="list"&&Array.isArray(A)&&((D=S.item)==null?void 0:D.type)==="object"&&Array.isArray((G=S.item)==null?void 0:G.fields)?A.some(ie=>ie&&typeof ie=="object"&&!Array.isArray(ie)&&Da(S.item.fields,ie,b)):!1}),As=(l,h,b)=>{if(!l||typeof l!="object"||!Array.isArray(h))return!1;let S=!1;return h.forEach(V=>{var G,ie;const A=V==null?void 0:V.key;if(!A||!cu(V,l,h,b))return;if(V.type==="password"){const ee=Sr(V);if(ee.mode==="none"||!ee.onEmpty)return;const Te=l[A];if(Qg(Te,ee))return;const Ve=gg(V);if(!Ve)return;l[A]=Ve,S=!0;return}const D=l[A];if(V.type==="object"){let ee=D&&typeof D=="object"&&!Array.isArray(D)?D:null;if(!ee){if(!Da(V.fields||[],{},b))return;l[A]={},ee=l[A],S=!0}As(ee,V.fields||[],b)&&(S=!0);return}V.type==="list"&&Array.isArray(D)&&((G=V.item)==null?void 0:G.type)==="object"&&Array.isArray((ie=V.item)==null?void 0:ie.fields)&&D.forEach(ee=>{!ee||typeof ee!="object"||Array.isArray(ee)||As(ee,V.item.fields,b)&&(S=!0)})}),S},uu=()=>{var V,A,D,G,ie,ee;const l=N.value;if(!l||typeof l!="object")return!1;const h=Ut.value||{};let b=!1;const S=(Te,Ve,We)=>{if(!Array.isArray(We)||!We.length||!Te||typeof Te!="object")return;let dt=Te[Ve];if(!dt||typeof dt!="object"||Array.isArray(dt)){if(!Da(We,{},h))return;Te[Ve]={},dt=Te[Ve],b=!0}As(dt,We,h)&&(b=!0)};return S(l,"esphomeCore",((V=_t.value)==null?void 0:V.fields)||[]),S(l,"substitutions",((A=zt.value)==null?void 0:A.fields)||[]),S(l,"platformCore",((D=Zt.value)==null?void 0:D.fields)||[]),l.platformCore&&typeof l.platformCore=="object"&&As(l.platformCore,((G=q.value)==null?void 0:G.fields)||[],h)&&(b=!0),S(l,"networkCore",((ie=L.value)==null?void 0:ie.fields)||[]),l.networkCore&&typeof l.networkCore=="object"&&As(l.networkCore,((ee=p.value)==null?void 0:ee.fields)||[],h)&&(b=!0),(!l.protocolsCore||typeof l.protocolsCore!="object")&&(l.protocolsCore={},b=!0),_o.forEach(Te=>{var Ve,We;S(l.protocolsCore,Te.key,((We=(Ve=be.value)==null?void 0:Ve[Te.key])==null?void 0:We.fields)||[])}),(!l.bussesCore||typeof l.bussesCore!="object")&&(l.bussesCore={},b=!0),cn.forEach(Te=>{var Ve,We;S(l.bussesCore,Te.key,((We=(Ve=Ie.value)==null?void 0:Ve[Te.key])==null?void 0:We.fields)||[])}),(!l.system||typeof l.system!="object")&&(l.system={},b=!0),Nt.forEach(Te=>{var Ve,We;S(l.system,Te.key,((We=(Ve=ze.value)==null?void 0:Ve[Te.key])==null?void 0:We.fields)||[])}),(!l.automation||typeof l.automation!="object")&&(l.automation={},b=!0),Qo.forEach(Te=>{var Ve,We;As(l.automation,((We=(Ve=C.value)==null?void 0:Ve[Te.key])==null?void 0:We.fields)||[],h)&&(b=!0)}),(l.components||[]).forEach(Te=>{var dt,ft;const Ve=Ne(Te);if(!Ve)return;const We=((ft=(dt=me.value)==null?void 0:dt[Ve])==null?void 0:ft.fields)||[];We.length&&((!Te.config||typeof Te.config!="object")&&(Te.config={},b=!0),As(Te.config,We,h)&&(b=!0))}),b},N=Y(sl()),No=Y(!0);let Js=!1;const ev=F(()=>{var l;return(l=Pi.value)!=null&&l.title?Pi.value.title:tl.value==="esp8266"?"ESP8266":tl.value==="esp32"?eu.value||"esp32":""});ot(()=>N.value.components.map(l=>Ne(l)),l=>{l.filter(Boolean).forEach(h=>ol(h))},{immediate:!0}),ot(()=>Na.value.length,l=>{l||(yt.value=!1)}),ot(()=>N.value,()=>{if(!No.value&&!Js){Js=!0;try{uu()}finally{Js=!1}}},{deep:!0,immediate:!0}),ot(()=>[_t.value,zt.value,Zt.value,q.value,L.value,p.value,be.value,Ie.value,ze.value,C.value,me.value],()=>{if(!No.value&&!Js){Js=!0;try{uu()}finally{Js=!1}}},{deep:!0});const ja=l=>{const h=new WeakSet;return JSON.stringify(l,(b,S)=>{if(typeof S!="function"){if(typeof S=="object"&&S!==null){if(h.has(S))return;h.add(S)}return S}},2)};F(()=>ja(N.value));const Do=(l,h)=>{if(!l||typeof l!="object")return{};const b={};return(h||[]).forEach(S=>{var A;if(!(S!=null&&S.key))return;const V=l[S.key];if(V!==void 0){if(S.type==="object"&&V&&typeof V=="object"&&!Array.isArray(V)){b[S.key]=Do(V,S.fields||[]);return}if(S.type==="list"&&Array.isArray(V)&&((A=S.item)!=null&&A.fields)){b[S.key]=V.map(D=>D&&typeof D=="object"?Do(D,S.item.fields||[]):D);return}b[S.key]=V}}),b},il=l=>{const h=Array.isArray(l)?l:[];return h.length?!h.some(b=>b.required):!1},es=F(()=>{var co,uo,Is,ji,Du,ju,Bu,Uu,Vu;const l=[],h=N.value.substitutions||{},b=((co=zt.value)==null?void 0:co.fields)||[];if(b.length){const St=Do(h,b),Pt=po(St,b,0,N.value,Ut.value);Pt.length&&l.push(...Pt)}const S=N.value.esphomeCore||{},V=((uo=_t.value)==null?void 0:uo.fields)||[];if(V.length){const St=Do(S,V),Pt=po(St,V,2,N.value,Ut.value);Pt.length&&(l.push(""),l.push("esphome:"),l.push(...Pt))}const A=(Is=ln.value)==null?void 0:Is.platform,D=((ji=q.value)==null?void 0:ji.fields)||[];if(A&&D.length)if(l.push(""),l.push(`${A}:`),A==="esp32"){const{platform:St,framework:Pt,framework_config:Vt,advanced:Qt,components:Xt,...hn}=ln.value||{},Vn=D.filter(So=>!["framework","framework_config","advanced","components"].includes(So.key)),fo=po(hn,Vn,2,N.value,Ut.value);fo.length&&l.push(...fo);const ss=Vt||{},Ts=Pt||Object.keys(ss).length,wn=Qt&&Object.keys(Qt).length,en=Array.isArray(Xt)&&Xt.length;if(Ts||wn||en){l.push("  framework:"),Pt&&l.push(`    type: ${Pt}`);const So=D.find(Ui=>Ui.key==="framework_config"),Bi=D.find(Ui=>Ui.key==="advanced"),is=D.find(Ui=>Ui.key==="components"),Hn=[...(So==null?void 0:So.fields)||[],...Bi?[Bi]:[],...is?[is]:[]],Rs={...ss,...wn?{advanced:Qt}:{},...en?{components:Xt}:{}},Hu=po(Rs,Hn,4,N.value,Ut.value);Hu.length&&l.push(...Hu)}}else{const{platform:St,...Pt}=ln.value||{};l.push(...po(Pt,D,2,N.value,Ut.value))}const G=(Du=Yt.value)==null?void 0:Du.transport,ie=((ju=L.value)==null?void 0:ju.fields)||[],ee=((Bu=p.value)==null?void 0:Bu.fields)||[];if(G&&ee.length){const{transport:St,...Pt}=Yt.value||{},Vt=Do(Pt,ee),Qt=Do(Pt,ie);let Xt=!1,hn=null,Vn=[],fo=!1;if(G==="wifi"){const en=Vt.ap;if(en&&typeof en=="object")if((en.enabled!==void 0?en.enabled:!0)===!1)delete Vt.ap;else{const{enabled:Bi,captive_portal:is,...Hn}=en;Xt=is!==void 0?!!is:!0,Vt.ap=Object.keys(Hn).length?Hn:{}}}const ss=ie.find(en=>en.key==="web_server");Vn=(ss==null?void 0:ss.fields)||[];const Ts=Qt.web_server;if(Ts&&typeof Ts=="object"&&(fo=Ts.enabled!==void 0?!!Ts.enabled:!1,fo)){const{enabled:en,...So}=Ts;hn=So}const wn=po(Vt,ee,2,N.value,Ut.value);if(wn.length){if(G==="wifi"){const Hn=wn.findIndex(Rs=>Rs.startsWith("  ")&&Rs.trimStart().startsWith("ap:"));if(Hn!==-1){const Rs=[wn.splice(Hn,1)[0]];for(;Hn<wn.length&&wn[Hn].startsWith("    ");)Rs.push(wn.splice(Hn,1)[0]);wn.length&&wn[wn.length-1].trim()!==""&&wn.push(""),wn.push("  # Enable fallback hotspot (captive portal) in case wifi connection fails",...Rs)}}l.push(""),l.push(`${G}:`),l.push(...wn),G==="wifi"&&Xt&&(l.push(""),l.push("captive_portal:"));const en=((Uu=Yt.value)==null?void 0:Uu.ota)||null,So=(en==null?void 0:en.enabled)??!0,Bi=(en==null?void 0:en.use_password)??!0,is=(Vu=en==null?void 0:en.password)==null?void 0:Vu.trim();if(So&&(l.push(""),l.push("ota:"),l.push("  - platform: esphome"),Bi&&is&&l.push(`    password: "${is}"`)),fo&&(l.push(""),l.push("web_server:"),Vn.length)){const Hn=po(hn||{},Vn,2,N.value,Ut.value);Hn.length&&l.push(...Hn)}}}const Te=ks.value||{},Ve=be.value||{};_o.forEach(St=>{if(!Li.value.includes(St.key))return;const Pt=Ve[St.key],Vt=(Pt==null?void 0:Pt.fields)||[];if(!Vt.length)return;const Qt=Do(Te[St.key]||{},Vt),Xt=po(Qt,Vt,2,N.value,Ut.value);!Xt.length&&!il(Vt)||(l.push(""),l.push(`${St.key}:`),Xt.length&&l.push(...Xt))});const We=ze.value||{},dt=Wt.value||{};[{key:"logger",label:"logger"},{key:"status_led",label:"status_led"},{key:"debug",label:"debug"}].forEach(St=>{const Pt=We[St.key],Vt=(Pt==null?void 0:Pt.fields)||[];if(!Vt.length)return;const Qt=dt[St.key]||{};if(!Qt.enabled)return;const Xt=Do(Qt||{},Vt),hn=po(Xt,Vt,2,N.value,Ut.value);!hn.length&&!il(Vt)||(l.push(""),l.push(`${St.label}:`),l.push(...hn))});const Tt=C.value||{},Mt=Cs.value||{},Gt=Oa.value||{},Ln=(St,Pt)=>{const Vt=[];return St.forEach(Qt=>{const Xt=po(Qt||{},Pt,4,N.value,Ut.value);if(!Xt.length){Vt.push("  - {}");return}const hn="  - ",Vn=Xt[0];Vt.push(`${hn}${Vn.slice(4)}`),Xt.slice(1).forEach(fo=>Vt.push(fo))}),Vt},nt=St=>Array.isArray(St)?St:St&&typeof St=="object"?[St]:[];Qo.forEach(St=>{var fo;const Pt=Tt[St.key],Qt=((Pt==null?void 0:Pt.fields)||[]).find(ss=>ss.key===St.key),Xt=((fo=Qt==null?void 0:Qt.item)==null?void 0:fo.fields)||[],hn=nt(Gt[St.key]),Vn=nt(Mt[St.key]);!Xt.length||!hn.length&&!Vn.length||(l.push(""),l.push(`${St.key}:`),hn.length&&(l.push("  # Auto-generated"),l.push(...Ln(hn,Xt))),Vn.length&&(hn.length&&l.push("  # Added by user"),l.push(...Ln(Vn,Xt))))});const os=Po.value||{},un=Ie.value||{};[{key:"i2c",label:"i2c"},{key:"spi",label:"spi"},{key:"uart",label:"uart"},{key:"one_wire",label:"one_wire"},{key:"i2s",label:"i2s"},{key:"canbus",label:"canbus"}].forEach(St=>{if(!cn.find(Vn=>Vn.key===St.key)||!Ta(St.key))return;const Vt=un[St.key],Qt=(Vt==null?void 0:Vt.fields)||[];if(!Qt.length)return;const Xt=Do(os[St.key]||{},Qt),hn=po(Xt,Qt,2,N.value,Ut.value);!hn.length&&!il(Qt)||(l.push(""),l.push(`${St.label}:`),l.push(...hn))});const lo=gI(N.value.components,me.value,Ut.value,nl.value);for(lo.length&&(l.push(""),l.push(...lo));l.length&&l[0].trim()==="";)l.shift();return l.join(`
`)}),tv=l=>{const h=[],b=(l||"").split(/\r?\n/);let S=null;const V=A=>{if(!A||/^\s/.test(A))return!1;const D=A.trim();return!D||D.startsWith("#")?!1:D.includes(":")};return b.forEach(A=>{if(V(A)){S&&h.push(S),S={key:A.split(":")[0].trim(),lines:[A]};return}S&&S.lines.push(A)}),S&&h.push(S),h},nv=F(()=>tv(es.value)),ov=F(()=>{var S,V;const l=new Set(["esphome","substitutions","ota","api","mqtt","espnow","captive_portal","web_server","logger","status_led","debug"]),h=(S=ln.value)==null?void 0:S.platform;h&&l.add(h);const b=(V=Yt.value)==null?void 0:V.transport;return b&&l.add(b),l}),sv=new Set(["font","image","images","graph","animation"]),iv=new Set(["time","deep_sleep","script","globals","interval"]),av=F(()=>new Set(cn.map(l=>l.key))),rv=l=>l.split(" ").filter(Boolean).map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" "),lv=l=>{const h={api:"API",ota:"OTA",mqtt:"MQTT",espnow:"ESP-NOW",esphome:"ESPHome",i2c:"I2C",spi:"SPI",uart:"UART",i2s:"I2S",one_wire:"1-Wire",canbus:"CAN Bus",status_led:"Status LED",web_server:"Web Server"};if(h[l])return h[l];const b=l.replace(/[_-]+/g," ").trim();return rv(b)},cv=(l=[])=>l.map(b=>b.lines.join(`
`).replace(/\n+$/g,"")).join(`

`).trim(),Jn=F(()=>{const l=nv.value,h=new Set,b=[],S=l.filter(ee=>ov.value.has(ee.key));S.length&&(b.push({key:"core",label:"Core",blocks:S}),S.forEach(ee=>h.add(ee.key)));const V=l.filter(ee=>iv.has(ee.key));V.length&&(b.push({key:"automation",label:"Automation",blocks:V}),V.forEach(ee=>h.add(ee.key)));const A=l.filter(ee=>av.value.has(ee.key));A.length&&(b.push({key:"busses",label:"Busses",blocks:A}),A.forEach(ee=>h.add(ee.key)));const D=l.filter(ee=>sv.has(ee.key)),G=l.filter(ee=>ee.key==="display"),ie=[...D,...G];return ie.length&&(b.push({key:"display",label:"Display",blocks:ie}),ie.forEach(ee=>h.add(ee.key))),l.forEach(ee=>{h.has(ee.key)||(b.push({key:ee.key,label:lv(ee.key),blocks:[ee]}),h.add(ee.key))}),b});Fh(()=>{a.value=[]});const wo=async()=>{await oo();const l=i.value;c.value=(l==null?void 0:l.clientWidth)||0,d.value=a.value.map(h=>(h==null?void 0:h.offsetWidth)||0),r.value>=Jn.value.length&&(r.value=0)},du=l=>{const h=d.value,b=c.value;if(!h.length||b<=0)return Math.max(0,l);let S=0,V=l;for(let A=l;A>=0;A-=1){const D=h[A]||0,G=A===l?D:S+Wf+D;if(G>b)break;S=G,V=A}return V},al=F(()=>{const l=Jn.value,h=d.value,b=c.value;if(!l.length)return[];let S=0;const V=Math.min(r.value,l.length-1),A=[];for(let D=V;D<l.length;D+=1){const G=h[D]||0,ie=A.length?S+Wf+G:S+G;if(ie>b)break;S=ie,A.push(l[D])}return A}),rl=F(()=>al.value.length?r.value+al.value.length-1:-1),fu=F(()=>r.value>0),hu=F(()=>rl.value>=0&&rl.value<Jn.value.length-1),pu=l=>{if(l<r.value){r.value=l;return}l>rl.value&&(r.value=du(l))},uv=async l=>{const h=Jn.value.findIndex(b=>b.key===l);h!==-1&&(s.value=l,await wo(),pu(h))},dv=()=>{if(t.value==="Busses")return"busses";if(t.value==="Automation")return"automation";if(t.value==="Components"){const{domain:l}=P(It.value||"");return l?l==="display"?"display":l:""}return"core"},ll=async()=>{if(!o.value)return;const l=dv();if(!l)return;const h=Jn.value.findIndex(b=>b.key===l);h!==-1&&(s.value=Jn.value[h].key,await wo(),pu(h))};ot(()=>Jn.value,async l=>{const h=l.map(D=>D.key),b=f.value,S=new Set(b),V=h.find(D=>!S.has(D));if(f.value=h,!o.value)return;if(!b.length){await wo(),await ll();return}if(!V||No.value||V==="busses")return;const A=h.indexOf(V);A!==-1&&(s.value=V,await wo(),r.value=du(A))},{immediate:!0}),ot(()=>[t.value,It.value],()=>{ll()}),ot(()=>o.value,l=>{l&&ll()});const cl=F(()=>{if(!o.value)return es.value;const l=Jn.value.find(h=>h.key===s.value);return l?cv(l.blocks):""}),Ba=()=>{const l=v.value;if(!l){m.value=!1;return}const h=l.scrollHeight>l.clientHeight+1,b=l.scrollWidth>l.clientWidth+1;m.value=h||b},fv=F(()=>R.value?"Copied":"Copy code"),hv=async()=>{const l=cl.value||"";if(l)try{await navigator.clipboard.writeText(l),R.value=!0,B&&clearTimeout(B),B=setTimeout(()=>{R.value=!1,B=null},1500)}catch(h){console.error("Failed to copy preview",h)}};ot(()=>[o.value,Jn.value],([l,h])=>{if(!l)return;if(!h.length){s.value="";return}h.some(S=>S.key===s.value)||(s.value=h[0].key),wo()},{immediate:!0}),ot(()=>[cl.value,o.value,s.value],async()=>{await oo(),Ba()},{immediate:!0}),Yo(()=>{Ba(),mv(),window.addEventListener("resize",Ba),window.addEventListener("app:builder-export",gu),window.addEventListener("app:builder-compile",Iu),window.addEventListener("app:builder-install",Tu),window.addEventListener("app:builder-logs",Ru),Eu(),Va(),xv()}),ot(()=>o.value,()=>{wo()}),ot(()=>Jn.value.length,()=>{wo()});const pv=F(()=>{const l=cl.value||"";return Gd.highlight(l,{language:"yaml"}).value}),gv=()=>{if(Na.value.length){yt.value=!0;return}const l=new Blob([es.value],{type:"text/yaml"}),h=URL.createObjectURL(l),b=document.createElement("a");b.href=h,b.download=$e.value||"config.yaml",b.click(),URL.revokeObjectURL(h)},gu=()=>{gv()},Rn=()=>{if(!No.value)try{const l=ja(N.value);localStorage.setItem("vebBuilderDeviceConfig",l)}catch(l){console.error("Failed to save config",l)}},vv=new URL("./",window.location.href).toString(),vu=l=>new URL(l,vv).toString(),Un=async(l,h={})=>fetch(vu(l),{credentials:"include",...h}),mv=()=>{if(!(!("BroadcastChannel"in window)||Be))try{Be=new BroadcastChannel(ER)}catch{Be=null}},yv=()=>{Be&&(Be.close(),Be=null)},bv=()=>{const l={type:"projects-updated",ts:Date.now()};window.dispatchEvent(new CustomEvent("app:projects-updated",{detail:l})),Be&&Be.postMessage(l);try{localStorage.setItem(wR,JSON.stringify(l))}catch{}},_v=l=>{const h=l.split(".");if(h.length!==4)return!1;const b=h.map(S=>Number(S));return b.some(S=>Number.isNaN(S)||S<0||S>255)?!1:b[0]===10||b[0]===127||b[0]===192&&b[1]===168||b[0]===172&&b[1]>=16&&b[1]<=31},wv=!(l=>{if(!l)return!1;const h=l.toLowerCase();return h==="localhost"||h.endsWith(".local")||h==="::1"||h==="[::1]"?!0:_v(h)})(window.location.hostname||""),Ev=F(()=>String($e.value||"").replace(/\.yaml$/i,"")),Ua=l=>{const h=String(l||"").trim();if(!h)return"";const b=h.replace(/\.yaml$/i,"").trim();return b?`${b}.local`:""},mu=F(()=>{var l,h;return String(((h=(l=N.value)==null?void 0:l.ui)==null?void 0:h.deviceHost)||"").trim()}),yu=F(()=>{const l=mu.value;return l||Ua($e.value)}),Sv=async l=>{try{const h=Ua(l);await Un("api/devices/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yaml:l,...h?{host:h}:{}})})}catch{}},Va=async({refresh:l=!1}={})=>{const h=String($e.value||"").trim();if(!h){Z.value="unknown",oe.value="",X.value="";return}try{const b=await Un(`api/devices/list?refresh=${l?1:0}`);if(!b.ok){Z.value="unknown";return}const S=await b.json(),V=Array.isArray(S==null?void 0:S.devices)?S.devices:[],A=Ev.value,D=V.find(G=>{const ie=String((G==null?void 0:G.yaml)||"").trim(),ee=String((G==null?void 0:G.name)||"").trim();return!!(ie&&ie.toLowerCase()===h.toLowerCase()||ee&&ee.toLowerCase()===A.toLowerCase())});if(!D){Z.value="unknown",oe.value="",X.value="";return}Z.value=String(D.status||"").toLowerCase()||"unknown",oe.value=String(D.host||"").trim(),X.value=String(D.name||A).trim()}catch{Z.value="unknown"}},xv=()=>{_e||(_e=setInterval(()=>{Qn.value||Va({refresh:!0})},1e4))},kv=()=>{_e&&(clearInterval(_e),_e=null)},ul=F(()=>{const l=String($e.value||"").trim(),h=String(es.value||"");return!l||!h||!Se.value||!Xe.value?!1:l===Se.value&&h===Xe.value}),Ni=F(()=>{const l=String($e.value||"").trim(),h=String(es.value||"").trim();return!!(l&&h)}),dl=F(()=>ul.value&&Z.value==="online"),Qn=F(()=>["queued","running"].includes(Ye.value)),bu=F(()=>!!Et.value&&Qn.value),Cv=F(()=>st.value&&W.value==="download"&&_.value&&Ye.value==="success"),_u=F(()=>!!st.value&&!T.value&&["success","failed","canceled"].includes(Ye.value)),wu=F(()=>ke.value==="flash"?"Flash Console":ke.value==="ota"?"OTA Console":ke.value==="logs"?"Logs Console":"Compile Console"),Av=F(()=>Ye.value?Ye.value==="queued"?"Queued":Ye.value==="running"?"Running":Ye.value==="success"?"Success":Ye.value==="failed"?"Failed":Ye.value==="canceled"?"Canceled":Ye.value:"Idle"),$v=F(()=>Ye.value==="running"?"job-state running":Ye.value==="queued"?"job-state queued":Ye.value==="success"?"job-state success":Ye.value==="failed"||Ye.value==="canceled"?"job-state failed":"job-state"),Iv=F(()=>"serial"in navigator),Tv=F(()=>window.isSecureContext===!0),Rv=F(()=>{const l=document.permissionsPolicy;if(!l||typeof l.allowsFeature!="function")return!0;try{return l.allowsFeature("serial")}catch{return!0}}),Eu=()=>{window.dispatchEvent(new CustomEvent("app:builder-compile-state",{detail:{canCompile:ul.value,canInstall:Ni.value,canLogs:dl.value,running:Qn.value||T.value}}))},Ha=l=>String(l).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;"),Fv=l=>{const h=["compile-line"],b=String(l||""),S=b.match(/^\[[0-9:.]+\]\[([A-Z])\]/);if(S){const V=S[1];if(V==="E")return h.concat("line-error");if(V==="W")return h.concat("line-warn");if(V==="I")return h.concat("line-info");if(V==="D")return h.concat("line-debug");if(V==="C")return h.concat("line-success")}return/^\s*(error|failed|exception)\b/i.test(b)?h.concat("line-error"):/^\s*(warn|warning)\b/i.test(b)?h.concat("line-warn"):/^\s*(success|ok)\b/i.test(b)?h.concat("line-success"):/^\s*info\b/i.test(b)?h.concat("line-info"):h},Lv=l=>{const h=String(l||""),b=h.match(/^\[([0-9:.]+)\]\[([A-Z])\](.*)$/);if(b){const[,S,V,A]=b,D=Ha(V);return`<span class="log-ts">[${Ha(S)}]</span><span class="log-rest log-rest-${D}">${Ha(`[${V}]${A}`)}</span>`}return Ha(h)},Su=()=>{!ut.value||!lt.value||(lt.value.scrollTop=lt.value.scrollHeight)},Ov=()=>{fe||(fe=requestAnimationFrame(()=>{fe=null,Su()}))},xu=()=>{if(ne=null,!Je.length)return;Je.splice(0,SR).forEach(h=>{const b=String(h??""),S=ae.value;ae.value+=1,kt.value.push({id:S,className:Fv(b).join(" "),html:Lv(b)})}),kt.value.length>Gf&&kt.value.splice(0,kt.value.length-Gf),Ov(),Je.length&&(ne=requestAnimationFrame(xu))},ku=l=>{!Array.isArray(l)||!l.length||(Je.push(...l),ne||(ne=requestAnimationFrame(xu)))},Fn=l=>{ku([l])},Cu=()=>{Je.length=0,ne&&(cancelAnimationFrame(ne),ne=null),fe&&(cancelAnimationFrame(fe),fe=null)},Au=()=>{Cu(),kt.value=[],ae.value=0},za=()=>{ce&&(clearInterval(ce),ce=null)},Qs=()=>{Pe&&(clearTimeout(Pe),Pe=null),ge&&(ge.close(),ge=null),Ce.value=!1},ei=()=>{ve=!1},$s=()=>{W.value="",y.value="",k.value=null,_.value=!1},fl=l=>{const h=l!=null&&l.job&&typeof l.job=="object"?l.job:l;!h||typeof h!="object"||(h.id&&(Et.value=h.id),h.state&&(Ye.value=h.state),typeof h.error_summary=="string"&&(Ze.value=h.error_summary))},Di=async l=>{if(l)try{const h=await Un(`api/jobs/${l}`);if(!h.ok)return;const b=await h.json();fl(b)}catch{}},Mv=async l=>{if(!l)return!1;try{const h=await Un(`api/jobs/${l}/tail-wait?since=${encodeURIComponent(tt.value)}&timeout=5&limit=200`);if(!h.ok)return!1;const b=await h.json(),S=Array.isArray(b==null?void 0:b.lines)?b.lines:[];S.length&&ku(S);const V=Number((b==null?void 0:b.next_seq)||0);tt.value=Number.isFinite(V)?V:tt.value,fl((b==null?void 0:b.job)||b);const A=b!=null&&b.job&&typeof b.job=="object"?b.job:b;return(A==null?void 0:A.state)&&["queued","running"].includes(A.state)}catch{return!1}},hl=l=>{if(ei(),tt.value=0,!l)return;ve=!0,Ce.value=!1,(async()=>{for(;ve&&await Mv(l););ve=!1,await Di(l)})()},Pv=l=>{za(),ce=setInterval(()=>{Di(l)},1500)},$u=l=>{if(Qs(),ei(),!l)return;if(O.value=0,$.value=!1,wv){hl(l);return}const h=vu(`api/jobs/${l}/stream`);ge=new EventSource(h,{withCredentials:!0}),Ce.value=!1,ge.addEventListener("log",b=>{$.value=!0,ei(),Fn(b.data||"")}),ge.addEventListener("done",async b=>{Qs();try{const S=JSON.parse(b.data||"{}");fl(S)}catch{}await Di(l)}),ge.onerror=async()=>{if(Qs(),!!Qn.value){if(O.value+=1,O.value>=2){hl(l);return}if(O.value>xR){Ze.value="Log stream disconnected. Check network/proxy path.";return}if(Ce.value=!0,await Di(l),!Qn.value){Ce.value=!1;return}setTimeout(()=>{Qn.value&&$u(l)},1500)}},Pe=setTimeout(()=>{!$.value&&Qn.value&&hl(l)},2e3)},Nv=()=>{_u.value&&(Qs(),ei(),za(),st.value=!1,Et.value="",Ye.value="",Ze.value="",Au(),T.value=!1,$s())},Dv=()=>{ut.value=!ut.value,ut.value&&oo(Su)},jv=async()=>{if(bu.value)try{const l=await Un(`api/jobs/${Et.value}/cancel`,{method:"POST"});if(!l.ok)throw new Error(await ts(l,"Cancel failed"));await Di(Et.value)}catch(l){Ze.value=l instanceof Error?l.message:"Cancel failed"}},ti=async({action:l,device:h="",resetConsole:b=!0,introLine:S=""})=>{if(!(!Ni.value||Qn.value||T.value)){st.value=!0,ut.value=!0,Et.value="",Ye.value="queued",Ze.value="",ke.value=l,tt.value=0,O.value=0,$.value=!1,b&&Au(),S&&Fn(S);try{const V=await Un("api/install",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yaml:$e.value,action:l,...h?{device:h}:{}})});if(!V.ok)throw new Error(await ts(V,`${l.toUpperCase()} start failed`));const A=await V.json(),D=A!=null&&A.job&&typeof A.job=="object"?A.job:null;if(Et.value=(D==null?void 0:D.id)||(A==null?void 0:A.job_id)||"",Ye.value=(D==null?void 0:D.state)||(A==null?void 0:A.state)||"queued",Ze.value="",!Et.value)throw new Error("Missing job id");Pv(Et.value),$u(Et.value)}catch(V){Ye.value="failed",Ze.value=V instanceof Error?V.message:`${l.toUpperCase()} start failed`,Fn(`ERROR ${Ze.value}`),$s()}}},Bv=async()=>{$s(),await ti({action:"compile",introLine:`INFO Starting compile for ${$e.value}`})},Uv=async()=>{if(!Ni.value||Qn.value||T.value)return;if(!Iv.value){le.value="Your browser does not support Web Serial.";return}if(!Tv.value){le.value="Web Serial requires HTTPS or localhost.";return}if(!Rv.value){le.value="Web Serial is blocked by Permissions-Policy.";return}let l=null;try{l=await navigator.serial.requestPort()}catch(h){if((h==null?void 0:h.name)==="NotFoundError")return;le.value=h instanceof Error?h.message:"Port selection failed";return}He.value=!1,W.value="serial",k.value=l,_.value=!1,await ti({action:"compile",introLine:`INFO Selected serial port. Starting compile for ${$e.value}`})},Vv=async()=>{const l=k.value;if(!l)throw new Error("Serial port is not selected.");T.value=!0,Ye.value="running",ke.value="flash",Ze.value="";let h=null;try{Fn("INFO Downloading factory firmware from add-on...");const b=await Un(`api/firmware?yaml=${encodeURIComponent($e.value)}&variant=factory`);if(b.status===404)throw new Error("Factory firmware not found. Compile project first.");if(!b.ok)throw new Error(await ts(b,"Firmware download failed"));const S=await b.arrayBuffer(),V=new Uint8Array(S);if(!V.byteLength)throw new Error("Downloaded firmware is empty.");Fn("INFO Starting flash..."),h=new dg(l),h.device||(h.device=l);const A={clean:()=>{},write:ie=>{var ee;return Fn(((ee=ie==null?void 0:ie.toString)==null?void 0:ee.call(ie))||String(ie))},writeLine:ie=>{var ee;return Fn(((ee=ie==null?void 0:ie.toString)==null?void 0:ee.call(ie))||String(ie))}},D=new AE({transport:h,baudrate:921600,terminal:A}),G=D.ui8ToBstr?D.ui8ToBstr(V):String.fromCharCode(...V);await D.main(),await D.writeFlash({fileArray:[{data:G,address:0}],flashSize:"keep",flashMode:"keep",flashFreq:"keep",eraseAll:!1,compress:!0}),Ye.value="success",Fn("INFO Flash completed successfully.")}catch(b){Ye.value="failed",Ze.value=b instanceof Error?b.message:"Flash failed",Fn(`ERROR ${Ze.value}`)}finally{if(h)try{await h.disconnect()}catch{}T.value=!1,$s()}},Hv=async()=>{le.value="";try{const l=await Un(`api/firmware?yaml=${encodeURIComponent($e.value)}&variant=factory`);if(l.status===404)throw new Error("Factory firmware not found. Compile project first.");if(!l.ok)throw new Error(await ts(l,"Firmware download failed"));const h=await l.blob(),b=URL.createObjectURL(h),S=document.createElement("a");S.href=b,S.download=$e.value.replace(/\.yaml$/i,".bin"),S.click(),URL.revokeObjectURL(b),Fn("INFO Firmware download started.")}catch(l){const h=l instanceof Error?l.message:"Firmware download failed";st.value?(Ze.value=h,Fn(`ERROR ${h}`)):le.value=h}},zv=async()=>{await Uv()},Wv=async()=>{const l=yu.value;if(!l){le.value="No saved device host. Save once after setting a reachable host.";return}He.value=!1,W.value="ota",y.value=l.trim(),_.value=!1,await ti({action:"compile",introLine:`INFO Starting compile before OTA for ${$e.value}`})},Gv=async()=>{if(!dl.value)return;const l=yu.value;if(!l){le.value="No device host found for logs.";return}$s(),await ti({action:"logs",device:l,introLine:`INFO Starting logs for ${$e.value}`})},Kv=async()=>{He.value=!1,W.value="download",_.value=!1,await ti({action:"compile",introLine:`INFO Starting compile before firmware download for ${$e.value}`})},Iu=()=>{Bv()},Tu=()=>{!Ni.value||Qn.value||T.value||De.value||Fu(!0).then(l=>{l&&(He.value=!0)})},Ru=()=>{Gv()},Zv=async(l,h)=>{if(Qs(),ei(),za(),l!=="success"){h==="compile"&&$s(),ke.value="";return}if(h==="compile"){if(W.value==="serial"){Fn("INFO Compile successful. Starting serial flash..."),await Vv();return}if(W.value==="ota"){Fn("INFO Compile successful. Starting OTA..."),await ti({action:"ota",device:y.value,resetConsole:!1,introLine:`INFO Starting ota for ${$e.value}`});return}if(W.value==="download"){_.value=!0,Fn("INFO Compile successful. Use Download button to get firmware."),ke.value="";return}}(h==="ota"||h==="flash")&&$s(),ke.value=""};ot(()=>Ye.value,async(l,h)=>{if(l===h||!["success","failed","canceled"].includes(l)||Qn.value)return;const b=ke.value;b&&await Zv(l,b)}),ot(()=>[Ni.value,ul.value,dl.value,Qn.value,T.value,$e.value,es.value,Se.value,Xe.value],()=>{Eu()},{immediate:!0}),ot(()=>$e.value,l=>{const h=Ua(l);N.value.ui={...N.value.ui||{},deviceHost:h},Va()},{immediate:!0}),ot(()=>mu.value,l=>{l&&(oe.value||(oe.value=l))},{immediate:!0});const qv=l=>{const h=String(l).trim();return h?h.toLowerCase().endsWith(".yaml")?`${h.slice(0,-5)}.json`:`${h}.json`:"new_file.json"},ts=async(l,h)=>{try{const b=await l.json();if(b&&typeof b.message=="string"&&b.message.trim())return b.message}catch{}return`${h} (HTTP ${l.status})`},pl=()=>({version:1,updatedAt:new Date().toISOString(),folders:[{id:eo,name:Zl,parentId:null}],projectPlacement:[]}),Yv=l=>{const h=pl();if(!l||typeof l!="object")return h;const b=new Map;if(Array.isArray(l.folders)&&l.folders.forEach(D=>{if(!D||typeof D!="object")return;const G=typeof D.id=="string"?D.id.trim():"";if(!G||b.has(G))return;const ie=typeof D.name=="string"&&D.name.trim()?D.name.trim():G,ee=D.parentId===null||D.parentId===void 0?null:String(D.parentId).trim()||eo;b.set(G,{id:G,name:ie,parentId:ee})}),!b.has(eo))b.set(eo,{id:eo,name:Zl,parentId:null});else{const D=b.get(eo);b.set(eo,{id:eo,name:(D==null?void 0:D.name)||Zl,parentId:null})}const S=new Set(b.keys()),V=Array.from(b.values()).map(D=>D.id===eo?{...D,parentId:null}:!D.parentId||!S.has(D.parentId)||D.parentId===D.id?{...D,parentId:eo}:D),A=new Map;return Array.isArray(l.projectPlacement)&&l.projectPlacement.forEach(D=>{if(!D||typeof D!="object")return;const G=typeof D.name=="string"?D.name.trim():"";if(!G||A.has(G))return;const ie=typeof D.folderId=="string"&&S.has(D.folderId)?D.folderId:eo;A.set(G,{name:G,folderId:ie})}),{version:1,updatedAt:new Date().toISOString(),folders:V,projectPlacement:Array.from(A.values())}},Xv=(l,h)=>{const b=Yv(l),S=Array.isArray(b.projectPlacement)?[...b.projectPlacement]:[],V=S.findIndex(D=>D.name===h),A={name:h,folderId:eo};return V>=0?S.splice(V,1,A):S.push(A),b.projectPlacement=S,b.updatedAt=new Date().toISOString(),b},Jv=()=>{try{return JSON.parse(ja(N.value))}catch{return N.value}},Qv=async(l=!1)=>{const h=$e.value||"config.yaml",b=qv(h),S=Ua(h);N.value.ui={...N.value.ui||{},...S?{deviceHost:S}:{}};const V=await Un("save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:h,yaml:es.value})});if(!V.ok)throw new Error(await ts(V,"Failed to save YAML"));const A=await Un("projects/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b,data:Jv()})});if(!A.ok)throw new Error(await ts(A,"Failed to save project JSON"));let D=pl();const G=await Un("projects/load?name=projects.json");if(G.ok)try{const Te=await G.json();Te!=null&&Te.data&&typeof Te.data=="object"&&(D=Te.data)}catch{D=pl()}else if(G.status!==404)throw new Error(await ts(G,"Failed to load projects index"));const ie=Xv(D,b),ee=await Un("projects/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"projects.json",data:ie})});if(!ee.ok)throw new Error(await ts(ee,"Failed to update projects.json"));return Se.value=h,Xe.value=es.value,await Sv(h),await Va(),bv(),l||(Q.value=`Saved ${h} and ${b}.`),!0},Fu=async(l=!1)=>{if(De.value)return!1;De.value=!0,le.value="",l||(Q.value=""),et.value=!1;try{return await Qv(l),!0}catch(h){return le.value=h instanceof Error?h.message:"Unknown save error",!1}finally{De.value=!1}},em=l=>{if(typeof l=="string"&&l)return{id:l,config:{}};if(l&&typeof l=="object"){const h=typeof l.id=="string"?l.id:"";if(!h)return null;const b=l.config&&typeof l.config=="object"?l.config:{},S=typeof l.customConfig=="string"?l.customConfig:"";return{id:h,config:b,customConfig:S}}return null},tm=l=>{var D;const h=sl();if(!l||typeof l!="object")return h;const{logger:b,otherCore:S,...V}=l,A={...h,...V,device:{...h.device,...l.device??{}},components:Array.isArray(l.components)?l.components.map(em).filter(Boolean):h.components,protocolsCore:{...h.protocolsCore,...l.protocolsCore??{}},bussesCore:{...h.bussesCore,...l.bussesCore??{}},system:{...h.system,...l.system??{}},ui:{...h.ui,...l.ui??{}}};return(!((D=A.system)!=null&&D.logger)||Object.keys(A.system.logger||{}).length===0)&&b&&Object.keys(b).length&&(A.system={...A.system,logger:{enabled:!0,...b}}),A},nm=()=>{var h,b,S;const l=localStorage.getItem("vebBuilderDeviceConfig");if(!l){const V=localStorage.getItem("vebBuilderSplitPreview");V!==null&&(o.value=V==="1",(!N.value.ui||typeof N.value.ui!="object")&&(N.value.ui={}),N.value.ui.splitPreview=o.value),Ge.value=it((h=N.value.ui)==null?void 0:h.modeLevel),(!N.value.ui||typeof N.value.ui!="object")&&(N.value.ui={}),N.value.ui.modeLevel=Ge.value,No.value=!1;return}try{const V=JSON.parse(l);if((V==null?void 0:V.schemaVersion)===1){N.value=tm(V);try{localStorage.setItem("vebBuilderDeviceConfig",ja(N.value))}catch(D){console.error("Failed to clean stored config",D)}}const A=localStorage.getItem("vebBuilderSplitPreview");A!==null?(o.value=A==="1",(!N.value.ui||typeof N.value.ui!="object")&&(N.value.ui={}),N.value.ui.splitPreview=o.value):o.value=!!((b=N.value.ui)!=null&&b.splitPreview),Ge.value=it((S=N.value.ui)==null?void 0:S.modeLevel),(!N.value.ui||typeof N.value.ui!="object")&&(N.value.ui={}),N.value.ui.modeLevel=Ge.value,No.value=!1}catch{No.value=!1}},om=(l,h,b)=>{const S=N.value.components[l];if(!S)return;(!S.config||typeof S.config!="object")&&(S.config={});let V=S.config;const A=h[h.length-1];h.slice(0,-1).forEach(D=>{(!V[D]||typeof V[D]!="object")&&(V[D]={}),V=V[D]}),V[A]=b},ns=(l,h,b)=>{if(!l||typeof l!="object")return;let S=l;const V=h[h.length-1];h.slice(0,-1).forEach(A=>{(!S[A]||typeof S[A]!="object")&&(S[A]={}),S=S[A]}),S[V]=b},sm=({path:l,value:h})=>{if(H.value!==null){if(om(H.value,l,h),l[l.length-1]==="bus"){const b=N.value.components[H.value];if(!(b!=null&&b.config))return;h==="i2c"&&delete b.config.cs_pin,h==="spi"&&delete b.config.address}Rn()}},im=({path:l,value:h})=>{(!N.value.esphomeCore||typeof N.value.esphomeCore!="object")&&(N.value.esphomeCore={}),ns(N.value.esphomeCore,l,h),Rn()},am=({path:l,value:h})=>{(!N.value.substitutions||typeof N.value.substitutions!="object")&&(N.value.substitutions={}),ns(N.value.substitutions,l,h),Rn()},Lu=({path:l,value:h})=>{(!N.value.platformCore||typeof N.value.platformCore!="object")&&(N.value.platformCore={}),ns(N.value.platformCore,l,h),Rn()},Wa=({path:l,value:h})=>{(!N.value.networkCore||typeof N.value.networkCore!="object")&&(N.value.networkCore={}),ns(N.value.networkCore,l,h),Rn()},rm=({path:l,value:h})=>{const b=Xn.value;b&&((!N.value.bussesCore||typeof N.value.bussesCore!="object")&&(N.value.bussesCore={}),(!N.value.bussesCore[b]||typeof N.value.bussesCore[b]!="object")&&(N.value.bussesCore[b]={}),ns(N.value.bussesCore[b],l,h),Rn())},lm=({path:l,value:h})=>{const b=ro.value;b&&((!N.value.protocolsCore||typeof N.value.protocolsCore!="object")&&(N.value.protocolsCore={}),(!N.value.protocolsCore[b]||typeof N.value.protocolsCore[b]!="object")&&(N.value.protocolsCore[b]={}),ns(N.value.protocolsCore[b],l,h),Rn())},cm=({path:l,value:h})=>{const b=gn.value;b&&((!N.value.system||typeof N.value.system!="object")&&(N.value.system={}),(!N.value.system[b]||typeof N.value.system[b]!="object")&&(N.value.system[b]={}),ns(N.value.system[b],l,h),Rn())},um=({path:l,value:h})=>{Nn.value&&((!N.value.automation||typeof N.value.automation!="object")&&(N.value.automation={}),ns(N.value.automation,l,h),Rn())},dm=l=>{if(H.value===null)return;const h=N.value.components[H.value];h&&(h.customConfig=l,Rn())};return ot(()=>{var l;return(l=N.value.platformCore)==null?void 0:l.variant},l=>{l&&((!N.value.platformCore||typeof N.value.platformCore!="object")&&(N.value.platformCore={}),N.value.platformCore.framework="esp-idf")}),ot(()=>N.value,()=>{Rn()},{deep:!0}),ot(()=>t.value,l=>{l==="Automation"&&Qo.length&&(Nn.value||(Nn.value=Qo[0].key))}),Yo(async()=>{var b,S,V;nm(),window.addEventListener("resize",wo),window.addEventListener("click",ru),wo();try{const A="./",D=A.endsWith("/")?A:`${A}/`,G=await fetch(`${D}components_list/components_list.json`);if(!G.ok)throw new Error(`Component catalog load failed (${G.status})`);Ae.value=await G.json(),Me.value=null}catch(A){Me.value=A,Ae.value={categories:[]},console.error("Component catalog load failed",A)}finally{xe.value=!1}try{const A="./",D=A.endsWith("/")?A:`${A}/`,G=await fetch(`${D}runtime/esp_assets/mdi_glyph_substitutions.yaml`);if(G.ok){const ie=await G.text(),ee={};ie.split(/\r?\n/).forEach(Te=>{if(!Te.startsWith("  "))return;const Ve=Te.match(/^\s{2}([^:]+):\s+\"([^\"]+)\"/);Ve&&(ee[Ve[1]]=Ve[2])}),nl.value=ee}}catch(A){console.error("MDI substitutions load failed",A)}try{const A=await fetch("https://cdn.jsdelivr.net/npm/@mdi/svg/meta.json");if(!A.ok)throw new Error(`MDI icon list load failed (${A.status})`);const D=await A.json();Pa.value=Array.isArray(D)?D.filter(G=>!G.deprecated).map(G=>G.name):[]}catch(A){console.error("MDI icon list load failed",A),Pa.value=[]}try{let A=!1;try{const D=await Un("api/assets/refresh?kind=images",{method:"POST"});if(D.ok){const G=await D.json(),ie=(b=G==null?void 0:G.images)==null?void 0:b.images;Array.isArray(ie)&&(Ma.value=ie,A=!0)}}catch{}if(!A){const D="./",G=D.endsWith("/")?D:`${D}/`,ie=await fetch(`${G}runtime/esp_assets/images.json`);if(!ie.ok)throw new Error(`Display images load failed (${ie.status})`);if(!(ie.headers.get("content-type")||"").toLowerCase().includes("json"))throw new Error("Display images source is not JSON");const Te=await ie.json();Ma.value=Array.isArray(Te==null?void 0:Te.images)?Te.images:[]}}catch(A){console.error("Display images load failed",A),Ma.value=[]}try{pt.value=await V2()}catch(A){console.error(A)}try{_t.value=await Wn("general/core/core.json")}catch(A){console.error("ESPHome core schema load failed",A)}try{zt.value=await Wn("general/core/substitutions.json")}catch(A){console.error("Substitutions schema load failed",A)}try{Zt.value=await Wn("general/platform/platform.json")}catch(A){console.error("Platform core schema load failed",A)}try{const A={};await Promise.all(_o.map(async D=>{const G=await Wn(`${D.schemaId}.json`);A[D.key]=G})),be.value=A}catch(A){console.error("Protocols schemas load failed",A)}try{const A={};await Promise.all(Nt.map(async D=>{const G=await Wn(`general/system/${D.key}.json`);A[D.key]=G})),ze.value=A}catch(A){console.error("System schemas load failed",A)}try{const A={};await Promise.all(Qo.map(async D=>{const G=await Wn(`general/automation/${D.key}.json`);A[D.key]=G})),C.value=A}catch(A){console.error("Automation schemas load failed",A)}try{const A={};await Promise.all(cn.map(async D=>{const G=await Wn(`general/busses/${D.key}.json`);A[D.key]=G})),Ie.value=A}catch(A){console.error("Busses schemas load failed",A)}try{L.value=await Wn("general/network/network.json")}catch(A){console.error("Network core schema load failed",A)}const l=(S=ln.value)==null?void 0:S.platform;if(l)try{q.value=await Wn(`general/platform/${l}.json`)}catch(A){console.error("Platform schema load failed",A)}const h=(V=Yt.value)==null?void 0:V.transport;if(h)try{p.value=await Wn(`general/network/${h}.json`)}catch(A){console.error("Network schema load failed",A)}}),io(()=>{window.removeEventListener("resize",wo),window.removeEventListener("click",ru)}),ot(()=>{var l;return(l=ln.value)==null?void 0:l.platform},async(l,h)=>{var b,S;if(!l){q.value=null;return}h&&h!==l&&(l==="esp8266"?N.value.platformCore={platform:l,board:"esp01_1m"}:l==="esp32"?N.value.platformCore={platform:l,variant:"esp32",framework:"esp-idf"}:l==="rp2040"?N.value.platformCore={platform:l,board:"rpipicow"}:l==="bk72xx"?N.value.platformCore={platform:l,board:"generic-bk7231n-qfn32-tuya"}:l==="rtl87xx"?N.value.platformCore={platform:l,board:"generic-rtl8710bn-2mb-788k"}:l==="ln882x"?N.value.platformCore={platform:l,board:"generic-ln882hki"}:l==="nrf52"?N.value.platformCore={platform:l,board:"adafruit_feather_nrf52840",dcdc:!0}:l==="host"?N.value.platformCore={platform:l,mac_address:"06:35:69:ab:f6:79"}:N.value.platformCore={platform:l});try{q.value=await Wn(`general/platform/${l}.json`)}catch(V){console.error("Platform schema load failed",V),q.value=null}if((S=(b=q.value)==null?void 0:b.fields)!=null&&S.length){const V=new Set(["platform",...q.value.fields.map(A=>A.key)]);l==="esp32"&&(V.add("framework"),V.add("framework_config"),V.add("advanced"),V.add("components")),Object.keys(N.value.platformCore||{}).forEach(A=>{V.has(A)||delete N.value.platformCore[A]})}l==="esp8266"&&((!N.value.platformCore||typeof N.value.platformCore!="object")&&(N.value.platformCore={platform:l,board:"esp01_1m"}),N.value.platformCore.board||(N.value.platformCore.board="esp01_1m")),l==="esp32"&&((!N.value.platformCore||typeof N.value.platformCore!="object")&&(N.value.platformCore={platform:l,variant:"esp32",framework:"esp-idf"}),N.value.platformCore.variant||(N.value.platformCore.variant="esp32"),N.value.platformCore.framework||(N.value.platformCore.framework="esp-idf"),h==="esp8266"&&N.value.platformCore.board==="esp01_1m"&&delete N.value.platformCore.board),l==="rp2040"&&((!N.value.platformCore||typeof N.value.platformCore!="object")&&(N.value.platformCore={platform:l,board:"rpipicow"}),N.value.platformCore.board||(N.value.platformCore.board="rpipicow")),l==="bk72xx"&&((!N.value.platformCore||typeof N.value.platformCore!="object")&&(N.value.platformCore={platform:l,board:"generic-bk7231n-qfn32-tuya"}),N.value.platformCore.board||(N.value.platformCore.board="generic-bk7231n-qfn32-tuya")),l==="rtl87xx"&&((!N.value.platformCore||typeof N.value.platformCore!="object")&&(N.value.platformCore={platform:l,board:"generic-rtl8710bn-2mb-788k"}),N.value.platformCore.board||(N.value.platformCore.board="generic-rtl8710bn-2mb-788k")),l==="ln882x"&&((!N.value.platformCore||typeof N.value.platformCore!="object")&&(N.value.platformCore={platform:l,board:"generic-ln882hki"}),N.value.platformCore.board||(N.value.platformCore.board="generic-ln882hki")),l==="nrf52"&&((!N.value.platformCore||typeof N.value.platformCore!="object")&&(N.value.platformCore={platform:l,board:"adafruit_feather_nrf52840",dcdc:!0}),N.value.platformCore.board||(N.value.platformCore.board="adafruit_feather_nrf52840"),N.value.platformCore.dcdc===void 0&&(N.value.platformCore.dcdc=!0)),l==="host"&&((!N.value.platformCore||typeof N.value.platformCore!="object")&&(N.value.platformCore={platform:l,mac_address:"06:35:69:ab:f6:79"}),N.value.platformCore.mac_address||(N.value.platformCore.mac_address="06:35:69:ab:f6:79"))}),ot(()=>{var l;return(l=Yt.value)==null?void 0:l.transport},async(l,h)=>{if(!l){p.value=null;return}try{p.value=await Wn(`general/network/${l}.json`)}catch(b){p.value=null,console.error("Network schema load failed",b)}}),ot(()=>{var l,h;return(h=(l=Yt.value)==null?void 0:l.ap)==null?void 0:h.enabled},l=>{l===!1&&(N.value.networkCore.ap={enabled:!1})}),ot(()=>{var l,h;return(h=(l=Yt.value)==null?void 0:l.web_server)==null?void 0:h.enabled},l=>{l===!1&&(N.value.networkCore.web_server={enabled:!1})}),ot(()=>{var l,h;return(h=(l=Yt.value)==null?void 0:l.ota)==null?void 0:h.enabled},l=>{var h;if(l===!1){const b=((h=N.value.networkCore)==null?void 0:h.ota)||{};b.use_password=!1,N.value.networkCore.ota=b}}),ot(()=>{var l,h;return[(l=Yt.value)==null?void 0:l.transport,(h=Yt.value)==null?void 0:h.type]},([l,h],[b,S])=>{if(l!=="ethernet"||!h||h===S)return;const A=new Set(["W5500","DM9051"]).has(h),D=N.value.networkCore;if(!D||typeof D!="object")return;const G=ie=>{D[ie]!==void 0&&delete D[ie]};if(A){G("mdc_pin"),G("mdio_pin"),G("power_pin"),D.clk&&typeof D.clk=="object"&&(delete D.clk.pin,Object.keys(D.clk).length||delete D.clk);return}G("cs_pin"),G("interrupt_pin"),G("reset_pin"),z.value.has("spi")||N.value.bussesCore&&typeof N.value.bussesCore=="object"&&N.value.bussesCore.spi&&typeof N.value.bussesCore.spi=="object"&&(N.value.bussesCore.spi={})}),ot(()=>t.value,l=>{var h,b,S;l==="Protocols"&&!ro.value&&(ro.value=((h=_o[0])==null?void 0:h.key)||""),l==="Busses"&&!Xn.value&&(Xn.value=((b=cn[0])==null?void 0:b.key)||""),l==="System"&&(gn.value||(gn.value=((S=Nt[0])==null?void 0:S.key)||""))}),ot(()=>pe.value,l=>{if(!Qr.value)return;(!N.value.bussesCore||typeof N.value.bussesCore!="object")&&(N.value.bussesCore={});const h=new Set(l||[]);cn.forEach(b=>{const S=h.has(b.key);(!N.value.bussesCore[b.key]||typeof N.value.bussesCore[b.key]!="object")&&(N.value.bussesCore[b.key]={});const V=N.value.bussesCore[b.key];if(S&&V.enabled!==!0){V.enabled=!0;return}!S&&V.enabled!==!1&&(V.enabled=!1)})},{immediate:!0}),ot(()=>Xr.value,(l,h)=>{const b=new Set(h||[]);(l||[]).forEach(S=>{var A;if(!S||b.has(S))return;if(ol(S),((A=me.value)==null?void 0:A[S])===void 0){x.add(S);return}La(S)})}),ot(()=>me.value,()=>{x.size&&Array.from(x).forEach(l=>{var b;const h=(b=me.value)==null?void 0:b[l];h!==void 0&&(x.delete(l),h&&La(l))})},{deep:!0}),io(()=>{U&&clearTimeout(U),B&&clearTimeout(B),window.removeEventListener("resize",Ba),window.removeEventListener("app:builder-export",gu),window.removeEventListener("app:builder-compile",Iu),window.removeEventListener("app:builder-install",Tu),window.removeEventListener("app:builder-logs",Ru),Qs(),ei(),za(),kv(),yv(),Cu(),window.dispatchEvent(new CustomEvent("app:builder-compile-state",{detail:{canCompile:!1,canInstall:!1,canLogs:!1,running:!1}}))}),(l,h)=>{var b;return w(),E("div",mI,[mt(xa,{open:te.value,title:"Confirm",message:"Are you sure?","confirm-text":"Yes","cancel-text":"Cancel",onConfirm:Zg,onCancel:qg},null,8,["open"]),mt(xa,{open:de.value,title:"Confirm",message:"Start a new project without saving?","confirm-text":"Yes","cancel-text":"Cancel",onConfirm:Gg,onCancel:h[0]||(h[0]=S=>de.value=!1)},null,8,["open"]),mt(BE,{open:$t.value,guide:Pi.value,"fallback-title":ev.value,onClose:h[1]||(h[1]=S=>$t.value=!1)},null,8,["open","guide","fallback-title"]),yt.value&&Na.value.length?(w(),E("div",yI,[h[14]||(h[14]=u("strong",null,"There are errors in the form. Fix them before exporting.",-1)),u("ul",null,[(w(!0),E(Oe,null,Qe(Na.value,(S,V)=>(w(),E("li",{key:`${S.path}-${V}`},ue(S.path)+' = "'+ue(S.message)+'" ',1))),128))])])):re("",!0),le.value?(w(),E("div",bI,[h[15]||(h[15]=u("strong",null,"Project save failed.",-1)),u("div",null,ue(le.value),1)])):Q.value?(w(),E("div",_I,ue(Q.value),1)):re("",!0),He.value?(w(),E("div",{key:3,class:"install-modal-overlay",onClick:h[3]||(h[3]=wt(S=>He.value=!1,["self"]))},[u("div",wI,[u("div",EI,[h[16]||(h[16]=u("h3",null,"Install",-1)),u("button",{type:"button",class:"btn-standard compact",onClick:h[2]||(h[2]=S=>He.value=!1)},"Close")]),u("div",{class:"install-modal-body"},[u("button",{type:"button",class:"btn-standard install-option",onClick:zv}," Via Serial Port "),u("button",{type:"button",class:"btn-standard install-option",onClick:Wv}," Wireless (OTA) "),u("button",{type:"button",class:"btn-standard install-option",onClick:Kv}," Download Binary ")])])])):re("",!0),st.value?(w(),E("div",SI,[u("div",{class:"compile-modal",role:"dialog","aria-modal":"true","aria-label":wu.value},[u("div",kI,[u("div",CI,[u("span",AI,ue(wu.value),1),u("span",{class:rt($v.value)},ue(Av.value),3)]),u("div",$I,[Ce.value?(w(),E("span",II,"Reconnecting...")):re("",!0),u("button",{type:"button",class:"btn-standard compact",onClick:Dv},ue(ut.value?"Pause autoscroll":"Resume autoscroll"),1)])]),u("div",{class:"compile-modal-body",ref_key:"compileConsoleRef",ref:lt},[u("div",null,[(w(!0),E(Oe,null,Qe(kt.value,S=>(w(),E("div",{key:S.id,class:rt(S.className),innerHTML:S.html},null,10,TI))),128))])],512),u("div",RI,[Ze.value?(w(),E("div",FI,ue(Ze.value),1)):re("",!0),u("div",LI,[Cv.value?(w(),E("button",{key:0,type:"button",class:"btn-standard",onClick:Hv}," Download ")):re("",!0),u("button",{type:"button",class:"btn-standard",disabled:!bu.value,onClick:jv}," Cancel ",8,OI),u("button",{type:"button",class:"btn-standard secondary",disabled:!_u.value,onClick:Nv}," Close ",8,MI)])])],8,xI)])):re("",!0),u("div",PI,[u("aside",NI,[u("div",DI,[u("div",{class:"sidebar-project-bar",ref_key:"projectMenuRef",ref:je},[u("button",{type:"button",class:"secondary btn-standard project-menu-button",onClick:zg}," Project "),u("span",jI,ue($e.value),1),et.value?(w(),E("div",BI,[u("button",{type:"button",class:"btn-standard",onClick:Wg}," New "),u("button",{type:"button",class:"btn-standard",onClick:h[4]||(h[4]=S=>et.value=!1)}," Open "),u("button",{type:"button",class:"btn-standard",disabled:De.value,onClick:Fu},ue(De.value?"Saving...":"Save"),9,UI),u("button",{type:"button",class:"btn-standard",onClick:h[5]||(h[5]=S=>et.value=!1)}," Save as "),u("button",{type:"button",class:"btn-standard",onClick:h[6]||(h[6]=S=>et.value=!1)}," Settings ")])):re("",!0)],512)]),u("div",VI,[u("div",HI,[h[19]||(h[19]=u("div",{class:"sidebar-panel__header"},[u("h4",null,"Components")],-1)),u("div",zI,[u("div",WI,[u("div",GI,[(w(),E(Oe,null,Qe(n,S=>u("button",{key:`tab-${S}`,class:rt(["component-chip",{active:t.value===S,"component-chip--pulse":S==="Busses"&&I.value}]),onClick:V=>t.value=S},[u("span",null,ue(S),1)],10,KI)),64)),h[18]||(h[18]=u("div",{class:"component-separator-line"},null,-1)),u("div",{class:"component-separator"},[u("div",{class:"component-separator__row"},[h[17]||(h[17]=u("span",null,"User components",-1)),u("button",{class:"secondary compact btn-add sidebar-components-add",type:"button","aria-label":"Add component",onClick:su}," Add ")])]),(w(!0),E(Oe,null,Qe(N.value.components,(S,V)=>(w(),E("button",{key:`${Ne(S)||"component"}-${V}`,class:rt(["component-chip",{active:H.value===V&&t.value==="Components"}]),type:"button",onClick:A=>Hg(V)},[u("span",null,ue(ct(Ne(S))),1)],10,ZI))),128))])])])])])]),u("div",qI,[u("section",YI,[u("div",XI,[u("div",JI,[To(u("select",{id:"viewSelect",class:"config-title-select","onUpdate:modelValue":h[7]||(h[7]=S=>ou.value=S),onChange:au},[...h[20]||(h[20]=[u("option",{value:"single"},"Single YAML Preview",-1),u("option",{value:"tabs"},"Tabbed YAML Preview",-1)])],544),[[_d,ou.value]])]),u("div",{class:rt(["preview-shell",{split:o.value}])},[o.value?(w(),E("div",QI,[u("button",{class:"preview-scroll",type:"button","aria-label":"Scroll tabs left",disabled:!fu.value,onClick:h[8]||(h[8]=S=>iu(-1))},[...h[21]||(h[21]=[u("span",{class:"preview-scroll-icon"},"",-1)])],8,eT),u("div",{class:"preview-tab-list",ref_key:"previewTabList",ref:i},[(w(!0),E(Oe,null,Qe(al.value,S=>(w(),E("button",{key:S.key,class:rt(["preview-tab-button",{active:s.value===S.key}]),type:"button",onClick:V=>s.value=S.key},ue(S.label),11,tT))),128))],512),u("button",{class:"preview-scroll",type:"button","aria-label":"Scroll tabs right",disabled:!hu.value,onClick:h[9]||(h[9]=S=>iu(1))},[...h[22]||(h[22]=[u("span",{class:"preview-scroll-icon"},"",-1)])],8,nT)])):re("",!0),o.value?(w(),E("div",oT,[(w(!0),E(Oe,null,Qe(Jn.value,S=>(w(),E("button",{key:S.key,ref_for:!0,ref_key:"previewTabMeasureButtons",ref:a,class:"preview-tab-button",type:"button"},ue(S.label),1))),128))])):re("",!0),u("div",sT,[u("div",iT,[u("button",{type:"button",class:rt(["preview-copy",{"preview-copy--shift":m.value}]),onClick:hv},[h[23]||(h[23]=u("img",{src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/content-copy.svg",alt:"Copy code"},null,-1)),u("span",null,ue(fv.value),1)],2),Mg.value?(w(),E("div",aT,[u("span",rT,[h[24]||(h[24]=wi(" # Interval section live in the Automation tab - ",-1)),u("a",{href:"#",class:"preview-callout-link",onClick:h[10]||(h[10]=wt(S=>uv("automation"),["prevent"]))}," LINK ")])])):re("",!0),u("div",{class:"yaml-scroll-inner",ref_key:"previewScrollInner",ref:v},[u("pre",null,[u("code",{class:"hljs",innerHTML:pv.value},null,8,lT)])],512)])])],2)]),u("div",cT,[u("div",uT,[To(u("select",{id:"modeSelect",class:"config-title-select","onUpdate:modelValue":h[11]||(h[11]=S=>Ge.value=S),onChange:au},[...h[25]||(h[25]=[u("option",{value:"Simple"},"Simple configuration",-1),u("option",{value:"Normal"},"Normal configuration",-1),u("option",{value:"Advanced"},"Advanced configuration",-1)])],544),[[_d,Ge.value]])]),u("div",dT,[t.value==="Core"?(w(),E("div",fT,[u("div",hT,[u("div",pT,[h[26]||(h[26]=u("h2",null,"Core",-1)),Ee.value?(w(),E("a",{key:0,class:"filter-help",href:Ee.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,gT)):re("",!0)])]),u("div",vT,[mt(zn,{"component-id":Vf,"component-config":fn.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":Vf,"global-store":Ut.value,onUpdate:im},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"]),mt(zn,{"component-id":Hf,"component-config":qt.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":Hf,"global-store":Ut.value,onUpdate:am},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"])])])):re("",!0),t.value==="Platform"?(w(),E("div",mT,[u("div",yT,[u("div",bT,[h[27]||(h[27]=u("h2",null,"Platform",-1)),Ee.value?(w(),E("a",{key:0,class:"filter-help",href:Ee.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,_T)):re("",!0)])]),u("div",wT,[mt(zn,{"component-id":zf,"component-config":ln.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":zf,"global-store":Ut.value,onUpdate:Lu},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"]),Ri.value?(w(),Mn(zn,{key:0,"component-id":Ri.value,"component-config":ln.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":Ri.value,"global-store":Ut.value,onUpdate:Lu},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):re("",!0)])])):re("",!0),t.value==="Network"?(w(),E("div",ET,[u("div",ST,[u("div",xT,[h[28]||(h[28]=u("h2",null,"Network",-1)),Ee.value?(w(),E("a",{key:0,class:"filter-help",href:Ee.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,kT)):re("",!0)])]),u("div",CT,[mt(zn,{"component-id":ri,"component-config":Yt.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":ri,"field-filter":["transport"],"global-store":Ut.value,onUpdate:Wa},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"]),Fi.value?(w(),Mn(zn,{key:0,"component-id":Fi.value,"component-config":Yt.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":Fi.value,"global-store":Ut.value,onUpdate:Wa},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):re("",!0),mt(zn,{"component-id":ri,"component-config":Yt.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":ri,"field-filter":["ota"],"global-store":Ut.value,onUpdate:Wa},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"]),mt(zn,{"component-id":ri,"component-config":Yt.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":ri,"field-filter":["web_server"],"global-store":Ut.value,onUpdate:Wa},null,8,["component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","global-store"])])])):re("",!0),t.value==="Protocols"?(w(),E("div",AT,[u("div",$T,[u("div",IT,[h[29]||(h[29]=u("h2",null,"Protocols",-1)),Ee.value?(w(),E("a",{key:0,class:"filter-help",href:Ee.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,TT)):re("",!0)])]),u("div",RT,[u("div",FT,[(w(!0),E(Oe,null,Qe(qr.value,S=>(w(),E("button",{key:S.key,class:rt(["btn-standard",{active:ro.value===S.key}]),onClick:V=>ro.value=S.key},ue(S.label),11,LT))),128))]),Oi.value?(w(),Mn(zn,{key:0,"component-id":Oi.value,"component-config":Yr.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":Oi.value,"global-store":Ut.value,onUpdate:lm},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):re("",!0)])])):re("",!0),t.value==="Busses"?(w(),E("div",OT,[u("div",MT,[u("div",PT,[h[30]||(h[30]=u("h2",null,"Busses",-1)),Ee.value?(w(),E("a",{key:0,class:"filter-help",href:Ee.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,NT)):re("",!0)])]),u("div",DT,[h[31]||(h[31]=u("div",{class:"notice notice--warning"}," Required interfaces are enabled automatically when you add a component that needs them, so you do not have to enable them right away. You still need to configure them manually. ",-1)),u("div",jT,[(w(!0),E(Oe,null,Qe(Ue.value,S=>(w(),E("button",{key:S.key,class:rt(["btn-standard",{active:Xn.value===S.key}]),onClick:V=>Xn.value=S.key},ue(S.label),11,BT))),128))]),Le.value?(w(),Mn(zn,{key:0,"component-id":Le.value,"component-config":gt.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":Le.value,"global-store":Ut.value,onUpdate:rm},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):re("",!0)])])):re("",!0),t.value==="System"?(w(),E("div",UT,[u("div",VT,[u("div",HT,[h[32]||(h[32]=u("h2",null,"System",-1)),Ee.value?(w(),E("a",{key:0,class:"filter-help",href:Ee.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,zT)):re("",!0)])]),u("div",WT,[u("div",GT,[(w(!0),E(Oe,null,Qe(Qc.value,S=>(w(),E("button",{key:S.key,class:rt(["btn-standard",{active:gn.value===S.key}]),onClick:V=>gn.value=S.key},ue(S.label),11,KT))),128))]),Mi.value?(w(),Mn(zn,{key:0,"component-id":Mi.value,"component-config":Tg.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":Mi.value,"global-store":Ut.value,onUpdate:cm},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):re("",!0)])])):re("",!0),t.value==="Automation"?(w(),E("div",ZT,[u("div",qT,[u("div",YT,[h[33]||(h[33]=u("h2",null,"Automation",-1)),Ee.value?(w(),E("a",{key:0,class:"filter-help",href:Ee.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,XT)):re("",!0)])]),u("div",JT,[u("div",QT,[(w(!0),E(Oe,null,Qe(Rg.value,S=>(w(),E("button",{key:S.key,type:"button",class:rt(["btn-standard",{active:Nn.value===S.key}]),onClick:V=>Nn.value=S.key},ue(S.label),11,eR))),128))]),el.value?(w(),Mn(zn,{key:0,"component-id":el.value,"component-config":Lg.value,"root-value":N.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":el.value,"global-store":Ut.value,onUpdate:um},null,8,["component-id","component-config","root-value","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])):re("",!0),(Ge.value==="Normal"||Ge.value==="Advanced")&&((b=Oa.value[Nn.value])!=null&&b.length)?(w(),E("div",tR,[(w(!0),E(Oe,null,Qe(Oa.value[Nn.value],(S,V)=>(w(),E("div",{key:`generated-${Nn.value}-${V}`,class:"schema-list list-normal read-only-box"},[h[34]||(h[34]=u("div",{class:"schema-list-header"},"Auto-generated (read-only)",-1)),u("div",nR,[(w(!0),E(Oe,null,Qe(Ng(S),(A,D)=>(w(),E("div",{key:`generated-line-${V}-${D}`,class:"note"},ue(A),1))),128))])]))),128))])):re("",!0)])])):re("",!0),t.value==="Components"?(w(),E("div",oR,[u("div",sR,[u("div",iR,[u("h2",null,ue(J.value),1),Ee.value?(w(),E("a",{key:0,class:"filter-help",href:Ee.value,target:"_blank",rel:"noopener noreferrer","aria-label":"Documentation"}," ? ",8,aR)):re("",!0)]),M.value?re("",!0):(w(),E("div",rR,[H.value!==null?(w(),E("button",{key:0,type:"button",class:"secondary compact btn-standard",onClick:h[12]||(h[12]=S=>Kg(H.value))}," Remove ")):re("",!0)]))]),u("div",{class:rt(["module-card__body",{"module-card__body--picker":M.value}])},[M.value?(w(),E("div",lR,[u("div",cR,[To(u("input",{id:"componentsSearch","onUpdate:modelValue":h[13]||(h[13]=S=>g.value=S),placeholder:"Search components"},null,512),[[Ss,g.value]]),Me.value?(w(),E("div",uR," components_list.json not found ")):re("",!0),u("div",dR,[(w(!0),E(Oe,null,Qe(Yg.value,(S,V)=>(w(),E("details",{key:`${S.slug}-${V}`,class:"components-category",open:!!g.value},[u("summary",null,ue(S.title),1),S.items.length?(w(),E("div",hR,[(w(!0),E(Oe,null,Qe(S.items,(A,D)=>(w(),E("button",{key:`${A.id}-${S.slug}-${D}`,type:"button",class:rt(["component-item",{selected:K.value.has(A.id)}]),onClick:G=>lu(A)},[u("span",null,ue(A.name),1),u("span",gR,ue(A.id),1)],10,pR))),128))])):re("",!0),(w(!0),E(Oe,null,Qe(S.subcategories,(A,D)=>(w(),E("div",{key:`${A.slug}-${D}`,class:"components-subcategory"},[u("h3",null,ue(A.title),1),u("div",vR,[(w(!0),E(Oe,null,Qe(A.items,(G,ie)=>(w(),E("button",{key:`${G.id}-${A.slug}-${ie}`,class:rt(["component-item",{selected:K.value.has(G.id)}]),type:"button",onClick:ee=>lu(G)},[u("span",null,ue(G.name),1),u("span",yR,ue(G.id),1)],10,mR))),128))])]))),128))],8,fR))),128))])])])):(w(),E("div",bR,[Ra.value?(w(),E("div",_R,[wi(" Make sure "+ue(Ra.value)+" is configured correctly. ",1),u("a",{href:"#",class:"preview-callout-link",onClick:wt(Xs,["prevent"])}," LINK ")])):re("",!0),mt(zn,{"component-id":It.value,"component-config":Bt.value,"custom-config":sn.value,"mode-level":Ge.value,"id-registry":In.value,"name-registry":Tn.value,"id-index":_n.value,"gpio-options":Dn.value,"gpio-usage":Bn.value,"gpio-title":jn.value,"context-component-id":It.value,"global-store":Ut.value,onUpdate:sm,onUpdateCustom:dm},null,8,["component-id","component-config","custom-config","mode-level","id-registry","name-registry","id-index","gpio-options","gpio-usage","gpio-title","context-component-id","global-store"])]))],2)])):re("",!0)])])])])])])}}},CR={class:"dashboard-sidebar"},AR={class:"folder-tree-panel"},$R=["onClick","onDragover","onDragenter","onDragleave","onDrop"],IR={class:"folder-row-label"},TR=["onClick","onKeydown"],RR=["src"],FR={key:1,class:"folder-inline-toggle-placeholder"},LR={class:"folder-row-name"},OR=["onClick","onKeydown"],MR={key:0,class:"folder-menu"},PR=["onClick"],NR=["onClick"],DR=["onClick"],jR={class:"project-tree-label"},BR=["onKeydown"],UR={class:"dashboard-content"},VR={class:"dashboard-toolbar-wrap"},HR={class:"dashboard-toolbar"},zR=["disabled"],WR={class:"toolbar-breadcrumb",role:"navigation","aria-label":"Folder path"},GR=["onClick"],KR={key:0,class:"breadcrumb-sep"},ZR={class:"dashboard-search",for:"dashboardSearch"},qR={key:0,class:"dashboard-state"},YR={key:1,class:"dashboard-state dashboard-state--error"},XR={key:2,class:"dashboard-state dashboard-state--warning"},JR={key:3,class:"entries-pane"},QR={key:0,class:"entries-section"},eF={class:"folders-grid"},tF=["onDragover","onDragenter","onDragleave","onDrop","onDblclick"],nF={class:"folder-tile-top"},oF={class:"project-icon project-icon--folder"},sF=["src"],iF={class:"folder-tile-hint"},aF={key:1,class:"entries-section"},rF={class:"entries-title"},lF={class:"projects-grid"},cF=["onClick","onDragstart"],uF={class:"project-tile-top"},dF={class:"project-title-wrap"},fF={class:"project-icon"},hF=["src"],pF={class:"project-meta"},gF={key:2,class:"project-empty"},At="root",ql="Projects",vF="vebProjectsUpdatedSignal",mF="ecd-projects",yF=5e3,bF=210,_F=520,Kf="https://cdn.jsdelivr.net/npm/@mdi/svg/svg/memory.svg",Zf="https://cdn.jsdelivr.net/npm/@mdi/svg/svg/folder-outline.svg",wF="https://cdn.jsdelivr.net/npm/@mdi/svg/svg/chevron-right.svg",EF="https://cdn.jsdelivr.net/npm/@mdi/svg/svg/chevron-down.svg",SF="https://cdn.jsdelivr.net/npm/@mdi/svg/svg/arrow-up.svg",xF={__name:"DashboardView",setup(e){const n=Y(!1),t=Y(""),o=Y(""),s=Y(""),i=Y([]),a=Y([{id:At,name:ql,parentId:null}]),r=Y([]),d=Y(At),c=Y(""),f=Y(null),v=Y(""),m=Y(""),g=Y(new Set([At])),I=Y(0),U=Y(!0),x=Y(null),R=Y(250),B=Y(!1),H=Y(""),M=Y(""),te=Y(null),we=Y(!1),de=Y(""),me=Y(new Set);let Ae=null,xe=null,Me=null;const Ke=Y("all"),et=new URL("./",window.location.href).toString(),je=!1,De="./runtime/esp_projects/projects.json",Q=P=>new URL(P,et).toString(),le=Q("projects/list"),Se=Q("projects/load?name=projects.json"),Xe=Q("projects/save"),st=async(P,K={})=>await fetch(P,{...K,credentials:"include"}),lt=P=>{const K=typeof(P==null?void 0:P.yaml)=="string"?P.yaml.trim():"";if(K.toLowerCase().endsWith(".yaml"))return`${K.slice(0,-5)}.json`;const J=typeof(P==null?void 0:P.name)=="string"?P.name.trim():"";return J?`${J}.json`:""},ut=async()=>{try{const P=await st(Q("api/devices/list?refresh=1"));if(!P.ok)return;const K=await P.json(),se=(Array.isArray(K==null?void 0:K.devices)?K.devices:[]).filter(Ee=>String((Ee==null?void 0:Ee.status)||"").toLowerCase()==="online").map(lt).map(Ze).filter(Boolean);me.value=new Set(se)}catch{}},Et=()=>{Ae||(Ae=setInterval(()=>{ut()},yF))},Ye=()=>{Ae&&(clearInterval(Ae),Ae=null)},Ze=P=>{if(typeof P!="string")return"";const K=P.trim();return!K||K.toLowerCase()==="projects.json"||!K.toLowerCase().endsWith(".json")?"":K},kt=P=>{if(typeof P!="string")return"";const K=P.trim();return K?K.slice(0,40):""},ae=async()=>{try{const P=await fetch(De,{credentials:"include"});return P.ok?await P.json():null}catch{return null}},ke=async()=>{try{const P=await st(le);if(!P.ok)throw new Error(`HTTP ${P.status}`);const K=await P.json(),se=(Array.isArray(K==null?void 0:K.projects)?K.projects:[]).map(Ze).filter(Boolean);return U.value=!0,Array.from(new Set(se)).sort((Ee,qe)=>Ee.localeCompare(qe))}catch{const P=await ae(),K=Array.isArray(P==null?void 0:P.projects)?P.projects:[],J=Array.isArray(P==null?void 0:P.projectPlacement)?P.projectPlacement:[],se=K.map(Ee=>typeof Ee=="string"?Ze(Ee):Ee&&typeof Ee=="object"?Ze(Ee.file||Ee.name||""):"").concat(J.map(Ee=>Ze((Ee==null?void 0:Ee.name)||""))).filter(Boolean);return U.value=!1,Array.from(new Set(se)).sort((Ee,qe)=>Ee.localeCompare(qe))}},Ce=async()=>{try{const P=await st(Se);if(P.status===404)return null;if(!P.ok)throw new Error(`HTTP ${P.status}`);const K=await P.json();return(K==null?void 0:K.status)==="ok"&&(K!=null&&K.data)&&typeof K.data=="object"?(U.value=!0,K.data):null}catch{return await ae()}},He=()=>({version:1,updatedAt:new Date().toISOString(),folders:[{id:At,name:ql,parentId:null}],projectPlacement:[]}),tt=P=>{const K=[],J=new Set;K.push({id:At,name:ql,parentId:null}),J.add(At),Array.isArray(P)&&P.forEach(qe=>{if(!qe||typeof qe!="object")return;const It=typeof qe.id=="string"?qe.id.trim():"";if(!It||It===At||J.has(It))return;const Bt=kt(qe.name);if(!Bt)return;const sn=typeof qe.parentId=="string"&&qe.parentId.trim()||At;K.push({id:It,name:Bt,parentId:sn}),J.add(It)});const se=new Set(K.map(qe=>qe.id));K.forEach(qe=>{qe.id!==At&&(!se.has(qe.parentId)||qe.parentId===qe.id)&&(qe.parentId=At)});const Ee=new Map(K.map(qe=>[qe.id,qe]));return K.forEach(qe=>{if(qe.id===At)return;const It=new Set([qe.id]);let Bt=qe.parentId;for(;Bt&&Bt!==At;){if(It.has(Bt)){qe.parentId=At;break}It.add(Bt);const sn=Ee.get(Bt);if(!sn){qe.parentId=At;break}Bt=sn.parentId}}),K},$=(P,K,J)=>{const se=new Map;return Array.isArray(P)&&P.forEach(Ee=>{if(!Ee||typeof Ee!="object")return;const qe=Ze(Ee.name||"");if(!qe||se.has(qe))return;const It=typeof Ee.folderId=="string"&&K.has(Ee.folderId)?Ee.folderId:At;se.set(qe,It)}),J.forEach(Ee=>{se.has(Ee)||se.set(Ee,At)}),Array.from(se.entries()).filter(([Ee])=>J.includes(Ee)).map(([Ee,qe])=>({name:Ee,folderId:qe}))},O=(P,K)=>{const J=Array.isArray(P==null?void 0:P.projects)?P.projects:[],se=Array.isArray(P==null?void 0:P.projectPlacement)?P.projectPlacement:[],Ee=J.map(qt=>typeof qt=="string"?Ze(qt):qt&&typeof qt=="object"?Ze(qt.file||qt.name||""):"").filter(Boolean),qe=se.map(qt=>Ze((qt==null?void 0:qt.name)||"")).filter(Boolean),It=Array.from(new Set([...K,...Ee,...qe])).sort((qt,ln)=>qt.localeCompare(ln)),Bt=tt(P==null?void 0:P.folders),sn=new Set(Bt.map(qt=>qt.id)),fn=$(P==null?void 0:P.projectPlacement,sn,It);return{version:1,updatedAt:new Date().toISOString(),folders:Bt,projectPlacement:fn,projectFiles:It}},W=async()=>{if(!U.value)return;const P={version:1,updatedAt:new Date().toISOString(),folders:a.value,projectPlacement:r.value};try{const K=JSON.stringify(je?P:{name:"projects.json",data:P}),J=await st(Xe,{method:"POST",headers:{"Content-Type":"application/json"},body:K});if(!J.ok)throw new Error(`HTTP ${J.status}`);o.value=""}catch(K){o.value=`Cannot save projects.json: ${K.message}`}},y=P=>{i.value=P.projectFiles,a.value=P.folders,r.value=P.projectPlacement;const K=P.folders.reduce((se,Ee)=>{const qe=String(Ee.id).match(/(\d+)$/);return qe?Math.max(se,Number.parseInt(qe[1],10)||0):se},0);I.value=K,new Set(P.folders.map(se=>se.id)).has(d.value)||(d.value=At),c.value&&!P.projectFiles.includes(c.value)&&(c.value="")},k=async()=>{if(Me){await Me;return}Me=(async()=>{try{const[P,K]=await Promise.all([ke(),Ce()]),J=O(K||He(),P);y(J)}catch{}})();try{await Me}finally{Me=null}},_=()=>{k()},T=P=>{if(!(P.key!==vF||!P.newValue)){try{const K=JSON.parse(P.newValue);if((K==null?void 0:K.type)!=="projects-updated")return}catch{return}k()}},Z=()=>{if("BroadcastChannel"in window)try{xe=new BroadcastChannel(mF),xe.onmessage=P=>{var K;((K=P==null?void 0:P.data)==null?void 0:K.type)==="projects-updated"&&k()}}catch{xe=null}},oe=()=>{xe&&(xe.close(),xe=null)},X=async()=>{n.value=!0,t.value="";try{const[P,K]=await Promise.all([ke(),Ce()]),J=O(K||He(),P);y(J),U.value&&await W()}catch(P){t.value=`Unable to load projects: ${P.message}`}finally{n.value=!1}},ge=F(()=>{const P=new Map;return a.value.forEach(K=>{const J=K.parentId||At;P.has(J)||P.set(J,[]),K.id!==At&&P.get(J).push(K.id)}),P}),ce=F(()=>new Map(a.value.map(P=>[P.id,P]))),ve=F(()=>{const P=new Map;return a.value.forEach(K=>{P.set(K.id,[])}),i.value.forEach(K=>{const J=fe.value.get(K)||At,se=ce.value.has(J)?J:At;P.has(se)||P.set(se,[]),P.get(se).push(K)}),P.forEach(K=>{K.sort((J,se)=>J.localeCompare(se))}),P}),Pe=P=>{const K=[P],J=[P];for(;J.length;){const se=J.pop();(ge.value.get(se)||[]).forEach(qe=>{K.push(qe),J.push(qe)})}return K},ne=F(()=>{const P=[],K=(J,se)=>{const Ee=ce.value.get(J);if(!Ee)return;const qe=g.value.has(J),It=ve.value.get(J)||[],Bt=ge.value.get(J)||[],sn=Bt.length>0||It.length>0||H.value===J;P.push({kind:"folder",id:Ee.id,name:Ee.name,depth:se,isRoot:Ee.id===At,isExpanded:qe,hasChildren:sn}),qe&&(Bt.forEach(fn=>K(fn,se+1)),H.value===J&&P.push({kind:"draft",id:`draft:${J}`,depth:se+1}),It.forEach(fn=>{P.push({kind:"project",id:`project:${fn}`,projectName:fn,name:fn.replace(/\.json$/i,""),depth:se+1})}))};return K(At,0),P}),fe=F(()=>{const P=new Map;return r.value.forEach(K=>{P.set(K.name,K.folderId||At)}),P}),_e=P=>fe.value.get(P)||At,Be=F(()=>{const P=d.value,K=s.value.trim().toLowerCase();if(Ke.value!=="folder")return[];const se=[...ge.value.get(P)||[]].sort((Ee,qe)=>{var sn,fn;const It=((sn=ce.value.get(Ee))==null?void 0:sn.name)||"",Bt=((fn=ce.value.get(qe))==null?void 0:fn.name)||"";return It.localeCompare(Bt)}).map(Ee=>{const qe=ce.value.get(Ee);if(!qe)return null;const It=ge.value.get(Ee)||[],Bt=i.value.filter(sn=>_e(sn)===Ee);return{kind:"folder",key:`folder:${qe.id}`,id:qe.id,title:qe.name,icon:Zf,folderCount:It.length,projectCount:Bt.length}}).filter(Boolean);return K?se.filter(Ee=>Ee.title.toLowerCase().includes(K)):se}),Je=F(()=>{const P=d.value,K=s.value.trim().toLowerCase(),J=i.value.filter(se=>Ke.value==="all"?!0:_e(se)===P).sort((se,Ee)=>se.localeCompare(Ee)).map(se=>({kind:"project",key:`project:${se}`,name:se,title:se.replace(/\.json$/i,"")||"Untitled project",updated:"Yesterday",size:"235 KB",members:3,icon:Kf,online:me.value.has(se)}));return K?J.filter(se=>se.title.toLowerCase().includes(K)||String(se.name||"").toLowerCase().includes(K)):J}),Ge=P=>{it(P);const K=new Set(g.value);K.add(P),g.value=K},it=P=>{d.value=P,c.value="",Ke.value="folder"},yt=P=>c.value?!1:P===d.value,$t=P=>{const K=_e(P);c.value=P,d.value=K,Ke.value="folder"},pt=F(()=>{const P=[];let K=d.value;const J=a.value.length+2;let se=0;for(;K&&se<J;){const Ee=ce.value.get(K);if(!Ee||(P.push({id:Ee.id,name:Ee.name}),!Ee.parentId))break;K=Ee.parentId,se+=1}return P.reverse()}),_t=()=>{const P=ce.value.get(d.value);!P||!P.parentId||it(P.parentId)},zt=F(()=>d.value===At),Zt=P=>{const K=new Set(g.value);K.has(P)?K.delete(P):K.add(P),g.value=K},q=P=>{f.value=f.value===P?null:P},p=(P,K,J="")=>{const se=K.trim().toLowerCase();return a.value.some(Ee=>Ee.id===J||(Ee.parentId||At)!==P?!1:Ee.name.trim().toLowerCase()===se)},L=async(P,K)=>{I.value+=1;const J=`fld_${I.value}`;a.value=[...a.value,{id:J,name:K,parentId:P}];const se=new Set(g.value);se.add(P),se.add(J),g.value=se,await W()},be=P=>{te.value=P},Ie=async P=>{var J;H.value=P,M.value="",f.value=null;const K=new Set(g.value);K.add(P),g.value=K,await oo(),(J=te.value)==null||J.focus()},ze=()=>{H.value="",M.value=""},C=async()=>{var J,se,Ee;const P=H.value;if(!P)return;const K=kt(M.value||"");if(!K){ze();return}if(p(P,K)){window.alert("Folder with this name already exists in the selected location."),await oo(),(J=te.value)==null||J.focus(),(Ee=(se=te.value)==null?void 0:se.select)==null||Ee.call(se);return}ze(),await L(P,K)},ye=async P=>{if(P===At)return;const K=new Set(Pe(P));a.value=a.value.filter(se=>!K.has(se.id)),r.value=r.value.map(se=>K.has(se.folderId)?{...se,folderId:At}:se);const J=new Set(g.value);K.forEach(se=>J.delete(se)),J.add(At),g.value=J,K.has(d.value)&&(d.value=At),f.value=null,await W()},Fe=P=>{P!==At&&(de.value=P,we.value=!0)},at=()=>{we.value=!1,de.value=""},Ct=async()=>{const P=de.value;at(),P&&await ye(P)},bt=(P,K)=>{const J=r.value.filter(se=>se.name!==P);J.push({name:P,folderId:K}),r.value=J},An=(P,K)=>{m.value=P,K.dataTransfer&&(K.dataTransfer.effectAllowed="move",K.dataTransfer.setData("text/plain",P))},$n=()=>{m.value="",v.value=""},on=P=>{m.value&&(v.value=P)},rn=(P,K)=>{const J=K.currentTarget;if(!(J instanceof Element))return;const se=K.relatedTarget;se instanceof Node&&J.contains(se)||v.value===P&&(v.value="")},j=async P=>{const K=m.value;v.value="",m.value="",K&&(bt(K,P),await W())},he=P=>{const K=P.target;K instanceof Element&&(K.closest(".folder-menu")||K.closest(".folder-menu-toggle")||(f.value=null))},Re=P=>Math.max(bF,Math.min(_F,P)),ct=P=>{if(!B.value)return;const K=x.value;if(!K)return;const J=K.getBoundingClientRect(),se=Re(P.clientX-J.left);R.value=se},$e=()=>{B.value&&(B.value=!1,document.body.classList.remove("is-sidebar-resizing"))},Ne=()=>{B.value=!0,document.body.classList.add("is-sidebar-resizing")};return Yo(()=>{X(),ut(),Et(),Z(),window.addEventListener("app:projects-updated",_),window.addEventListener("storage",T),window.addEventListener("click",he),window.addEventListener("mousemove",ct),window.addEventListener("mouseup",$e)}),io(()=>{oe(),window.removeEventListener("app:projects-updated",_),window.removeEventListener("storage",T),window.removeEventListener("click",he),window.removeEventListener("mousemove",ct),window.removeEventListener("mouseup",$e),Ye(),$e()}),(P,K)=>(w(),E(Oe,null,[mt(xa,{open:we.value,title:"Confirm",message:"Delete this folder and all nested folders?","confirm-text":"Yes","cancel-text":"Cancel",onConfirm:Ct,onCancel:at},null,8,["open"]),u("section",{ref_key:"dashboardViewRef",ref:x,class:"dashboard-view",style:tn({gridTemplateColumns:`${R.value}px 8px minmax(0, 1fr)`})},[u("aside",CR,[K[5]||(K[5]=u("button",{type:"button",class:"btn-standard sidebar-new-device"},"New device",-1)),u("div",AR,[(w(!0),E(Oe,null,Qe(ne.value,J=>(w(),E("div",{key:J.id,class:"folder-row"},[J.kind==="folder"?(w(),E(Oe,{key:0},[u("button",{type:"button",class:rt(["folder-row-button",{active:yt(J.id),"drop-target":v.value===J.id}]),style:tn({paddingLeft:`${10+J.depth*14}px`}),onClick:se=>it(J.id),onDragover:wt(se=>on(J.id),["prevent"]),onDragenter:wt(se=>on(J.id),["prevent"]),onDragleave:se=>rn(J.id,se),onDrop:wt(se=>j(J.id),["prevent"])},[u("span",IR,[J.hasChildren?(w(),E("span",{key:0,class:"folder-inline-toggle",role:"button",tabindex:"0","aria-label":"Toggle folder",onClick:wt(se=>Zt(J.id),["stop"]),onKeydown:[oi(wt(se=>Zt(J.id),["stop","prevent"]),["enter"]),oi(wt(se=>Zt(J.id),["stop","prevent"]),["space"])]},[u("img",{src:J.isExpanded?EF:wF,alt:"","aria-hidden":"true"},null,8,RR)],40,TR)):(w(),E("span",FR)),u("img",{class:"tree-row-icon",src:Zf,alt:"","aria-hidden":"true"}),u("span",LR,ue(J.name),1)]),u("span",{class:"folder-menu-toggle",role:"button",tabindex:"0","aria-label":"Folder menu",onClick:wt(se=>q(J.id),["stop"]),onKeydown:[oi(wt(se=>q(J.id),["stop","prevent"]),["enter"]),oi(wt(se=>q(J.id),["stop","prevent"]),["space"])]}," ... ",40,OR)],46,$R),f.value===J.id?(w(),E("div",MR,[u("button",{type:"button",onClick:wt(se=>Ie(J.id),["stop"])},"Add folder",8,PR),J.isRoot?re("",!0):(w(),E("button",{key:0,type:"button",onClick:wt(se=>Fe(J.id),["stop"])}," Delete folder ",8,NR))])):re("",!0)],64)):J.kind==="project"?(w(),E("button",{key:1,type:"button",class:rt(["project-tree-item",{active:J.projectName===c.value}]),style:tn({paddingLeft:`${10+J.depth*14}px`}),onClick:se=>$t(J.projectName)},[u("img",{class:"tree-row-icon",src:Kf,alt:"","aria-hidden":"true"}),u("span",jR,ue(J.name),1)],14,DR)):(w(),E("div",{key:2,class:"folder-draft-item",style:tn({paddingLeft:`${10+J.depth*14}px`})},[To(u("input",{ref_for:!0,ref:be,"onUpdate:modelValue":K[0]||(K[0]=se=>M.value=se),type:"text",class:"folder-draft-input",placeholder:"New folder",onKeydown:[oi(wt(C,["prevent"]),["enter"]),oi(wt(ze,["prevent"]),["esc"])],onBlur:C},null,40,BR),[[Ss,M.value]])],4))]))),128))])]),u("div",{class:"dashboard-resizer",role:"separator","aria-label":"Resize sidebar","aria-orientation":"vertical",onMousedown:wt(Ne,["prevent"])},null,32),u("section",UR,[u("div",VR,[u("div",HR,[u("button",{type:"button",class:"toolbar-mode-toggle",onClick:K[1]||(K[1]=J=>Ke.value=Ke.value==="folder"?"all":"folder")},ue(Ke.value==="folder"?"All devices":"Folder view"),1),u("button",{type:"button",class:"toolbar-up-button",disabled:zt.value,onClick:_t},[u("img",{src:SF,alt:"","aria-hidden":"true"})],8,zR),u("div",WR,[(w(!0),E(Oe,null,Qe(pt.value,(J,se)=>(w(),E("button",{key:J.id,type:"button",class:"breadcrumb-item",onClick:Ee=>it(J.id)},[u("span",null,ue(J.name),1),se<pt.value.length-1?(w(),E("span",KR,"")):re("",!0)],8,GR))),128))]),u("label",ZR,[K[6]||(K[6]=u("img",{class:"dashboard-search-icon",src:"https://cdn.jsdelivr.net/npm/@mdi/svg/svg/magnify.svg",alt:"","aria-hidden":"true"},null,-1)),To(u("input",{id:"dashboardSearch",type:"search",placeholder:"Search files, folders",autocomplete:"off","onUpdate:modelValue":K[2]||(K[2]=J=>s.value=J)},null,512),[[Ss,s.value]])])])]),n.value?(w(),E("div",qR,"Loading projects...")):t.value?(w(),E("div",YR,ue(t.value),1)):o.value?(w(),E("div",XR,ue(o.value),1)):(w(),E("section",JR,[Ke.value==="folder"&&Be.value.length?(w(),E("section",QR,[K[7]||(K[7]=u("h3",{class:"entries-title"},"Folders",-1)),u("div",eF,[(w(!0),E(Oe,null,Qe(Be.value,J=>(w(),E("article",{key:J.key,class:"folder-tile",onDragover:wt(se=>on(J.id),["prevent"]),onDragenter:wt(se=>on(J.id),["prevent"]),onDragleave:se=>rn(J.id,se),onDrop:wt(se=>j(J.id),["prevent"]),onDblclick:se=>Ge(J.id)},[u("div",nF,[u("span",oF,[u("img",{src:J.icon,alt:"","aria-hidden":"true"},null,8,sF)]),u("h4",null,ue(J.title),1)]),u("p",iF,ue(J.folderCount)+" folders - "+ue(J.projectCount)+" projects",1)],40,tF))),128))])])):re("",!0),Je.value.length?(w(),E("section",aF,[u("h3",rF,ue(Ke.value==="all"?"All devices":"Projects"),1),u("div",lF,[(w(!0),E(Oe,null,Qe(Je.value,J=>(w(),E("article",{key:J.key,class:rt(["project-tile",{"project-tile--active":J.name===c.value,"project-tile--online":J.online}]),draggable:"true",onClick:se=>$t(J.name),onDragstart:se=>An(J.name,se),onDragend:K[4]||(K[4]=se=>$n())},[u("div",uF,[u("div",dF,[u("span",fF,[u("img",{src:J.icon,alt:"","aria-hidden":"true"},null,8,hF)]),u("h4",null,ue(J.title),1)]),u("button",{type:"button",class:"project-more","aria-label":"Project actions",onClick:K[3]||(K[3]=wt(()=>{},["stop"]))},"...")]),u("p",pF,ue(J.updated)+" - "+ue(J.size)+" - "+ue(J.members)+" members",1)],42,cF))),128))])])):re("",!0),Be.value.length===0&&Je.value.length===0?(w(),E("article",gF," No folders or projects match your search. ")):re("",!0)]))])],4)],64))}},kF=bo(xF,[["__scopeId","data-v-d24c9134"]]),CF=B_({history:__("./"),routes:[{path:"/",name:"dashboard",component:kF},{path:"/dashboard",redirect:{name:"dashboard"}},{path:"/builder",name:"builder",component:kR}]});Fb(X_).use(CF).mount("#app");
